{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/images/alipay.jpg","path":"images/alipay.jpg","modified":0,"renderable":0},{"_id":"source/images/brand.jpg","path":"images/brand.jpg","modified":0,"renderable":0},{"_id":"source/images/star-full.svg","path":"images/star-full.svg","modified":0,"renderable":0},{"_id":"source/images/star-half.svg","path":"images/star-half.svg","modified":0,"renderable":0},{"_id":"source/images/wechat.jpg","path":"images/wechat.jpg","modified":0,"renderable":0},{"_id":"source/images/staroff.svg","path":"images/staroff.svg","modified":0,"renderable":0},{"_id":"source/images/wxpub.jpg","path":"images/wxpub.jpg","modified":0,"renderable":0},{"_id":"source/images/avatar.jpg","path":"images/avatar.jpg","modified":0,"renderable":0},{"_id":"themes/indigo/source/css/style.less","path":"css/style.less","modified":0,"renderable":1},{"_id":"themes/indigo/source/img/img-err.png","path":"img/img-err.png","modified":0,"renderable":1},{"_id":"themes/indigo/source/img/cc.png","path":"img/cc.png","modified":0,"renderable":1},{"_id":"themes/indigo/source/img/img-loading.png","path":"img/img-loading.png","modified":0,"renderable":1},{"_id":"themes/indigo/source/js/main.min.js","path":"js/main.min.js","modified":0,"renderable":1},{"_id":"themes/indigo/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/indigo/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"themes/indigo/source/js/search.min.js","path":"js/search.min.js","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.eot","path":"css/fonts/roboto/Roboto-Bold.eot","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.woff","path":"css/fonts/roboto/Roboto-Bold.woff","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.woff2","path":"css/fonts/roboto/Roboto-Bold.woff2","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.eot","path":"css/fonts/roboto/Roboto-Light.eot","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.woff","path":"css/fonts/roboto/Roboto-Light.woff","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.woff2","path":"css/fonts/roboto/Roboto-Light.woff2","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.eot","path":"css/fonts/roboto/Roboto-Medium.eot","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.woff","path":"css/fonts/roboto/Roboto-Medium.woff","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.woff2","path":"css/fonts/roboto/Roboto-Medium.woff2","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.eot","path":"css/fonts/roboto/Roboto-Regular.eot","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.woff","path":"css/fonts/roboto/Roboto-Regular.woff","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.woff2","path":"css/fonts/roboto/Roboto-Regular.woff2","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.eot","path":"css/fonts/roboto/Roboto-Thin.eot","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.woff","path":"css/fonts/roboto/Roboto-Thin.woff","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.woff2","path":"css/fonts/roboto/Roboto-Thin.woff2","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.woff","path":"css/fonts/fontawesome/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.woff2","path":"css/fonts/fontawesome/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.ttf","path":"css/fonts/roboto/Roboto-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.ttf","path":"css/fonts/roboto/Roboto-Light.ttf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.ttf","path":"css/fonts/roboto/Roboto-Medium.ttf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.ttf","path":"css/fonts/roboto/Roboto-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.ttf","path":"css/fonts/roboto/Roboto-Thin.ttf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/FontAwesome.otf","path":"css/fonts/fontawesome/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.eot","path":"css/fonts/fontawesome/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.ttf","path":"css/fonts/fontawesome/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.svg","path":"css/fonts/fontawesome/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/favicon.png","path":"favicon.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/css/gitment.css","path":"css/gitment.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/css/matery.css","path":"css/matery.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/css/my.css","path":"css/my.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/css/my-gitalk.css","path":"css/my-gitalk.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/js/matery.js","path":"js/matery.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/avatar.jpg","path":"medias/avatar.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/logo.png","path":"medias/logo.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/animate/animate.min.css","path":"libs/animate/animate.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/aos/aos.css","path":"libs/aos/aos.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/aos/aos.js","path":"libs/aos/aos.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/aplayer/APlayer.min.css","path":"libs/aplayer/APlayer.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/aplayer/APlayer.min.js","path":"libs/aplayer/APlayer.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/cryptojs/crypto-js.min.js","path":"libs/cryptojs/crypto-js.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/dplayer/DPlayer.min.css","path":"libs/dplayer/DPlayer.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/gitalk/gitalk.css","path":"libs/gitalk/gitalk.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/gitment/gitment-default.css","path":"libs/gitment/gitment-default.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/jqcloud/jqcloud-1.0.4.min.js","path":"libs/jqcloud/jqcloud-1.0.4.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/jqcloud/jqcloud.css","path":"libs/jqcloud/jqcloud.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/masonry/masonry.pkgd.min.js","path":"libs/masonry/masonry.pkgd.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/others/busuanzi.pure.mini.js","path":"libs/others/busuanzi.pure.mini.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/others/clicklove.js","path":"libs/others/clicklove.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/scrollprogress/scrollProgress.min.js","path":"libs/scrollprogress/scrollProgress.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/tocbot/tocbot.css","path":"libs/tocbot/tocbot.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/tocbot/tocbot.min.js","path":"libs/tocbot/tocbot.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/cover.jpg","path":"medias/cover.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/13.jpg","path":"medias/featureimages/13.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/15.jpg","path":"medias/featureimages/15.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/16.jpg","path":"medias/featureimages/16.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/2.jpg","path":"medias/featureimages/2.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/21.jpg","path":"medias/featureimages/21.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/22.jpg","path":"medias/featureimages/22.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/23.jpg","path":"medias/featureimages/23.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/5.jpg","path":"medias/featureimages/5.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/7.jpg","path":"medias/featureimages/7.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/8.jpg","path":"medias/featureimages/8.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/reward/alipay.jpg","path":"medias/reward/alipay.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/reward/wechat.png","path":"medias/reward/wechat.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/dplayer/DPlayer.min.js","path":"libs/dplayer/DPlayer.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/gitment/gitment.js","path":"libs/gitment/gitment.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/jquery/jquery-2.2.0.min.js","path":"libs/jquery/jquery-2.2.0.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/valine/Valine.min.js","path":"libs/valine/Valine.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/0.jpg","path":"medias/banner/0.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/2.jpg","path":"medias/banner/2.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/0.jpg","path":"medias/featureimages/0.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/1.jpg","path":"medias/featureimages/1.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/10.jpg","path":"medias/featureimages/10.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/11.jpg","path":"medias/featureimages/11.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/12.jpg","path":"medias/featureimages/12.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/14.jpg","path":"medias/featureimages/14.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/17.jpg","path":"medias/featureimages/17.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/18.jpg","path":"medias/featureimages/18.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/19.jpg","path":"medias/featureimages/19.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/20.jpg","path":"medias/featureimages/20.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/3.jpg","path":"medias/featureimages/3.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/4.jpg","path":"medias/featureimages/4.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/6.jpg","path":"medias/featureimages/6.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/9.jpg","path":"medias/featureimages/9.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/css/font-awesome.min.css","path":"libs/awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/gitalk/gitalk.min.js","path":"libs/gitalk/gitalk.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/css/lightgallery.min.css","path":"libs/lightGallery/css/lightgallery.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.eot","path":"libs/lightGallery/fonts/lg.eot","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.svg","path":"libs/lightGallery/fonts/lg.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.ttf","path":"libs/lightGallery/fonts/lg.ttf","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.woff","path":"libs/lightGallery/fonts/lg.woff","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/loading.gif","path":"libs/lightGallery/img/loading.gif","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/video-play.png","path":"libs/lightGallery/img/video-play.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/vimeo-play.png","path":"libs/lightGallery/img/vimeo-play.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/youtube-play.png","path":"libs/lightGallery/img/youtube-play.png","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/js/lightgallery-all.min.js","path":"libs/lightGallery/js/lightgallery-all.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/materialize/materialize.min.css","path":"libs/materialize/materialize.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/materialize/materialize.min.js","path":"libs/materialize/materialize.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/css/share.min.css","path":"libs/share/css/share.min.css","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.eot","path":"libs/share/fonts/iconfont.eot","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.svg","path":"libs/share/fonts/iconfont.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.ttf","path":"libs/share/fonts/iconfont.ttf","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.woff","path":"libs/share/fonts/iconfont.woff","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/js/jquery.share.min.js","path":"libs/share/js/jquery.share.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/js/social-share.min.js","path":"libs/share/js/social-share.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/valine/av-min.js","path":"libs/valine/av-min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/1.jpg","path":"medias/banner/1.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/3.jpg","path":"medias/banner/3.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/5.jpg","path":"medias/banner/5.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/6.jpg","path":"medias/banner/6.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.woff","path":"libs/awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.woff2","path":"libs/awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.eot","path":"libs/awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/FontAwesome.otf","path":"libs/awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.ttf","path":"libs/awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/4.jpg","path":"medias/banner/4.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.svg","path":"libs/awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/echarts/echarts.min.js","path":"libs/echarts/echarts.min.js","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/0.jpg","path":"medias/banner/bak/0.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/2.jpg","path":"medias/banner/bak/2.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/1.jpg","path":"medias/banner/bak/1.jpg","modified":0,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/3.jpg","path":"medias/banner/bak/3.jpg","modified":0,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"2c1bf3430c03b1d6fa3217cea984245e7cfe33ff","modified":1538045978604},{"_id":"themes/indigo/.editorconfig","hash":"67a03b88eadd7810f2e01866e73814074ecd3b87","modified":1538045978641},{"_id":"themes/indigo/LICENSE","hash":"9dd0f70bc72c9d575447655526aded395bb93754","modified":1538045978641},{"_id":"themes/indigo/README.md","hash":"cfc7d09fc2ce26003954d647e3bbf98f71574eb7","modified":1538045978642},{"_id":"themes/indigo/_config.yml","hash":"160f151b356271c45682a050108f6286f32ee6c2","modified":1552994609168},{"_id":"themes/indigo/package.json","hash":"3ad9b9ccb1ddaad3136f179a7ebff7d7b1c193f7","modified":1538045978669},{"_id":"source/about/index.md","hash":"2cea4ad5a1efc40ea87a17ff1d7ffc749a481c6c","modified":1558527165785},{"_id":"source/_posts/helleword.md","hash":"f1e1d275446f193441776b0643e05e17ce36e5b6","modified":1540633681209},{"_id":"source/categories/index.md","hash":"194fb6e088a5560ee865887cc233d85c5baaa9fb","modified":1558400753172},{"_id":"source/images/alipay.jpg","hash":"cdb9f9d7255bed621a45066195f22ee4207ca6bf","modified":1538045978632},{"_id":"source/images/brand.jpg","hash":"842b140847c226fc3de12429186032d9539d2d4b","modified":1538045978635},{"_id":"source/images/star-full.svg","hash":"16282bdcb4c5e4471e5b99378f998debe0768d15","modified":1538045978636},{"_id":"source/images/star-half.svg","hash":"e221bcafc495b10db4c571ae075bbad81cc0d03b","modified":1538045978637},{"_id":"source/images/wechat.jpg","hash":"2230249e5653d9314e5af89a391395a2bd63c563","modified":1538045978638},{"_id":"source/images/staroff.svg","hash":"586522f635b4c9525bb5e9f09ffe614bf4254358","modified":1538045978637},{"_id":"source/tags/index.md","hash":"c957661d4f92256f6ca7a66c545f94fdcc43f08b","modified":1538045978640},{"_id":"themes/indigo/languages/en.yml","hash":"ba78def0453d08172248e220a1f9e145e99b4f23","modified":1538045978643},{"_id":"source/images/wxpub.jpg","hash":"f69214ebaf9cbfe31f73fd2840390d49eb205baf","modified":1538045978639},{"_id":"themes/indigo/languages/nl-NL","hash":"b540b76af76c1a180c517089ed2ad770cbded170","modified":1538045978644},{"_id":"themes/indigo/languages/ja.yml","hash":"65a32717335211a45771a21fb7d7778808c6f0aa","modified":1538045978644},{"_id":"themes/indigo/languages/zh-CN.yml","hash":"077de65e259e103bbdb5429931b56115135019a6","modified":1538045978644},{"_id":"themes/indigo/languages/zh-TW.yml","hash":"9b8bdd9c8b68716f364503926dca6ba8571ee5ff","modified":1538045978645},{"_id":"themes/indigo/layout/archive.ejs","hash":"6897178ba358379d6a4b7c0ba1bc2ab97ad5303a","modified":1538045978665},{"_id":"themes/indigo/layout/categories.ejs","hash":"fdca7a7d46f832ae5cfaf1c7aeb634008953c13b","modified":1538045978665},{"_id":"themes/indigo/layout/index.ejs","hash":"772c1985c7743e101598b4eddc253f9174c5605b","modified":1538045978666},{"_id":"themes/indigo/layout/category.ejs","hash":"e5ba5cc2e092c199285b8097ef12ffe70bf84c91","modified":1538045978666},{"_id":"themes/indigo/layout/layout.ejs","hash":"770af84fff104c398ce8b6c995130cddd3e9a1e9","modified":1538045978667},{"_id":"themes/indigo/layout/page.ejs","hash":"567c42b978da4c39b8b4982df19b940c26bc32a4","modified":1538045978667},{"_id":"themes/indigo/scripts/plugins.js","hash":"14e080b55282529e844d5cf6b7bc8e6054bfeae5","modified":1538048222761},{"_id":"themes/indigo/layout/post.ejs","hash":"efc3352828351f8574c51e8a93dc56c66660c3b1","modified":1538045978668},{"_id":"themes/indigo/layout/tag.ejs","hash":"90a231dea3a364b329a740e5d6c49c8cf5664fe9","modified":1538045978668},{"_id":"themes/indigo/layout/tags.ejs","hash":"1fc0461e9602b53899ec756e4361beb8cce74740","modified":1538045978669},{"_id":"source/images/avatar.jpg","hash":"ed00a3f408ff50d499c27a58041c0b99ccae0022","modified":1538045978634},{"_id":"source/_posts/docker/00command.md","hash":"ec77c3119441b3f63440f0b27af2619fe2a46f7a","modified":1608901537420},{"_id":"source/_posts/docker/01docker-config.md","hash":"567f7918a7091e51ed418a22dc1a5d1a117e5a01","modified":1538045978606},{"_id":"source/_posts/docker/03docker-mongodb.md","hash":"ea94e5a478d4d444b66c361d4681fbf388f37c7e","modified":1538045978606},{"_id":"source/_posts/docker/04docker-mssqlserver.md","hash":"64a12c643635354908540efa41169d1a9490a317","modified":1538045978607},{"_id":"source/_posts/docker/05docker-webapi-mysql.md","hash":"268c8f2249a7f5c63bedbc51ebf5ab42885c03b6","modified":1541911097216},{"_id":"source/_posts/docker/04docker_install_mysql.md","hash":"e9801bb3a0e425c8894e26878a521475a20a3e08","modified":1608901338651},{"_id":"source/_posts/docker/06docker-compose.md","hash":"72c98182cdb88a539719396781ccfa6cddb47e14","modified":1541911097216},{"_id":"source/_posts/docker/07gitlab.md","hash":"9ee59bc220c74efdc3c01b1623d81f09698ba160","modified":1582465522659},{"_id":"source/_posts/docker/10docker-jenkins-gogs-cicd.md","hash":"a507fa763a8a39e611b7f91a6b16b81688399426","modified":1538045978615},{"_id":"source/_posts/docker/07gitlab01-runner.md","hash":"71f6db56ed2bcd2f74439e448a848cf1d5e805c3","modified":1582465522662},{"_id":"source/_posts/docker/11docker-redis.md","hash":"0ed995ae0897fb6de6492eecd0fa843b5713e454","modified":1541911097216},{"_id":"source/_posts/docker/12docker-rabbitmq.md","hash":"348cc61ac000f0dae761167653bb66533b7df4d6","modified":1538045978616},{"_id":"source/_posts/tools/cer.md","hash":"8b8c4e1998e7cdafb2183ddd9c7985867745297c","modified":1538045978626},{"_id":"source/_posts/tools/collections.md","hash":"9f2503814c98d023b0f940165cdc4381ed0df8d5","modified":1569584086788},{"_id":"source/_posts/tools/develop.md","hash":"a82faec82ea154b32fea1d8028134c09776ae967","modified":1582465522691},{"_id":"source/_posts/tools/git.md","hash":"7c3eabbd116d7b15bd3859a182f3e39a64ff74f8","modified":1541907140523},{"_id":"source/_posts/tools/nginx.md","hash":"711cc48130d8a02e22f2b2f8e1d3400ca1738eb3","modified":1538045978627},{"_id":"source/_posts/tools/npm.md","hash":"ff29e63af9ae467c4f1666e225c467e490932e52","modified":1538045978628},{"_id":"source/_posts/tools/nuget.md","hash":"61c920da43cffbb6c44b2c405511b9921ec7a0cf","modified":1538045978629},{"_id":"source/_posts/tools/office.md","hash":"94b045a28f96adb23f4e309b8736ba9152cac50c","modified":1538045978629},{"_id":"source/_posts/tools/windows.md","hash":"c3166cd3b86e5b06bf13a0946137eab3039f9ba6","modified":1538045978629},{"_id":"themes/indigo/layout/_partial/after-footer.ejs","hash":"1351dbfca311f0d50a939f9e1a91c4f65bbcdf5f","modified":1538045978646},{"_id":"themes/indigo/layout/_partial/archive.ejs","hash":"c294c98617ce14082f9b3d5eec83328f480f5597","modified":1538045978646},{"_id":"themes/indigo/layout/_partial/footer.ejs","hash":"c78444f5b350ca79b260361bf3e5b6361d2661ba","modified":1538045978647},{"_id":"themes/indigo/layout/_partial/head.ejs","hash":"9dfc591ec6c918c5b60b6ccbc5d1e18fea9faf8e","modified":1538045978647},{"_id":"themes/indigo/layout/_partial/header.ejs","hash":"648db446567a81371b8a29d719d13636aa157012","modified":1538045978648},{"_id":"themes/indigo/layout/_partial/index-item.ejs","hash":"7208d4083ee3355aa969972a2ce249a67d56b3a6","modified":1538045978648},{"_id":"themes/indigo/layout/_partial/loading.ejs","hash":"8b3e037dd5f3d4564012689c5cd6f63caf73df0f","modified":1538045978649},{"_id":"themes/indigo/layout/_partial/menu.ejs","hash":"ea6aded24a68de0914f24b3760f766b5e1c9835a","modified":1538045978649},{"_id":"themes/indigo/layout/_partial/paginator.ejs","hash":"13952250463f70d1c1bbbfdd7f4ee8160dd6d99b","modified":1538045978650},{"_id":"themes/indigo/layout/_partial/post.ejs","hash":"20597ac0d547aea37680ecf195eb129fe5ee19d8","modified":1538045978656},{"_id":"themes/indigo/layout/_partial/script.ejs","hash":"31052bc524a10abd6871aed2415448ce585faff2","modified":1538045978664},{"_id":"themes/indigo/layout/_partial/tags-bar.ejs","hash":"30ec74f081cc4c273a7bcd5d57da99072e9f0755","modified":1538045978664},{"_id":"themes/indigo/layout/_partial/search.ejs","hash":"752109904304fdb8e988ee1254df2af9c0701466","modified":1538045978664},{"_id":"themes/indigo/source/css/style.less","hash":"68a7791012d2f7c7f2ebcc7543a559911850c036","modified":1538047022218},{"_id":"themes/indigo/source/img/img-err.png","hash":"23a63ea26eb3c1d5e677d9883cf36cc1a1a1228b","modified":1538045978723},{"_id":"themes/indigo/source/img/cc.png","hash":"ebce75a62b40976a72d43f0bd937d859ac24d87c","modified":1538045978722},{"_id":"themes/indigo/source/img/img-loading.png","hash":"a9cd5cd11866824f31e3d1c5e23badfeb3f73031","modified":1538045978723},{"_id":"themes/indigo/source/js/main.min.js","hash":"e77a89fe5a9827ac590a288778176b233dd900ad","modified":1538045978725},{"_id":"themes/indigo/source/js/main.js","hash":"ff44bb7b2f1f08757093fd6ffa92c9ac2b674109","modified":1538045978724},{"_id":"themes/indigo/source/js/search.js","hash":"a4d6c9c566ec1ca71ddacfd14c58f7ddaf9db24d","modified":1538045978725},{"_id":"themes/indigo/source/js/search.min.js","hash":"a8a450bb8b1ca9ad577052addcbd3393f1af6c6a","modified":1538045978725},{"_id":"source/_posts/dotnetcore/consul/docker中安装Consul.md","hash":"eede1299830e461f5f30a5bf6510688e23d79980","modified":1538045978617},{"_id":"source/_posts/dotnetcore/core/01dotnetcore-centos-install.md","hash":"28a8d60c585ff0cf3f55a9d9943b9b1dee7fc6a0","modified":1541911097312},{"_id":"source/_posts/dotnetcore/core/02cookie-base-authorization.md","hash":"ddba6a4e57662a4e36af12fc64d4982196d6134f","modified":1541911097312},{"_id":"source/_posts/dotnetcore/core/collections.md","hash":"e5bcc8e2d711795238d827819cbdb3d8e3c11456","modified":1538045978620},{"_id":"source/_posts/dotnetcore/core/03jwt-authorization.md","hash":"6f2f671410427f06799488826243d5ce68e5a98d","modified":1541911097272},{"_id":"source/_posts/dotnetcore/identityserver4/01client-credentials.md","hash":"e7fb27c502ecba202751a977b9ecf1777f217553","modified":1541911097272},{"_id":"source/_posts/dotnetcore/core/efcore.md","hash":"7defba4ad88bcae2476c40cff857882612e891a6","modified":1538045978620},{"_id":"source/_posts/dotnetcore/identityserver4/02passport.md","hash":"3a7411cb322769af92bc7c9601e67339c0ea7bf2","modified":1541911097272},{"_id":"source/_posts/dotnetcore/identityserver4/article.md","hash":"c08bedb25c62674826dd071273dcfee246d8fc4c","modified":1538045978623},{"_id":"source/_posts/dotnetcore/core/remark.md","hash":"9b4b18091452fb2d5027b6f26fd4460ccfca279d","modified":1538045978621},{"_id":"source/_posts/front/other/VSCodeDebug.md","hash":"4d181e9f4ba0df19c22c1914dc8facfe3841e2a2","modified":1558526121261},{"_id":"source/_posts/front/react/collection.md","hash":"54b5280e060f3fa8b3e068be38dd092a355f82fe","modified":1608904334362},{"_id":"source/_posts/front/react/umi-split-chunks.md","hash":"54d2bae93a002d46b2ee0c54187353999be644c8","modified":1541911284635},{"_id":"themes/indigo/layout/_partial/plugins/baidu.ejs","hash":"da1355eea131952031e54c45560555e6d3aa5a33","modified":1538045978651},{"_id":"themes/indigo/layout/_partial/plugins/disqus.ejs","hash":"86fe837ab16cb60754b0a73bb9efa38b04f3023f","modified":1538045978651},{"_id":"themes/indigo/layout/_partial/plugins/dynamic-title.ejs","hash":"3b877868c4a6fc217ea6f3314544830280a77472","modified":1538045978652},{"_id":"themes/indigo/layout/_partial/plugins/gitment.ejs","hash":"5f6ceb7f4b9b579e8e3f87894447f556a53f9385","modified":1538045978652},{"_id":"themes/indigo/layout/_partial/plugins/google-analytics.ejs","hash":"b5b87761751a897949e085a8f1ace78b0b8babd5","modified":1538045978653},{"_id":"themes/indigo/layout/_partial/plugins/hyper-comments.ejs","hash":"d0e6f1d713e7a1c0cc5fe25f3e574a4b791f938a","modified":1538045978653},{"_id":"themes/indigo/layout/_partial/plugins/mathjax.ejs","hash":"3a5c9f7d22d30cd8ffa4e83a8d3976db22815994","modified":1538045978654},{"_id":"themes/indigo/layout/_partial/plugins/page-visit.ejs","hash":"bb9deb32c54ea6820f622b923e62592915e9f21f","modified":1538045978654},{"_id":"themes/indigo/layout/_partial/plugins/site-visit.ejs","hash":"a2c247c2e32016563dd6a22c21474072d93f4dbd","modified":1538045978655},{"_id":"themes/indigo/layout/_partial/plugins/tajs.ejs","hash":"ef9c77d8c6e004b014c83c5f9333e7174f8bafa3","modified":1538045978655},{"_id":"themes/indigo/layout/_partial/plugins/uyan.ejs","hash":"ddf290e90dc1c779f42a48e1bd852ca932148dfb","modified":1538045978656},{"_id":"themes/indigo/layout/_partial/plugins/valine.ejs","hash":"0a6245da90d54177441d32a6f1766b4f434660db","modified":1538045978656},{"_id":"themes/indigo/layout/_partial/post/category.ejs","hash":"c08e44cbd7315dec7afb6054b04d3c7b82c3bde8","modified":1538045978657},{"_id":"themes/indigo/layout/_partial/post/comment.ejs","hash":"b1a6984e19d3493fb327383ee76e09fdee090426","modified":1538045978658},{"_id":"themes/indigo/layout/_partial/post/copyright.ejs","hash":"dd1dcc7776021ab3d68065f8532efead4c2b8051","modified":1538045978658},{"_id":"themes/indigo/layout/_partial/post/date.ejs","hash":"c5adcec8db1506c378d39855a697e1bb1165646c","modified":1538045978658},{"_id":"themes/indigo/layout/_partial/post/head-meta.ejs","hash":"f137c126672769e9571be2bb0a70ea8dda644b0e","modified":1538045978659},{"_id":"themes/indigo/layout/_partial/post/nav.ejs","hash":"c64c1f59daced1e3b5e745f228220c6e773e19fc","modified":1552704446853},{"_id":"themes/indigo/layout/_partial/post/reward-btn.ejs","hash":"b46160005224821a439dec9f1ff183e2f66d9f4b","modified":1538045978660},{"_id":"themes/indigo/layout/_partial/post/reward.ejs","hash":"097c0276a61665e5ee96e5d5d85a7d6ae5ab2f49","modified":1538045978661},{"_id":"themes/indigo/layout/_partial/post/share-fab.ejs","hash":"2ec7de870988cfbc8ea9872cddf7e4076ac64a57","modified":1538045978661},{"_id":"themes/indigo/layout/_partial/post/share.ejs","hash":"7d79a67b3e5e6989f22fb0e0904fa540bfca5fcc","modified":1538045978662},{"_id":"themes/indigo/layout/_partial/post/tag.ejs","hash":"412894001b1ac6e63012b26b1109a0856651c076","modified":1538045978662},{"_id":"themes/indigo/layout/_partial/post/title.ejs","hash":"eaad7af7888bddd7095243a43ff38f55ad8c494a","modified":1538045978662},{"_id":"themes/indigo/layout/_partial/post/toc.ejs","hash":"d534b888d24df7703c632539d4bdd638fa764e98","modified":1538045978663},{"_id":"themes/indigo/layout/_partial/post/updated.ejs","hash":"00fedf7971c0bda0623d968bc0614e512d19a985","modified":1538045978663},{"_id":"themes/indigo/source/css/_partial/archives.less","hash":"382fc22cd5cc073e881768a65600d97eba9f1d21","modified":1538045978672},{"_id":"themes/indigo/source/css/_partial/article.less","hash":"f047c8ca92f9e6a8e1299ace0cce91514631a21c","modified":1538045978672},{"_id":"themes/indigo/source/css/_partial/gotop.less","hash":"bad63006b3bd4849bf53ad38482af0d9971061d3","modified":1538045978673},{"_id":"themes/indigo/source/css/_partial/header.less","hash":"880b4a28e97d556ed15b07642d25115f9b6ba4f6","modified":1538045978674},{"_id":"themes/indigo/source/css/_partial/highlight.less","hash":"99e48793dc0b4ffb66ecaf2d1315145872f9bb98","modified":1538045978674},{"_id":"themes/indigo/source/css/_partial/layout.less","hash":"5f783f34bf093e654e8922ed4a2af8b7b2cd41c4","modified":1538045978675},{"_id":"themes/indigo/source/css/_partial/lightbox.less","hash":"38419aaf3c1832e84ade331f051f110fdc8b960f","modified":1538045978676},{"_id":"themes/indigo/source/css/_partial/loading.less","hash":"85157ddf3877b5c58e8f1d737dda3dfb1bfd540b","modified":1538045978676},{"_id":"themes/indigo/source/css/_partial/page.less","hash":"33b0a5edcedc26a4c592c812c5785bb20d3c93db","modified":1538045978676},{"_id":"themes/indigo/source/css/_partial/postlist.less","hash":"516cded3c7f1db4cacfa898bcaf0adfae7f3a2e1","modified":1538045978677},{"_id":"themes/indigo/source/css/_partial/reward.less","hash":"f5e89ea5414e3096a28c8c96e86c3f669040a892","modified":1538045978677},{"_id":"themes/indigo/source/css/_partial/roboto.less","hash":"3e457942995da8840e7662fa6cb551a7e12ea294","modified":1538045978678},{"_id":"themes/indigo/source/css/_partial/search.less","hash":"dbc23e77e586ee682a21475f5eb568628ea6720f","modified":1538045978678},{"_id":"themes/indigo/source/css/_partial/tags.less","hash":"01eb7f84193180928a6ed4796ee8802f6c1628e7","modified":1538045978679},{"_id":"themes/indigo/source/css/_partial/share.less","hash":"a683c96a59470efd35722b763c55149a46e35156","modified":1538045978679},{"_id":"themes/indigo/source/css/_partial/variable.less","hash":"3232e75f4653402c9fbd7bda5b97c05ecc31db2b","modified":1538045978680},{"_id":"themes/indigo/source/css/_plugin/valine.less","hash":"b8f8d8037fb3c8525da12e580bd9e2ff9f298132","modified":1538045978681},{"_id":"themes/indigo/source/css/_partial/waves.less","hash":"a02eaa601887f947257f6016679b62dc96a61c0c","modified":1538045978680},{"_id":"themes/indigo/source/css/_partial/fontawesome.less","hash":"a3ecbd6ccf5b56ac39df710c34a149b82989a498","modified":1538045978673},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.eot","hash":"a76cd602f5188b9fbd4ba7443dcb9c064e3dbf10","modified":1538045978694},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.woff","hash":"ee99cd87a59a9a5d4092c83232bb3eec67547425","modified":1538045978698},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.woff2","hash":"933b866d09c2b087707a98dab64b3888865eeb96","modified":1538045978699},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.eot","hash":"42fe156996197e5eb0c0264c5d1bb3b4681f4595","modified":1538045978700},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.woff","hash":"6300f659be9e834ab263efe2fb3c581d48b1e7b2","modified":1538045978704},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.woff2","hash":"bbdc28b887400fcb340b504ec2904993af42a5d7","modified":1538045978705},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.eot","hash":"1517f4b6e1c5d0e5198f937557253aac8fab0416","modified":1538045978706},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.woff","hash":"d45f84922131364989ad6578c7a06b6b4fc22c34","modified":1538045978710},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.woff2","hash":"6cc1b73571af9e827c4e7e91418f476703cd4c4b","modified":1538045978711},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.eot","hash":"77ae3e980ec03863ebe2587a8ef9ddfd06941db0","modified":1538045978712},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.woff","hash":"74734dde8d94e7268170f9b994dedfbdcb5b3a15","modified":1538045978715},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.woff2","hash":"ed1558b0541f5e01ce48c7db1588371b990eec19","modified":1538045978716},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.eot","hash":"0790a51a848dbe7292c98f9d0459218bf1a8ffdd","modified":1538045978717},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.woff","hash":"fbc3e71d456c96667d8082ab910e3946ef89240b","modified":1538045978720},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.woff2","hash":"2449e3dac5ddb7c3da8bb07450493b62d052758c","modified":1538045978721},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1538045978692},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1538045978693},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Bold.ttf","hash":"47327df0f35e7cd7c8645874897a7449697544ae","modified":1538045978697},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Light.ttf","hash":"e321c183e2b75ee19813892b7bac8d7c411cb88a","modified":1538045978702},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Medium.ttf","hash":"6060ca726b9760b76f7c347dce9d2fa1fe42ec92","modified":1538045978708},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Regular.ttf","hash":"824b5480c977a8166e177e5357d13164ccc45f47","modified":1538045978713},{"_id":"themes/indigo/source/css/fonts/roboto/Roboto-Thin.ttf","hash":"173ed64528b4d010a76d8d38deb1d7e7eed58eda","modified":1538045978719},{"_id":"themes/indigo/source/css/fonts/fontawesome/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1538045978683},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1538045978685},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1538045978691},{"_id":"themes/indigo/source/css/fonts/fontawesome/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1538045978689},{"_id":"public/atom.xml","hash":"cb6179c4bb5f5fef558f5140874ce07cf90aef06","modified":1608904383104},{"_id":"public/content.json","hash":"f5474deb4afae8aa93ae824164040859367a0737","modified":1608904383104},{"_id":"public/about/index.html","hash":"0413906ef5f124154e0cda60232d7df673d61225","modified":1608904383104},{"_id":"public/categories/index.html","hash":"628d09db0a4aac13245dfe67393a41e592ab6337","modified":1608904383104},{"_id":"public/tags/index.html","hash":"bc9cf08605e485d2242dc03de2b86bd0bba037ec","modified":1608904383104},{"_id":"public/2018/11/11/front/react/umi-split-chunks/index.html","hash":"08a0d659c1571cd1e0849200f0657e24580e489b","modified":1608904383104},{"_id":"public/2018/09/22/front/other/VSCodeDebug/index.html","hash":"97da5154206f675dab25c0b9274d8294816f87cd","modified":1552703714728},{"_id":"public/2018/09/13/tools/collections/index.html","hash":"12be41073a40b2aac015237643d366ea68f5750d","modified":1608904383104},{"_id":"public/2018/09/04/dotnetcore/consul/docker中安装Consul/index.html","hash":"e1648778c3332368bc7aa8c3186b5fbcc4dab627","modified":1552703714728},{"_id":"public/2018/08/01/front/react/collection/index.html","hash":"03efd0612e3507575ed40d2432a8df038dda16ec","modified":1608904383104},{"_id":"public/2018/06/08/docker/12docker-rabbitmq/index.html","hash":"f7df50a1b19c2ba6ad8ff4029f1b39eebfafcd4f","modified":1608904383104},{"_id":"public/2018/06/06/docker/11docker-redis/index.html","hash":"9ee5e0b3b3aae369dd1b0b8191d3545aaf0a2115","modified":1608904383104},{"_id":"public/2018/05/16/tools/office/index.html","hash":"6f0f53bd31bc0d2cb6ccf321124625262e59666b","modified":1608904383104},{"_id":"public/2018/05/16/tools/nginx/index.html","hash":"a58d02b9cdb5a4070b9d827c1531de1361e2da17","modified":1608904383104},{"_id":"public/2016/04/01/helleword/index.html","hash":"4cb6739df1070c91dd7a61fa6a7bdd8d4430671c","modified":1608904383104},{"_id":"public/categories/Docker/page/2/index.html","hash":"d3ea92c6d61d5dc6613e4b9d08b639c5e1580343","modified":1608904383104},{"_id":"public/categories/前端-其他/index.html","hash":"a3cc17c4ecd90fa19b4175147da982e27f963857","modified":1608904383104},{"_id":"public/categories/React/index.html","hash":"05b254196535e58160911955626644162d709ae9","modified":1608904383104},{"_id":"public/archives/page/4/index.html","hash":"c437e07f5f7bb5232beff3cded809568c92a1ab8","modified":1608904383104},{"_id":"public/archives/2016/index.html","hash":"831125ca83d5a35b96abbc9e44bc6c18c6222529","modified":1608904383104},{"_id":"public/archives/2016/04/index.html","hash":"efa09ff872030acc24060c0cdfd88d80bb4a7e9a","modified":1608904383104},{"_id":"public/archives/2018/page/4/index.html","hash":"b28f661a48a9bdf0e1e5cedd1703c33354243a8f","modified":1608904383104},{"_id":"public/archives/2018/02/index.html","hash":"521c5dde8b425d80d51716d7b541a4b222666982","modified":1608904383104},{"_id":"public/archives/2018/08/index.html","hash":"b30a4fe99e1e07b39a8c5c54701854099c5a9a1b","modified":1608904383104},{"_id":"public/archives/2018/09/index.html","hash":"96c463fd8a7a5dfd4e6f47b0c811d3d8ec3beaf1","modified":1608904383104},{"_id":"public/archives/2018/11/index.html","hash":"46a349c7ebe979ca6be6892c0dbad11bf41f1824","modified":1608904383104},{"_id":"public/page/4/index.html","hash":"1610a572dc66d3c2ae0b4c5e597bb770053cc417","modified":1608904383104},{"_id":"public/tags/Docker/page/2/index.html","hash":"00b01f5e85c634599c722fcc9961af9d058c489a","modified":1608904383104},{"_id":"public/tags/Consul/index.html","hash":"86d64c3324416e8cea6401ff3c00c253f85baf25","modified":1608904383104},{"_id":"public/tags/NetCore微服务/index.html","hash":"f99734c18e4ed5f595808606725009c15e987d50","modified":1608904383104},{"_id":"public/tags/IdentityServer4/index.html","hash":"822238599a34ecee1b2654389ce9f15bce581819","modified":1608904383104},{"_id":"public/tags/前端-其他/index.html","hash":"bc2ffc1310b6dbd4cc40911ba4073d51008acdd3","modified":1608904383104},{"_id":"public/tags/前端/index.html","hash":"752b2a3870ee64de027ca632b8aee2e246ccc846","modified":1608904383104},{"_id":"public/tags/React/index.html","hash":"52413b3389ec28ec13b6e9a35f378807f138cf46","modified":1608904383104},{"_id":"public/tags/umi/index.html","hash":"93118a5c0959a478e6d5f2fa200e7ef47fb832cf","modified":1608904383104},{"_id":"public/2018/06/06/docker/10docker-jenkins-gogs-cicd/index.html","hash":"2be2ccc19207d238891dca6f83d270e1c3cb4e86","modified":1608904383104},{"_id":"public/2018/06/05/docker/07gitlab01-runner/index.html","hash":"9ec065a160580775729ad6b06dbcdcb0e5f81034","modified":1608904383104},{"_id":"public/2018/06/05/docker/07gitlab/index.html","hash":"b10db62c4022d26dde0eefa28f049dea326cf2f3","modified":1608904383104},{"_id":"public/2018/06/04/docker/06docker-compose/index.html","hash":"0c2d7a19ff57a36019cfc91b73663106f54aabc3","modified":1608904383104},{"_id":"public/2018/06/03/docker/05docker-webapi-mysql/index.html","hash":"e67fe46a878da75b8398ccaf2b54868a0d7004d9","modified":1608904383104},{"_id":"public/2018/06/02/docker/04docker-mssqlserver/index.html","hash":"aa49c90ccbf3a5d220bfff0ec57ac136c1018ca5","modified":1608904383104},{"_id":"public/2018/06/02/docker/04docker_install_mysql/index.html","hash":"afa51415fa481c855d49dd54341e3ce2571f9eec","modified":1552703714758},{"_id":"public/2018/06/01/docker/03docker-mongodb/index.html","hash":"7951936d60e5fa9d2bfff459b500de578601f605","modified":1608904383104},{"_id":"public/2018/05/30/docker/01docker-config/index.html","hash":"00e99cbf665d7b526aae2de81b4e631c231f89b6","modified":1608904383104},{"_id":"public/2018/05/28/docker/00command/index.html","hash":"6dd13b8a6fed1e4220454eb5b56f430837fe6a40","modified":1608904383104},{"_id":"public/2018/05/20/tools/windows/index.html","hash":"dd53384a81f63d1ba1b7bb65f63522ef20e7913f","modified":1608904383104},{"_id":"public/2018/05/16/tools/nuget/index.html","hash":"7e65759555a478d5fc03811bfa9b7f174cec05e7","modified":1608904383104},{"_id":"public/2018/05/16/tools/npm/index.html","hash":"44eb534a262a3f7997b9ea252998cadc5e09f3a5","modified":1608904383104},{"_id":"public/2018/05/16/tools/git/index.html","hash":"ec963517394d1ea214cf55c1b29a54ea1ed5951a","modified":1608904383104},{"_id":"public/2018/05/16/tools/develop/index.html","hash":"bf20d7607b48baf7664642a38fa317c330af032f","modified":1608904383104},{"_id":"public/2018/05/16/tools/cer/index.html","hash":"bf2df34dbd4828f1f781f42c638f06d14e78e582","modified":1608904383104},{"_id":"public/2018/03/11/dotnetcore/identityserver4/02passport/index.html","hash":"320311e68aeff943a28826a091153b04d04f04b2","modified":1608904383104},{"_id":"public/2018/03/10/dotnetcore/identityserver4/01client-credentials/index.html","hash":"8e59bce50fca1379586b111b8445c1c684819058","modified":1608904383104},{"_id":"public/2018/03/09/dotnetcore/identityserver4/article/index.html","hash":"0543b7d68a22c777c42603012ef5a5a7f6f902ae","modified":1608904383104},{"_id":"public/2018/03/06/dotnetcore/core/03jwt-authorization/index.html","hash":"7dc6fbc5010d53668312c094c505a85465f303ad","modified":1608904383104},{"_id":"public/2018/03/05/dotnetcore/core/02cookie-base-authorization/index.html","hash":"bac6f76a932529ae24270fb5bc16ec46b53960de","modified":1608904383104},{"_id":"public/2018/03/03/dotnetcore/core/01dotnetcore-centos-install/index.html","hash":"75221bd60106d9112bc0555da35ced711ea3f887","modified":1608904383104},{"_id":"public/2018/03/01/dotnetcore/core/efcore/index.html","hash":"e3218062c7adae7ade6b82b4e715181d00990731","modified":1608904383104},{"_id":"public/2018/03/01/dotnetcore/core/remark/index.html","hash":"e14b4ca6f00ea8c9c9a4c48df8f2e8eec1aa1a93","modified":1608904383104},{"_id":"public/2018/02/27/dotnetcore/core/collections/index.html","hash":"ab365cb769a505ec32e5ec48c98844b8bda06e92","modified":1608904383104},{"_id":"public/categories/Docker/index.html","hash":"8c2a38a27eb042514dfa901c2a78c431a0655aec","modified":1608904383104},{"_id":"public/categories/工具/index.html","hash":"10c9c8cf3625965ad15a9b3cb531c5a4d44bef54","modified":1608904383104},{"_id":"public/categories/NetCore/index.html","hash":"a175ba710bf5610688805e025c9291d4073e00fe","modified":1608904383104},{"_id":"public/archives/index.html","hash":"bb38899b1c065ea2da58a08605944047901e6ca6","modified":1608904383104},{"_id":"public/archives/page/2/index.html","hash":"dc23df8c6f7231c1113ea3b4303fd5493976d1f3","modified":1608904383104},{"_id":"public/archives/page/3/index.html","hash":"fcb50ae3780531ff715adbba9fc1cae84490e6e0","modified":1608904383104},{"_id":"public/archives/2018/index.html","hash":"ad88c37625e9c792378e11e1debf7fe055aeadae","modified":1608904383104},{"_id":"public/archives/2018/page/2/index.html","hash":"14b550c2b5faf6e6d265dcedca3da24f16e24abb","modified":1608904383104},{"_id":"public/archives/2018/page/3/index.html","hash":"4fdd0e4e9de595651258115f308094c753779eb9","modified":1608904383104},{"_id":"public/archives/2018/03/index.html","hash":"04e69b163e0905f2a0952779afba167f2f7315d1","modified":1608904383104},{"_id":"public/archives/2018/05/index.html","hash":"cb19e17cbe7781df49d93a5e9e9669f242395d0b","modified":1608904383104},{"_id":"public/archives/2018/06/index.html","hash":"b95cad0f58aa87fb0734dc3f39ecb09d496d3df0","modified":1608904383104},{"_id":"public/page/2/index.html","hash":"9d97738b074e203e8840f30835d4073e3a9148d1","modified":1608904383104},{"_id":"public/page/3/index.html","hash":"de77d86b2b7f98773dc9249e75b8c38aee7443c4","modified":1608904383104},{"_id":"public/index.html","hash":"a8e87c0cc0f7d2386ac9d1b5f260089132b13c25","modified":1608904383104},{"_id":"public/tags/Docker/index.html","hash":"df33eda6ef7284386bb70725717d392cb8bc248b","modified":1608904383104},{"_id":"public/tags/工具/index.html","hash":"5daecc57535ea9b2a39eddb0c43e8df36a877f7a","modified":1608904383104},{"_id":"public/tags/NetCore/index.html","hash":"6948747467b7616b5d91423db1ed7dbba1492975","modified":1608904383104},{"_id":"public/CNAME","hash":"2c1bf3430c03b1d6fa3217cea984245e7cfe33ff","modified":1608903456587},{"_id":"public/images/alipay.jpg","hash":"cdb9f9d7255bed621a45066195f22ee4207ca6bf","modified":1608903456587},{"_id":"public/images/brand.jpg","hash":"842b140847c226fc3de12429186032d9539d2d4b","modified":1608903456587},{"_id":"public/images/star-full.svg","hash":"16282bdcb4c5e4471e5b99378f998debe0768d15","modified":1608903456587},{"_id":"public/images/star-half.svg","hash":"e221bcafc495b10db4c571ae075bbad81cc0d03b","modified":1608903456587},{"_id":"public/images/wechat.jpg","hash":"2230249e5653d9314e5af89a391395a2bd63c563","modified":1608903456587},{"_id":"public/images/staroff.svg","hash":"586522f635b4c9525bb5e9f09ffe614bf4254358","modified":1608903456587},{"_id":"public/images/wxpub.jpg","hash":"f69214ebaf9cbfe31f73fd2840390d49eb205baf","modified":1608903456587},{"_id":"public/img/img-err.png","hash":"23a63ea26eb3c1d5e677d9883cf36cc1a1a1228b","modified":1608903456587},{"_id":"public/img/cc.png","hash":"ebce75a62b40976a72d43f0bd937d859ac24d87c","modified":1608903456587},{"_id":"public/img/img-loading.png","hash":"a9cd5cd11866824f31e3d1c5e23badfeb3f73031","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Bold.eot","hash":"a76cd602f5188b9fbd4ba7443dcb9c064e3dbf10","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Light.eot","hash":"42fe156996197e5eb0c0264c5d1bb3b4681f4595","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Bold.woff2","hash":"933b866d09c2b087707a98dab64b3888865eeb96","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Bold.woff","hash":"ee99cd87a59a9a5d4092c83232bb3eec67547425","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Medium.eot","hash":"1517f4b6e1c5d0e5198f937557253aac8fab0416","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Light.woff","hash":"6300f659be9e834ab263efe2fb3c581d48b1e7b2","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Light.woff2","hash":"bbdc28b887400fcb340b504ec2904993af42a5d7","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Medium.woff","hash":"d45f84922131364989ad6578c7a06b6b4fc22c34","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Medium.woff2","hash":"6cc1b73571af9e827c4e7e91418f476703cd4c4b","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Regular.eot","hash":"77ae3e980ec03863ebe2587a8ef9ddfd06941db0","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Regular.woff","hash":"74734dde8d94e7268170f9b994dedfbdcb5b3a15","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Regular.woff2","hash":"ed1558b0541f5e01ce48c7db1588371b990eec19","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Thin.eot","hash":"0790a51a848dbe7292c98f9d0459218bf1a8ffdd","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Thin.woff2","hash":"2449e3dac5ddb7c3da8bb07450493b62d052758c","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Thin.woff","hash":"fbc3e71d456c96667d8082ab910e3946ef89240b","modified":1608903456587},{"_id":"public/images/avatar.jpg","hash":"ed00a3f408ff50d499c27a58041c0b99ccae0022","modified":1608903456587},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Bold.ttf","hash":"47327df0f35e7cd7c8645874897a7449697544ae","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Light.ttf","hash":"e321c183e2b75ee19813892b7bac8d7c411cb88a","modified":1608903456587},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Medium.ttf","hash":"6060ca726b9760b76f7c347dce9d2fa1fe42ec92","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Thin.ttf","hash":"173ed64528b4d010a76d8d38deb1d7e7eed58eda","modified":1608903456587},{"_id":"public/css/fonts/roboto/Roboto-Regular.ttf","hash":"824b5480c977a8166e177e5357d13164ccc45f47","modified":1608903456587},{"_id":"public/js/main.min.js","hash":"8acf4480f8ab859423b8926b9b790c67b5a77276","modified":1608903456587},{"_id":"public/js/search.min.js","hash":"a8a450bb8b1ca9ad577052addcbd3393f1af6c6a","modified":1608903456587},{"_id":"public/js/search.js","hash":"499e11786efbb04815b54a1de317cc8606a37555","modified":1608903456587},{"_id":"public/js/main.js","hash":"300b2e963683ced162e28afcd24ffc970fc23ac2","modified":1608903456587},{"_id":"public/css/fonts/fontawesome/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1608903456587},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1608903456587},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1608903456587},{"_id":"public/css/fonts/fontawesome/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1608903456587},{"_id":"public/css/style.css","hash":"e8ac0b8368419c75d7b5b612e7bd8bbba600deb6","modified":1608903456587},{"_id":"source/_posts/front/react/components.md","hash":"423dc5bba7296b7c3b14922299e57c6c2df9103a","modified":1608904338335},{"_id":"public/2018/12/10/front/react/components/index.html","hash":"c44a116c10a784ec589f8efd2ede104f9b84e1d8","modified":1608904383104},{"_id":"public/archives/2018/12/index.html","hash":"1575fa2f53bc72f140b4504bcd6e062a91787243","modified":1608904383104},{"_id":"source/_posts/tools/travis.md","hash":"9b47cd5b6d5828d6b6dfb5c4f3dcfac213186ae0","modified":1552739083404},{"_id":"themes/hexo-theme-matery/.gitignore","hash":"eaa3d84cb77d92a21b111fd1e37f53edc1ff9de0","modified":1557674342000},{"_id":"themes/hexo-theme-matery/LICENSE","hash":"b314c7ebb7d599944981908b7f3ed33a30e78f3a","modified":1558526121284},{"_id":"themes/hexo-theme-matery/README.md","hash":"6bb9bbe1c6ea691e58f250de21bb729e956313ad","modified":1558526121284},{"_id":"themes/hexo-theme-matery/README_CN.md","hash":"a94324950e0299bcfcbc106cf2ca65c93e1fe843","modified":1558526121285},{"_id":"themes/hexo-theme-matery/_config.yml","hash":"55e7bf247b2d5c90ca2359f965a420e20e0be27f","modified":1582465522695},{"_id":"themes/hexo-theme-matery/languages/default.yml","hash":"53950d4a931c7beaf368a7be8d3e010ebeabedd5","modified":1558526121287},{"_id":"themes/hexo-theme-matery/languages/zh-CN.yml","hash":"d8df0fcfa465bc5977cbd04ff9b4b560378d16ff","modified":1558526121288},{"_id":"themes/hexo-theme-matery/layout/about.ejs","hash":"0a8942e2fa070d7d08ef0779267e1e05ff8e3065","modified":1558526121309},{"_id":"themes/hexo-theme-matery/layout/archive.ejs","hash":"410d85c8a8dbf8f66ce0c201eabeb107c1087544","modified":1558526121310},{"_id":"themes/hexo-theme-matery/layout/categories.ejs","hash":"c431e772d0f7700592228bbd9502793bdc28a893","modified":1558526121310},{"_id":"themes/hexo-theme-matery/layout/category.ejs","hash":"c3651f9a24dfd38323508ae6ab2232bddacee718","modified":1558526121311},{"_id":"themes/hexo-theme-matery/layout/friends.ejs","hash":"6758845f243de140bfd8cd1c2c962d967f9f09ff","modified":1558526121311},{"_id":"themes/hexo-theme-matery/layout/index.ejs","hash":"a8a8e1aca0d016b6da3c76b250f7f416f00384c3","modified":1558526121312},{"_id":"themes/hexo-theme-matery/layout/layout.ejs","hash":"f99d28f7c3382caf4321641f2d79582aac0b0c90","modified":1558526121312},{"_id":"themes/hexo-theme-matery/layout/post.ejs","hash":"9ecae79690293cacdccc172118f1fe481705b1f2","modified":1570284849593},{"_id":"themes/hexo-theme-matery/layout/tag.ejs","hash":"ac3837ecb32926e4c51c7c57cd0778242a4af7eb","modified":1558526121313},{"_id":"themes/hexo-theme-matery/layout/tags.ejs","hash":"851c0ee599e91e7b1d657673859e8b6ff79cf50b","modified":1558526121313},{"_id":"themes/hexo-theme-matery/source/favicon.png","hash":"20674c497b75fc889194b47fd18ecea12303d8ec","modified":1557674342000},{"_id":"source/_posts/tools/articleCollections.md","hash":"0ef32038e44de16e1836928d2d612202df7b33b1","modified":1582465522719},{"_id":"themes/hexo-theme-matery/layout/_partial/back-top.ejs","hash":"cb99dc352397ec5d0765794d7b8884972e61973b","modified":1558526121289},{"_id":"themes/hexo-theme-matery/layout/_partial/bg-cover-content.ejs","hash":"c7274a65468e31cd654033f939b2fcf0c810aba2","modified":1568027726644},{"_id":"themes/hexo-theme-matery/layout/_partial/disqus.ejs","hash":"42dda8e67f7f09d148347887e52f18aea546df26","modified":1558526121291},{"_id":"themes/hexo-theme-matery/layout/_partial/bg-cover.ejs","hash":"d5a7b9bb96e04c0a3485dd873748f19c50a6a04f","modified":1558526121290},{"_id":"themes/hexo-theme-matery/layout/_partial/footer.ejs","hash":"a9ed456242c84a0a34d60a1b92889dd1b31efc37","modified":1558526121291},{"_id":"themes/hexo-theme-matery/layout/_partial/gitalk.ejs","hash":"4c658c0e2a6c666667199d1402aab4bcf9236b89","modified":1558526121292},{"_id":"themes/hexo-theme-matery/layout/_partial/github-link.ejs","hash":"fd4034bca2eb3987dcf113e6477260bee97eb1e7","modified":1558526121293},{"_id":"themes/hexo-theme-matery/layout/_partial/gitment.ejs","hash":"d8c40dbc8106b5bc53ceb727ad968c1d8f234261","modified":1558526121293},{"_id":"themes/hexo-theme-matery/layout/_partial/google-analytics.ejs","hash":"890c8f04c1f4905dfceb3ea9fd6efdd040d79c01","modified":1558526121293},{"_id":"themes/hexo-theme-matery/layout/_partial/head.ejs","hash":"6e51f083e032ea02ea4d07966d2d1cdf27915edf","modified":1558526121294},{"_id":"themes/hexo-theme-matery/layout/_partial/header.ejs","hash":"821e1af65990521c9e0288178d8e5b18c73a9cab","modified":1558526121294},{"_id":"themes/hexo-theme-matery/layout/_partial/index-cover.ejs","hash":"dded138c6cf821147b576658fd836d2f8900acfb","modified":1558526121295},{"_id":"themes/hexo-theme-matery/layout/_partial/livere.ejs","hash":"42728561c09589f79b698eb059ab4def53ed3642","modified":1558526121295},{"_id":"themes/hexo-theme-matery/layout/_partial/mobile-nav.ejs","hash":"8e4f8158a65843f7b4e5cde81c634ed181ee0667","modified":1558526121296},{"_id":"themes/hexo-theme-matery/layout/_partial/navigation.ejs","hash":"33c882dc2575739df042297f0ffa80d89ac10cd0","modified":1558526121296},{"_id":"themes/hexo-theme-matery/layout/_partial/paging.ejs","hash":"dfdeea9c59d157acb851d4bf44bf95f81787523c","modified":1558526121297},{"_id":"themes/hexo-theme-matery/layout/_partial/post-cover.ejs","hash":"ae8a8db3f0d630e92cf70cfcb3a9afb026b1395a","modified":1558526121297},{"_id":"themes/hexo-theme-matery/layout/_partial/post-detail-toc.ejs","hash":"82cb8090cde663fa7ad67418a802997b3057e957","modified":1558526121298},{"_id":"themes/hexo-theme-matery/layout/_partial/post-detail.ejs","hash":"ea1efc7c7a34b7798d832d8753fa39510afc4108","modified":1570284943864},{"_id":"themes/hexo-theme-matery/layout/_partial/post-statis.ejs","hash":"3b42900247d5ea4ea5b68e2be44420a0d54785ad","modified":1558526121298},{"_id":"themes/hexo-theme-matery/layout/_partial/prev-next.ejs","hash":"d0435697981030e5191436e24dd281fef915b062","modified":1558526121299},{"_id":"themes/hexo-theme-matery/layout/_partial/reprint-statement.ejs","hash":"f85a222ec3f9bc27eb7978015e63a16514b38791","modified":1558526121300},{"_id":"themes/hexo-theme-matery/layout/_partial/reward.ejs","hash":"73624d9db81e87ff0c12310bb873fbd0b5221021","modified":1558526121300},{"_id":"themes/hexo-theme-matery/layout/_partial/search.ejs","hash":"e859fe6e0259e0c123cb7ceda6e4cac836318ffc","modified":1558526121301},{"_id":"themes/hexo-theme-matery/layout/_partial/share.ejs","hash":"0f2e1e27d21492cf228e786daead985b1e1dcea4","modified":1558526121301},{"_id":"themes/hexo-theme-matery/layout/_partial/social-link.ejs","hash":"951810257f3dfafcc5156005daa0b65dd24a6296","modified":1558526121302},{"_id":"themes/hexo-theme-matery/layout/_partial/valine.ejs","hash":"8671cff27aef7298b2518dd57fe0671959f21701","modified":1558526121302},{"_id":"themes/hexo-theme-matery/layout/_widget/category-cloud.ejs","hash":"b2b22d4fc4e46b051f67216c391f629f4ff552b5","modified":1558526121303},{"_id":"themes/hexo-theme-matery/layout/_widget/category-radar.ejs","hash":"5284712d84bbaa4f0d88026ac3ec5a8c13e00056","modified":1558526121303},{"_id":"themes/hexo-theme-matery/layout/_widget/dream.ejs","hash":"2af85ddef6e61a44cbe10e8f6272a8324681ee3f","modified":1558526121304},{"_id":"themes/hexo-theme-matery/layout/_widget/music.ejs","hash":"fc50cb4bbc1f4d0e4c9f5941f1c3c74bea742db7","modified":1558526121304},{"_id":"themes/hexo-theme-matery/layout/_widget/my-gallery.ejs","hash":"9ea672db65f1e5b8fad1ffafb1614f25adc97e63","modified":1558526121305},{"_id":"themes/hexo-theme-matery/layout/_widget/my-projects.ejs","hash":"785cb588a31215876f6737213054ba0e8552fff0","modified":1558526121305},{"_id":"themes/hexo-theme-matery/layout/_widget/my-skills.ejs","hash":"599a49af8ce843878253dd95f07a06b00c269f47","modified":1558526121306},{"_id":"themes/hexo-theme-matery/layout/_widget/post-calendar.ejs","hash":"4608af6151f0e32f668c89f09343748340021478","modified":1558526121306},{"_id":"themes/hexo-theme-matery/layout/_widget/post-charts.ejs","hash":"0aaf0a111b9aa07ff37f6286eeac5506283f47f8","modified":1558526121307},{"_id":"themes/hexo-theme-matery/layout/_widget/recommend.ejs","hash":"42a88f242d9a446dc4c648575f7c05483d2d99a0","modified":1558526121307},{"_id":"themes/hexo-theme-matery/layout/_widget/tag-cloud.ejs","hash":"6310903eb0e434d6f9a59ca669aab7fae38d4797","modified":1558526121308},{"_id":"themes/hexo-theme-matery/layout/_widget/tag-wordcloud.ejs","hash":"34b625b27b2b7fe6f47c62a07c4f0a664ad06f32","modified":1558526121308},{"_id":"themes/hexo-theme-matery/layout/_widget/video.ejs","hash":"05f5e2acace5730cdf7bed650375ad88f6b5d1b7","modified":1558526121309},{"_id":"themes/hexo-theme-matery/source/css/gitment.css","hash":"d5ef623065d1fbc897119f7b70ccf7563e329917","modified":1558526121314},{"_id":"themes/hexo-theme-matery/source/css/matery.css","hash":"7293aae5bd3b480a3f2decb62b13a942363c31b4","modified":1558526121315},{"_id":"themes/hexo-theme-matery/source/css/my.css","hash":"b1327af277d269bda7561d4d6124953f0f233a6e","modified":1558527085959},{"_id":"themes/hexo-theme-matery/source/css/my-gitalk.css","hash":"4e3e855767ac5a48b13af1d6a42df13d8975e03f","modified":1558526121316},{"_id":"themes/hexo-theme-matery/source/js/matery.js","hash":"208b7806caa943c115aa0825c9c72a0781404775","modified":1558526121317},{"_id":"themes/hexo-theme-matery/source/js/search.js","hash":"77ecae23dd3edd8ad962c5b12954652bb2f7a1b6","modified":1558526121318},{"_id":"themes/hexo-theme-matery/source/medias/avatar.jpg","hash":"b7f8ca0c682f95d93f002c845aafbcb508ec2b0f","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/logo.png","hash":"4050259723bd418648ec40028a8020364e57a6a3","modified":1557674342000},{"_id":"source/_posts/front/react/umi-library-self.md","hash":"f9feb62861c0bdb6b672ac20ac2b9ba049c3f3a8","modified":1558526121262},{"_id":"themes/hexo-theme-matery/source/libs/animate/animate.min.css","hash":"5dfcbcee866e9dc564916416281885f3e320871e","modified":1558526121319},{"_id":"themes/hexo-theme-matery/source/libs/aos/aos.css","hash":"ded9739f803d114c9168d3351fded72b3b478b4c","modified":1558526121320},{"_id":"themes/hexo-theme-matery/source/libs/aos/aos.js","hash":"5a8e6d07ffa55642418ab3fd4b263aa08284b77a","modified":1558526121321},{"_id":"themes/hexo-theme-matery/source/libs/aplayer/APlayer.min.css","hash":"7f4f8913f2d46ade2def5134e2cc8684a4b87939","modified":1558526121321},{"_id":"themes/hexo-theme-matery/source/libs/aplayer/APlayer.min.js","hash":"70c0c4a9bf698747b7c058c21287ad617355e5dd","modified":1558526121323},{"_id":"themes/hexo-theme-matery/source/libs/cryptojs/crypto-js.min.js","hash":"33810b2b757fc4327bc1d3b83bb5e0d3dc1fec5b","modified":1558526121346},{"_id":"themes/hexo-theme-matery/source/libs/dplayer/DPlayer.min.css","hash":"5d52d3b34fceb9d7e11f1beaf7ed380b4249dec4","modified":1558526121347},{"_id":"themes/hexo-theme-matery/source/libs/gitalk/gitalk.css","hash":"021898a16279ac2ffe75af4f902fab2a0a39f11a","modified":1558526121357},{"_id":"themes/hexo-theme-matery/source/libs/gitment/gitment-default.css","hash":"a0625d8b432af8bdc820f8768d36cde439e7257c","modified":1558526121360},{"_id":"themes/hexo-theme-matery/source/libs/jqcloud/jqcloud-1.0.4.min.js","hash":"26849509f196a2d21bbfd15696e5d5153163b8f1","modified":1558526121361},{"_id":"themes/hexo-theme-matery/source/libs/jqcloud/jqcloud.css","hash":"4e6538c8312aeeab845d361c37a8c1a0931241f0","modified":1558526121362},{"_id":"themes/hexo-theme-matery/source/libs/masonry/masonry.pkgd.min.js","hash":"f81cd7bfcf7aa2d043bd3e6077df42656fc44b82","modified":1558526121371},{"_id":"themes/hexo-theme-matery/source/libs/others/busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/others/clicklove.js","hash":"6a39b8c683ba5dcd92f70c6ab45d1cfac3213e8e","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/scrollprogress/scrollProgress.min.js","hash":"777ffe5d07e85a14fbe97d846f45ffc0087251cc","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/tocbot/tocbot.css","hash":"f646f2bb75bcd1eb65b2788ac7bf15d4fd243ce9","modified":1558526121383},{"_id":"themes/hexo-theme-matery/source/libs/tocbot/tocbot.min.js","hash":"5ec27317f0270b8cf6b884c6f12025700b9a565c","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/cover.jpg","hash":"d4957ff7cc5e88555cd840f2956ab0561e6f1ccf","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/13.jpg","hash":"66706dfde7d910182c2f1dbadd0e9e917630b8dd","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/15.jpg","hash":"5cf9fc64d5d74ab6ba69bb8bff580fdc22ba32d0","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/16.jpg","hash":"9cac6b80b0cc8959fc8aabfbd1adcab79ebebfc9","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/2.jpg","hash":"16f1d89cdba4dce935ac0f12599e0fcfda543a93","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/21.jpg","hash":"d70b088850c3565e5b5bb9eb8fe4abe688c964cf","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/22.jpg","hash":"bf5b59d193e5ca089a7fff034c222bfa2c4dc41f","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/23.jpg","hash":"ed5ac9f616d3b99af5188a10b1761884c37e93e5","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/5.jpg","hash":"c3c1f36a1b1886037db604f151f335cd4599e970","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/7.jpg","hash":"a0246a4a560438938489cdd154e35f172b3f31b0","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/8.jpg","hash":"5a46ca4ab4c4ab2101a2af77a31a8878bccc483c","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/reward/alipay.jpg","hash":"1abc719b95d1b26f1f898e6b0a9b7609146e332f","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/reward/wechat.png","hash":"fe93385aa92fe328e01c8221a80b039be9e4e140","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/dplayer/DPlayer.min.js","hash":"82276be41d2001e820020a219b90ad5b026302d1","modified":1558526121348},{"_id":"themes/hexo-theme-matery/source/libs/gitment/gitment.js","hash":"5a13983930b019450e4fe01a407c64b3dd316be4","modified":1558526121361},{"_id":"themes/hexo-theme-matery/source/libs/jquery/jquery-2.2.0.min.js","hash":"7a551393b8360731104fdef1af36a6f3638f5855","modified":1558526121363},{"_id":"themes/hexo-theme-matery/source/libs/valine/Valine.min.js","hash":"6979c760beb550b681a06a8f11688f2d1591a70e","modified":1558526121385},{"_id":"themes/hexo-theme-matery/source/medias/banner/0.jpg","hash":"2e996db3390503bbec1661df9d52452d0ddfce15","modified":1558408409563},{"_id":"themes/hexo-theme-matery/source/medias/banner/2.jpg","hash":"0af0c00dacb39391c7a49a1f21af2dd94ef3d0cd","modified":1558408556270},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/0.jpg","hash":"2066cdda98ad0035071cd4aa7bd696eb078c0b6d","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/1.jpg","hash":"d16e28bd23ea3a63643826dde5eea6b7a9bdda5d","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/10.jpg","hash":"838e704942de076c60894d14e5f280e2724b6f68","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/11.jpg","hash":"9ed45f95b83626e3d91d6c405eb8bfe6fcb9736a","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/12.jpg","hash":"047be4239dd7e0be83243ee6b49a392a61f16b9a","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/14.jpg","hash":"8aeb816faca2d5eaea4cce9e881d6ff87b8c7cf1","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/17.jpg","hash":"f168ca5b046d10a878a7b0bcfab540e2c4428887","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/18.jpg","hash":"ae23fdfaa59bc57b7ed49e90c5d59e4b68e1eea5","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/19.jpg","hash":"57bc7c804b78b5cceb4eb1f9e51b734b75151b71","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/20.jpg","hash":"8271c4a327632b566ea62f546c083d08a0528e72","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/3.jpg","hash":"5e879652e032f02961a331b598a50b60ebe80a39","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/4.jpg","hash":"4eea5bdb5724ef1ed65790e481eda0d2fb176bf0","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/6.jpg","hash":"c63ff64bdd5f6c82da8804c7248fc519d23eaf0b","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/9.jpg","hash":"815c84778b721e3606c2bd7c099c7de7c53251ba","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/awesome/css/font-awesome.min.css","hash":"88af80502c44cd52ca81ffe7dc7276b7eccb06cf","modified":1558526121324},{"_id":"themes/hexo-theme-matery/source/libs/gitalk/gitalk.min.js","hash":"9d5dd7e092c8eaf6266e2498cff72e6c98790a05","modified":1558526121359},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/css/lightgallery.min.css","hash":"1b7227237f9785c66062a4811508916518e4132c","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.svg","hash":"3480f00d284c812d623ed16a9e0ead3fb964c72e","modified":1558526121366},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/loading.gif","hash":"15a76af2739482d8de7354abc6d8dc4fca8d145e","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/video-play.png","hash":"fbfdbe06aebf7d0c00da175a4810cf888d128f11","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/vimeo-play.png","hash":"1142b47de219dddfba2e712cd3189dec0c8b7bee","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/youtube-play.png","hash":"39150b45ec5fc03155b7ebeaa44f1829281788e2","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/js/lightgallery-all.min.js","hash":"f8cd48e1fff82ecd54a7ce3e69de8dba7c92d113","modified":1558526121370},{"_id":"themes/hexo-theme-matery/source/libs/materialize/materialize.min.css","hash":"80ae4aa0dba3634dd9bf59586d541d2dd8d8191c","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/materialize/materialize.min.js","hash":"c843f0dc497314574c608ca28cc742bb041786d5","modified":1558526121375},{"_id":"themes/hexo-theme-matery/source/libs/share/css/share.min.css","hash":"7126de5cec8371e580b7b1f22512da0985cc39e5","modified":1558526121378},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.eot","hash":"00ff749c8e202401190cc98d56087cdda716abe4","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.svg","hash":"337b4f156f6d8f4beb32c32a3db46fef361cff74","modified":1558526121380},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.ttf","hash":"afd898f59d363887418669520b24d175f966a083","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.woff","hash":"2e3fce1dcfbd6e2114e7bfbeaf72d3c62e15a1bd","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/share/js/jquery.share.min.js","hash":"16ce82901ca0e302cf47a35fb10f59009a5e7eb9","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/share/js/social-share.min.js","hash":"4df722bafde2c5d8faaace0d1f894798385a8793","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/valine/av-min.js","hash":"04c6b2782ce4610c429563110f6a20a47432fc4c","modified":1558526121386},{"_id":"themes/hexo-theme-matery/source/medias/banner/1.jpg","hash":"f824ffc3b798c9989e469717d4f2c1cd19c5f44f","modified":1558408514948},{"_id":"themes/hexo-theme-matery/source/medias/banner/3.jpg","hash":"63f7d7c10b50e6a69afa849c25e34734497a0016","modified":1558408636447},{"_id":"themes/hexo-theme-matery/source/medias/banner/5.jpg","hash":"4a08deec1dd5b4f1490e8fc23adfb75a0f88b0c4","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/banner/6.jpg","hash":"62e9586a8cec91a160f147c424a3d1d1aea360f9","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/banner/4.jpg","hash":"56850c3139cbd72a0eff0c35d8fac32c9c66dd6a","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1558526121339},{"_id":"themes/hexo-theme-matery/source/libs/echarts/echarts.min.js","hash":"8789b5e4daf0029a6c88f238f10e54d01c4fce82","modified":1558526121356},{"_id":"source/friends/index.md","hash":"47954a9b751e3cc1f5b0b19f3df07c6d60a1b845","modified":1558526121282},{"_id":"source/_data/friends.json","hash":"386cb45e4eacd0b4ba3e046392e85e7e171c32c1","modified":1558403345048},{"_id":"source/_data/musics.json","hash":"3f7d262fb670e3c6de664dbbef90334e4a7ad594","modified":1558404548447},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/0.jpg","hash":"1f2ec55fe7825475fde2601573bb622f0bf2acba","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/2.jpg","hash":"8d3c8391ff161eec70f66d69e5545a9468cc52ef","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/1.jpg","hash":"c3d5ab183b39a7140941b8375e29498f9d24f343","modified":1557674342000},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/3.jpg","hash":"d4957ff7cc5e88555cd840f2956ab0561e6f1ccf","modified":1557674342000},{"_id":"source/_posts/front/react/diy-component-pagedquery.md","hash":"d4e72371cf8ee3a29d5761e3b82ff3584901fe48","modified":1568027726615},{"_id":"source/_posts/flutter/01-environment.md","hash":"9707f73bf50d68123b567e72e6b2cd6b52ce7ea9","modified":1582465522676},{"_id":"source/_posts/other/blog_image_lib.md","hash":"dd452a1c25d9b3cf725f7efb3ddcff4655752576","modified":1582465522684},{"_id":"source/_posts/dotnetcore/signalr/05-base.md","hash":"02333cc4cc282015766a9707ccb9201b4d758278","modified":1569031790841},{"_id":"source/_posts/dotnetcore/signalr/01-introduct.md","hash":"951aa79ba69a6a79195a1f5f2416aceeb30bd062","modified":1569031792040},{"_id":"source/_posts/dotnetcore/signalr/00-introduct.md","hash":"9d3d449f7efda7d2f892bdbb0092bd6edc1629b5","modified":1569594362899},{"_id":"source/_posts/dotnetcore/signalr/01-base.md","hash":"9c57acf07338da1bab0c0df5b0d78f27c13caffb","modified":1582465522665},{"_id":"source/_posts/dotnetcore/signalr/03-message-pack.md","hash":"cc5c020e158810d03b699ad508bb6f3eba7b3e5d","modified":1582465522667},{"_id":"source/_posts/dotnetcore/signalr/02-type-hub.md","hash":"e9a3666dd03e8ef19785f4fb3fcfeec6ea38f504","modified":1582465522666},{"_id":"source/_posts/dotnetcore/signalr/04-redis.md","hash":"ee577fcd70cc56d7a99170712f50154213ac9024","modified":1582465522668},{"_id":"source/_posts/dotnetcore/signalr/06-analysis.md","hash":"0271be050b4b9e51d5d153f8673cec345b0dcc35","modified":1569494930920},{"_id":"source/_posts/dotnetcore/signalr/05-jwt.md","hash":"140a79a484c4d510c24c0312bc64e91e7071b148","modified":1569327629557},{"_id":"source/_posts/dotnetcore/signalr/08-clientdemo.md","hash":"06c4eaba31c962d93a2d6ac3c5a33cdeee0850bc","modified":1569593745399},{"_id":"source/_posts/dotnetcore/signalr/09-todo.md","hash":"424c03ec1ff02ec7cbce657e9cd5b8fd129c7c04","modified":1582465522674},{"_id":"source/_posts/dotnetcore/signalr/07-self-manager.md","hash":"f06562e8eca25a9e2a2d46ec5d7dfa5e8ee0125d","modified":1569594264792},{"_id":"themes/hexo-theme-matery/layout/_partial/weixin.ejs","hash":"00295338694f0174f30f68bf45ce2d23c64bf2ba","modified":1582465522699},{"_id":"source/_posts/docker/02docker-dockerfile.md","hash":"62eacc9080cf4d62469ec38dd86882f114984617","modified":1608901338686},{"_id":"source/_posts/nginx/01-introduct.md","hash":"72736f6f61764a26d2bd6ddaf58b763d6254e5db","modified":1608901338694},{"_id":"source/_posts/tools/ngrok.md","hash":"413f44a1ee3783f8f60627fdfae187e31ee0b04b","modified":1608901338711},{"_id":"source/_posts/redis/01-config.md","hash":"fff93e1826323ca77c3e745a3e877c2dc56a2938","modified":1608901338728},{"_id":"source/_posts/redis/02-cmd.md","hash":"f0f4d4808ab70337750d48fc514a41e45c51811a","modified":1608901338747},{"_id":"public/search.xml","hash":"83f15da36865fcffa9b86648732e012ac633eedf","modified":1608904383104},{"_id":"public/2019/11/30/nginx/01-introduct/index.html","hash":"8abec33111d6b6d40376f7b2163d0b6762e9a32f","modified":1608904383104},{"_id":"public/2019/10/05/dotnetcore/signalr/08-clientdemo/index.html","hash":"dcf6db8661affc23696d3a1565fee83733f040e3","modified":1608904383104},{"_id":"public/friends/index.html","hash":"7ef71422a320391e09e6f2583f34717908a43697","modified":1608904383104},{"_id":"public/2019/10/05/dotnetcore/signalr/09-todo/index.html","hash":"d34000a32f526f84c93c7377da6f9e7b3e31d1a1","modified":1608904383104},{"_id":"public/2019/10/03/dotnetcore/signalr/06-analysis/index.html","hash":"d38b9aedba00776a235283d3794c4d1643aa8eb8","modified":1608904383104},{"_id":"public/2019/10/04/dotnetcore/signalr/07-self-manager/index.html","hash":"9023a51de40c44736294852745388e846134e58c","modified":1608904383104},{"_id":"public/2019/10/02/dotnetcore/signalr/05-jwt/index.html","hash":"40f8c4032aed1be1aa24fde5317cf163f230a835","modified":1608904383104},{"_id":"public/2019/09/29/dotnetcore/signalr/03-message-pack/index.html","hash":"5a7078a994315d8c58da3bb77967b92483e4fae1","modified":1608904383104},{"_id":"public/2019/10/01/dotnetcore/signalr/04-redis/index.html","hash":"66de8af16a5bb811a87b349ca6785bfd710bdd3c","modified":1608904383104},{"_id":"public/2019/09/22/dotnetcore/signalr/02-type-hub/index.html","hash":"02eeb90d591b96f5b26a6234f22c7c59ceec5973","modified":1608904383104},{"_id":"public/2019/09/21/dotnetcore/signalr/01-base/index.html","hash":"28a7f94185b20a0fd74ecdd776ca591f511d048c","modified":1608904383104},{"_id":"public/2019/09/20/dotnetcore/signalr/00-introduct/index.html","hash":"288fc99e9fea9616849fbb12b003f6c72f3966e6","modified":1608904383104},{"_id":"public/2019/09/09/flutter/01-environment/index.html","hash":"338200ca6cefc6ca184e3df8d90ebf12ce847b89","modified":1608904383104},{"_id":"public/2019/08/26/other/blog-image-lib/index.html","hash":"419b70860c2c4c6b9011f38e8ef0e1d6a3bafcd8","modified":1608904383104},{"_id":"public/2019/04/26/tools/articlecollections/index.html","hash":"d76ffe994c5fa7679e30ffa6eb23e6aa039f72e9","modified":1608904383104},{"_id":"public/2019/05/22/front/react/diy-component-pagedquery/index.html","hash":"ab8ed91d3bf048b21a5dba5f3c551b36b174f8d7","modified":1608904383104},{"_id":"public/2019/04/02/front/react/umi-library-self/index.html","hash":"f6a2b0b2c847fa9e9d042c89cb4d7a38efbac537","modified":1608904383104},{"_id":"public/2018/12/17/tools/ngrok/index.html","hash":"90ceb97451fbeb9f275e430299bed9b69d4eea39","modified":1608904383104},{"_id":"public/2019/03/16/tools/travis/index.html","hash":"b468a67c558cd8c711ef1f2ed84c4c660580a58f","modified":1608904383104},{"_id":"public/2018/12/03/redis/01-config/index.html","hash":"d47f204ffb10fd53e47f8392af208934ec7b683d","modified":1608904383104},{"_id":"public/2018/09/22/front/other/vscodedebug/index.html","hash":"c1ad7175dd89795eb1e5994f67cda50e2f8e611b","modified":1608904383104},{"_id":"public/2018/12/02/redis/02-cmd/index.html","hash":"49ae7acf02289e7624465e31c487e0d48147a377","modified":1608904383104},{"_id":"public/2018/09/04/dotnetcore/consul/docker-zhong-an-zhuang-consul/index.html","hash":"a492d3789fd8a9e55b21c3893472f34d76bfdfea","modified":1608904383104},{"_id":"public/2018/06/02/docker/04docker-install-mysql/index.html","hash":"2392670719ad28e3641e686dcb30539a382f4c69","modified":1608904383104},{"_id":"public/2018/05/30/docker/02docker-dockerfile/index.html","hash":"eb9f503a09b839b422fe81c77eaf3a9f64e4a313","modified":1608904383104},{"_id":"public/archives/page/6/index.html","hash":"e2c21b85c1889330c3abaf81613c14fe0debf155","modified":1608904383104},{"_id":"public/archives/page/5/index.html","hash":"449425a65282bb4033f1e8dab1a715ad8d2fb064","modified":1608904383104},{"_id":"public/archives/2018/05/page/2/index.html","hash":"66ff85da92d9a64a8536d0ecfb11627d48f04468","modified":1608904383104},{"_id":"public/archives/2019/index.html","hash":"8cfc3e34f98d994bd8eaaddbca1ee160053f3674","modified":1608904383104},{"_id":"public/archives/2019/03/index.html","hash":"d764f231e2277b0dbecfd8b32206d3b7a09a35d8","modified":1608904383104},{"_id":"public/archives/2019/04/index.html","hash":"8d27f1eb497dc66edf7239842d233e13cde9e76c","modified":1608904383104},{"_id":"public/archives/2019/page/2/index.html","hash":"2731610ff986df2a02bd963846e86791dd9f621a","modified":1608904383104},{"_id":"public/archives/2019/05/index.html","hash":"71c8ed6053634306e48ad825a4cf695eab469e48","modified":1608904383104},{"_id":"public/archives/2019/08/index.html","hash":"5b4a285568de398b0b7ecb19c3574b163aaff883","modified":1608904383104},{"_id":"public/archives/2019/09/index.html","hash":"70bde1321ee9f9701422f2e56068609d5a6be7db","modified":1608904383104},{"_id":"public/archives/2019/10/index.html","hash":"43513e4e05555c04c898128fc8f2e66c24dbec48","modified":1608904383104},{"_id":"public/archives/2019/11/index.html","hash":"d1bd4bb7272469f5a64616d25a15211f5e7010e4","modified":1608904383104},{"_id":"public/categories/工具/page/2/index.html","hash":"44e51e23ace53218568487c6d25e8fa4236f0ba9","modified":1608904383104},{"_id":"public/categories/NetCore/page/2/index.html","hash":"71d25451ea2f1ecb94806c36bcc02d09bedddd98","modified":1608904383104},{"_id":"public/categories/其他/index.html","hash":"bcf432711457d02808b5f86d2b6507770cdb2413","modified":1608904383104},{"_id":"public/categories/Flutter/index.html","hash":"b334b818cce7e72503ac56616230f71344c93136","modified":1608904383104},{"_id":"public/categories/Nginx/index.html","hash":"39b2f3c7a7e094f104b15fb355409ad975db4da2","modified":1608904383104},{"_id":"public/categories/redis/index.html","hash":"2c6dad675de555294c0f484f2ea6b8c0c8e4d5fb","modified":1608904383104},{"_id":"public/tags/工具/page/2/index.html","hash":"6ed9b7fdc2181558cded68632bcbe8cbd34e08df","modified":1608904383104},{"_id":"public/tags/Flutter/index.html","hash":"3118c249d3d532187b11059dbc49662aece832cf","modified":1608904383104},{"_id":"public/tags/其他/index.html","hash":"c700641b02d2841661e0544cf1bd168f7f2c3f28","modified":1608904383104},{"_id":"public/tags/Signalr/index.html","hash":"cdcefe8f5fbae45f73a8eaec554c1c295f78b465","modified":1608904383104},{"_id":"public/tags/Nginx/index.html","hash":"213099e90010afa8df5a4029099b22ca40d7004c","modified":1608904383104},{"_id":"public/tags/redis/index.html","hash":"96a55f6eec4d2a8a5befa03abd7965d9d1455b1a","modified":1608904383104},{"_id":"public/medias/avatar.jpg","hash":"b7f8ca0c682f95d93f002c845aafbcb508ec2b0f","modified":1608903456587},{"_id":"public/medias/featureimages/23.jpg","hash":"ed5ac9f616d3b99af5188a10b1761884c37e93e5","modified":1608903456587},{"_id":"public/medias/featureimages/22.jpg","hash":"bf5b59d193e5ca089a7fff034c222bfa2c4dc41f","modified":1608903456587},{"_id":"public/medias/reward/wechat.png","hash":"fe93385aa92fe328e01c8221a80b039be9e4e140","modified":1608903456587},{"_id":"public/medias/reward/alipay.jpg","hash":"1abc719b95d1b26f1f898e6b0a9b7609146e332f","modified":1608903456587},{"_id":"public/libs/lightGallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1608903456587},{"_id":"public/libs/lightGallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1608903456587},{"_id":"public/libs/lightGallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1608903456587},{"_id":"public/libs/lightGallery/fonts/lg.svg","hash":"3480f00d284c812d623ed16a9e0ead3fb964c72e","modified":1608903456587},{"_id":"public/libs/lightGallery/img/loading.gif","hash":"15a76af2739482d8de7354abc6d8dc4fca8d145e","modified":1608903456587},{"_id":"public/libs/lightGallery/img/video-play.png","hash":"fbfdbe06aebf7d0c00da175a4810cf888d128f11","modified":1608903456587},{"_id":"public/libs/lightGallery/img/vimeo-play.png","hash":"1142b47de219dddfba2e712cd3189dec0c8b7bee","modified":1608903456587},{"_id":"public/libs/lightGallery/img/youtube-play.png","hash":"39150b45ec5fc03155b7ebeaa44f1829281788e2","modified":1608903456587},{"_id":"public/libs/share/fonts/iconfont.eot","hash":"00ff749c8e202401190cc98d56087cdda716abe4","modified":1608903456587},{"_id":"public/libs/share/fonts/iconfont.svg","hash":"337b4f156f6d8f4beb32c32a3db46fef361cff74","modified":1608903456587},{"_id":"public/libs/share/fonts/iconfont.ttf","hash":"afd898f59d363887418669520b24d175f966a083","modified":1608903456587},{"_id":"public/libs/share/fonts/iconfont.woff","hash":"2e3fce1dcfbd6e2114e7bfbeaf72d3c62e15a1bd","modified":1608903456587},{"_id":"public/css/prism-tomorrow.css","hash":"3b99487dfc9b4e51e9105a93743b92a761840e34","modified":1608903456587},{"_id":"public/favicon.png","hash":"20674c497b75fc889194b47fd18ecea12303d8ec","modified":1608903456587},{"_id":"public/medias/logo.png","hash":"4050259723bd418648ec40028a8020364e57a6a3","modified":1608903456587},{"_id":"public/medias/featureimages/15.jpg","hash":"5cf9fc64d5d74ab6ba69bb8bff580fdc22ba32d0","modified":1608903456587},{"_id":"public/medias/featureimages/13.jpg","hash":"66706dfde7d910182c2f1dbadd0e9e917630b8dd","modified":1608903456587},{"_id":"public/medias/featureimages/21.jpg","hash":"d70b088850c3565e5b5bb9eb8fe4abe688c964cf","modified":1608903456587},{"_id":"public/medias/featureimages/16.jpg","hash":"9cac6b80b0cc8959fc8aabfbd1adcab79ebebfc9","modified":1608903456587},{"_id":"public/medias/featureimages/2.jpg","hash":"16f1d89cdba4dce935ac0f12599e0fcfda543a93","modified":1608903456587},{"_id":"public/medias/featureimages/5.jpg","hash":"c3c1f36a1b1886037db604f151f335cd4599e970","modified":1608903456587},{"_id":"public/medias/featureimages/8.jpg","hash":"5a46ca4ab4c4ab2101a2af77a31a8878bccc483c","modified":1608903456587},{"_id":"public/medias/featureimages/7.jpg","hash":"a0246a4a560438938489cdd154e35f172b3f31b0","modified":1608903456587},{"_id":"public/medias/banner/0.jpg","hash":"2e996db3390503bbec1661df9d52452d0ddfce15","modified":1608903456587},{"_id":"public/medias/featureimages/10.jpg","hash":"838e704942de076c60894d14e5f280e2724b6f68","modified":1608903456587},{"_id":"public/medias/featureimages/0.jpg","hash":"2066cdda98ad0035071cd4aa7bd696eb078c0b6d","modified":1608903456587},{"_id":"public/medias/featureimages/1.jpg","hash":"d16e28bd23ea3a63643826dde5eea6b7a9bdda5d","modified":1608903456587},{"_id":"public/medias/featureimages/12.jpg","hash":"047be4239dd7e0be83243ee6b49a392a61f16b9a","modified":1608903456587},{"_id":"public/medias/featureimages/11.jpg","hash":"9ed45f95b83626e3d91d6c405eb8bfe6fcb9736a","modified":1608903456587},{"_id":"public/medias/featureimages/14.jpg","hash":"8aeb816faca2d5eaea4cce9e881d6ff87b8c7cf1","modified":1608903456587},{"_id":"public/medias/featureimages/18.jpg","hash":"ae23fdfaa59bc57b7ed49e90c5d59e4b68e1eea5","modified":1608903456587},{"_id":"public/medias/featureimages/17.jpg","hash":"f168ca5b046d10a878a7b0bcfab540e2c4428887","modified":1608903456587},{"_id":"public/medias/featureimages/20.jpg","hash":"8271c4a327632b566ea62f546c083d08a0528e72","modified":1608903456587},{"_id":"public/medias/featureimages/19.jpg","hash":"57bc7c804b78b5cceb4eb1f9e51b734b75151b71","modified":1608903456587},{"_id":"public/medias/featureimages/4.jpg","hash":"4eea5bdb5724ef1ed65790e481eda0d2fb176bf0","modified":1608903456587},{"_id":"public/medias/featureimages/3.jpg","hash":"5e879652e032f02961a331b598a50b60ebe80a39","modified":1608903456587},{"_id":"public/medias/featureimages/6.jpg","hash":"c63ff64bdd5f6c82da8804c7248fc519d23eaf0b","modified":1608903456587},{"_id":"public/medias/featureimages/9.jpg","hash":"815c84778b721e3606c2bd7c099c7de7c53251ba","modified":1608903456587},{"_id":"public/medias/banner/1.jpg","hash":"f824ffc3b798c9989e469717d4f2c1cd19c5f44f","modified":1608903456587},{"_id":"public/medias/banner/3.jpg","hash":"63f7d7c10b50e6a69afa849c25e34734497a0016","modified":1608903456587},{"_id":"public/libs/awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1608903456587},{"_id":"public/libs/awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1608903456587},{"_id":"public/medias/banner/bak/0.jpg","hash":"1f2ec55fe7825475fde2601573bb622f0bf2acba","modified":1608903456587},{"_id":"public/medias/banner/bak/2.jpg","hash":"8d3c8391ff161eec70f66d69e5545a9468cc52ef","modified":1608903456587},{"_id":"public/medias/banner/5.jpg","hash":"4a08deec1dd5b4f1490e8fc23adfb75a0f88b0c4","modified":1608903456587},{"_id":"public/medias/banner/6.jpg","hash":"62e9586a8cec91a160f147c424a3d1d1aea360f9","modified":1608903456587},{"_id":"public/libs/awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1608903456587},{"_id":"public/libs/awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1608903456587},{"_id":"public/libs/awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1608903456587},{"_id":"public/medias/banner/bak/3.jpg","hash":"d4957ff7cc5e88555cd840f2956ab0561e6f1ccf","modified":1608903456587},{"_id":"public/medias/banner/bak/1.jpg","hash":"c3d5ab183b39a7140941b8375e29498f9d24f343","modified":1608903456587},{"_id":"public/css/gitment.css","hash":"2bd15cc17dca35ac3ecc0acf167a23a1dd362acd","modified":1608903456587},{"_id":"public/css/my-gitalk.css","hash":"eeda46a83d0db1cc239a9cd27d544faf663f9883","modified":1608903456587},{"_id":"public/js/matery.js","hash":"92f07106944f5ef7cd72e84bb3534513d00eebe1","modified":1608903456587},{"_id":"public/css/my.css","hash":"ce1f3f1241d6a71186e30476874c2da8d8158462","modified":1608903456587},{"_id":"public/libs/aos/aos.js","hash":"02bfb40b0c4b6e9b0b4081218357145cbb327d74","modified":1608903456587},{"_id":"public/libs/aplayer/APlayer.min.css","hash":"07372a2ba507388d0fed166d761b1c2c2a659dce","modified":1608903456587},{"_id":"public/libs/jqcloud/jqcloud.css","hash":"20d9f11a19d95c70e27cb922e0d6dccbec4eae89","modified":1608903456587},{"_id":"public/libs/others/clicklove.js","hash":"6a39b8c683ba5dcd92f70c6ab45d1cfac3213e8e","modified":1608903456587},{"_id":"public/libs/jqcloud/jqcloud-1.0.4.min.js","hash":"257eaae3020599e4939f50d5008a743827f25b8c","modified":1608903456587},{"_id":"public/libs/others/busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1608903456587},{"_id":"public/libs/scrollprogress/scrollProgress.min.js","hash":"777ffe5d07e85a14fbe97d846f45ffc0087251cc","modified":1608903456587},{"_id":"public/libs/tocbot/tocbot.css","hash":"15601837bf8557c2fd111e4450ed4c8495fd11a0","modified":1608903456587},{"_id":"public/libs/tocbot/tocbot.min.js","hash":"5ec27317f0270b8cf6b884c6f12025700b9a565c","modified":1608903456587},{"_id":"public/libs/share/css/share.min.css","hash":"8a778a86f3ce9a042df6be63a9f1039631e351a5","modified":1608903456587},{"_id":"public/medias/banner/2.jpg","hash":"0af0c00dacb39391c7a49a1f21af2dd94ef3d0cd","modified":1608903456587},{"_id":"public/libs/aos/aos.css","hash":"191a3705a8f63e589a50a0ff2f2c5559f1a1b6b2","modified":1608903456587},{"_id":"public/libs/gitalk/gitalk.css","hash":"3aac1db83b0135c521187254ff302d125cc30706","modified":1608903456587},{"_id":"public/libs/gitment/gitment-default.css","hash":"2903c59ee06b965bef32e937bd69f5b0b2190717","modified":1608903456587},{"_id":"public/libs/masonry/masonry.pkgd.min.js","hash":"ff940b4ea68368ca0e4d5560cbb79fb147dfc3c5","modified":1608903456587},{"_id":"public/libs/awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1608903456587},{"_id":"public/libs/lightGallery/css/lightgallery.min.css","hash":"1b7227237f9785c66062a4811508916518e4132c","modified":1608903456587},{"_id":"public/libs/share/js/social-share.min.js","hash":"4df722bafde2c5d8faaace0d1f894798385a8793","modified":1608903456587},{"_id":"public/libs/share/js/jquery.share.min.js","hash":"16ce82901ca0e302cf47a35fb10f59009a5e7eb9","modified":1608903456587},{"_id":"public/medias/cover.jpg","hash":"d4957ff7cc5e88555cd840f2956ab0561e6f1ccf","modified":1608903456587},{"_id":"public/medias/banner/4.jpg","hash":"56850c3139cbd72a0eff0c35d8fac32c9c66dd6a","modified":1608903456587},{"_id":"public/css/matery.css","hash":"7f1dce9c593b92857daf4ee3ba7ab23e4494084a","modified":1608903456587},{"_id":"public/libs/cryptojs/crypto-js.min.js","hash":"5989527a378b55011a59522f41eeb3981518325c","modified":1608903456587},{"_id":"public/libs/dplayer/DPlayer.min.css","hash":"f7d19655f873b813ffba5d1a17145c91f82631b8","modified":1608903456587},{"_id":"public/libs/aplayer/APlayer.min.js","hash":"22caa28ff6b41a16ff40f15d38f1739e22359478","modified":1608903456587},{"_id":"public/libs/animate/animate.min.css","hash":"97afa151569f046b2e01f27c1871646e9cd87caf","modified":1608903456587},{"_id":"public/libs/lightGallery/js/lightgallery-all.min.js","hash":"9f5ef4bc8a0a3c746ca4f3c3e6d64493b1a977d8","modified":1608903456587},{"_id":"public/libs/gitment/gitment.js","hash":"28c02c45ce568e084cd1041dc493f83f9c6c88c6","modified":1608903456587},{"_id":"public/libs/valine/Valine.min.js","hash":"031c1a5640d64ab3b829395ad5a7596b9fb122e6","modified":1608903456587},{"_id":"public/libs/jquery/jquery-2.2.0.min.js","hash":"5d7e5bbfa540f0e53bd599e4305e1a4e815b5dd1","modified":1608903456587},{"_id":"public/libs/dplayer/DPlayer.min.js","hash":"c3bad7b265574fab0ae4d45867422ea1cb9d6599","modified":1608903456587},{"_id":"public/libs/materialize/materialize.min.css","hash":"580459a012f556fba86438953062013a94b201af","modified":1608903456587},{"_id":"public/libs/valine/av-min.js","hash":"2577e72b52b736d99649f9e95be8976d58563333","modified":1608903456587},{"_id":"public/libs/gitalk/gitalk.min.js","hash":"734f56442e62fe55f677e8ccae7f175445667767","modified":1608903456587},{"_id":"public/libs/awesome/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1608903456587},{"_id":"public/libs/materialize/materialize.min.js","hash":"c8b4c65651921d888cf5f27430dfe2ad190d35bf","modified":1608903456587},{"_id":"public/libs/echarts/echarts.min.js","hash":"9496f386a0da4601cad22c479cc5543913a4d67f","modified":1608903456587}],"Category":[{"name":"Docker","_id":"cjocck1n8000670uktb5o76n4"},{"name":"工具","_id":"cjocck1o7001570uk2pakmha1"},{"name":".NetCore","_id":"cjocck1pl002870ukqh7ru366"},{"name":"前端-其他","_id":"cjocck1qb003070uk5m1dk9x9"},{"name":"React","_id":"cjocck1qf003670ukxvahvvy6"},{"name":"其他","_id":"ck0sx0lq0000284scxdchfswh"},{"name":"Flutter","_id":"ck0sx0lqd000484scp127wnjj"},{"name":"Nginx","_id":"ckj4abdo30004r0scemnn9the"},{"name":"redis","_id":"ckj4abdok000cr0sc1twt2ojg"}],"Data":[{"_id":"friends","data":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}],"Page":[{"title":"关于我","date":"2018-08-14T13:44:14.000Z","comments":0,"reward":false,"about":false,"_content":"\n##### 个人信息\n姓名: ***谢新根***  \n昵称: 程序有Bug ```（英名:XXG）```  \n地址：目前浪迹于大长沙  \nQQ: 1002275364  \n自我描述: 爱代码爱生活  \n##### 技术星级 \n| 技术点 | 星级 |\n|:-------|:-----:|\n|.NET、.NETCore、js、SqlServer|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-half\"></span>|\n|Dapper、EF、PetaPoco|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span>|\n|Signalr、ABP、DDD、Redis、RabbitMQ、IdentityServer|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|CAP、Consul、Ocelot、微服务、Polly、OChars、微信公众号、微信小程序|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|React、Antd、Vue、ElementUI、TypeScript、Webpack、umi、dva、taro|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|Docker、CICD、GitLab、Linux|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|第三方支付、第三方登录、快递接口、短信接口、web快递单打印、条码打印、导出excel,word,pdf等常用第三的东西|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|puppeteer、electronjs、egg、谷歌浏览器插件等一些好玩的|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n##### 做过的系统\n- [临床试验平台](http://www.wetrial.com)\n- 跨境电商物流系统  \n- 外贸ERP     \n- 其他(懒得写了)\n\n##### 个人链接\n- [个人博客](http://blog.xxgtalk.cn)、[之前的博客](http://www.cnblogs.com/xiexingen)\n- [个人Github](http://www.github.com/xiexingen)、[公司Github](http://www.github.com/wetrial)\n- [demo](http://jui-sample.xxgtalk.cn) --(服务器比较弱)\n- [其他](https://www.cnblogs.com/xiexingen/p/4553354.html)","source":"about/index.md","raw":"---\ntitle: 关于我\ndate: 2018-08-14 21:44:14\ncomments: false\nreward: false\nabout: false\n---\n\n##### 个人信息\n姓名: ***谢新根***  \n昵称: 程序有Bug ```（英名:XXG）```  \n地址：目前浪迹于大长沙  \nQQ: 1002275364  \n自我描述: 爱代码爱生活  \n##### 技术星级 \n| 技术点 | 星级 |\n|:-------|:-----:|\n|.NET、.NETCore、js、SqlServer|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-half\"></span>|\n|Dapper、EF、PetaPoco|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span>|\n|Signalr、ABP、DDD、Redis、RabbitMQ、IdentityServer|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|CAP、Consul、Ocelot、微服务、Polly、OChars、微信公众号、微信小程序|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|React、Antd、Vue、ElementUI、TypeScript、Webpack、umi、dva、taro|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|Docker、CICD、GitLab、Linux|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|第三方支付、第三方登录、快递接口、短信接口、web快递单打印、条码打印、导出excel,word,pdf等常用第三的东西|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|puppeteer、electronjs、egg、谷歌浏览器插件等一些好玩的|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n##### 做过的系统\n- [临床试验平台](http://www.wetrial.com)\n- 跨境电商物流系统  \n- 外贸ERP     \n- 其他(懒得写了)\n\n##### 个人链接\n- [个人博客](http://blog.xxgtalk.cn)、[之前的博客](http://www.cnblogs.com/xiexingen)\n- [个人Github](http://www.github.com/xiexingen)、[公司Github](http://www.github.com/wetrial)\n- [demo](http://jui-sample.xxgtalk.cn) --(服务器比较弱)\n- [其他](https://www.cnblogs.com/xiexingen/p/4553354.html)","updated":"2019-05-22T12:12:45.785Z","path":"about/index.html","_id":"cjocck1lc000170ukl2jrnsxe","layout":"page","content":"<h5 id=\"个人信息\"><a href=\"#个人信息\" class=\"headerlink\" title=\"个人信息\"></a>个人信息</h5><p>姓名: <strong><em>谢新根</em></strong><br>昵称: 程序有Bug <code>（英名:XXG）</code><br>地址：目前浪迹于大长沙<br>QQ: 1002275364<br>自我描述: 爱代码爱生活  </p>\n<h5 id=\"技术星级\"><a href=\"#技术星级\" class=\"headerlink\" title=\"技术星级\"></a>技术星级</h5><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">技术点</th>\n<th style=\"text-align:center\">星级</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">.NET、.NETCore、js、SqlServer</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-half\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Dapper、EF、PetaPoco</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Signalr、ABP、DDD、Redis、RabbitMQ、IdentityServer</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CAP、Consul、Ocelot、微服务、Polly、OChars、微信公众号、微信小程序</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">React、Antd、Vue、ElementUI、TypeScript、Webpack、umi、dva、taro</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Docker、CICD、GitLab、Linux</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">第三方支付、第三方登录、快递接口、短信接口、web快递单打印、条码打印、导出excel,word,pdf等常用第三的东西</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">puppeteer、electronjs、egg、谷歌浏览器插件等一些好玩的</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"做过的系统\"><a href=\"#做过的系统\" class=\"headerlink\" title=\"做过的系统\"></a>做过的系统</h5><ul>\n<li><a href=\"http://www.wetrial.com\" target=\"_blank\" rel=\"noopener\">临床试验平台</a></li>\n<li>跨境电商物流系统  </li>\n<li>外贸ERP     </li>\n<li>其他(懒得写了)</li>\n</ul>\n<h5 id=\"个人链接\"><a href=\"#个人链接\" class=\"headerlink\" title=\"个人链接\"></a>个人链接</h5><ul>\n<li><a href=\"http://blog.xxgtalk.cn\">个人博客</a>、<a href=\"http://www.cnblogs.com/xiexingen\" target=\"_blank\" rel=\"noopener\">之前的博客</a></li>\n<li><a href=\"http://www.github.com/xiexingen\" target=\"_blank\" rel=\"noopener\">个人Github</a>、<a href=\"http://www.github.com/wetrial\" target=\"_blank\" rel=\"noopener\">公司Github</a></li>\n<li><a href=\"http://jui-sample.xxgtalk.cn\" target=\"_blank\" rel=\"noopener\">demo</a> –(服务器比较弱)</li>\n<li><a href=\"https://www.cnblogs.com/xiexingen/p/4553354.html\" target=\"_blank\" rel=\"noopener\">其他</a></li>\n</ul>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"","more":"<h5 id=\"个人信息\"><a href=\"#个人信息\" class=\"headerlink\" title=\"个人信息\"></a>个人信息</h5><p>姓名: <strong><em>谢新根</em></strong><br>昵称: 程序有Bug <code>（英名:XXG）</code><br>地址：目前浪迹于大长沙<br>QQ: 1002275364<br>自我描述: 爱代码爱生活  </p>\n<h5 id=\"技术星级\"><a href=\"#技术星级\" class=\"headerlink\" title=\"技术星级\"></a>技术星级</h5><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">技术点</th>\n<th style=\"text-align:center\">星级</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">.NET、.NETCore、js、SqlServer</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-half\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Dapper、EF、PetaPoco</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Signalr、ABP、DDD、Redis、RabbitMQ、IdentityServer</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CAP、Consul、Ocelot、微服务、Polly、OChars、微信公众号、微信小程序</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">React、Antd、Vue、ElementUI、TypeScript、Webpack、umi、dva、taro</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Docker、CICD、GitLab、Linux</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">第三方支付、第三方登录、快递接口、短信接口、web快递单打印、条码打印、导出excel,word,pdf等常用第三的东西</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">puppeteer、electronjs、egg、谷歌浏览器插件等一些好玩的</td>\n<td style=\"text-align:center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"做过的系统\"><a href=\"#做过的系统\" class=\"headerlink\" title=\"做过的系统\"></a>做过的系统</h5><ul>\n<li><a href=\"http://www.wetrial.com\" target=\"_blank\" rel=\"noopener\">临床试验平台</a></li>\n<li>跨境电商物流系统  </li>\n<li>外贸ERP     </li>\n<li>其他(懒得写了)</li>\n</ul>\n<h5 id=\"个人链接\"><a href=\"#个人链接\" class=\"headerlink\" title=\"个人链接\"></a>个人链接</h5><ul>\n<li><a href=\"http://blog.xxgtalk.cn\">个人博客</a>、<a href=\"http://www.cnblogs.com/xiexingen\" target=\"_blank\" rel=\"noopener\">之前的博客</a></li>\n<li><a href=\"http://www.github.com/xiexingen\" target=\"_blank\" rel=\"noopener\">个人Github</a>、<a href=\"http://www.github.com/wetrial\" target=\"_blank\" rel=\"noopener\">公司Github</a></li>\n<li><a href=\"http://jui-sample.xxgtalk.cn\" target=\"_blank\" rel=\"noopener\">demo</a> –(服务器比较弱)</li>\n<li><a href=\"https://www.cnblogs.com/xiexingen/p/4553354.html\" target=\"_blank\" rel=\"noopener\">其他</a></li>\n</ul>\n"},{"title":"所有分类","date":"2018-08-14T13:42:41.000Z","type":"categories","layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: 所有分类\ndate: 2018-08-14 21:42:41\ntype: \"categories\"\nlayout: \"categories\"\n---","updated":"2019-05-21T01:05:53.172Z","path":"categories/index.html","_id":"cjocck1le000270ukwdv8f74v","comments":1,"content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"所有标签","date":"2018-08-14T01:28:57.000Z","type":"tags","layout":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: 所有标签\ndate: 2018-08-14 09:28:57\ntype: \"tags\"\nlayout: \"tags\"\n---","updated":"2018-09-27T10:59:38.640Z","path":"tags/index.html","comments":1,"_id":"cjocck1lg000370ukq901mxob","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"友情链接","date":"2019-05-21T01:16:30.000Z","type":"friends","layout":"friends","_content":"","source":"friends/index.md","raw":"---\ntitle: 友情链接\ndate: 2019-05-21 09:16:30\ntype: \"friends\"\nlayout: \"friends\"\n---\n","updated":"2019-05-22T11:55:21.282Z","path":"friends/index.html","_id":"cjvx3y8js0000u8v85d1bvjsx","comments":1,"content":"","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"","more":""}],"Post":[{"title":"开通自己的博客","date":"2016-04-01T00:01:01.000Z","author":"谢新根","_content":"\n从hexo切换到vuepress又切回hexo啦！！！\n<!-- more -->\n\n::: tip 大家好\n我是谢新根，网名:```程序有Bug``` 性别:男 爱好:代码、生活、自行车、羽毛球 性格:沉稳而不活泼、内敛而不明骚、随和而不暴力、帅气中带点闷骚,好啦好啦 第一天开通自己的博客，到此为止吧\n:::\n","source":"_posts/helleword.md","raw":"---\ntitle: 开通自己的博客\ndate: 2016-04-01 08:01:01\nauthor: 谢新根\n---\n\n从hexo切换到vuepress又切回hexo啦！！！\n<!-- more -->\n\n::: tip 大家好\n我是谢新根，网名:```程序有Bug``` 性别:男 爱好:代码、生活、自行车、羽毛球 性格:沉稳而不活泼、内敛而不明骚、随和而不暴力、帅气中带点闷骚,好啦好啦 第一天开通自己的博客，到此为止吧\n:::\n","slug":"helleword","published":1,"updated":"2018-10-27T09:48:01.209Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1l7000070uk63w3h5s6","content":"<p>从hexo切换到vuepress又切回hexo啦！！！<br><a id=\"more\"></a></p>\n<p>::: tip 大家好<br>我是谢新根，网名:<code>程序有Bug</code> 性别:男 爱好:代码、生活、自行车、羽毛球 性格:沉稳而不活泼、内敛而不明骚、随和而不暴力、帅气中带点闷骚,好啦好啦 第一天开通自己的博客，到此为止吧<br>:::</p>\n","site":{"data":{}},"excerpt":"<p>从hexo切换到vuepress又切回hexo啦！！！<br>","more":"</p>\n<p>::: tip 大家好<br>我是谢新根，网名:<code>程序有Bug</code> 性别:男 爱好:代码、生活、自行车、羽毛球 性格:沉稳而不活泼、内敛而不明骚、随和而不暴力、帅气中带点闷骚,好啦好啦 第一天开通自己的博客，到此为止吧<br>:::</p>"},{"title":"Docker安装及配置加速镜像","date":"2018-05-30T01:15:08.000Z","_content":"\nDocker安装及配置加速镜像\n<!-- more -->\n\n> 个人阿里云加速镜像个人地址&nbsp; https://noe4mlw6.mirror.aliyuncs.com\n\n***\n##### CentOS 7 (使用yum进行安装)\n如果之前安装过】先卸载依赖  \n  ``` bash\n    sudo yum remove docker \\\n    docker-common \\\n    container-selinux \\\n    docker-selinux \\\n    docker-engine \\\n    docker-engine-selinux\n  ```\n1. 直接安装  \ncurl -sSL https://get.docker.com/ | sh\n2. 启动 并设置开机启动  \n```\nsudo systemctl start docker\nsudo systemctl enable docker\n```\n\n> 配置docker使用国内镜像  \n如何配置镜像加速器  \n您可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器：  \n```\n{\n  \"registry-mirrors\": [\"https://noe4mlw6.mirror.aliyuncs.com\"]\n}\n```\n重启docker  \n```\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n###  安装docker-compose\n1. sudo curl -L https://github.com/docker/compose/releases/download/1.20.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose  \n2. sudo chmod a+x /usr/local/bin/docker-compose \n> 卸载  \nsudo rm /usr/local/bin/docker-compose","source":"_posts/docker/01docker-config.md","raw":"---\ntitle: Docker安装及配置加速镜像\ndate: 2018-05-30 09:15:08 \ncategories: ['Docker']\ntags: ['Docker']\n---\n\nDocker安装及配置加速镜像\n<!-- more -->\n\n> 个人阿里云加速镜像个人地址&nbsp; https://noe4mlw6.mirror.aliyuncs.com\n\n***\n##### CentOS 7 (使用yum进行安装)\n如果之前安装过】先卸载依赖  \n  ``` bash\n    sudo yum remove docker \\\n    docker-common \\\n    container-selinux \\\n    docker-selinux \\\n    docker-engine \\\n    docker-engine-selinux\n  ```\n1. 直接安装  \ncurl -sSL https://get.docker.com/ | sh\n2. 启动 并设置开机启动  \n```\nsudo systemctl start docker\nsudo systemctl enable docker\n```\n\n> 配置docker使用国内镜像  \n如何配置镜像加速器  \n您可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器：  \n```\n{\n  \"registry-mirrors\": [\"https://noe4mlw6.mirror.aliyuncs.com\"]\n}\n```\n重启docker  \n```\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n###  安装docker-compose\n1. sudo curl -L https://github.com/docker/compose/releases/download/1.20.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose  \n2. sudo chmod a+x /usr/local/bin/docker-compose \n> 卸载  \nsudo rm /usr/local/bin/docker-compose","slug":"docker/01docker-config","published":1,"updated":"2018-09-27T10:59:38.606Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1n4000470uk6nko1z50","content":"<p>Docker安装及配置加速镜像<br><a id=\"more\"></a></p>\n<blockquote>\n<p>个人阿里云加速镜像个人地址&nbsp; <a href=\"https://noe4mlw6.mirror.aliyuncs.com\" target=\"_blank\" rel=\"noopener\">https://noe4mlw6.mirror.aliyuncs.com</a></p>\n</blockquote>\n<hr>\n<h5 id=\"CentOS-7-使用yum进行安装\"><a href=\"#CentOS-7-使用yum进行安装\" class=\"headerlink\" title=\"CentOS 7 (使用yum进行安装)\"></a>CentOS 7 (使用yum进行安装)</h5><p>如果之前安装过】先卸载依赖<br>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum remove docker \\</span><br><span class=\"line\">docker-common \\</span><br><span class=\"line\">container-selinux \\</span><br><span class=\"line\">docker-selinux \\</span><br><span class=\"line\">docker-engine \\</span><br><span class=\"line\">docker-engine-selinux</span><br></pre></td></tr></table></figure></p>\n<ol>\n<li>直接安装<br>curl -sSL <a href=\"https://get.docker.com/\" target=\"_blank\" rel=\"noopener\">https://get.docker.com/</a> | sh</li>\n<li>启动 并设置开机启动  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl start docker</span><br><span class=\"line\">sudo systemctl enable docker</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<blockquote>\n<p>配置docker使用国内镜像<br>如何配置镜像加速器<br>您可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;registry-mirrors&quot;: [&quot;https://noe4mlw6.mirror.aliyuncs.com&quot;]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>重启docker<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"安装docker-compose\"><a href=\"#安装docker-compose\" class=\"headerlink\" title=\"安装docker-compose\"></a>安装docker-compose</h3><ol>\n<li>sudo curl -L <a href=\"https://github.com/docker/compose/releases/download/1.20.0/docker-compose-`uname\" target=\"_blank\" rel=\"noopener\">https://github.com/docker/compose/releases/download/1.20.0/docker-compose-`uname</a> -s<code>-</code>uname -m` -o /usr/local/bin/docker-compose  </li>\n<li>sudo chmod a+x /usr/local/bin/docker-compose <blockquote>\n<p>卸载<br>sudo rm /usr/local/bin/docker-compose</p>\n</blockquote>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>Docker安装及配置加速镜像<br>","more":"</p>\n<blockquote>\n<p>个人阿里云加速镜像个人地址&nbsp; <a href=\"https://noe4mlw6.mirror.aliyuncs.com\" target=\"_blank\" rel=\"noopener\">https://noe4mlw6.mirror.aliyuncs.com</a></p>\n</blockquote>\n<hr>\n<h5 id=\"CentOS-7-使用yum进行安装\"><a href=\"#CentOS-7-使用yum进行安装\" class=\"headerlink\" title=\"CentOS 7 (使用yum进行安装)\"></a>CentOS 7 (使用yum进行安装)</h5><p>如果之前安装过】先卸载依赖<br>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum remove docker \\</span><br><span class=\"line\">docker-common \\</span><br><span class=\"line\">container-selinux \\</span><br><span class=\"line\">docker-selinux \\</span><br><span class=\"line\">docker-engine \\</span><br><span class=\"line\">docker-engine-selinux</span><br></pre></td></tr></table></figure></p>\n<ol>\n<li>直接安装<br>curl -sSL <a href=\"https://get.docker.com/\" target=\"_blank\" rel=\"noopener\">https://get.docker.com/</a> | sh</li>\n<li>启动 并设置开机启动  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl start docker</span><br><span class=\"line\">sudo systemctl enable docker</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<blockquote>\n<p>配置docker使用国内镜像<br>如何配置镜像加速器<br>您可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;registry-mirrors&quot;: [&quot;https://noe4mlw6.mirror.aliyuncs.com&quot;]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<p>重启docker<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"安装docker-compose\"><a href=\"#安装docker-compose\" class=\"headerlink\" title=\"安装docker-compose\"></a>安装docker-compose</h3><ol>\n<li>sudo curl -L <a href=\"https://github.com/docker/compose/releases/download/1.20.0/docker-compose-`uname\" target=\"_blank\" rel=\"noopener\">https://github.com/docker/compose/releases/download/1.20.0/docker-compose-`uname</a> -s<code>-</code>uname -m` -o /usr/local/bin/docker-compose  </li>\n<li>sudo chmod a+x /usr/local/bin/docker-compose <blockquote>\n<p>卸载<br>sudo rm /usr/local/bin/docker-compose</p>\n</blockquote>\n</li>\n</ol>"},{"title":"Docker常用命令","abbrlink":7569,"date":"2018-05-28T01:10:10.000Z","_content":"\nDocker常用命令\n<!-- more -->\n\n| 命令 | 说明 | 参数\n| :--- | :--- | :---\n|docker --version | 查看当前docker版本 |\n|docker ps    | 查看当前正在运行的容器 |\n|docker images | 查看本地所有镜像 |\n|docker pull [镜像名称]|  拉取一个镜像到本地  |\n|docker run [容器名称]| 运行一个容器  |\n|docker rm [容器名称] | 删除本地使用过的容器  |\n|docker start [Name] | 启动指定容器  |\n|docker stop [Name] | 关闭指定容器  |\n|docker kill [Name] | 强制关闭指定容器  |\n|docker pause [Name]|暂停指定容器 |\n|docker unpause [Name]|恢复指定容器 |\n|docker rmi -f $(docker images -a -q)|  移除所有images  |\n|docker rmi $(docker images -f 'dangling=true' -q)|移除none的images  \n|docker inspect [容器名称] | 查看容器的信息  |\n|docker exec -it [容器名称] bash | 在容器内执行bash 比如执行后可以执行ls查看目录 也可以创建文件等  |\n|docker rm -fv [容器Id] | 停止、删除容器、清除数据  |\n|docker images -f [option] | 过滤查询 | \n|docker logs -f [container-name]| 查看日志\n|docker history [container-name]| 查看镜像的构建历史\n\n* 数据卷\n-v 主机目录:容器目录   \ndocker run -it -v /docker/data:/config [--privileged=true] 表示将宿主机中的/docker目录跟容器中的/config目录做一个映射，如果没有将自动创建  \n> 如果遇到数据卷没权限访问，则在后面增加 --privileged=true即可\n\n* 数据卷容器\n--volumns-form containerId|name  表示容器数据卷从name容器同步  \n> docker run -it --name xxg2 --volumns-from xxg1 nginx\n\nwarning 温馨提示\n* docker run -p 8001:80   &nbsp;&nbsp;--运行 指定端口 8001外部端口  80表示内部端口\n* docker run -d     \t\t&nbsp;&nbsp;--detach 还可以继续操作 不会阻塞\n* docker run --name\t\t&nbsp;&nbsp;--运行的docker镜像的名称\n* docker run -p 8001:80 &nbsp;&nbsp;--name myapi helloapi:latest  \n表示运行docker中名为helloapi的容器 版本为latest docker的端口为80 本机的端口8001 名字为myapi\n* docker ps -a\t\t\t&nbsp;&nbsp;--查看所有容器 不管有没运行\n* 过滤查询  \n docker images --filter \"before=image1\" 查询image1之后的  \n docker images --filter \"since=image3\"  查询image3之前的  \n docker images \"wechat:v1.3.*\"  查询wechat:1.3.x的  \n docker rmi -f $(docker images \"wechat:v1.2.*\" -q) 移除wechat:v1.2.*版本的\n* docker logs查看日志\n docker logs -f gitlab 查看gitlab容器所有日志\n docker logs --tail 20 -f gitlab 查看gitlab最近20条的日志\n docker logs --since 30s -f gitlab 查看gitlab最近30s的日志\n\n* docker inspect 查看日志文件位置  \n``` bash\ndocker inspect --format='{{.LogPath}}' mysql  \n```\n* 清空docker实例的日志内容  \n\n``` bash\n$(docker inspect --format='{{.LogPath}}' <容器ID>)\n```\n\n* 退出 -it  \nexit 或者ctrl+p+q\n:::\n\n\n\n","source":"_posts/docker/00command.md","raw":"---\ntitle: Docker常用命令\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 7569\ndate: 2018-05-28 09:10:10\n---\n\nDocker常用命令\n<!-- more -->\n\n| 命令 | 说明 | 参数\n| :--- | :--- | :---\n|docker --version | 查看当前docker版本 |\n|docker ps    | 查看当前正在运行的容器 |\n|docker images | 查看本地所有镜像 |\n|docker pull [镜像名称]|  拉取一个镜像到本地  |\n|docker run [容器名称]| 运行一个容器  |\n|docker rm [容器名称] | 删除本地使用过的容器  |\n|docker start [Name] | 启动指定容器  |\n|docker stop [Name] | 关闭指定容器  |\n|docker kill [Name] | 强制关闭指定容器  |\n|docker pause [Name]|暂停指定容器 |\n|docker unpause [Name]|恢复指定容器 |\n|docker rmi -f $(docker images -a -q)|  移除所有images  |\n|docker rmi $(docker images -f 'dangling=true' -q)|移除none的images  \n|docker inspect [容器名称] | 查看容器的信息  |\n|docker exec -it [容器名称] bash | 在容器内执行bash 比如执行后可以执行ls查看目录 也可以创建文件等  |\n|docker rm -fv [容器Id] | 停止、删除容器、清除数据  |\n|docker images -f [option] | 过滤查询 | \n|docker logs -f [container-name]| 查看日志\n|docker history [container-name]| 查看镜像的构建历史\n\n* 数据卷\n-v 主机目录:容器目录   \ndocker run -it -v /docker/data:/config [--privileged=true] 表示将宿主机中的/docker目录跟容器中的/config目录做一个映射，如果没有将自动创建  \n> 如果遇到数据卷没权限访问，则在后面增加 --privileged=true即可\n\n* 数据卷容器\n--volumns-form containerId|name  表示容器数据卷从name容器同步  \n> docker run -it --name xxg2 --volumns-from xxg1 nginx\n\nwarning 温馨提示\n* docker run -p 8001:80   &nbsp;&nbsp;--运行 指定端口 8001外部端口  80表示内部端口\n* docker run -d     \t\t&nbsp;&nbsp;--detach 还可以继续操作 不会阻塞\n* docker run --name\t\t&nbsp;&nbsp;--运行的docker镜像的名称\n* docker run -p 8001:80 &nbsp;&nbsp;--name myapi helloapi:latest  \n表示运行docker中名为helloapi的容器 版本为latest docker的端口为80 本机的端口8001 名字为myapi\n* docker ps -a\t\t\t&nbsp;&nbsp;--查看所有容器 不管有没运行\n* 过滤查询  \n docker images --filter \"before=image1\" 查询image1之后的  \n docker images --filter \"since=image3\"  查询image3之前的  \n docker images \"wechat:v1.3.*\"  查询wechat:1.3.x的  \n docker rmi -f $(docker images \"wechat:v1.2.*\" -q) 移除wechat:v1.2.*版本的\n* docker logs查看日志\n docker logs -f gitlab 查看gitlab容器所有日志\n docker logs --tail 20 -f gitlab 查看gitlab最近20条的日志\n docker logs --since 30s -f gitlab 查看gitlab最近30s的日志\n\n* docker inspect 查看日志文件位置  \n``` bash\ndocker inspect --format='{{.LogPath}}' mysql  \n```\n* 清空docker实例的日志内容  \n\n``` bash\n$(docker inspect --format='{{.LogPath}}' <容器ID>)\n```\n\n* 退出 -it  \nexit 或者ctrl+p+q\n:::\n\n\n\n","slug":"docker/00command","published":1,"updated":"2020-12-25T13:05:37.420Z","_id":"cjocck1n6000570uknw7d3nuj","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Docker常用命令<br><a id=\"more\"></a></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">参数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">docker –version</td>\n<td style=\"text-align:left\">查看当前docker版本</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker ps</td>\n<td style=\"text-align:left\">查看当前正在运行的容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker images</td>\n<td style=\"text-align:left\">查看本地所有镜像</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker pull [镜像名称]</td>\n<td style=\"text-align:left\">拉取一个镜像到本地</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker run [容器名称]</td>\n<td style=\"text-align:left\">运行一个容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker rm [容器名称]</td>\n<td style=\"text-align:left\">删除本地使用过的容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker start [Name]</td>\n<td style=\"text-align:left\">启动指定容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker stop [Name]</td>\n<td style=\"text-align:left\">关闭指定容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker kill [Name]</td>\n<td style=\"text-align:left\">强制关闭指定容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker pause [Name]</td>\n<td style=\"text-align:left\">暂停指定容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker unpause [Name]</td>\n<td style=\"text-align:left\">恢复指定容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker rmi -f $(docker images -a -q)</td>\n<td style=\"text-align:left\">移除所有images</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker rmi $(docker images -f ‘dangling=true’ -q)</td>\n<td style=\"text-align:left\">移除none的images  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker inspect [容器名称]</td>\n<td style=\"text-align:left\">查看容器的信息</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker exec -it [容器名称] bash</td>\n<td style=\"text-align:left\">在容器内执行bash 比如执行后可以执行ls查看目录 也可以创建文件等</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker rm -fv [容器Id]</td>\n<td style=\"text-align:left\">停止、删除容器、清除数据</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker images -f [option]</td>\n<td style=\"text-align:left\">过滤查询</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker logs -f [container-name]</td>\n<td style=\"text-align:left\">查看日志</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker history [container-name]</td>\n<td style=\"text-align:left\">查看镜像的构建历史</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><p>数据卷<br>-v 主机目录:容器目录<br>docker run -it -v /docker/data:/config [–privileged=true] 表示将宿主机中的/docker目录跟容器中的/config目录做一个映射，如果没有将自动创建  </p>\n<blockquote>\n<p>如果遇到数据卷没权限访问，则在后面增加 –privileged=true即可</p>\n</blockquote>\n</li>\n<li><p>数据卷容器<br>–volumns-form containerId|name  表示容器数据卷从name容器同步  </p>\n<blockquote>\n<p>docker run -it –name xxg2 –volumns-from xxg1 nginx</p>\n</blockquote>\n</li>\n</ul>\n<p>warning 温馨提示</p>\n<ul>\n<li>docker run -p 8001:80   &nbsp;&nbsp;–运行 指定端口 8001外部端口  80表示内部端口</li>\n<li>docker run -d             &nbsp;&nbsp;–detach 还可以继续操作 不会阻塞</li>\n<li>docker run –name        &nbsp;&nbsp;–运行的docker镜像的名称</li>\n<li>docker run -p 8001:80 &nbsp;&nbsp;–name myapi helloapi:latest<br>表示运行docker中名为helloapi的容器 版本为latest docker的端口为80 本机的端口8001 名字为myapi</li>\n<li>docker ps -a            &nbsp;&nbsp;–查看所有容器 不管有没运行</li>\n<li>过滤查询<br>docker images –filter “before=image1” 查询image1之后的<br>docker images –filter “since=image3”  查询image3之前的<br>docker images “wechat:v1.3.<em>“  查询wechat:1.3.x的<br>docker rmi -f $(docker images “wechat:v1.2.</em>“ -q) 移除wechat:v1.2.*版本的</li>\n<li><p>docker logs查看日志<br>docker logs -f gitlab 查看gitlab容器所有日志<br>docker logs –tail 20 -f gitlab 查看gitlab最近20条的日志<br>docker logs –since 30s -f gitlab 查看gitlab最近30s的日志</p>\n</li>\n<li><p>docker inspect 查看日志文件位置  </p>\n<pre class=\" language-bash\"><code class=\"language-bash\">docker inspect --format<span class=\"token operator\">=</span><span class=\"token string\">'&amp;#123;&amp;#123;.LogPath&amp;#125;&amp;#125;'</span> mysql  \n</code></pre>\n</li>\n<li>清空docker实例的日志内容  </li>\n</ul>\n<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">$(</span>docker inspect --format<span class=\"token operator\">=</span><span class=\"token string\">'&amp;#123;&amp;#123;.LogPath&amp;#125;&amp;#125;'</span> <span class=\"token operator\">&lt;</span>容器ID<span class=\"token operator\">></span><span class=\"token punctuation\">)</span>\n</code></pre>\n<ul>\n<li>退出 -it<br>exit 或者ctrl+p+q<br>:::</li>\n</ul>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Docker常用命令<br>","more":"</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">参数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">docker –version</td>\n<td style=\"text-align:left\">查看当前docker版本</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker ps</td>\n<td style=\"text-align:left\">查看当前正在运行的容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker images</td>\n<td style=\"text-align:left\">查看本地所有镜像</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker pull [镜像名称]</td>\n<td style=\"text-align:left\">拉取一个镜像到本地</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker run [容器名称]</td>\n<td style=\"text-align:left\">运行一个容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker rm [容器名称]</td>\n<td style=\"text-align:left\">删除本地使用过的容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker start [Name]</td>\n<td style=\"text-align:left\">启动指定容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker stop [Name]</td>\n<td style=\"text-align:left\">关闭指定容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker kill [Name]</td>\n<td style=\"text-align:left\">强制关闭指定容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker pause [Name]</td>\n<td style=\"text-align:left\">暂停指定容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker unpause [Name]</td>\n<td style=\"text-align:left\">恢复指定容器</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker rmi -f $(docker images -a -q)</td>\n<td style=\"text-align:left\">移除所有images</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker rmi $(docker images -f ‘dangling=true’ -q)</td>\n<td style=\"text-align:left\">移除none的images  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker inspect [容器名称]</td>\n<td style=\"text-align:left\">查看容器的信息</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker exec -it [容器名称] bash</td>\n<td style=\"text-align:left\">在容器内执行bash 比如执行后可以执行ls查看目录 也可以创建文件等</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker rm -fv [容器Id]</td>\n<td style=\"text-align:left\">停止、删除容器、清除数据</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker images -f [option]</td>\n<td style=\"text-align:left\">过滤查询</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker logs -f [container-name]</td>\n<td style=\"text-align:left\">查看日志</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">docker history [container-name]</td>\n<td style=\"text-align:left\">查看镜像的构建历史</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><p>数据卷<br>-v 主机目录:容器目录<br>docker run -it -v /docker/data:/config [–privileged=true] 表示将宿主机中的/docker目录跟容器中的/config目录做一个映射，如果没有将自动创建  </p>\n<blockquote>\n<p>如果遇到数据卷没权限访问，则在后面增加 –privileged=true即可</p>\n</blockquote>\n</li>\n<li><p>数据卷容器<br>–volumns-form containerId|name  表示容器数据卷从name容器同步  </p>\n<blockquote>\n<p>docker run -it –name xxg2 –volumns-from xxg1 nginx</p>\n</blockquote>\n</li>\n</ul>\n<p>warning 温馨提示</p>\n<ul>\n<li>docker run -p 8001:80   &nbsp;&nbsp;–运行 指定端口 8001外部端口  80表示内部端口</li>\n<li>docker run -d             &nbsp;&nbsp;–detach 还可以继续操作 不会阻塞</li>\n<li>docker run –name        &nbsp;&nbsp;–运行的docker镜像的名称</li>\n<li>docker run -p 8001:80 &nbsp;&nbsp;–name myapi helloapi:latest<br>表示运行docker中名为helloapi的容器 版本为latest docker的端口为80 本机的端口8001 名字为myapi</li>\n<li>docker ps -a            &nbsp;&nbsp;–查看所有容器 不管有没运行</li>\n<li>过滤查询<br>docker images –filter “before=image1” 查询image1之后的<br>docker images –filter “since=image3”  查询image3之前的<br>docker images “wechat:v1.3.<em>“  查询wechat:1.3.x的<br>docker rmi -f $(docker images “wechat:v1.2.</em>“ -q) 移除wechat:v1.2.*版本的</li>\n<li><p>docker logs查看日志<br>docker logs -f gitlab 查看gitlab容器所有日志<br>docker logs –tail 20 -f gitlab 查看gitlab最近20条的日志<br>docker logs –since 30s -f gitlab 查看gitlab最近30s的日志</p>\n</li>\n<li><p>docker inspect 查看日志文件位置  </p>\n<pre><code class=\"bash\">docker inspect --format=&#39;&#123;&#123;.LogPath&#125;&#125;&#39; mysql  \n</code></pre>\n</li>\n<li>清空docker实例的日志内容  </li>\n</ul>\n<pre><code class=\"bash\">$(docker inspect --format=&#39;&#123;&#123;.LogPath&#125;&#125;&#39; &lt;容器ID&gt;)\n</code></pre>\n<ul>\n<li>退出 -it<br>exit 或者ctrl+p+q<br>:::</li>\n</ul>"},{"title":"Docker安装mongodb","date":"2018-06-01T01:15:10.000Z","_content":"\nDocker安装mongodb\n<!-- more -->\n\n1. 配置好docker的加速镜像[参考02Docker安装及配置]  \n2. docker pull mongo 拉去mongo镜像  \n3. 启动docker实例  \n> 方式一  \ndocker run -d -p 27017:27017 --name mongodb mongo   \n> 方式二 将容器的文件挂在到Host Volume  \n--首先创建文件夹  /docker/mongo/config  以及/docker/mongo/data 用于与docker中mongo实例链接  然后运行命令\n``` bash\ndocker run -d -p 27017:27017 --name mongo01 -v /docker/mongo/config:/data/configdb -v=/docker/mongo/data:/data/db mongo\n```","source":"_posts/docker/03docker-mongodb.md","raw":"---\ntitle: Docker安装mongodb\ndate: 2018-06-01 09:15:10 \ncategories: ['Docker']\ntags: ['Docker']\n---\n\nDocker安装mongodb\n<!-- more -->\n\n1. 配置好docker的加速镜像[参考02Docker安装及配置]  \n2. docker pull mongo 拉去mongo镜像  \n3. 启动docker实例  \n> 方式一  \ndocker run -d -p 27017:27017 --name mongodb mongo   \n> 方式二 将容器的文件挂在到Host Volume  \n--首先创建文件夹  /docker/mongo/config  以及/docker/mongo/data 用于与docker中mongo实例链接  然后运行命令\n``` bash\ndocker run -d -p 27017:27017 --name mongo01 -v /docker/mongo/config:/data/configdb -v=/docker/mongo/data:/data/db mongo\n```","slug":"docker/03docker-mongodb","published":1,"updated":"2018-09-27T10:59:38.606Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1nc000870ukidbf7q3o","content":"<p>Docker安装mongodb<br><a id=\"more\"></a></p>\n<ol>\n<li>配置好docker的加速镜像[参考02Docker安装及配置]  </li>\n<li>docker pull mongo 拉去mongo镜像  </li>\n<li>启动docker实例  <blockquote>\n<p>方式一<br>docker run -d -p 27017:27017 –name mongodb mongo<br>方式二 将容器的文件挂在到Host Volume<br>–首先创建文件夹  /docker/mongo/config  以及/docker/mongo/data 用于与docker中mongo实例链接  然后运行命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -p 27017:27017 --name mongo01 -v /docker/mongo/config:/data/configdb -v=/docker/mongo/data:/data/db mongo</span><br></pre></td></tr></table></figure></blockquote>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>Docker安装mongodb<br>","more":"</p>\n<ol>\n<li>配置好docker的加速镜像[参考02Docker安装及配置]  </li>\n<li>docker pull mongo 拉去mongo镜像  </li>\n<li>启动docker实例  <blockquote>\n<p>方式一<br>docker run -d -p 27017:27017 –name mongodb mongo<br>方式二 将容器的文件挂在到Host Volume<br>–首先创建文件夹  /docker/mongo/config  以及/docker/mongo/data 用于与docker中mongo实例链接  然后运行命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d -p 27017:27017 --name mongo01 -v /docker/mongo/config:/data/configdb -v=/docker/mongo/data:/data/db mongo</span><br></pre></td></tr></table></figure></blockquote>\n</li>\n</ol>"},{"title":"Docker安装MsSqlserver","date":"2018-06-02T01:25:10.000Z","_content":"Docker安装MsSqlserver\n<!-- more -->\n> 未成功\n1. 执行命令  \n``` sql\n docker run -e 'ACCEPT_EULA=Y' -e 'MSSQL_SA_PASSWORD=Abcd1234' -v=/docker/mssql:/var/opt/mssql  -p 1433:1433 --name sqlserver  -d microsoft/mssql-server-linux:2017-latest  \n* * * * * * * * * 备注 * * * * * * * * * \n docker run -e 'ACCEPT_EULA=Y'  --是否接受协议\n    -e 'MSSQL_SA_PASSWORD=<YourStrong!Passw0rd>' --设置密码\n    -p 1433:1433    --端口\n    --name sqlserver       --用户\n   -d microsoft/mssql-server-linux:2017-latest --2017latest版本\n```\n","source":"_posts/docker/04docker-mssqlserver.md","raw":"---\ntitle: Docker安装MsSqlserver\ndate: 2018-06-02 09:25:10 \ncategories: ['Docker']\ntags: ['Docker']\n---\nDocker安装MsSqlserver\n<!-- more -->\n> 未成功\n1. 执行命令  \n``` sql\n docker run -e 'ACCEPT_EULA=Y' -e 'MSSQL_SA_PASSWORD=Abcd1234' -v=/docker/mssql:/var/opt/mssql  -p 1433:1433 --name sqlserver  -d microsoft/mssql-server-linux:2017-latest  \n* * * * * * * * * 备注 * * * * * * * * * \n docker run -e 'ACCEPT_EULA=Y'  --是否接受协议\n    -e 'MSSQL_SA_PASSWORD=<YourStrong!Passw0rd>' --设置密码\n    -p 1433:1433    --端口\n    --name sqlserver       --用户\n   -d microsoft/mssql-server-linux:2017-latest --2017latest版本\n```\n","slug":"docker/04docker-mssqlserver","published":1,"updated":"2018-09-27T10:59:38.607Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1nd000970uka1cs7m2g","content":"<p>Docker安装MsSqlserver<br><a id=\"more\"></a></p>\n<blockquote>\n<p>未成功</p>\n<ol>\n<li>执行命令  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> docker run -e 'ACCEPT_EULA=Y' -e 'MSSQL_SA_PASSWORD=Abcd1234' -v=/docker/mssql:/var/opt/mssql  -p 1433:1433 <span class=\"comment\">--name sqlserver  -d microsoft/mssql-server-linux:2017-latest  </span></span><br><span class=\"line\">* * * * * * * * * 备注 * * * * * * * * * </span><br><span class=\"line\"> docker run -e 'ACCEPT_EULA=Y'  <span class=\"comment\">--是否接受协议</span></span><br><span class=\"line\">    -e 'MSSQL_SA_PASSWORD=&lt;YourStrong!Passw0rd&gt;' --设置密码</span><br><span class=\"line\">    -p 1433:1433    <span class=\"comment\">--端口</span></span><br><span class=\"line\">    <span class=\"comment\">--name sqlserver       --用户</span></span><br><span class=\"line\">   -d microsoft/mssql-server-linux:2017-latest <span class=\"comment\">--2017latest版本</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</blockquote>\n","site":{"data":{}},"excerpt":"<p>Docker安装MsSqlserver<br>","more":"</p>\n<blockquote>\n<p>未成功</p>\n<ol>\n<li>执行命令  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> docker run -e 'ACCEPT_EULA=Y' -e 'MSSQL_SA_PASSWORD=Abcd1234' -v=/docker/mssql:/var/opt/mssql  -p 1433:1433 <span class=\"comment\">--name sqlserver  -d microsoft/mssql-server-linux:2017-latest  </span></span><br><span class=\"line\">* * * * * * * * * 备注 * * * * * * * * * </span><br><span class=\"line\"> docker run -e 'ACCEPT_EULA=Y'  <span class=\"comment\">--是否接受协议</span></span><br><span class=\"line\">    -e 'MSSQL_SA_PASSWORD=&lt;YourStrong!Passw0rd&gt;' --设置密码</span><br><span class=\"line\">    -p 1433:1433    <span class=\"comment\">--端口</span></span><br><span class=\"line\">    <span class=\"comment\">--name sqlserver       --用户</span></span><br><span class=\"line\">   -d microsoft/mssql-server-linux:2017-latest <span class=\"comment\">--2017latest版本</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</blockquote>"},{"title":"Docker制作WebApi&MySql","date":"2018-06-03T01:30:10.000Z","comments":0,"img":null,"_content":"Docker制作WebApi&MySql 直接上图\n<!-- more -->\n\n![](http://qiniu.xxgtalk.cn/blog/images/docker/050a01.png)\n1. docker文件  \n    ``` docker\n    FROM microsoft/aspnetcore-build as build-env\n    WORKDIR /code\n    COPY *.csproj ./\n    RUN dotnet restore\n\n    COPY . ./\n    RUN dotnet publish -c Release -o out\n\n    FROM microsoft/aspnetcore\n    WORKDIR /app\n    COPY --from=build-env /code/out ./\n\n    EXPOSE 50000\n    ENTRYPOINT [\"dotnet\",\"WebApiDocker.dll\"]\n    ```\n2. 编译docker文件  \n    ``` docker\n    docker build -t  xxg/aspnetcore:1.0 .\n    ```\n3. 使用该镜像启动一个容器  \na. docker run -d -p 5000:80  --name api01 --link mysql01:db xxg/aspnetcore:1.0  \nb. 使用bridge形式  \ndocker network create -d bridge mybridge\t\t//创建一个网络  \ndocker run -d -p 5000:5000 --net mybridge --name api1 xxg/aspnetcore:1.0  \ndocker network connect mysql01  mybridge\t//表示将mysql01跟mybridge网络连接起来  \n    >--link mysql01:db\t\t--表示将mysql01取个别名db并连接到当前容器  \n    >--net mybridge\t\t--表示使用指定网络","source":"_posts/docker/05docker-webapi-mysql.md","raw":"---\ntitle: Docker制作WebApi&MySql\ndate: 2018-06-03 09:30:10 \ncategories: ['Docker']\ntags: ['Docker']\ncomments: false\nimg:\n---\nDocker制作WebApi&MySql 直接上图\n<!-- more -->\n\n![](http://qiniu.xxgtalk.cn/blog/images/docker/050a01.png)\n1. docker文件  \n    ``` docker\n    FROM microsoft/aspnetcore-build as build-env\n    WORKDIR /code\n    COPY *.csproj ./\n    RUN dotnet restore\n\n    COPY . ./\n    RUN dotnet publish -c Release -o out\n\n    FROM microsoft/aspnetcore\n    WORKDIR /app\n    COPY --from=build-env /code/out ./\n\n    EXPOSE 50000\n    ENTRYPOINT [\"dotnet\",\"WebApiDocker.dll\"]\n    ```\n2. 编译docker文件  \n    ``` docker\n    docker build -t  xxg/aspnetcore:1.0 .\n    ```\n3. 使用该镜像启动一个容器  \na. docker run -d -p 5000:80  --name api01 --link mysql01:db xxg/aspnetcore:1.0  \nb. 使用bridge形式  \ndocker network create -d bridge mybridge\t\t//创建一个网络  \ndocker run -d -p 5000:5000 --net mybridge --name api1 xxg/aspnetcore:1.0  \ndocker network connect mysql01  mybridge\t//表示将mysql01跟mybridge网络连接起来  \n    >--link mysql01:db\t\t--表示将mysql01取个别名db并连接到当前容器  \n    >--net mybridge\t\t--表示使用指定网络","slug":"docker/05docker-webapi-mysql","published":1,"updated":"2018-11-11T04:38:17.216Z","_id":"cjocck1nf000a70ukx1b1ta8t","layout":"post","photos":[],"link":"","content":"<p>Docker制作WebApi&amp;MySql 直接上图<br><a id=\"more\"></a></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/docker/050a01.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<ol>\n<li><p>docker文件  </p>\n <figure class=\"highlight docker\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> microsoft/aspnetcore-build as build-<span class=\"keyword\">env</span></span><br><span class=\"line\"><span class=\"keyword\">WORKDIR</span> /code</span><br><span class=\"line\">COPY *.csproj ./</span><br><span class=\"line\">RUN dotnet restore</span><br><span class=\"line\"></span><br><span class=\"line\">COPY . ./</span><br><span class=\"line\">RUN dotnet publish -c Release -o out</span><br><span class=\"line\"></span><br><span class=\"line\">FROM microsoft/aspnetcore</span><br><span class=\"line\">WORKDIR /app</span><br><span class=\"line\">COPY --from=build-env /code/out ./</span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 50000</span><br><span class=\"line\">ENTRYPOINT [\"dotnet\",\"WebApiDocker.dll\"]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编译docker文件  </p>\n <figure class=\"highlight docker\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t  xxg/aspnetcore:<span class=\"number\">1.0</span> .</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用该镜像启动一个容器<br>a. docker run -d -p 5000:80  –name api01 –link mysql01:db xxg/aspnetcore:1.0<br>b. 使用bridge形式<br>docker network create -d bridge mybridge        //创建一个网络<br>docker run -d -p 5000:5000 –net mybridge –name api1 xxg/aspnetcore:1.0<br>docker network connect mysql01  mybridge    //表示将mysql01跟mybridge网络连接起来  </p>\n<blockquote>\n<p>–link mysql01:db        –表示将mysql01取个别名db并连接到当前容器<br>–net mybridge        –表示使用指定网络</p>\n</blockquote>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>Docker制作WebApi&amp;MySql 直接上图<br>","more":"</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/docker/050a01.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<ol>\n<li><p>docker文件  </p>\n <figure class=\"highlight docker\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">FROM</span> microsoft/aspnetcore-build as build-<span class=\"keyword\">env</span></span><br><span class=\"line\"><span class=\"keyword\">WORKDIR</span> /code</span><br><span class=\"line\">COPY *.csproj ./</span><br><span class=\"line\">RUN dotnet restore</span><br><span class=\"line\"></span><br><span class=\"line\">COPY . ./</span><br><span class=\"line\">RUN dotnet publish -c Release -o out</span><br><span class=\"line\"></span><br><span class=\"line\">FROM microsoft/aspnetcore</span><br><span class=\"line\">WORKDIR /app</span><br><span class=\"line\">COPY --from=build-env /code/out ./</span><br><span class=\"line\"></span><br><span class=\"line\">EXPOSE 50000</span><br><span class=\"line\">ENTRYPOINT [\"dotnet\",\"WebApiDocker.dll\"]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>编译docker文件  </p>\n <figure class=\"highlight docker\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t  xxg/aspnetcore:<span class=\"number\">1.0</span> .</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用该镜像启动一个容器<br>a. docker run -d -p 5000:80  –name api01 –link mysql01:db xxg/aspnetcore:1.0<br>b. 使用bridge形式<br>docker network create -d bridge mybridge        //创建一个网络<br>docker run -d -p 5000:5000 –net mybridge –name api1 xxg/aspnetcore:1.0<br>docker network connect mysql01  mybridge    //表示将mysql01跟mybridge网络连接起来  </p>\n<blockquote>\n<p>–link mysql01:db        –表示将mysql01取个别名db并连接到当前容器<br>–net mybridge        –表示使用指定网络</p>\n</blockquote>\n</li>\n</ol>"},{"title":"Docker 安装MySql","abbrlink":63262,"date":"2018-06-02T01:20:10.000Z","_content":"\nDocker 安装MySql\n<!-- more -->\n\n>将docker容器中的实例中的文件跟物理文件链接起来 即使删掉容器 数据还在 再创建容器的时候 任然可以对应上之前的数据  \n#### 一、安装篇\n1. 使用docker-compose安装  \n+ [1.1] 在目录/docker/data/mysql/mysql-init下创建init-user.sql文件 内容如下  \n```\nuse mysql;\nCREATE USER 'sa'@'%' IDENTIFIED BY 'Abcd1234';\nGRANT ALL PRIVILEGES ON *.* TO 'sa'@'%';\n```\n+ [1.2]   \ndocker-compose -f mysql-compose.yml up -d    \n对应的mysql-compose.yml文件\n``` yml\nversion: '2.3'\n\nservices:\n  db:\n    image: mysql/mysql-server\n    container_name: mysql01\n    restart: always\n    command: mysqld --character-set-server=utf8 --collation-server=utf8_general_ci\n    ports:\n      - 3306:3306\n# networks:\n#   - net_mysql\n    environment:\n      MYSQL_ROOT_PASSWORD: Abcd1234\n    volumes:\n      - /docker/data/mysql/mysql-init:/docker-entrypoint-initdb.d\n      - /docker/data/mysql/data:/var/lib/mysql\n# volumes:\n#   mysql-data:\n#     external: true\n# networks:\n#   net_mysql:\n#     external: true\n```\n\n2. mount【推荐使用】  \n```\ndocker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Abcd1234 --name mysql01 --restart always --mount type=bind,src=/docker/mysql/config/my.cnf,dst=/etc/my.cnf --mount type=bind,src=/docker/mysql/data,dst=/var/lib/mysql mysql\n```\n> /docker/mysql/config/my.cnf\t&nbsp;&nbsp;对应物理磁盘位置 需要新建my.cnf 内容如下\n```\n[mysqld]\nuser=root\ncharacter-set-server=utf8\n[client]\ndefault-character-set=utf8\n[mysql]\ndefault-character-set=utf8\n```\n> /etc/my.cnf\t--docker创建mysql后该mysql容器对应的配置文件  \n/docker/mysql/data\t--对应物理磁盘位置 表示docker中数据映射到的物理文件位置  \n/var/lib/mysql mysql/mysql-server &nbsp;&nbsp;对应docker中mysql实例容器的文件位置  \n-e  MYSQL_ROOT_PASSWORD=Abcd1234 &nbsp;设置初始密码  \n1. volume[后期废用]  推荐使用mount形式  \n```\ndocker run -d -p 3306:3306 --name mysql01 -v=/docker/mysql/config/my.cnf:/etc/my.cnf -v=/docker/mysql/data:/var/lib/mysql mysql/mysql-server\n```\n#### 二、使用篇\n>docker 操作mysql  \n1. 连接mysql  \ndocker exec -it mysql01 bash   \nmysql -u root -p [密码] \t--密码可以待mysql容器启动后  \n通过docker logs mysql01 找到生成的随机密码 密码在一段类型：\n![](/images/docker/040101.png)\n2. 设置mysql密码  \nSET PASSWORD FOR 'root'@'localhost' = PASSWORD('Abcd1234');\t--用户名为root 密码为Abcd1234  \n3. 实验一下\t【--exit 退出当前】  \nuse mysql;\t--使用数据库查询  \nselect user,host from user;\t--查询用户信息  \nshow variables like ‘%char%’;\t\t--查看当前使用的字符集  \n在mysql中创建网络用户 这样可以非本机访问  \nmysql> CREATE USER 'sa'@'%' IDENTIFIED BY 'Abcd1234';  \nmysql> GRANT ALL PRIVILEGES ON *.* TO 'sa'@'%';\n>docker run -d -p 3306:3306 -e\"MYSQL_USER=Zarc\" -e\"MYSQL_PASSWORD=pwd123456\" -e\"MYSQL_ROOT_PASSWORD=password123\" -e\"MYSQL_RANDOM_ROOT_PASSWORD=true\" --name mysql01 mysql/mysql-server --character-set-server=utf8 --collation-server=utf8_general_ci     \n备注： : When this is true (which is its default state, unless MYSQL_ROOT_PASSWORD is set or MYSQL_ALLOW_EMPTY_PASSWORD is set to true), a random password for the server's root user is generated when the Docker container is started 当这个MYSQL_RANDOM_ROOT_PASSWORD 为true 时 为root用户设置密码是没有作用的还是会生成随机的密码，设置为false 或者不加这个环境变量  ","source":"_posts/docker/04docker_install_mysql.md","raw":"---\ntitle: Docker 安装MySql\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 63262\ndate: 2018-06-02 09:20:10\n---\n\nDocker 安装MySql\n<!-- more -->\n\n>将docker容器中的实例中的文件跟物理文件链接起来 即使删掉容器 数据还在 再创建容器的时候 任然可以对应上之前的数据  \n#### 一、安装篇\n1. 使用docker-compose安装  \n+ [1.1] 在目录/docker/data/mysql/mysql-init下创建init-user.sql文件 内容如下  \n```\nuse mysql;\nCREATE USER 'sa'@'%' IDENTIFIED BY 'Abcd1234';\nGRANT ALL PRIVILEGES ON *.* TO 'sa'@'%';\n```\n+ [1.2]   \ndocker-compose -f mysql-compose.yml up -d    \n对应的mysql-compose.yml文件\n``` yml\nversion: '2.3'\n\nservices:\n  db:\n    image: mysql/mysql-server\n    container_name: mysql01\n    restart: always\n    command: mysqld --character-set-server=utf8 --collation-server=utf8_general_ci\n    ports:\n      - 3306:3306\n# networks:\n#   - net_mysql\n    environment:\n      MYSQL_ROOT_PASSWORD: Abcd1234\n    volumes:\n      - /docker/data/mysql/mysql-init:/docker-entrypoint-initdb.d\n      - /docker/data/mysql/data:/var/lib/mysql\n# volumes:\n#   mysql-data:\n#     external: true\n# networks:\n#   net_mysql:\n#     external: true\n```\n\n2. mount【推荐使用】  \n```\ndocker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Abcd1234 --name mysql01 --restart always --mount type=bind,src=/docker/mysql/config/my.cnf,dst=/etc/my.cnf --mount type=bind,src=/docker/mysql/data,dst=/var/lib/mysql mysql\n```\n> /docker/mysql/config/my.cnf\t&nbsp;&nbsp;对应物理磁盘位置 需要新建my.cnf 内容如下\n```\n[mysqld]\nuser=root\ncharacter-set-server=utf8\n[client]\ndefault-character-set=utf8\n[mysql]\ndefault-character-set=utf8\n```\n> /etc/my.cnf\t--docker创建mysql后该mysql容器对应的配置文件  \n/docker/mysql/data\t--对应物理磁盘位置 表示docker中数据映射到的物理文件位置  \n/var/lib/mysql mysql/mysql-server &nbsp;&nbsp;对应docker中mysql实例容器的文件位置  \n-e  MYSQL_ROOT_PASSWORD=Abcd1234 &nbsp;设置初始密码  \n1. volume[后期废用]  推荐使用mount形式  \n```\ndocker run -d -p 3306:3306 --name mysql01 -v=/docker/mysql/config/my.cnf:/etc/my.cnf -v=/docker/mysql/data:/var/lib/mysql mysql/mysql-server\n```\n#### 二、使用篇\n>docker 操作mysql  \n1. 连接mysql  \ndocker exec -it mysql01 bash   \nmysql -u root -p [密码] \t--密码可以待mysql容器启动后  \n通过docker logs mysql01 找到生成的随机密码 密码在一段类型：\n![](/images/docker/040101.png)\n2. 设置mysql密码  \nSET PASSWORD FOR 'root'@'localhost' = PASSWORD('Abcd1234');\t--用户名为root 密码为Abcd1234  \n3. 实验一下\t【--exit 退出当前】  \nuse mysql;\t--使用数据库查询  \nselect user,host from user;\t--查询用户信息  \nshow variables like ‘%char%’;\t\t--查看当前使用的字符集  \n在mysql中创建网络用户 这样可以非本机访问  \nmysql> CREATE USER 'sa'@'%' IDENTIFIED BY 'Abcd1234';  \nmysql> GRANT ALL PRIVILEGES ON *.* TO 'sa'@'%';\n>docker run -d -p 3306:3306 -e\"MYSQL_USER=Zarc\" -e\"MYSQL_PASSWORD=pwd123456\" -e\"MYSQL_ROOT_PASSWORD=password123\" -e\"MYSQL_RANDOM_ROOT_PASSWORD=true\" --name mysql01 mysql/mysql-server --character-set-server=utf8 --collation-server=utf8_general_ci     \n备注： : When this is true (which is its default state, unless MYSQL_ROOT_PASSWORD is set or MYSQL_ALLOW_EMPTY_PASSWORD is set to true), a random password for the server's root user is generated when the Docker container is started 当这个MYSQL_RANDOM_ROOT_PASSWORD 为true 时 为root用户设置密码是没有作用的还是会生成随机的密码，设置为false 或者不加这个环境变量  ","slug":"docker/04docker_install_mysql","published":1,"updated":"2020-12-25T13:02:18.651Z","_id":"cjocck1nj000e70uksgk3ugn6","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Docker 安装MySql<br><a id=\"more\"></a></p>\n<blockquote>\n<p>将docker容器中的实例中的文件跟物理文件链接起来 即使删掉容器 数据还在 再创建容器的时候 任然可以对应上之前的数据  </p>\n</blockquote>\n<h4 id=\"一、安装篇\"><a href=\"#一、安装篇\" class=\"headerlink\" title=\"一、安装篇\"></a>一、安装篇</h4><ol>\n<li>使用docker-compose安装  </li>\n</ol>\n<ul>\n<li>[1.1] 在目录/docker/data/mysql/mysql-init下创建init-user.sql文件 内容如下  <pre><code>use mysql;\nCREATE USER &#39;sa&#39;@&#39;%&#39; IDENTIFIED BY &#39;Abcd1234&#39;;\nGRANT ALL PRIVILEGES ON *.* TO &#39;sa&#39;@&#39;%&#39;;\n</code></pre></li>\n<li>[1.2]<br>docker-compose -f mysql-compose.yml up -d<br>对应的mysql-compose.yml文件<br><code>`</code> yml<br>version: ‘2.3’</li>\n</ul>\n<p>services:<br>  db:<br>    image: mysql/mysql-server<br>    container_name: mysql01<br>    restart: always<br>    command: mysqld –character-set-server=utf8 –collation-server=utf8_general_ci<br>    ports:</p>\n<pre><code>  - 3306:3306\n</code></pre><h1 id=\"networks\"><a href=\"#networks\" class=\"headerlink\" title=\"networks:\"></a>networks:</h1><h1 id=\"net-mysql\"><a href=\"#net-mysql\" class=\"headerlink\" title=\"- net_mysql\"></a>- net_mysql</h1><pre><code>environment:\n  MYSQL_ROOT_PASSWORD: Abcd1234\nvolumes:\n  - /docker/data/mysql/mysql-init:/docker-entrypoint-initdb.d\n  - /docker/data/mysql/data:/var/lib/mysql\n</code></pre><h1 id=\"volumes\"><a href=\"#volumes\" class=\"headerlink\" title=\"volumes:\"></a>volumes:</h1><h1 id=\"mysql-data\"><a href=\"#mysql-data\" class=\"headerlink\" title=\"mysql-data:\"></a>mysql-data:</h1><h1 id=\"external-true\"><a href=\"#external-true\" class=\"headerlink\" title=\"external: true\"></a>external: true</h1><h1 id=\"networks-1\"><a href=\"#networks-1\" class=\"headerlink\" title=\"networks:\"></a>networks:</h1><h1 id=\"net-mysql-1\"><a href=\"#net-mysql-1\" class=\"headerlink\" title=\"net_mysql:\"></a>net_mysql:</h1><h1 id=\"external-true-1\"><a href=\"#external-true-1\" class=\"headerlink\" title=\"external: true\"></a>external: true</h1><pre><code>\n2. mount【推荐使用】  \n</code></pre><p>docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Abcd1234 –name mysql01 –restart always –mount type=bind,src=/docker/mysql/config/my.cnf,dst=/etc/my.cnf –mount type=bind,src=/docker/mysql/data,dst=/var/lib/mysql mysql</p>\n<pre><code>&gt; /docker/mysql/config/my.cnf    &amp;nbsp;&amp;nbsp;对应物理磁盘位置 需要新建my.cnf 内容如下\n</code></pre><p>[mysqld]<br>user=root<br>character-set-server=utf8<br>[client]<br>default-character-set=utf8<br>[mysql]<br>default-character-set=utf8</p>\n<pre><code>&gt; /etc/my.cnf    --docker创建mysql后该mysql容器对应的配置文件  \n/docker/mysql/data    --对应物理磁盘位置 表示docker中数据映射到的物理文件位置  \n/var/lib/mysql mysql/mysql-server &amp;nbsp;&amp;nbsp;对应docker中mysql实例容器的文件位置  \n-e  MYSQL_ROOT_PASSWORD=Abcd1234 &amp;nbsp;设置初始密码  \n1. volume[后期废用]  推荐使用mount形式  \n</code></pre><p>docker run -d -p 3306:3306 –name mysql01 -v=/docker/mysql/config/my.cnf:/etc/my.cnf -v=/docker/mysql/data:/var/lib/mysql mysql/mysql-server<br><code>`</code></p>\n<h4 id=\"二、使用篇\"><a href=\"#二、使用篇\" class=\"headerlink\" title=\"二、使用篇\"></a>二、使用篇</h4><blockquote>\n<p>docker 操作mysql  </p>\n<ol>\n<li>连接mysql<br>docker exec -it mysql01 bash<br>mysql -u root -p [密码]     –密码可以待mysql容器启动后<br>通过docker logs mysql01 找到生成的随机密码 密码在一段类型：<br><img src=\"/images/docker/040101.png\" alt=\"\"></li>\n<li>设置mysql密码<br>SET PASSWORD FOR ‘root‘@’localhost’ = PASSWORD(‘Abcd1234’);    –用户名为root 密码为Abcd1234  </li>\n<li>实验一下    【–exit 退出当前】<br>use mysql;    –使用数据库查询<br>select user,host from user;    –查询用户信息<br>show variables like ‘%char%’;        –查看当前使用的字符集<br>在mysql中创建网络用户 这样可以非本机访问<br>mysql&gt; CREATE USER ‘sa‘@’%’ IDENTIFIED BY ‘Abcd1234’;<br>mysql&gt; GRANT ALL PRIVILEGES ON <em>.</em> TO ‘sa‘@’%’;<br>docker run -d -p 3306:3306 -e”MYSQL_USER=Zarc” -e”MYSQL_PASSWORD=pwd123456” -e”MYSQL_ROOT_PASSWORD=password123” -e”MYSQL_RANDOM_ROOT_PASSWORD=true” –name mysql01 mysql/mysql-server –character-set-server=utf8 –collation-server=utf8_general_ci<br>备注： : When this is true (which is its default state, unless MYSQL_ROOT_PASSWORD is set or MYSQL_ALLOW_EMPTY_PASSWORD is set to true), a random password for the server’s root user is generated when the Docker container is started 当这个MYSQL_RANDOM_ROOT_PASSWORD 为true 时 为root用户设置密码是没有作用的还是会生成随机的密码，设置为false 或者不加这个环境变量  </li>\n</ol>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Docker 安装MySql<br>","more":"</p>\n<blockquote>\n<p>将docker容器中的实例中的文件跟物理文件链接起来 即使删掉容器 数据还在 再创建容器的时候 任然可以对应上之前的数据  </p>\n</blockquote>\n<h4 id=\"一、安装篇\"><a href=\"#一、安装篇\" class=\"headerlink\" title=\"一、安装篇\"></a>一、安装篇</h4><ol>\n<li>使用docker-compose安装  </li>\n</ol>\n<ul>\n<li>[1.1] 在目录/docker/data/mysql/mysql-init下创建init-user.sql文件 内容如下  <pre><code>use mysql;\nCREATE USER &#39;sa&#39;@&#39;%&#39; IDENTIFIED BY &#39;Abcd1234&#39;;\nGRANT ALL PRIVILEGES ON *.* TO &#39;sa&#39;@&#39;%&#39;;\n</code></pre></li>\n<li>[1.2]<br>docker-compose -f mysql-compose.yml up -d<br>对应的mysql-compose.yml文件<br><code>`</code> yml<br>version: ‘2.3’</li>\n</ul>\n<p>services:<br>  db:<br>    image: mysql/mysql-server<br>    container_name: mysql01<br>    restart: always<br>    command: mysqld –character-set-server=utf8 –collation-server=utf8_general_ci<br>    ports:</p>\n<pre><code>  - 3306:3306\n</code></pre><h1 id=\"networks\"><a href=\"#networks\" class=\"headerlink\" title=\"networks:\"></a>networks:</h1><h1 id=\"net-mysql\"><a href=\"#net-mysql\" class=\"headerlink\" title=\"- net_mysql\"></a>- net_mysql</h1><pre><code>environment:\n  MYSQL_ROOT_PASSWORD: Abcd1234\nvolumes:\n  - /docker/data/mysql/mysql-init:/docker-entrypoint-initdb.d\n  - /docker/data/mysql/data:/var/lib/mysql\n</code></pre><h1 id=\"volumes\"><a href=\"#volumes\" class=\"headerlink\" title=\"volumes:\"></a>volumes:</h1><h1 id=\"mysql-data\"><a href=\"#mysql-data\" class=\"headerlink\" title=\"mysql-data:\"></a>mysql-data:</h1><h1 id=\"external-true\"><a href=\"#external-true\" class=\"headerlink\" title=\"external: true\"></a>external: true</h1><h1 id=\"networks-1\"><a href=\"#networks-1\" class=\"headerlink\" title=\"networks:\"></a>networks:</h1><h1 id=\"net-mysql-1\"><a href=\"#net-mysql-1\" class=\"headerlink\" title=\"net_mysql:\"></a>net_mysql:</h1><h1 id=\"external-true-1\"><a href=\"#external-true-1\" class=\"headerlink\" title=\"external: true\"></a>external: true</h1><pre><code>\n2. mount【推荐使用】  \n</code></pre><p>docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Abcd1234 –name mysql01 –restart always –mount type=bind,src=/docker/mysql/config/my.cnf,dst=/etc/my.cnf –mount type=bind,src=/docker/mysql/data,dst=/var/lib/mysql mysql</p>\n<pre><code>&gt; /docker/mysql/config/my.cnf    &amp;nbsp;&amp;nbsp;对应物理磁盘位置 需要新建my.cnf 内容如下\n</code></pre><p>[mysqld]<br>user=root<br>character-set-server=utf8<br>[client]<br>default-character-set=utf8<br>[mysql]<br>default-character-set=utf8</p>\n<pre><code>&gt; /etc/my.cnf    --docker创建mysql后该mysql容器对应的配置文件  \n/docker/mysql/data    --对应物理磁盘位置 表示docker中数据映射到的物理文件位置  \n/var/lib/mysql mysql/mysql-server &amp;nbsp;&amp;nbsp;对应docker中mysql实例容器的文件位置  \n-e  MYSQL_ROOT_PASSWORD=Abcd1234 &amp;nbsp;设置初始密码  \n1. volume[后期废用]  推荐使用mount形式  \n</code></pre><p>docker run -d -p 3306:3306 –name mysql01 -v=/docker/mysql/config/my.cnf:/etc/my.cnf -v=/docker/mysql/data:/var/lib/mysql mysql/mysql-server<br><code>`</code></p>\n<h4 id=\"二、使用篇\"><a href=\"#二、使用篇\" class=\"headerlink\" title=\"二、使用篇\"></a>二、使用篇</h4><blockquote>\n<p>docker 操作mysql  </p>\n<ol>\n<li>连接mysql<br>docker exec -it mysql01 bash<br>mysql -u root -p [密码]     –密码可以待mysql容器启动后<br>通过docker logs mysql01 找到生成的随机密码 密码在一段类型：<br><img src=\"/images/docker/040101.png\" alt=\"\"></li>\n<li>设置mysql密码<br>SET PASSWORD FOR ‘root‘@’localhost’ = PASSWORD(‘Abcd1234’);    –用户名为root 密码为Abcd1234  </li>\n<li>实验一下    【–exit 退出当前】<br>use mysql;    –使用数据库查询<br>select user,host from user;    –查询用户信息<br>show variables like ‘%char%’;        –查看当前使用的字符集<br>在mysql中创建网络用户 这样可以非本机访问<br>mysql&gt; CREATE USER ‘sa‘@’%’ IDENTIFIED BY ‘Abcd1234’;<br>mysql&gt; GRANT ALL PRIVILEGES ON <em>.</em> TO ‘sa‘@’%’;<br>docker run -d -p 3306:3306 -e”MYSQL_USER=Zarc” -e”MYSQL_PASSWORD=pwd123456” -e”MYSQL_ROOT_PASSWORD=password123” -e”MYSQL_RANDOM_ROOT_PASSWORD=true” –name mysql01 mysql/mysql-server –character-set-server=utf8 –collation-server=utf8_general_ci<br>备注： : When this is true (which is its default state, unless MYSQL_ROOT_PASSWORD is set or MYSQL_ALLOW_EMPTY_PASSWORD is set to true), a random password for the server’s root user is generated when the Docker container is started 当这个MYSQL_RANDOM_ROOT_PASSWORD 为true 时 为root用户设置密码是没有作用的还是会生成随机的密码，设置为false 或者不加这个环境变量  </li>\n</ol>\n</blockquote>"},{"title":"使用docker-compose","date":"2018-06-04T02:01:10.000Z","img":null,"_content":"\n使用docker-compose按照webapi&mysql\n<!-- more -->\n\n[接Docker制作WebApi&MySql](./05docker-webapi-mysql.html)\n1. 创建docker-compose.yml文件  \n  ``` docker\n  version '1'\n\n  services:\n    db:\n        image: mysql/mysql-server\n        container_name: 'db'\n        command: mysqld --character-set-server=utf8 --collaction-server=utf8_general_ci\n        restart: always\n        ports:\n          -'3306:3306'\n        environment:\n          MYSQL_ROOT_PASSWORD: Abcd1234\n          MYSQL_USER: sa\n          MYSQL_PASWORD: Abcd1234\n        volumes:\n          - /docker/mysql/db-init:/docker-entrypoint-initdb.d\n    webapi:\n        build: .\n        container_name: 'webapi01'\n        ports:\n          -'5000:80'\n        depends_on:\n          - db\n  ```\n>【注意】  \n由于db需要初始化用户角色 所以在资料卷中指定目录下放入sql 内容  \nGRANT ALL PRIVILEGES ON *.* TO 'sa'@'%' WITH GRANT OPTION;  \n2. 执行命令     \ndocker-compose build  \ndocker up\t//docker down 与docker up相反  \n> [docker-compose文件](http://qiniu.xxgtalk.cn/blog/files/docker/mysql-docker-compose.yml)  ","source":"_posts/docker/06docker-compose.md","raw":"---\ntitle: 使用docker-compose\ndate: 2018-06-04 10:01:10 \ncategories: ['Docker']\nimg:\n---\n\n使用docker-compose按照webapi&mysql\n<!-- more -->\n\n[接Docker制作WebApi&MySql](./05docker-webapi-mysql.html)\n1. 创建docker-compose.yml文件  \n  ``` docker\n  version '1'\n\n  services:\n    db:\n        image: mysql/mysql-server\n        container_name: 'db'\n        command: mysqld --character-set-server=utf8 --collaction-server=utf8_general_ci\n        restart: always\n        ports:\n          -'3306:3306'\n        environment:\n          MYSQL_ROOT_PASSWORD: Abcd1234\n          MYSQL_USER: sa\n          MYSQL_PASWORD: Abcd1234\n        volumes:\n          - /docker/mysql/db-init:/docker-entrypoint-initdb.d\n    webapi:\n        build: .\n        container_name: 'webapi01'\n        ports:\n          -'5000:80'\n        depends_on:\n          - db\n  ```\n>【注意】  \n由于db需要初始化用户角色 所以在资料卷中指定目录下放入sql 内容  \nGRANT ALL PRIVILEGES ON *.* TO 'sa'@'%' WITH GRANT OPTION;  \n2. 执行命令     \ndocker-compose build  \ndocker up\t//docker down 与docker up相反  \n> [docker-compose文件](http://qiniu.xxgtalk.cn/blog/files/docker/mysql-docker-compose.yml)  ","slug":"docker/06docker-compose","published":1,"updated":"2018-11-11T04:38:17.216Z","_id":"cjocck1nm000g70uky6f7pjkn","comments":1,"layout":"post","photos":[],"link":"","content":"<p>使用docker-compose按照webapi&amp;mysql<br><a id=\"more\"></a></p>\n<p><a href=\"./05docker-webapi-mysql.html\">接Docker制作WebApi&amp;MySql</a></p>\n<ol>\n<li>创建docker-compose.yml文件  <figure class=\"highlight docker\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">version <span class=\"string\">'1'</span></span><br><span class=\"line\"></span><br><span class=\"line\">services:</span><br><span class=\"line\">  db:</span><br><span class=\"line\">      image: mysql/mysql-server</span><br><span class=\"line\">      container_name: <span class=\"string\">'db'</span></span><br><span class=\"line\">      command: mysqld --character-set-server=utf8 --collaction-server=utf8_general_ci</span><br><span class=\"line\">      restart: always</span><br><span class=\"line\">      ports:</span><br><span class=\"line\">        -<span class=\"string\">'3306:3306'</span></span><br><span class=\"line\">      environment:</span><br><span class=\"line\">        MYSQL_ROOT_PASSWORD: Abcd1234</span><br><span class=\"line\">        MYSQL_USER: sa</span><br><span class=\"line\">        MYSQL_PASWORD: Abcd1234</span><br><span class=\"line\">      volumes:</span><br><span class=\"line\">        - /docker/mysql/db-init:/docker-<span class=\"keyword\">entrypoint</span>-initdb.d</span><br><span class=\"line\">  webapi:</span><br><span class=\"line\">      build: .</span><br><span class=\"line\">      container_name: 'webapi01'</span><br><span class=\"line\">      ports:</span><br><span class=\"line\">        -'5000:80'</span><br><span class=\"line\">      depends_on:</span><br><span class=\"line\">        - db</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<blockquote>\n<p>【注意】<br>由于db需要初始化用户角色 所以在资料卷中指定目录下放入sql 内容<br>GRANT ALL PRIVILEGES ON <em>.</em> TO ‘sa‘@’%’ WITH GRANT OPTION;  </p>\n<ol start=\"2\">\n<li>执行命令<br>docker-compose build<br>docker up    //docker down 与docker up相反<br><a href=\"http://qiniu.xxgtalk.cn/blog/files/docker/mysql-docker-compose.yml\" target=\"_blank\" rel=\"noopener\">docker-compose文件</a>  </li>\n</ol>\n</blockquote>\n","site":{"data":{}},"excerpt":"<p>使用docker-compose按照webapi&amp;mysql<br>","more":"</p>\n<p><a href=\"./05docker-webapi-mysql.html\">接Docker制作WebApi&amp;MySql</a></p>\n<ol>\n<li>创建docker-compose.yml文件  <figure class=\"highlight docker\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">version <span class=\"string\">'1'</span></span><br><span class=\"line\"></span><br><span class=\"line\">services:</span><br><span class=\"line\">  db:</span><br><span class=\"line\">      image: mysql/mysql-server</span><br><span class=\"line\">      container_name: <span class=\"string\">'db'</span></span><br><span class=\"line\">      command: mysqld --character-set-server=utf8 --collaction-server=utf8_general_ci</span><br><span class=\"line\">      restart: always</span><br><span class=\"line\">      ports:</span><br><span class=\"line\">        -<span class=\"string\">'3306:3306'</span></span><br><span class=\"line\">      environment:</span><br><span class=\"line\">        MYSQL_ROOT_PASSWORD: Abcd1234</span><br><span class=\"line\">        MYSQL_USER: sa</span><br><span class=\"line\">        MYSQL_PASWORD: Abcd1234</span><br><span class=\"line\">      volumes:</span><br><span class=\"line\">        - /docker/mysql/db-init:/docker-<span class=\"keyword\">entrypoint</span>-initdb.d</span><br><span class=\"line\">  webapi:</span><br><span class=\"line\">      build: .</span><br><span class=\"line\">      container_name: 'webapi01'</span><br><span class=\"line\">      ports:</span><br><span class=\"line\">        -'5000:80'</span><br><span class=\"line\">      depends_on:</span><br><span class=\"line\">        - db</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<blockquote>\n<p>【注意】<br>由于db需要初始化用户角色 所以在资料卷中指定目录下放入sql 内容<br>GRANT ALL PRIVILEGES ON <em>.</em> TO ‘sa‘@’%’ WITH GRANT OPTION;  </p>\n<ol start=\"2\">\n<li>执行命令<br>docker-compose build<br>docker up    //docker down 与docker up相反<br><a href=\"http://qiniu.xxgtalk.cn/blog/files/docker/mysql-docker-compose.yml\" target=\"_blank\" rel=\"noopener\">docker-compose文件</a>  </li>\n</ol>\n</blockquote>"},{"title":"ASP.NET Core + Docker + Jenkins + gogs + CentOS 从零开始搭建持续集成","date":"2018-06-06T03:01:10.000Z","_content":"\nASP.NET Core + Docker + Jenkins + gogs + CentOS 从零开始搭建持续集成\n<!-- more -->\n \n> 参考地址：https://www.cnblogs.com/stulzq/p/8629165.html    \n> https://www.jianshu.com/p/64e9708c23e7  \n>前置条件 安装了docker、配置了加速镜像(参考01)  \n1. 使用docker安装免费https证书  \n```\n sudo docker run -it --rm --name certbot \\\n    -v \"/etc/letsencrypt:/etc/letsencrypt\" \\\n    -v \"/var/lib/letsencrypt:/var/lib/letsencrypt\" \\\n    certbot/certbot certonly\n```\n按照提示进行操作  \n2. docker安装Gogs (一个gitserver，类似于gitlab)    \n创建文件/docker/gogs  然后运行如下命令  \ndocker run -d --name=gogs -p 23:22 -p 8090:3000 --mount type=bind,src=/docker/gogs,dst=/data --restart always gogs/gogs   \n>参考地址 https://github.com/gogits/gogs/tree/master/docker   \n3. docker 安装jenkins  \n自定义镜像  \n``` yml\nFROM jenkins\nUSER root\n#清除了基础镜像设置的源，切换成腾讯云的jessie源\n#使用非腾讯云环境的需要将 tencentyun 改为 aliyun\nRUN echo '' > /etc/apt/sources.list.d/jessie-backports.list \\\n  && echo \"deb http://mirrors.tencentyun.com/debian jessie main contrib non-free\" > /etc/apt/sources.list \\\n  && echo \"deb http://mirrors.tencentyun.com/debian jessie-updates main contrib non-free\" >> /etc/apt/sources.list \\\n  && echo \"deb http://mirrors.tencentyun.com/debian-security jessie/updates main contrib non-free\" >> /etc/apt/sources.list\n#更新源并安装缺少的包\nRUN apt-get update && apt-get install -y libltdl7 && apt-get update\n\nARG dockerGid=999\n\nRUN echo \"docker:x:${dockerGid}:jenkins\" >> /etc/group \n\n# 安装 docker-compose 因为等下构建环境的需要\nRUN curl -L https://github.com/docker/compose/releases/download/1.20.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose\n\nRUN chmod +x /usr/local/bin/docker-compose\n```\ndocker build -t auto-jenkins .  \n创建目录/docker/jenkins/docker.sock、/docker/jenkins/jenkins_home  \n``` yml\ndocker run --name jenkins -p 8091:8080 -p 50000:50000 \\\n    --mount type=bind,src=/docker/jenkins/docker.sock,dst=/var/run/docker.sock \\\n    --mount type=bind,src=$(which docker),dst=/bin/docker \\\n    --mount type=bind,src=/docker/jenkins/jenkins_home,dst=/var/jenkins_home \\\n    --restart always \\\n    -d auto-jenkins\n```\ndocker run --name jenkins -p 8091:8080 -p 50000:50000 --mount type=bind,src=/docker/jenkins/docker.sock,dst=/var/run/docker.sock  --mount type=bind,src=$(which docker),dst=/bin/docke  --mount type=bind,src=/docker/jenkins/jenkins_home,dst=/var/jenkins_home --restart always -d auto-jenkins  \n\n4. ASP.NET Core 持续集成  \n5. Jenkins配置Gogs webhook插件  \n6. Jenkins持续集成演示  \n","source":"_posts/docker/10docker-jenkins-gogs-cicd.md","raw":"---\ntitle: ASP.NET Core + Docker + Jenkins + gogs + CentOS 从零开始搭建持续集成\ndate: 2018-06-06 11:01:10 \ncategories: ['Docker']\ntags: ['Docker']\n---\n\nASP.NET Core + Docker + Jenkins + gogs + CentOS 从零开始搭建持续集成\n<!-- more -->\n \n> 参考地址：https://www.cnblogs.com/stulzq/p/8629165.html    \n> https://www.jianshu.com/p/64e9708c23e7  \n>前置条件 安装了docker、配置了加速镜像(参考01)  \n1. 使用docker安装免费https证书  \n```\n sudo docker run -it --rm --name certbot \\\n    -v \"/etc/letsencrypt:/etc/letsencrypt\" \\\n    -v \"/var/lib/letsencrypt:/var/lib/letsencrypt\" \\\n    certbot/certbot certonly\n```\n按照提示进行操作  \n2. docker安装Gogs (一个gitserver，类似于gitlab)    \n创建文件/docker/gogs  然后运行如下命令  \ndocker run -d --name=gogs -p 23:22 -p 8090:3000 --mount type=bind,src=/docker/gogs,dst=/data --restart always gogs/gogs   \n>参考地址 https://github.com/gogits/gogs/tree/master/docker   \n3. docker 安装jenkins  \n自定义镜像  \n``` yml\nFROM jenkins\nUSER root\n#清除了基础镜像设置的源，切换成腾讯云的jessie源\n#使用非腾讯云环境的需要将 tencentyun 改为 aliyun\nRUN echo '' > /etc/apt/sources.list.d/jessie-backports.list \\\n  && echo \"deb http://mirrors.tencentyun.com/debian jessie main contrib non-free\" > /etc/apt/sources.list \\\n  && echo \"deb http://mirrors.tencentyun.com/debian jessie-updates main contrib non-free\" >> /etc/apt/sources.list \\\n  && echo \"deb http://mirrors.tencentyun.com/debian-security jessie/updates main contrib non-free\" >> /etc/apt/sources.list\n#更新源并安装缺少的包\nRUN apt-get update && apt-get install -y libltdl7 && apt-get update\n\nARG dockerGid=999\n\nRUN echo \"docker:x:${dockerGid}:jenkins\" >> /etc/group \n\n# 安装 docker-compose 因为等下构建环境的需要\nRUN curl -L https://github.com/docker/compose/releases/download/1.20.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose\n\nRUN chmod +x /usr/local/bin/docker-compose\n```\ndocker build -t auto-jenkins .  \n创建目录/docker/jenkins/docker.sock、/docker/jenkins/jenkins_home  \n``` yml\ndocker run --name jenkins -p 8091:8080 -p 50000:50000 \\\n    --mount type=bind,src=/docker/jenkins/docker.sock,dst=/var/run/docker.sock \\\n    --mount type=bind,src=$(which docker),dst=/bin/docker \\\n    --mount type=bind,src=/docker/jenkins/jenkins_home,dst=/var/jenkins_home \\\n    --restart always \\\n    -d auto-jenkins\n```\ndocker run --name jenkins -p 8091:8080 -p 50000:50000 --mount type=bind,src=/docker/jenkins/docker.sock,dst=/var/run/docker.sock  --mount type=bind,src=$(which docker),dst=/bin/docke  --mount type=bind,src=/docker/jenkins/jenkins_home,dst=/var/jenkins_home --restart always -d auto-jenkins  \n\n4. ASP.NET Core 持续集成  \n5. Jenkins配置Gogs webhook插件  \n6. Jenkins持续集成演示  \n","slug":"docker/10docker-jenkins-gogs-cicd","published":1,"updated":"2018-09-27T10:59:38.615Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1nq000l70uk3q3fqbjo","content":"<p>ASP.NET Core + Docker + Jenkins + gogs + CentOS 从零开始搭建持续集成<br><a id=\"more\"></a></p>\n<blockquote>\n<p>参考地址：<a href=\"https://www.cnblogs.com/stulzq/p/8629165.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/stulzq/p/8629165.html</a><br><a href=\"https://www.jianshu.com/p/64e9708c23e7\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/64e9708c23e7</a><br>前置条件 安装了docker、配置了加速镜像(参考01)  </p>\n<ol>\n<li>使用docker安装免费https证书  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run -it --rm --name certbot \\</span><br><span class=\"line\">   -v &quot;/etc/letsencrypt:/etc/letsencrypt&quot; \\</span><br><span class=\"line\">   -v &quot;/var/lib/letsencrypt:/var/lib/letsencrypt&quot; \\</span><br><span class=\"line\">   certbot/certbot certonly</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</blockquote>\n<p>按照提示进行操作  </p>\n<ol start=\"2\">\n<li>docker安装Gogs (一个gitserver，类似于gitlab)<br>创建文件/docker/gogs  然后运行如下命令<br>docker run -d –name=gogs -p 23:22 -p 8090:3000 –mount type=bind,src=/docker/gogs,dst=/data –restart always gogs/gogs   <blockquote>\n<p>参考地址 <a href=\"https://github.com/gogits/gogs/tree/master/docker\" target=\"_blank\" rel=\"noopener\">https://github.com/gogits/gogs/tree/master/docker</a>   </p>\n</blockquote>\n</li>\n<li>docker 安装jenkins<br>自定义镜像  <figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">FROM</span> <span class=\"string\">jenkins</span></span><br><span class=\"line\"><span class=\"string\">USER</span> <span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"comment\">#清除了基础镜像设置的源，切换成腾讯云的jessie源</span></span><br><span class=\"line\"><span class=\"comment\">#使用非腾讯云环境的需要将 tencentyun 改为 aliyun</span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">echo</span> <span class=\"string\">''</span> <span class=\"string\">&gt; /etc/apt/sources.list.d/jessie-backports.list \\</span></span><br><span class=\"line\"><span class=\"string\">  &amp;&amp; echo \"deb http://mirrors.tencentyun.com/debian jessie main contrib non-free\" &gt; /etc/apt/sources.list \\</span></span><br><span class=\"line\"><span class=\"string\">  &amp;&amp; echo \"deb http://mirrors.tencentyun.com/debian jessie-updates main contrib non-free\" &gt;&gt; /etc/apt/sources.list \\</span></span><br><span class=\"line\"><span class=\"string\">  &amp;&amp; echo \"deb http://mirrors.tencentyun.com/debian-security jessie/updates main contrib non-free\" &gt;&gt; /etc/apt/sources.list</span></span><br><span class=\"line\"><span class=\"string\">#更新源并安装缺少的包</span></span><br><span class=\"line\"><span class=\"string\">RUN apt-get update &amp;&amp; apt-get install -y libltdl7 &amp;&amp; apt-get update</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">ARG dockerGid=999</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">RUN echo \"docker:x:$&#123;dockerGid&#125;:jenkins\" &gt;&gt; /etc/group </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 安装 docker-compose 因为等下构建环境的需要</span></span><br><span class=\"line\"><span class=\"string\">RUN curl -L https://github.com/docker/compose/releases/download/1.20.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">RUN chmod +x /usr/local/bin/docker-compose</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>docker build -t auto-jenkins .<br>创建目录/docker/jenkins/docker.sock、/docker/jenkins/jenkins_home<br><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">docker</span> <span class=\"string\">run</span> <span class=\"bullet\">--name</span> <span class=\"string\">jenkins</span> <span class=\"bullet\">-p</span> <span class=\"number\">8091</span><span class=\"string\">:8080</span> <span class=\"bullet\">-p</span> <span class=\"number\">50000</span><span class=\"string\">:50000</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span><span class=\"bullet\">-mount</span> <span class=\"string\">type=bind,src=/docker/jenkins/docker.sock,dst=/var/run/docker.sock</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span><span class=\"bullet\">-mount</span> <span class=\"string\">type=bind,src=$(which</span> <span class=\"string\">docker),dst=/bin/docker</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span><span class=\"bullet\">-mount</span> <span class=\"string\">type=bind,src=/docker/jenkins/jenkins_home,dst=/var/jenkins_home</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span><span class=\"bullet\">-restart</span> <span class=\"string\">always</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span><span class=\"string\">d</span> <span class=\"string\">auto-jenkins</span></span><br></pre></td></tr></table></figure></p>\n<p>docker run –name jenkins -p 8091:8080 -p 50000:50000 –mount type=bind,src=/docker/jenkins/docker.sock,dst=/var/run/docker.sock  –mount type=bind,src=$(which docker),dst=/bin/docke  –mount type=bind,src=/docker/jenkins/jenkins_home,dst=/var/jenkins_home –restart always -d auto-jenkins  </p>\n<ol start=\"4\">\n<li>ASP.NET Core 持续集成  </li>\n<li>Jenkins配置Gogs webhook插件  </li>\n<li>Jenkins持续集成演示  </li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>ASP.NET Core + Docker + Jenkins + gogs + CentOS 从零开始搭建持续集成<br>","more":"</p>\n<blockquote>\n<p>参考地址：<a href=\"https://www.cnblogs.com/stulzq/p/8629165.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/stulzq/p/8629165.html</a><br><a href=\"https://www.jianshu.com/p/64e9708c23e7\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/p/64e9708c23e7</a><br>前置条件 安装了docker、配置了加速镜像(参考01)  </p>\n<ol>\n<li>使用docker安装免费https证书  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo docker run -it --rm --name certbot \\</span><br><span class=\"line\">   -v &quot;/etc/letsencrypt:/etc/letsencrypt&quot; \\</span><br><span class=\"line\">   -v &quot;/var/lib/letsencrypt:/var/lib/letsencrypt&quot; \\</span><br><span class=\"line\">   certbot/certbot certonly</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</blockquote>\n<p>按照提示进行操作  </p>\n<ol start=\"2\">\n<li>docker安装Gogs (一个gitserver，类似于gitlab)<br>创建文件/docker/gogs  然后运行如下命令<br>docker run -d –name=gogs -p 23:22 -p 8090:3000 –mount type=bind,src=/docker/gogs,dst=/data –restart always gogs/gogs   <blockquote>\n<p>参考地址 <a href=\"https://github.com/gogits/gogs/tree/master/docker\" target=\"_blank\" rel=\"noopener\">https://github.com/gogits/gogs/tree/master/docker</a>   </p>\n</blockquote>\n</li>\n<li>docker 安装jenkins<br>自定义镜像  <figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">FROM</span> <span class=\"string\">jenkins</span></span><br><span class=\"line\"><span class=\"string\">USER</span> <span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"comment\">#清除了基础镜像设置的源，切换成腾讯云的jessie源</span></span><br><span class=\"line\"><span class=\"comment\">#使用非腾讯云环境的需要将 tencentyun 改为 aliyun</span></span><br><span class=\"line\"><span class=\"string\">RUN</span> <span class=\"string\">echo</span> <span class=\"string\">''</span> <span class=\"string\">&gt; /etc/apt/sources.list.d/jessie-backports.list \\</span></span><br><span class=\"line\"><span class=\"string\">  &amp;&amp; echo \"deb http://mirrors.tencentyun.com/debian jessie main contrib non-free\" &gt; /etc/apt/sources.list \\</span></span><br><span class=\"line\"><span class=\"string\">  &amp;&amp; echo \"deb http://mirrors.tencentyun.com/debian jessie-updates main contrib non-free\" &gt;&gt; /etc/apt/sources.list \\</span></span><br><span class=\"line\"><span class=\"string\">  &amp;&amp; echo \"deb http://mirrors.tencentyun.com/debian-security jessie/updates main contrib non-free\" &gt;&gt; /etc/apt/sources.list</span></span><br><span class=\"line\"><span class=\"string\">#更新源并安装缺少的包</span></span><br><span class=\"line\"><span class=\"string\">RUN apt-get update &amp;&amp; apt-get install -y libltdl7 &amp;&amp; apt-get update</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">ARG dockerGid=999</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">RUN echo \"docker:x:$&#123;dockerGid&#125;:jenkins\" &gt;&gt; /etc/group </span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 安装 docker-compose 因为等下构建环境的需要</span></span><br><span class=\"line\"><span class=\"string\">RUN curl -L https://github.com/docker/compose/releases/download/1.20.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">RUN chmod +x /usr/local/bin/docker-compose</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>docker build -t auto-jenkins .<br>创建目录/docker/jenkins/docker.sock、/docker/jenkins/jenkins_home<br><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">docker</span> <span class=\"string\">run</span> <span class=\"bullet\">--name</span> <span class=\"string\">jenkins</span> <span class=\"bullet\">-p</span> <span class=\"number\">8091</span><span class=\"string\">:8080</span> <span class=\"bullet\">-p</span> <span class=\"number\">50000</span><span class=\"string\">:50000</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span><span class=\"bullet\">-mount</span> <span class=\"string\">type=bind,src=/docker/jenkins/docker.sock,dst=/var/run/docker.sock</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span><span class=\"bullet\">-mount</span> <span class=\"string\">type=bind,src=$(which</span> <span class=\"string\">docker),dst=/bin/docker</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span><span class=\"bullet\">-mount</span> <span class=\"string\">type=bind,src=/docker/jenkins/jenkins_home,dst=/var/jenkins_home</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span><span class=\"bullet\">-restart</span> <span class=\"string\">always</span> <span class=\"string\">\\</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span><span class=\"string\">d</span> <span class=\"string\">auto-jenkins</span></span><br></pre></td></tr></table></figure></p>\n<p>docker run –name jenkins -p 8091:8080 -p 50000:50000 –mount type=bind,src=/docker/jenkins/docker.sock,dst=/var/run/docker.sock  –mount type=bind,src=$(which docker),dst=/bin/docke  –mount type=bind,src=/docker/jenkins/jenkins_home,dst=/var/jenkins_home –restart always -d auto-jenkins  </p>\n<ol start=\"4\">\n<li>ASP.NET Core 持续集成  </li>\n<li>Jenkins配置Gogs webhook插件  </li>\n<li>Jenkins持续集成演示  </li>\n</ol>"},{"title":"Centos7.x 安装gitlab-runner","abbrlink":41583,"date":"2018-06-05T02:35:10.000Z","_content":"\nCentos7.x 安装gitlab-runner\n<!-- more -->\n\n> 说明：开始尝试过在docker中安装gitlab-runner注册gitlab-runner啥的都没问题 但是gitlab-ci.yml文件中使用docker的时候提示xxxx daemon文件问题 折腾了好几天没能解决(大概的意思就是在容器内部使用使用docker访问不了外面的啥东西最后放弃了，该用在centos中直接安装gitlab-runner形式)   \n> 参考地址: http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html  \n>【前置条件】 系统安装了docker、docker-compose、git、dotnetcore  \n> docker 这个必须要  \n> git 必须，因为需要通过git获取代码  \n> docker-compose根据情况 因为我的ci中使用了docker-compose所以要  \n> dotnetcore 因为我是微软的铁杆粉丝  \n1. 安装docker、docker-compose[参考01](./01docker-config.html)    \n2. gitlab-runner  \n* 安装命令  \n sudo wget -O /usr/local/bin/gitlab-runner https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64  \n* 给予其权限  \nsudo chmod +x /usr/local/bin/gitlab-runner  \n* 注册  \nsudo gitlab-runner register  \n根据提示输入gitlab地址、token、描述信息、tag、[true|false]、[true|false]、shell    \n* 添加一个用于跑 GitLab Runner 的gitlab-runner用户  \nsudo useradd --comment 'GitLab Runner' --create-home gitlab-runner --shell /bin/bash    \n* 指定 GitLab Runner 执行的用户和工作目录    \nsudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner  \n* 启动gitlab-runner    \nsudo gitlab-runner start  \n* 把 GitLab Runner 服务器中的gitlab-runner账户，添加到docker用户组中  \nsudo usermod -aG docker gitlab-runner  \n* 在 GitLab Runner 服务器中，切换到gitlab-runner用户下，配置 SSH  \n    ```\n    su gitlab-runner\n    ssh-keygen -t rsa -P ''\n    ssh-copy-id root@你的ip地址\n    ```\n3. 安装git  \ncd ~  \nyum -y install git  \n\n","source":"_posts/docker/07gitlab01-runner.md","raw":"---\ntitle: Centos7.x 安装gitlab-runner\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 41583\ndate: 2018-06-05 10:35:10\n---\n\nCentos7.x 安装gitlab-runner\n<!-- more -->\n\n> 说明：开始尝试过在docker中安装gitlab-runner注册gitlab-runner啥的都没问题 但是gitlab-ci.yml文件中使用docker的时候提示xxxx daemon文件问题 折腾了好几天没能解决(大概的意思就是在容器内部使用使用docker访问不了外面的啥东西最后放弃了，该用在centos中直接安装gitlab-runner形式)   \n> 参考地址: http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html  \n>【前置条件】 系统安装了docker、docker-compose、git、dotnetcore  \n> docker 这个必须要  \n> git 必须，因为需要通过git获取代码  \n> docker-compose根据情况 因为我的ci中使用了docker-compose所以要  \n> dotnetcore 因为我是微软的铁杆粉丝  \n1. 安装docker、docker-compose[参考01](./01docker-config.html)    \n2. gitlab-runner  \n* 安装命令  \n sudo wget -O /usr/local/bin/gitlab-runner https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64  \n* 给予其权限  \nsudo chmod +x /usr/local/bin/gitlab-runner  \n* 注册  \nsudo gitlab-runner register  \n根据提示输入gitlab地址、token、描述信息、tag、[true|false]、[true|false]、shell    \n* 添加一个用于跑 GitLab Runner 的gitlab-runner用户  \nsudo useradd --comment 'GitLab Runner' --create-home gitlab-runner --shell /bin/bash    \n* 指定 GitLab Runner 执行的用户和工作目录    \nsudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner  \n* 启动gitlab-runner    \nsudo gitlab-runner start  \n* 把 GitLab Runner 服务器中的gitlab-runner账户，添加到docker用户组中  \nsudo usermod -aG docker gitlab-runner  \n* 在 GitLab Runner 服务器中，切换到gitlab-runner用户下，配置 SSH  \n    ```\n    su gitlab-runner\n    ssh-keygen -t rsa -P ''\n    ssh-copy-id root@你的ip地址\n    ```\n3. 安装git  \ncd ~  \nyum -y install git  \n\n","slug":"docker/07gitlab01-runner","published":1,"updated":"2020-02-23T13:45:22.662Z","_id":"cjocck1nt000o70ukgwuw0cja","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Centos7.x 安装gitlab-runner<br><a id=\"more\"></a></p>\n<blockquote>\n<p>说明：开始尝试过在docker中安装gitlab-runner注册gitlab-runner啥的都没问题 但是gitlab-ci.yml文件中使用docker的时候提示xxxx daemon文件问题 折腾了好几天没能解决(大概的意思就是在容器内部使用使用docker访问不了外面的啥东西最后放弃了，该用在centos中直接安装gitlab-runner形式)<br>参考地址: <a href=\"http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html\">http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html</a><br>【前置条件】 系统安装了docker、docker-compose、git、dotnetcore<br>docker 这个必须要<br>git 必须，因为需要通过git获取代码<br>docker-compose根据情况 因为我的ci中使用了docker-compose所以要<br>dotnetcore 因为我是微软的铁杆粉丝  </p>\n<ol>\n<li>安装docker、docker-compose<a href=\"./01docker-config.html\">参考01</a>    </li>\n<li>gitlab-runner  </li>\n</ol>\n<ul>\n<li>安装命令<br>sudo wget -O /usr/local/bin/gitlab-runner <a href=\"https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64\">https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64</a>  </li>\n<li>给予其权限<br>sudo chmod +x /usr/local/bin/gitlab-runner  </li>\n<li>注册<br>sudo gitlab-runner register<br>根据提示输入gitlab地址、token、描述信息、tag、[true|false]、[true|false]、shell    </li>\n<li>添加一个用于跑 GitLab Runner 的gitlab-runner用户<br>sudo useradd –comment ‘GitLab Runner’ –create-home gitlab-runner –shell /bin/bash    </li>\n<li>指定 GitLab Runner 执行的用户和工作目录<br>sudo gitlab-runner install –user=gitlab-runner –working-directory=/home/gitlab-runner  </li>\n<li>启动gitlab-runner<br>sudo gitlab-runner start  </li>\n<li>把 GitLab Runner 服务器中的gitlab-runner账户，添加到docker用户组中<br>sudo usermod -aG docker gitlab-runner  </li>\n<li>在 GitLab Runner 服务器中，切换到gitlab-runner用户下，配置 SSH  <pre><code>  su gitlab-runner\n  ssh-keygen -t rsa -P &#39;&#39;\n  ssh-copy-id root@你的ip地址\n</code></pre></li>\n</ul>\n<ol start=\"3\">\n<li>安装git<br>cd ~<br>yum -y install git  </li>\n</ol>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Centos7.x 安装gitlab-runner<br>","more":"</p>\n<blockquote>\n<p>说明：开始尝试过在docker中安装gitlab-runner注册gitlab-runner啥的都没问题 但是gitlab-ci.yml文件中使用docker的时候提示xxxx daemon文件问题 折腾了好几天没能解决(大概的意思就是在容器内部使用使用docker访问不了外面的啥东西最后放弃了，该用在centos中直接安装gitlab-runner形式)<br>参考地址: <a href=\"http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html\">http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html</a><br>【前置条件】 系统安装了docker、docker-compose、git、dotnetcore<br>docker 这个必须要<br>git 必须，因为需要通过git获取代码<br>docker-compose根据情况 因为我的ci中使用了docker-compose所以要<br>dotnetcore 因为我是微软的铁杆粉丝  </p>\n<ol>\n<li>安装docker、docker-compose<a href=\"./01docker-config.html\">参考01</a>    </li>\n<li>gitlab-runner  </li>\n</ol>\n<ul>\n<li>安装命令<br>sudo wget -O /usr/local/bin/gitlab-runner <a href=\"https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64\">https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64</a>  </li>\n<li>给予其权限<br>sudo chmod +x /usr/local/bin/gitlab-runner  </li>\n<li>注册<br>sudo gitlab-runner register<br>根据提示输入gitlab地址、token、描述信息、tag、[true|false]、[true|false]、shell    </li>\n<li>添加一个用于跑 GitLab Runner 的gitlab-runner用户<br>sudo useradd –comment ‘GitLab Runner’ –create-home gitlab-runner –shell /bin/bash    </li>\n<li>指定 GitLab Runner 执行的用户和工作目录<br>sudo gitlab-runner install –user=gitlab-runner –working-directory=/home/gitlab-runner  </li>\n<li>启动gitlab-runner<br>sudo gitlab-runner start  </li>\n<li>把 GitLab Runner 服务器中的gitlab-runner账户，添加到docker用户组中<br>sudo usermod -aG docker gitlab-runner  </li>\n<li>在 GitLab Runner 服务器中，切换到gitlab-runner用户下，配置 SSH  <pre><code>  su gitlab-runner\n  ssh-keygen -t rsa -P &#39;&#39;\n  ssh-copy-id root@你的ip地址\n</code></pre></li>\n</ul>\n<ol start=\"3\">\n<li>安装git<br>cd ~<br>yum -y install git  </li>\n</ol>\n</blockquote>"},{"title":"Docker安装GitLab","abbrlink":47017,"date":"2018-06-05T02:30:10.000Z","_content":"\nDocker下安装GitLab\n<!-- more -->\n\n> 前置条件 安装好docker  \n1. docker运行gitlab(由于22端口被ssh占用 改用23)  \n* 在/docker/gitlab 目录下分别创建data、config、logs三个文件夹  \n* 执行命令\n  ``` docker\n  sudo docker run --detach --hostname gitlab.xxgtalk.cn --publish 443:443 --publish 8090:80 --publish 23:22 --name gitlab --restart always -v /docker/gitlab/config:/etc/gitlab -v /docker/gitlab/logs:/var/log/gitlab -v /docker/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce\n  * * * * * * 介绍 * * * * * *\n  sudo docker run --detach \\\n  --hostname gitlab.xxgtalk.cn \\\n  --publish 443:443 --publish 8090:80 --publish 23:22 \\ \n  --name gitlab \\\n  --restart always \\\n  -v /docker/gitlab/config:/etc/gitlab \\ 配置文件映射到config文件夹\n  -v /docker/gitlab/logs:/var/log/gitlab \\\n  -v /docker/gitlab/data:/var/opt/gitlab \\\n  gitlab/gitlab-ce\n  ```\n::: warning 注意\n+ 因为配置的ssh端口是23 所以需要修改/docker/gitlab/config/gitlab.rb文件中修改或增加  \ngitlab_rails['gitlab_shell_ssh_port'] = 23\n+ 查看日志  \ndocker logs --follow gitlab  \n:::\n2. docker下安装gitlab runner  \n+ [2.1] 安装gitlab runner\n    ``` docker\n    sudo docker run -d --name gitlab-runner --restart always -v /srv/gitlab-runner/config:/docker/gitlab-runner/config -v /var/run/docker.sock:/docker/gitlab-runner/run/docker.sock gitlab/gitlab-runner:latest\n    * * * * * * 介绍 * * * * * *\n    sudo docker run -d --name gitlab-runner --restart always \\\n    v /srv/gitlab-runner/config:/docker/gitlab-runner/config \\\n    -v /var/run/docker.sock:/docker/gitlab-runner/run/docker.sock \\\n    gitlab/gitlab-runner:latest\n    ```\n+ [2.2] 注册gitlab runner(官方建议跟gitlab不要放在同一个服务器上)【最后没有成功,改用[07Gitlab01-runner](/2018/06/05/docker/07gitlab01-runner/) 】  \n参考地址:https://docs.gitlab.com.cn/runner/register/index.html  \n  * 运行下面命令启动注册程序  \n  sudo docker exec -it gitlab-runner gitlab-ci-multi-runner register\n  * 输入 GitLab 实例 URL  \n  gitlab的域名  \n  * 输入获取到的用于注册 Runner 的 token:  \n  y8R7nLY4x3mdBiZt9AQV  \n  *  输入该 Runner 的描述，稍后也可通过 GitLab's UI 修改:  \n  *  给该 Runner 指派 tags, 稍后也可以在 GitLab's UI 修改:  \n  *  选择 Runner 是否接收未指定 tags 的任务（默认值：false）， 稍后可以在 GitLab's UI 修改： true  \n  *  选择是否为当前项目锁定该 Runner， 之后也可以在 GitLab's UI 修改。 该功能通常用于被指定为某个项目的 Runner （默认值：true）：  \n  *  选择 Runner executor:  \n \t我们使用docker  \n  *  如果你选择 Docker 作为你的 executor，注册程序会让你设置一个默认的镜像， 作用于.gitlab-ci.yml中未指定镜像的项目  \n输入: microsoft/dotnet  \n---\n##### 搭建私有仓库\n1. 在docker中创建文件夹registry 用来存放仓库镜像，然后运行命令  \n  ``` docker\n  docker run -d -v /docker/registry:/var/lib/registry -p 8091:5000 --restart=always --name registry registry\n  ```\n\n##### 使用docker-compose安装\n请查看[docker-compose文件](http://qiniu.xxgtalk.cn/blog/files/docker/gitlab-docker-compose.yml) ","source":"_posts/docker/07gitlab.md","raw":"---\ntitle: Docker安装GitLab\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 47017\ndate: 2018-06-05 10:30:10\n---\n\nDocker下安装GitLab\n<!-- more -->\n\n> 前置条件 安装好docker  \n1. docker运行gitlab(由于22端口被ssh占用 改用23)  \n* 在/docker/gitlab 目录下分别创建data、config、logs三个文件夹  \n* 执行命令\n  ``` docker\n  sudo docker run --detach --hostname gitlab.xxgtalk.cn --publish 443:443 --publish 8090:80 --publish 23:22 --name gitlab --restart always -v /docker/gitlab/config:/etc/gitlab -v /docker/gitlab/logs:/var/log/gitlab -v /docker/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce\n  * * * * * * 介绍 * * * * * *\n  sudo docker run --detach \\\n  --hostname gitlab.xxgtalk.cn \\\n  --publish 443:443 --publish 8090:80 --publish 23:22 \\ \n  --name gitlab \\\n  --restart always \\\n  -v /docker/gitlab/config:/etc/gitlab \\ 配置文件映射到config文件夹\n  -v /docker/gitlab/logs:/var/log/gitlab \\\n  -v /docker/gitlab/data:/var/opt/gitlab \\\n  gitlab/gitlab-ce\n  ```\n::: warning 注意\n+ 因为配置的ssh端口是23 所以需要修改/docker/gitlab/config/gitlab.rb文件中修改或增加  \ngitlab_rails['gitlab_shell_ssh_port'] = 23\n+ 查看日志  \ndocker logs --follow gitlab  \n:::\n2. docker下安装gitlab runner  \n+ [2.1] 安装gitlab runner\n    ``` docker\n    sudo docker run -d --name gitlab-runner --restart always -v /srv/gitlab-runner/config:/docker/gitlab-runner/config -v /var/run/docker.sock:/docker/gitlab-runner/run/docker.sock gitlab/gitlab-runner:latest\n    * * * * * * 介绍 * * * * * *\n    sudo docker run -d --name gitlab-runner --restart always \\\n    v /srv/gitlab-runner/config:/docker/gitlab-runner/config \\\n    -v /var/run/docker.sock:/docker/gitlab-runner/run/docker.sock \\\n    gitlab/gitlab-runner:latest\n    ```\n+ [2.2] 注册gitlab runner(官方建议跟gitlab不要放在同一个服务器上)【最后没有成功,改用[07Gitlab01-runner](/2018/06/05/docker/07gitlab01-runner/) 】  \n参考地址:https://docs.gitlab.com.cn/runner/register/index.html  \n  * 运行下面命令启动注册程序  \n  sudo docker exec -it gitlab-runner gitlab-ci-multi-runner register\n  * 输入 GitLab 实例 URL  \n  gitlab的域名  \n  * 输入获取到的用于注册 Runner 的 token:  \n  y8R7nLY4x3mdBiZt9AQV  \n  *  输入该 Runner 的描述，稍后也可通过 GitLab's UI 修改:  \n  *  给该 Runner 指派 tags, 稍后也可以在 GitLab's UI 修改:  \n  *  选择 Runner 是否接收未指定 tags 的任务（默认值：false）， 稍后可以在 GitLab's UI 修改： true  \n  *  选择是否为当前项目锁定该 Runner， 之后也可以在 GitLab's UI 修改。 该功能通常用于被指定为某个项目的 Runner （默认值：true）：  \n  *  选择 Runner executor:  \n \t我们使用docker  \n  *  如果你选择 Docker 作为你的 executor，注册程序会让你设置一个默认的镜像， 作用于.gitlab-ci.yml中未指定镜像的项目  \n输入: microsoft/dotnet  \n---\n##### 搭建私有仓库\n1. 在docker中创建文件夹registry 用来存放仓库镜像，然后运行命令  \n  ``` docker\n  docker run -d -v /docker/registry:/var/lib/registry -p 8091:5000 --restart=always --name registry registry\n  ```\n\n##### 使用docker-compose安装\n请查看[docker-compose文件](http://qiniu.xxgtalk.cn/blog/files/docker/gitlab-docker-compose.yml) ","slug":"docker/07gitlab","published":1,"updated":"2020-02-23T13:45:22.659Z","_id":"cjocck1nw000r70uk7xhv6gz5","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Docker下安装GitLab<br><a id=\"more\"></a></p>\n<blockquote>\n<p>前置条件 安装好docker  </p>\n<ol>\n<li>docker运行gitlab(由于22端口被ssh占用 改用23)  </li>\n</ol>\n<ul>\n<li>在/docker/gitlab 目录下分别创建data、config、logs三个文件夹  </li>\n<li>执行命令<pre class=\" language-docker\"><code class=\"language-docker\">sudo docker run <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>detach <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>hostname gitlab.xxgtalk.cn <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>publish 443<span class=\"token punctuation\">:</span>443 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>publish 8090<span class=\"token punctuation\">:</span>80 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>publish 23<span class=\"token punctuation\">:</span>22 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>name gitlab <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>restart always <span class=\"token punctuation\">-</span>v /docker/gitlab/config<span class=\"token punctuation\">:</span>/etc/gitlab <span class=\"token punctuation\">-</span>v /docker/gitlab/logs<span class=\"token punctuation\">:</span>/var/log/gitlab <span class=\"token punctuation\">-</span>v /docker/gitlab/data<span class=\"token punctuation\">:</span>/var/opt/gitlab gitlab/gitlab<span class=\"token punctuation\">-</span>ce\n* * * * * * 介绍 * * * * * *\nsudo docker run <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>detach \\\n<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>hostname gitlab.xxgtalk.cn \\\n<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>publish 443<span class=\"token punctuation\">:</span>443 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>publish 8090<span class=\"token punctuation\">:</span>80 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>publish 23<span class=\"token punctuation\">:</span>22 \\ \n<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>name gitlab \\\n<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>restart always \\\n<span class=\"token punctuation\">-</span>v /docker/gitlab/config<span class=\"token punctuation\">:</span>/etc/gitlab \\ 配置文件映射到config文件夹\n<span class=\"token punctuation\">-</span>v /docker/gitlab/logs<span class=\"token punctuation\">:</span>/var/log/gitlab \\\n<span class=\"token punctuation\">-</span>v /docker/gitlab/data<span class=\"token punctuation\">:</span>/var/opt/gitlab \\\ngitlab/gitlab<span class=\"token punctuation\">-</span>ce\n</code></pre>\n::: warning 注意</li>\n</ul>\n<ul>\n<li>因为配置的ssh端口是23 所以需要修改/docker/gitlab/config/gitlab.rb文件中修改或增加<br>gitlab_rails[‘gitlab_shell_ssh_port’] = 23</li>\n<li>查看日志<br>docker logs –follow gitlab<br>:::</li>\n</ul>\n<ol start=\"2\">\n<li>docker下安装gitlab runner  </li>\n</ol>\n<ul>\n<li>[2.1] 安装gitlab runner<pre class=\" language-docker\"><code class=\"language-docker\">  sudo docker run <span class=\"token punctuation\">-</span>d <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>name gitlab<span class=\"token punctuation\">-</span>runner <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>restart always <span class=\"token punctuation\">-</span>v /srv/gitlab<span class=\"token punctuation\">-</span>runner/config<span class=\"token punctuation\">:</span>/docker/gitlab<span class=\"token punctuation\">-</span>runner/config <span class=\"token punctuation\">-</span>v /var/run/docker.sock<span class=\"token punctuation\">:</span>/docker/gitlab<span class=\"token punctuation\">-</span>runner/run/docker.sock gitlab/gitlab<span class=\"token punctuation\">-</span>runner<span class=\"token punctuation\">:</span>latest\n  * * * * * * 介绍 * * * * * *\n  sudo docker run <span class=\"token punctuation\">-</span>d <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>name gitlab<span class=\"token punctuation\">-</span>runner <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>restart always \\\n  v /srv/gitlab<span class=\"token punctuation\">-</span>runner/config<span class=\"token punctuation\">:</span>/docker/gitlab<span class=\"token punctuation\">-</span>runner/config \\\n  <span class=\"token punctuation\">-</span>v /var/run/docker.sock<span class=\"token punctuation\">:</span>/docker/gitlab<span class=\"token punctuation\">-</span>runner/run/docker.sock \\\n  gitlab/gitlab<span class=\"token punctuation\">-</span>runner<span class=\"token punctuation\">:</span>latest\n</code></pre>\n</li>\n<li>[2.2] 注册gitlab runner(官方建议跟gitlab不要放在同一个服务器上)【最后没有成功,改用<a href=\"/2018/06/05/docker/07gitlab01-runner/\">07Gitlab01-runner</a> 】<br>参考地址:<a href=\"https://docs.gitlab.com.cn/runner/register/index.html\">https://docs.gitlab.com.cn/runner/register/index.html</a>  <ul>\n<li>运行下面命令启动注册程序<br>sudo docker exec -it gitlab-runner gitlab-ci-multi-runner register</li>\n<li>输入 GitLab 实例 URL<br>gitlab的域名  </li>\n<li>输入获取到的用于注册 Runner 的 token:<br>y8R7nLY4x3mdBiZt9AQV  </li>\n<li>输入该 Runner 的描述，稍后也可通过 GitLab’s UI 修改:  </li>\n<li>给该 Runner 指派 tags, 稍后也可以在 GitLab’s UI 修改:  </li>\n<li>选择 Runner 是否接收未指定 tags 的任务（默认值：false）， 稍后可以在 GitLab’s UI 修改： true  </li>\n<li>选择是否为当前项目锁定该 Runner， 之后也可以在 GitLab’s UI 修改。 该功能通常用于被指定为某个项目的 Runner （默认值：true）：  </li>\n<li>选择 Runner executor:<br>我们使用docker  </li>\n<li>如果你选择 Docker 作为你的 executor，注册程序会让你设置一个默认的镜像， 作用于.gitlab-ci.yml中未指定镜像的项目  </li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h2 id=\"输入-microsoft-dotnet\"><a href=\"#输入-microsoft-dotnet\" class=\"headerlink\" title=\"输入: microsoft/dotnet  \"></a>输入: microsoft/dotnet  </h2><h5 id=\"搭建私有仓库\"><a href=\"#搭建私有仓库\" class=\"headerlink\" title=\"搭建私有仓库\"></a>搭建私有仓库</h5><ol>\n<li>在docker中创建文件夹registry 用来存放仓库镜像，然后运行命令  <pre class=\" language-docker\"><code class=\"language-docker\">docker run <span class=\"token punctuation\">-</span>d <span class=\"token punctuation\">-</span>v /docker/registry<span class=\"token punctuation\">:</span>/var/lib/registry <span class=\"token punctuation\">-</span>p 8091<span class=\"token punctuation\">:</span>5000 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>restart=always <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>name registry registry\n</code></pre>\n</li>\n</ol>\n<h5 id=\"使用docker-compose安装\"><a href=\"#使用docker-compose安装\" class=\"headerlink\" title=\"使用docker-compose安装\"></a>使用docker-compose安装</h5><p>请查看<a href=\"http://qiniu.xxgtalk.cn/blog/files/docker/gitlab-docker-compose.yml\">docker-compose文件</a> </p>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Docker下安装GitLab<br>","more":"</p>\n<blockquote>\n<p>前置条件 安装好docker  </p>\n<ol>\n<li>docker运行gitlab(由于22端口被ssh占用 改用23)  </li>\n</ol>\n<ul>\n<li>在/docker/gitlab 目录下分别创建data、config、logs三个文件夹  </li>\n<li>执行命令<pre><code class=\"docker\">sudo docker run --detach --hostname gitlab.xxgtalk.cn --publish 443:443 --publish 8090:80 --publish 23:22 --name gitlab --restart always -v /docker/gitlab/config:/etc/gitlab -v /docker/gitlab/logs:/var/log/gitlab -v /docker/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce\n* * * * * * 介绍 * * * * * *\nsudo docker run --detach \\\n--hostname gitlab.xxgtalk.cn \\\n--publish 443:443 --publish 8090:80 --publish 23:22 \\ \n--name gitlab \\\n--restart always \\\n-v /docker/gitlab/config:/etc/gitlab \\ 配置文件映射到config文件夹\n-v /docker/gitlab/logs:/var/log/gitlab \\\n-v /docker/gitlab/data:/var/opt/gitlab \\\ngitlab/gitlab-ce\n</code></pre>\n::: warning 注意</li>\n</ul>\n<ul>\n<li>因为配置的ssh端口是23 所以需要修改/docker/gitlab/config/gitlab.rb文件中修改或增加<br>gitlab_rails[‘gitlab_shell_ssh_port’] = 23</li>\n<li>查看日志<br>docker logs –follow gitlab<br>:::</li>\n</ul>\n<ol start=\"2\">\n<li>docker下安装gitlab runner  </li>\n</ol>\n<ul>\n<li>[2.1] 安装gitlab runner<pre><code class=\"docker\">  sudo docker run -d --name gitlab-runner --restart always -v /srv/gitlab-runner/config:/docker/gitlab-runner/config -v /var/run/docker.sock:/docker/gitlab-runner/run/docker.sock gitlab/gitlab-runner:latest\n  * * * * * * 介绍 * * * * * *\n  sudo docker run -d --name gitlab-runner --restart always \\\n  v /srv/gitlab-runner/config:/docker/gitlab-runner/config \\\n  -v /var/run/docker.sock:/docker/gitlab-runner/run/docker.sock \\\n  gitlab/gitlab-runner:latest\n</code></pre>\n</li>\n<li>[2.2] 注册gitlab runner(官方建议跟gitlab不要放在同一个服务器上)【最后没有成功,改用<a href=\"/2018/06/05/docker/07gitlab01-runner/\">07Gitlab01-runner</a> 】<br>参考地址:<a href=\"https://docs.gitlab.com.cn/runner/register/index.html\">https://docs.gitlab.com.cn/runner/register/index.html</a>  <ul>\n<li>运行下面命令启动注册程序<br>sudo docker exec -it gitlab-runner gitlab-ci-multi-runner register</li>\n<li>输入 GitLab 实例 URL<br>gitlab的域名  </li>\n<li>输入获取到的用于注册 Runner 的 token:<br>y8R7nLY4x3mdBiZt9AQV  </li>\n<li>输入该 Runner 的描述，稍后也可通过 GitLab’s UI 修改:  </li>\n<li>给该 Runner 指派 tags, 稍后也可以在 GitLab’s UI 修改:  </li>\n<li>选择 Runner 是否接收未指定 tags 的任务（默认值：false）， 稍后可以在 GitLab’s UI 修改： true  </li>\n<li>选择是否为当前项目锁定该 Runner， 之后也可以在 GitLab’s UI 修改。 该功能通常用于被指定为某个项目的 Runner （默认值：true）：  </li>\n<li>选择 Runner executor:<br>我们使用docker  </li>\n<li>如果你选择 Docker 作为你的 executor，注册程序会让你设置一个默认的镜像， 作用于.gitlab-ci.yml中未指定镜像的项目  </li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<h2 id=\"输入-microsoft-dotnet\"><a href=\"#输入-microsoft-dotnet\" class=\"headerlink\" title=\"输入: microsoft/dotnet  \"></a>输入: microsoft/dotnet  </h2><h5 id=\"搭建私有仓库\"><a href=\"#搭建私有仓库\" class=\"headerlink\" title=\"搭建私有仓库\"></a>搭建私有仓库</h5><ol>\n<li>在docker中创建文件夹registry 用来存放仓库镜像，然后运行命令  <pre><code class=\"docker\">docker run -d -v /docker/registry:/var/lib/registry -p 8091:5000 --restart=always --name registry registry\n</code></pre>\n</li>\n</ol>\n<h5 id=\"使用docker-compose安装\"><a href=\"#使用docker-compose安装\" class=\"headerlink\" title=\"使用docker-compose安装\"></a>使用docker-compose安装</h5><p>请查看<a href=\"http://qiniu.xxgtalk.cn/blog/files/docker/gitlab-docker-compose.yml\">docker-compose文件</a> </p>"},{"title":"Docker安装redis","date":"2018-06-06T03:15:10.000Z","_content":"\nDocker下安装redis\n<!-- more -->\n\n1. 创建网络  \ndocker network create net_redis\n2. 创建redis配置文件(/docker/redis/config/redis.conf)  \n    ``` bash\n    #redis的databases数量\n    databases 32\n    #redis密码\n    requirepass 123\n    ```\n3. 通过docker-compose安装  \ndocker-compose -f redis-docker-compose.yml up -d  \n[文件链接](http://qiniu.xxgtalk.cn/blog/files/docker/redis-docker-compose.yml)  \n","source":"_posts/docker/11docker-redis.md","raw":"---\ntitle: Docker安装redis\ndate: 2018-06-06 11:15:10 \ncategories: ['Docker']\ntags: ['Docker']\n---\n\nDocker下安装redis\n<!-- more -->\n\n1. 创建网络  \ndocker network create net_redis\n2. 创建redis配置文件(/docker/redis/config/redis.conf)  \n    ``` bash\n    #redis的databases数量\n    databases 32\n    #redis密码\n    requirepass 123\n    ```\n3. 通过docker-compose安装  \ndocker-compose -f redis-docker-compose.yml up -d  \n[文件链接](http://qiniu.xxgtalk.cn/blog/files/docker/redis-docker-compose.yml)  \n","slug":"docker/11docker-redis","published":1,"updated":"2018-11-11T04:38:17.216Z","_id":"cjocck1nz000u70ukzemi9xg3","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Docker下安装redis<br><a id=\"more\"></a></p>\n<ol>\n<li>创建网络<br>docker network create net_redis</li>\n<li><p>创建redis配置文件(/docker/redis/config/redis.conf)  </p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#redis的databases数量</span></span><br><span class=\"line\">databases 32</span><br><span class=\"line\"><span class=\"comment\">#redis密码</span></span><br><span class=\"line\">requirepass 123</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>通过docker-compose安装<br>docker-compose -f redis-docker-compose.yml up -d<br><a href=\"http://qiniu.xxgtalk.cn/blog/files/docker/redis-docker-compose.yml\" target=\"_blank\" rel=\"noopener\">文件链接</a>  </p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>Docker下安装redis<br>","more":"</p>\n<ol>\n<li>创建网络<br>docker network create net_redis</li>\n<li><p>创建redis配置文件(/docker/redis/config/redis.conf)  </p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#redis的databases数量</span></span><br><span class=\"line\">databases 32</span><br><span class=\"line\"><span class=\"comment\">#redis密码</span></span><br><span class=\"line\">requirepass 123</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>通过docker-compose安装<br>docker-compose -f redis-docker-compose.yml up -d<br><a href=\"http://qiniu.xxgtalk.cn/blog/files/docker/redis-docker-compose.yml\" target=\"_blank\" rel=\"noopener\">文件链接</a>  </p>\n</li>\n</ol>"},{"title":"Docker安装RabbitMQ","date":"2018-06-08T03:30:10.000Z","_content":"\nDocker安装RabbitMQ\n<!-- more -->\n\n> 参考地址:https://hub.docker.com/_/rabbitmq/\n- 运行命令   \n    ``` docker\n    docker run -d -p 8092:15672 -p 5672:5672  --restart always --hostname my-rabbit --name rabbit -e RABBITMQ_DEFAULT_USER=xxg -e RABBITMQ_DEFAULT_PASS=Abcd1234  rabbitmq:3-management\n    ```\n> 说明  \n-e RABBITMQ_DEFAULT_USER=xxg    --默认用户名  \n-e RABBITMQ_DEFAULT_PASS=Abcd1234   --默认密码  \nrabbitmq:3-management       --表示使用带插件版本的(可以通过http://host-ip:8092 访问管理控制台)  \n4369/tcp    服务器 需要开放这个端口  \n5671/tcp    服务器 需要开放这个端口  ","source":"_posts/docker/12docker-rabbitmq.md","raw":"---\ntitle: Docker安装RabbitMQ\ndate: 2018-06-08 11:30:10 \ncategories: ['Docker']\ntags: ['Docker']\n---\n\nDocker安装RabbitMQ\n<!-- more -->\n\n> 参考地址:https://hub.docker.com/_/rabbitmq/\n- 运行命令   \n    ``` docker\n    docker run -d -p 8092:15672 -p 5672:5672  --restart always --hostname my-rabbit --name rabbit -e RABBITMQ_DEFAULT_USER=xxg -e RABBITMQ_DEFAULT_PASS=Abcd1234  rabbitmq:3-management\n    ```\n> 说明  \n-e RABBITMQ_DEFAULT_USER=xxg    --默认用户名  \n-e RABBITMQ_DEFAULT_PASS=Abcd1234   --默认密码  \nrabbitmq:3-management       --表示使用带插件版本的(可以通过http://host-ip:8092 访问管理控制台)  \n4369/tcp    服务器 需要开放这个端口  \n5671/tcp    服务器 需要开放这个端口  ","slug":"docker/12docker-rabbitmq","published":1,"updated":"2018-09-27T10:59:38.616Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1o1000x70ukqhig6vj9","content":"<p>Docker安装RabbitMQ<br><a id=\"more\"></a></p>\n<blockquote>\n<p>参考地址:<a href=\"https://hub.docker.com/_/rabbitmq/\" target=\"_blank\" rel=\"noopener\">https://hub.docker.com/_/rabbitmq/</a></p>\n<ul>\n<li>运行命令     <figure class=\"highlight docker\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"keyword\">run</span><span class=\"bash\"> -d -p 8092:15672 -p 5672:5672  --restart always --hostname my-rabbit --name rabbit -e RABBITMQ_DEFAULT_USER=xxg -e RABBITMQ_DEFAULT_PASS=Abcd1234  rabbitmq:3-management</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</blockquote>\n<blockquote>\n<p>说明<br>-e RABBITMQ_DEFAULT_USER=xxg    –默认用户名<br>-e RABBITMQ_DEFAULT_PASS=Abcd1234   –默认密码<br>rabbitmq:3-management       –表示使用带插件版本的(可以通过<a href=\"http://host-ip:8092\" target=\"_blank\" rel=\"noopener\">http://host-ip:8092</a> 访问管理控制台)<br>4369/tcp    服务器 需要开放这个端口<br>5671/tcp    服务器 需要开放这个端口  </p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<p>Docker安装RabbitMQ<br>","more":"</p>\n<blockquote>\n<p>参考地址:<a href=\"https://hub.docker.com/_/rabbitmq/\" target=\"_blank\" rel=\"noopener\">https://hub.docker.com/_/rabbitmq/</a></p>\n<ul>\n<li>运行命令     <figure class=\"highlight docker\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"keyword\">run</span><span class=\"bash\"> -d -p 8092:15672 -p 5672:5672  --restart always --hostname my-rabbit --name rabbit -e RABBITMQ_DEFAULT_USER=xxg -e RABBITMQ_DEFAULT_PASS=Abcd1234  rabbitmq:3-management</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</blockquote>\n<blockquote>\n<p>说明<br>-e RABBITMQ_DEFAULT_USER=xxg    –默认用户名<br>-e RABBITMQ_DEFAULT_PASS=Abcd1234   –默认密码<br>rabbitmq:3-management       –表示使用带插件版本的(可以通过<a href=\"http://host-ip:8092\" target=\"_blank\" rel=\"noopener\">http://host-ip:8092</a> 访问管理控制台)<br>4369/tcp    服务器 需要开放这个端口<br>5671/tcp    服务器 需要开放这个端口  </p>\n</blockquote>"},{"title":"Openssl生成免费证书","date":"2018-05-16T01:10:10.000Z","_content":"\n使用Openssl生成免费证书\n<!-- more -->\n\n> 官网地址 openssl的windows官网: https://slproweb.com/products/Win32OpenSSL.html  \n1. 下载安装\n2. 在自己目录下运行 \n    ``` bash\n    openssl req -newkey rsa:2048 -nodes -keyout socialnetwork.key -x509 -days 365 -out socialnetwork.cer\n    ```\n3. 生成pfx文件命令\n    ``` bash\n    openssl pkcs12 -export -in socialnetwork.cer -inkey socialnetwork.key -out socialnetwork.pfx\n    ```","source":"_posts/tools/cer.md","raw":"---\ntitle: Openssl生成免费证书\ndate: 2018-05-16 09:10:10 \ncategories: ['工具']\ntags: ['工具']\n---\n\n使用Openssl生成免费证书\n<!-- more -->\n\n> 官网地址 openssl的windows官网: https://slproweb.com/products/Win32OpenSSL.html  \n1. 下载安装\n2. 在自己目录下运行 \n    ``` bash\n    openssl req -newkey rsa:2048 -nodes -keyout socialnetwork.key -x509 -days 365 -out socialnetwork.cer\n    ```\n3. 生成pfx文件命令\n    ``` bash\n    openssl pkcs12 -export -in socialnetwork.cer -inkey socialnetwork.key -out socialnetwork.pfx\n    ```","slug":"tools/cer","published":1,"updated":"2018-09-27T10:59:38.626Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1o3001070ukwfx2pmpw","content":"<p>使用Openssl生成免费证书<br><a id=\"more\"></a></p>\n<blockquote>\n<p>官网地址 openssl的windows官网: <a href=\"https://slproweb.com/products/Win32OpenSSL.html\" target=\"_blank\" rel=\"noopener\">https://slproweb.com/products/Win32OpenSSL.html</a>  </p>\n<ol>\n<li>下载安装</li>\n<li>在自己目录下运行  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl req -newkey rsa:2048 -nodes -keyout socialnetwork.key -x509 -days 365 -out socialnetwork.cer</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</blockquote>\n<ol start=\"3\">\n<li>生成pfx文件命令 <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl pkcs12 -<span class=\"built_in\">export</span> -<span class=\"keyword\">in</span> socialnetwork.cer -inkey socialnetwork.key -out socialnetwork.pfx</span><br></pre></td></tr></table></figure></li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>使用Openssl生成免费证书<br>","more":"</p>\n<blockquote>\n<p>官网地址 openssl的windows官网: <a href=\"https://slproweb.com/products/Win32OpenSSL.html\" target=\"_blank\" rel=\"noopener\">https://slproweb.com/products/Win32OpenSSL.html</a>  </p>\n<ol>\n<li>下载安装</li>\n<li>在自己目录下运行  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl req -newkey rsa:2048 -nodes -keyout socialnetwork.key -x509 -days 365 -out socialnetwork.cer</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</blockquote>\n<ol start=\"3\">\n<li>生成pfx文件命令 <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">openssl pkcs12 -<span class=\"built_in\">export</span> -<span class=\"keyword\">in</span> socialnetwork.cer -inkey socialnetwork.key -out socialnetwork.pfx</span><br></pre></td></tr></table></figure></li>\n</ol>"},{"title":"资料收集(持续更新中...)","abbrlink":28144,"date":"2018-09-13T01:10:10.000Z","_content":"\n各大组件、工具收藏夹(持续更新中...)\n<!-- more -->\n\n\n## 后端 \n| 类型 | 推荐组件\n| :--- | :--- \n|爬虫 |[puppeteer](https://github.com/GoogleChrome/puppeteer)、[puppeteer-sharp](https://github.com/kblok/puppeteer-sharp)、[DotnetSpide](https://github.com/dotnetcore/DotnetSpider)、[Hawk](https://github.com/ferventdesert/Hawk)\n|工业物联网 | [HslCommunication](https://github.com/dathlin/HslCommunication)\n|斗地主| [FightLandlord](https://github.com/2881099/FightLandlord)\n|规则引擎| [NRules](https://github.com/NRules/NRules)\n|机器人|[BotDemo](https://github.com/leonlj/BotDemo)\n|定时任务|[quartzui](https://github.com/zhaopeiym/quartzui)、[Topshelf](https://github.com/Topshelf/Topshelf)\n|机器学| [machinelearning](https://github.com/dotnet/machinelearning)\n|导出pdf|[jsPDF](https://github.com/MrRio/jsPDF)、[wkhtmltopdf](https://github.com/wkhtmltopdf/wkhtmltopdf)、[itextsharp](https://github.com/itext/itextsharp)\n|redis桌面管理器|[RedisPlus](https://gitee.com/MaxBill/RedisPlus)\n|host切换工具|[SwitchHosts](https://github.com/oldj/SwitchHosts)\n|异常收集框架 | [Exceptionless](https://github.com/exceptionless/Exceptionless)\n|容器监管|[portainer](https://github.com/portainer/portainer)\n\n## 工具\n| 类型 | 推荐组件\n| :--- | :--- \n|redis桌面管理器|[RedisPlus](https://gitee.com/MaxBill/RedisPlus)\n|host切换工具|[SwitchHosts](https://github.com/oldj/SwitchHosts)\n\n## 纯前端库\n| 类型 | 推荐组件\n| :--- | :--- \n|数字转大写|[nzh](https://github.com/cnwhy/nzh)\n|js帮助库|[lodash](https://github.com/lodash/lodash)\n|时区|[moment](https://github.com/moment/moment)\n|3D动画|[Three.js](https://github.com/mrdoob/three.js)\n|动画|[Anime.js](https://github.com/juliangarnier/anime)、[GreenSock](https://github.com/greensock/GreenSock-JS)\n|打字机|[ityped](https://github.com/luisvinicius167/ityped)\n|悬停效果|[Hover](https://github.com/IanLunn/Hover)\n|快捷键|[hotkeys](https://github.com/jaywcjlove/hotkeys)\n|拖拽|[react-dnd](https://github.com/react-dnd/react-dnd)、[react-beautiful-dnd](https://github.com/atlassian/react-beautiful-dnd)|\n\n## 推荐.neter常用优秀开源项目\n- Domain-Driven-Design-Example  \nDDD 示例 挺不错的.  \n[github https://github.com/zkavtaskin/Domain-Driven-Design-Example](https://github.com/zkavtaskin/Domain-Driven-Design-Example)\n\n- SmartStoreNET\n开源的电商项目  \n[github https://github.com/smartstore/SmartStoreNET](https://github.com/smartstore/SmartStoreNET)\n\n- abp  \nABP框架全称为“ASP.NET Boilerplate Project”，中文翻译为“ ASP.NET样板项目”，ABP是一个开源应用程序框架,专注于基于ASP.NET Core 的Web应用程序开发,但也支持开发其他类型的应用程序  \n[github https://github.com/abpframework/abp](https://github.com/abpframework/abp)\n\n- grpc  \ngRPC 是一个由Google开源的，跨语言的，高性能的远程过程调用（RPC）框架。gRPC使客户端和服务端应用程序可以透明地进行通信，并简化了连接系统的构建。它使用HTTP/2作为通信协议，使用 Protocol Buffers 作为序列化协议。并且微软官方 ASP.NET 项目的人员进行维护，良好的接入 .NET Core 生态  \n[github https://github.com/grpc/grpc-dotnet](https://github.com/grpc/grpc-dotnet)\n\n- Autofac  \nIOC容器  \n[github https://github.com/autofac/Autofac](https://github.com/autofac/Autofac)\n\n- Hangfire  \n非常容易地在.NET或者.NETcore应用程序中执行后台任务，无需windows服务或者单独的进程。且任务信息可以被持久保存。  \n[github https://github.com/HangfireIO/Hangfire](https://github.com/HangfireIO/Hangfire)\n\n- quartz  \n任务调度  \n[github https://github.com/quartznet/quartznet](https://github.com/quartznet/quartznet)\n\n- polly\nPolly 是一个 .NET 弹性和瞬态故障处理库，允许开发人员以 Fluent 和线程安全的方式来实现重试、断路、超时、隔离和回退策略。  \n[github https://github.com/App-vNext/Polly](https://github.com/App-vNext/Polly)  \n\n- redis 命令\n《Redis Command Reference》全文的中文翻译版。 http://RedisDoc.com  \n[github https://github.com/huangz1990/redis](https://github.com/huangz1990/redis)  \n\n- orleans\n一种构建分布式、 高规模（伸缩）的应用程序， 奥尔良是一个框架，提供一个简单的方法来构建分布式的高规模计算应用程序，而无需了解并应用复杂并发或其他伸缩模式。它是由微软研究院创建和设计在云计算中使用。  \n[github https://github.com/dotnet/orleans](https://github.com/dotnet/orleans)  \n\n- rabbitmq-dotnet-client\nrabbitmq 客户端类库  \n[github https://github.com/rabbitmq/rabbitmq-dotnet-client](https://github.com/rabbitmq/rabbitmq-dotnet-client)  \n\n- AutoMapper\n将一个对象映射到另一个对象的代码。摆脱了繁琐的赋值过程  \n[github https://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)  \n\n## 程序员一般可以从什么平台接私活\n\n### 国内\n- 程序员客栈：https://www.proginn.com\n程序员客栈中国非常领先的自由工作平台，为中高端程序员、产品经理和设计师等等互联网相关人员提供稳定的线上工作机会，包括自由工作、远程工作和兼职工作，还支持按需雇佣，工作模式非常多，感兴趣的推荐大家尝试一下。\n虽然名称叫程序员客栈，但是除了程序员，像产品经理，设计师等等互联网相关人员，都能在上面找到适合自己的项目。感兴趣的可以体验一下  \n[https://www.proginn.com](https://www.proginn.com)\n\n- CODING 码市：https://mart.coding.net  \nCoding 旗下的互联网软件外包服务平台，平台以外包为主。\n\n- 开源众包：zb.oschina.net/projects  \n开源中国的众包平台，主要是以众包为主。\n\n- 猪八戒：https://zbj.com  \n找兼职的地方，主要是入门级项目，不适合专业程序员，只适合新手。\n\n- 英选：linktion.cn  \n平台以定制开发外包服务为主，也是外包项目平台。\n\n- 快码众包：kuaima.co  \n\n- 码易众包平台：mayigeek.com  \n\n-  一早一晚平台：yizaoyiwan.com/  \n\n- 开发邦：http://www.kaifabang.com  \n\n- 人人开发：rrkf.com  \n\n- 厘米脚印：http://www.limijiaoyin.com  \n\n- Sxsoft：https://www.sxsoft.com/  \n\n- 猿急送：https://www.yuanjisong.com/\n\n-  实现网传送门：shixian.com/\n\n- 智城外包网：http://www.taskcity.com/\n\n### 国外\n- Upwork：https://www.upwork.com/  \nUpwork 是全球最大的、最优秀的、最规范的综合类人力外包服务平台，由著名的 Elance 和 oDesk 合并。这里聚集 900 万来自全球各地的自由工作者，你肯定可以在找到适合你的职位  \n\n- Freelancer：https://www.freelance.com/\n工作类型覆盖了很多不同的领域，由程序开发到市场营销、广告、会计、法务等一系列的可以远程的工作  \n\n- Dribbble：https://dribbble.com/jobs  \n你没看错，Dribbble 不只是全球最受欢迎的设计师社区，同样是设计师寻找远程工作的好出处。自从被 Tiny 收购后，Dribbble 的招聘属性正在慢慢增强，试着持续 PO 出自己的好作品，等待你的伯乐，同样你可以关注 Jobs 页面，给心仪的 Team 提交简历  \n\n- Stackoverflow：https://stackoverflow.com/jobs  \n被广大程序员熟知的 Stackoverflow 本身就是一个全民远程工作的公司，程序员在远程工作中有很大的先天优势，Stackoverflow Jobs 里有远程职位的筛选，这里有丰富的远程技术职位  \n\n- 99designs：https://99designs.com/  \n99designs 是一个专门针对设计师的雇佣平台，你可以在这里参加设计竞赛给公开的项目投标，也可以给雇主提供一对一的专业服务  \n\n- Remoteok：https://remoteok.io/  \nRemoteok 不仅提供最初的兼职类远程工作，还有全职类，签署合同类和实习类的工作。网站创始人 Pieter Levels 本身就是一名数字游民，他同样是 Nomadlist 的创始人  \n\n- Toptal：https://www.toptal.com/  \nToptal 是一个高端一些的自由职业者平台，适合比较有经验和工作尽力的远程工作者。它将企业与全球的软件工程师，设计师和业务顾问联系起来  \n\n- Ange：https://angel.co/job-collections/remote  \nAngelList 主要是服务于初创公司和天使投资人的平台，这里还有初创公司提供的远程工作的机会，如果对远程加入初创公司感兴趣的，可以尝试一下  \n\n- Topcoder：https://www.topcoder.com/  \nTopcoder 通过算法比赛吸引世界顶级的程序员，他会将一下大型项目分割成很多小模块，通过竞赛的模式交给用户来做，优胜者可以拿到制定模块的奖金  \n\n> [react相关](/2018/12/10/front/react/components)\n\n\n","source":"_posts/tools/collections.md","raw":"---\ntitle: 资料收集(持续更新中...)\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 28144\ndate: 2018-09-13 09:10:10\n---\n\n各大组件、工具收藏夹(持续更新中...)\n<!-- more -->\n\n\n## 后端 \n| 类型 | 推荐组件\n| :--- | :--- \n|爬虫 |[puppeteer](https://github.com/GoogleChrome/puppeteer)、[puppeteer-sharp](https://github.com/kblok/puppeteer-sharp)、[DotnetSpide](https://github.com/dotnetcore/DotnetSpider)、[Hawk](https://github.com/ferventdesert/Hawk)\n|工业物联网 | [HslCommunication](https://github.com/dathlin/HslCommunication)\n|斗地主| [FightLandlord](https://github.com/2881099/FightLandlord)\n|规则引擎| [NRules](https://github.com/NRules/NRules)\n|机器人|[BotDemo](https://github.com/leonlj/BotDemo)\n|定时任务|[quartzui](https://github.com/zhaopeiym/quartzui)、[Topshelf](https://github.com/Topshelf/Topshelf)\n|机器学| [machinelearning](https://github.com/dotnet/machinelearning)\n|导出pdf|[jsPDF](https://github.com/MrRio/jsPDF)、[wkhtmltopdf](https://github.com/wkhtmltopdf/wkhtmltopdf)、[itextsharp](https://github.com/itext/itextsharp)\n|redis桌面管理器|[RedisPlus](https://gitee.com/MaxBill/RedisPlus)\n|host切换工具|[SwitchHosts](https://github.com/oldj/SwitchHosts)\n|异常收集框架 | [Exceptionless](https://github.com/exceptionless/Exceptionless)\n|容器监管|[portainer](https://github.com/portainer/portainer)\n\n## 工具\n| 类型 | 推荐组件\n| :--- | :--- \n|redis桌面管理器|[RedisPlus](https://gitee.com/MaxBill/RedisPlus)\n|host切换工具|[SwitchHosts](https://github.com/oldj/SwitchHosts)\n\n## 纯前端库\n| 类型 | 推荐组件\n| :--- | :--- \n|数字转大写|[nzh](https://github.com/cnwhy/nzh)\n|js帮助库|[lodash](https://github.com/lodash/lodash)\n|时区|[moment](https://github.com/moment/moment)\n|3D动画|[Three.js](https://github.com/mrdoob/three.js)\n|动画|[Anime.js](https://github.com/juliangarnier/anime)、[GreenSock](https://github.com/greensock/GreenSock-JS)\n|打字机|[ityped](https://github.com/luisvinicius167/ityped)\n|悬停效果|[Hover](https://github.com/IanLunn/Hover)\n|快捷键|[hotkeys](https://github.com/jaywcjlove/hotkeys)\n|拖拽|[react-dnd](https://github.com/react-dnd/react-dnd)、[react-beautiful-dnd](https://github.com/atlassian/react-beautiful-dnd)|\n\n## 推荐.neter常用优秀开源项目\n- Domain-Driven-Design-Example  \nDDD 示例 挺不错的.  \n[github https://github.com/zkavtaskin/Domain-Driven-Design-Example](https://github.com/zkavtaskin/Domain-Driven-Design-Example)\n\n- SmartStoreNET\n开源的电商项目  \n[github https://github.com/smartstore/SmartStoreNET](https://github.com/smartstore/SmartStoreNET)\n\n- abp  \nABP框架全称为“ASP.NET Boilerplate Project”，中文翻译为“ ASP.NET样板项目”，ABP是一个开源应用程序框架,专注于基于ASP.NET Core 的Web应用程序开发,但也支持开发其他类型的应用程序  \n[github https://github.com/abpframework/abp](https://github.com/abpframework/abp)\n\n- grpc  \ngRPC 是一个由Google开源的，跨语言的，高性能的远程过程调用（RPC）框架。gRPC使客户端和服务端应用程序可以透明地进行通信，并简化了连接系统的构建。它使用HTTP/2作为通信协议，使用 Protocol Buffers 作为序列化协议。并且微软官方 ASP.NET 项目的人员进行维护，良好的接入 .NET Core 生态  \n[github https://github.com/grpc/grpc-dotnet](https://github.com/grpc/grpc-dotnet)\n\n- Autofac  \nIOC容器  \n[github https://github.com/autofac/Autofac](https://github.com/autofac/Autofac)\n\n- Hangfire  \n非常容易地在.NET或者.NETcore应用程序中执行后台任务，无需windows服务或者单独的进程。且任务信息可以被持久保存。  \n[github https://github.com/HangfireIO/Hangfire](https://github.com/HangfireIO/Hangfire)\n\n- quartz  \n任务调度  \n[github https://github.com/quartznet/quartznet](https://github.com/quartznet/quartznet)\n\n- polly\nPolly 是一个 .NET 弹性和瞬态故障处理库，允许开发人员以 Fluent 和线程安全的方式来实现重试、断路、超时、隔离和回退策略。  \n[github https://github.com/App-vNext/Polly](https://github.com/App-vNext/Polly)  \n\n- redis 命令\n《Redis Command Reference》全文的中文翻译版。 http://RedisDoc.com  \n[github https://github.com/huangz1990/redis](https://github.com/huangz1990/redis)  \n\n- orleans\n一种构建分布式、 高规模（伸缩）的应用程序， 奥尔良是一个框架，提供一个简单的方法来构建分布式的高规模计算应用程序，而无需了解并应用复杂并发或其他伸缩模式。它是由微软研究院创建和设计在云计算中使用。  \n[github https://github.com/dotnet/orleans](https://github.com/dotnet/orleans)  \n\n- rabbitmq-dotnet-client\nrabbitmq 客户端类库  \n[github https://github.com/rabbitmq/rabbitmq-dotnet-client](https://github.com/rabbitmq/rabbitmq-dotnet-client)  \n\n- AutoMapper\n将一个对象映射到另一个对象的代码。摆脱了繁琐的赋值过程  \n[github https://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)  \n\n## 程序员一般可以从什么平台接私活\n\n### 国内\n- 程序员客栈：https://www.proginn.com\n程序员客栈中国非常领先的自由工作平台，为中高端程序员、产品经理和设计师等等互联网相关人员提供稳定的线上工作机会，包括自由工作、远程工作和兼职工作，还支持按需雇佣，工作模式非常多，感兴趣的推荐大家尝试一下。\n虽然名称叫程序员客栈，但是除了程序员，像产品经理，设计师等等互联网相关人员，都能在上面找到适合自己的项目。感兴趣的可以体验一下  \n[https://www.proginn.com](https://www.proginn.com)\n\n- CODING 码市：https://mart.coding.net  \nCoding 旗下的互联网软件外包服务平台，平台以外包为主。\n\n- 开源众包：zb.oschina.net/projects  \n开源中国的众包平台，主要是以众包为主。\n\n- 猪八戒：https://zbj.com  \n找兼职的地方，主要是入门级项目，不适合专业程序员，只适合新手。\n\n- 英选：linktion.cn  \n平台以定制开发外包服务为主，也是外包项目平台。\n\n- 快码众包：kuaima.co  \n\n- 码易众包平台：mayigeek.com  \n\n-  一早一晚平台：yizaoyiwan.com/  \n\n- 开发邦：http://www.kaifabang.com  \n\n- 人人开发：rrkf.com  \n\n- 厘米脚印：http://www.limijiaoyin.com  \n\n- Sxsoft：https://www.sxsoft.com/  \n\n- 猿急送：https://www.yuanjisong.com/\n\n-  实现网传送门：shixian.com/\n\n- 智城外包网：http://www.taskcity.com/\n\n### 国外\n- Upwork：https://www.upwork.com/  \nUpwork 是全球最大的、最优秀的、最规范的综合类人力外包服务平台，由著名的 Elance 和 oDesk 合并。这里聚集 900 万来自全球各地的自由工作者，你肯定可以在找到适合你的职位  \n\n- Freelancer：https://www.freelance.com/\n工作类型覆盖了很多不同的领域，由程序开发到市场营销、广告、会计、法务等一系列的可以远程的工作  \n\n- Dribbble：https://dribbble.com/jobs  \n你没看错，Dribbble 不只是全球最受欢迎的设计师社区，同样是设计师寻找远程工作的好出处。自从被 Tiny 收购后，Dribbble 的招聘属性正在慢慢增强，试着持续 PO 出自己的好作品，等待你的伯乐，同样你可以关注 Jobs 页面，给心仪的 Team 提交简历  \n\n- Stackoverflow：https://stackoverflow.com/jobs  \n被广大程序员熟知的 Stackoverflow 本身就是一个全民远程工作的公司，程序员在远程工作中有很大的先天优势，Stackoverflow Jobs 里有远程职位的筛选，这里有丰富的远程技术职位  \n\n- 99designs：https://99designs.com/  \n99designs 是一个专门针对设计师的雇佣平台，你可以在这里参加设计竞赛给公开的项目投标，也可以给雇主提供一对一的专业服务  \n\n- Remoteok：https://remoteok.io/  \nRemoteok 不仅提供最初的兼职类远程工作，还有全职类，签署合同类和实习类的工作。网站创始人 Pieter Levels 本身就是一名数字游民，他同样是 Nomadlist 的创始人  \n\n- Toptal：https://www.toptal.com/  \nToptal 是一个高端一些的自由职业者平台，适合比较有经验和工作尽力的远程工作者。它将企业与全球的软件工程师，设计师和业务顾问联系起来  \n\n- Ange：https://angel.co/job-collections/remote  \nAngelList 主要是服务于初创公司和天使投资人的平台，这里还有初创公司提供的远程工作的机会，如果对远程加入初创公司感兴趣的，可以尝试一下  \n\n- Topcoder：https://www.topcoder.com/  \nTopcoder 通过算法比赛吸引世界顶级的程序员，他会将一下大型项目分割成很多小模块，通过竞赛的模式交给用户来做，优胜者可以拿到制定模块的奖金  \n\n> [react相关](/2018/12/10/front/react/components)\n\n\n","slug":"tools/collections","published":1,"updated":"2019-09-27T11:34:46.788Z","_id":"cjocck1o6001370uk3ry6jyv0","comments":1,"layout":"post","photos":[],"link":"","content":"<p>各大组件、工具收藏夹(持续更新中…)<br><a id=\"more\"></a></p>\n<h2 id=\"后端\"><a href=\"#后端\" class=\"headerlink\" title=\"后端\"></a>后端</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">推荐组件</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">爬虫</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/GoogleChrome/puppeteer\" target=\"_blank\" rel=\"noopener\">puppeteer</a>、<a href=\"https://github.com/kblok/puppeteer-sharp\" target=\"_blank\" rel=\"noopener\">puppeteer-sharp</a>、<a href=\"https://github.com/dotnetcore/DotnetSpider\" target=\"_blank\" rel=\"noopener\">DotnetSpide</a>、<a href=\"https://github.com/ferventdesert/Hawk\" target=\"_blank\" rel=\"noopener\">Hawk</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">工业物联网</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/dathlin/HslCommunication\" target=\"_blank\" rel=\"noopener\">HslCommunication</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">斗地主</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/2881099/FightLandlord\" target=\"_blank\" rel=\"noopener\">FightLandlord</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">规则引擎</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/NRules/NRules\" target=\"_blank\" rel=\"noopener\">NRules</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">机器人</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/leonlj/BotDemo\" target=\"_blank\" rel=\"noopener\">BotDemo</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">定时任务</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/zhaopeiym/quartzui\" target=\"_blank\" rel=\"noopener\">quartzui</a>、<a href=\"https://github.com/Topshelf/Topshelf\" target=\"_blank\" rel=\"noopener\">Topshelf</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">机器学</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/dotnet/machinelearning\" target=\"_blank\" rel=\"noopener\">machinelearning</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">导出pdf</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/MrRio/jsPDF\" target=\"_blank\" rel=\"noopener\">jsPDF</a>、<a href=\"https://github.com/wkhtmltopdf/wkhtmltopdf\" target=\"_blank\" rel=\"noopener\">wkhtmltopdf</a>、<a href=\"https://github.com/itext/itextsharp\" target=\"_blank\" rel=\"noopener\">itextsharp</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">redis桌面管理器</td>\n<td style=\"text-align:left\"><a href=\"https://gitee.com/MaxBill/RedisPlus\" target=\"_blank\" rel=\"noopener\">RedisPlus</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">host切换工具</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/oldj/SwitchHosts\" target=\"_blank\" rel=\"noopener\">SwitchHosts</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">异常收集框架</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/exceptionless/Exceptionless\" target=\"_blank\" rel=\"noopener\">Exceptionless</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">容器监管</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/portainer/portainer\" target=\"_blank\" rel=\"noopener\">portainer</a></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"工具\"><a href=\"#工具\" class=\"headerlink\" title=\"工具\"></a>工具</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">推荐组件</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">redis桌面管理器</td>\n<td style=\"text-align:left\"><a href=\"https://gitee.com/MaxBill/RedisPlus\" target=\"_blank\" rel=\"noopener\">RedisPlus</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">host切换工具</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/oldj/SwitchHosts\" target=\"_blank\" rel=\"noopener\">SwitchHosts</a></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"纯前端库\"><a href=\"#纯前端库\" class=\"headerlink\" title=\"纯前端库\"></a>纯前端库</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">推荐组件</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">数字转大写</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/cnwhy/nzh\" target=\"_blank\" rel=\"noopener\">nzh</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">js帮助库</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/lodash/lodash\" target=\"_blank\" rel=\"noopener\">lodash</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">时区</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/moment/moment\" target=\"_blank\" rel=\"noopener\">moment</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">3D动画</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/mrdoob/three.js\" target=\"_blank\" rel=\"noopener\">Three.js</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">动画</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/juliangarnier/anime\" target=\"_blank\" rel=\"noopener\">Anime.js</a>、<a href=\"https://github.com/greensock/GreenSock-JS\" target=\"_blank\" rel=\"noopener\">GreenSock</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">打字机</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/luisvinicius167/ityped\" target=\"_blank\" rel=\"noopener\">ityped</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">悬停效果</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/IanLunn/Hover\" target=\"_blank\" rel=\"noopener\">Hover</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">快捷键</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/jaywcjlove/hotkeys\" target=\"_blank\" rel=\"noopener\">hotkeys</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">拖拽</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/react-dnd/react-dnd\" target=\"_blank\" rel=\"noopener\">react-dnd</a>、<a href=\"https://github.com/atlassian/react-beautiful-dnd\" target=\"_blank\" rel=\"noopener\">react-beautiful-dnd</a></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"推荐-neter常用优秀开源项目\"><a href=\"#推荐-neter常用优秀开源项目\" class=\"headerlink\" title=\"推荐.neter常用优秀开源项目\"></a>推荐.neter常用优秀开源项目</h2><ul>\n<li><p>Domain-Driven-Design-Example<br>DDD 示例 挺不错的.<br><a href=\"https://github.com/zkavtaskin/Domain-Driven-Design-Example\" target=\"_blank\" rel=\"noopener\">github https://github.com/zkavtaskin/Domain-Driven-Design-Example</a></p>\n</li>\n<li><p>SmartStoreNET<br>开源的电商项目<br><a href=\"https://github.com/smartstore/SmartStoreNET\" target=\"_blank\" rel=\"noopener\">github https://github.com/smartstore/SmartStoreNET</a></p>\n</li>\n<li><p>abp<br>ABP框架全称为“ASP.NET Boilerplate Project”，中文翻译为“ ASP.NET样板项目”，ABP是一个开源应用程序框架,专注于基于ASP.NET Core 的Web应用程序开发,但也支持开发其他类型的应用程序<br><a href=\"https://github.com/abpframework/abp\" target=\"_blank\" rel=\"noopener\">github https://github.com/abpframework/abp</a></p>\n</li>\n<li><p>grpc<br>gRPC 是一个由Google开源的，跨语言的，高性能的远程过程调用（RPC）框架。gRPC使客户端和服务端应用程序可以透明地进行通信，并简化了连接系统的构建。它使用HTTP/2作为通信协议，使用 Protocol Buffers 作为序列化协议。并且微软官方 ASP.NET 项目的人员进行维护，良好的接入 .NET Core 生态<br><a href=\"https://github.com/grpc/grpc-dotnet\" target=\"_blank\" rel=\"noopener\">github https://github.com/grpc/grpc-dotnet</a></p>\n</li>\n<li><p>Autofac<br>IOC容器<br><a href=\"https://github.com/autofac/Autofac\" target=\"_blank\" rel=\"noopener\">github https://github.com/autofac/Autofac</a></p>\n</li>\n<li><p>Hangfire<br>非常容易地在.NET或者.NETcore应用程序中执行后台任务，无需windows服务或者单独的进程。且任务信息可以被持久保存。<br><a href=\"https://github.com/HangfireIO/Hangfire\" target=\"_blank\" rel=\"noopener\">github https://github.com/HangfireIO/Hangfire</a></p>\n</li>\n<li><p>quartz<br>任务调度<br><a href=\"https://github.com/quartznet/quartznet\" target=\"_blank\" rel=\"noopener\">github https://github.com/quartznet/quartznet</a></p>\n</li>\n<li><p>polly<br>Polly 是一个 .NET 弹性和瞬态故障处理库，允许开发人员以 Fluent 和线程安全的方式来实现重试、断路、超时、隔离和回退策略。<br><a href=\"https://github.com/App-vNext/Polly\" target=\"_blank\" rel=\"noopener\">github https://github.com/App-vNext/Polly</a>  </p>\n</li>\n<li><p>redis 命令<br>《Redis Command Reference》全文的中文翻译版。 <a href=\"http://RedisDoc.com\" target=\"_blank\" rel=\"noopener\">http://RedisDoc.com</a><br><a href=\"https://github.com/huangz1990/redis\" target=\"_blank\" rel=\"noopener\">github https://github.com/huangz1990/redis</a>  </p>\n</li>\n<li><p>orleans<br>一种构建分布式、 高规模（伸缩）的应用程序， 奥尔良是一个框架，提供一个简单的方法来构建分布式的高规模计算应用程序，而无需了解并应用复杂并发或其他伸缩模式。它是由微软研究院创建和设计在云计算中使用。<br><a href=\"https://github.com/dotnet/orleans\" target=\"_blank\" rel=\"noopener\">github https://github.com/dotnet/orleans</a>  </p>\n</li>\n<li><p>rabbitmq-dotnet-client<br>rabbitmq 客户端类库<br><a href=\"https://github.com/rabbitmq/rabbitmq-dotnet-client\" target=\"_blank\" rel=\"noopener\">github https://github.com/rabbitmq/rabbitmq-dotnet-client</a>  </p>\n</li>\n<li><p>AutoMapper<br>将一个对象映射到另一个对象的代码。摆脱了繁琐的赋值过程<br><a href=\"https://github.com/AutoMapper/AutoMapper\" target=\"_blank\" rel=\"noopener\">github https://github.com/AutoMapper/AutoMapper</a>  </p>\n</li>\n</ul>\n<h2 id=\"程序员一般可以从什么平台接私活\"><a href=\"#程序员一般可以从什么平台接私活\" class=\"headerlink\" title=\"程序员一般可以从什么平台接私活\"></a>程序员一般可以从什么平台接私活</h2><h3 id=\"国内\"><a href=\"#国内\" class=\"headerlink\" title=\"国内\"></a>国内</h3><ul>\n<li><p>程序员客栈：<a href=\"https://www.proginn.com\" target=\"_blank\" rel=\"noopener\">https://www.proginn.com</a><br>程序员客栈中国非常领先的自由工作平台，为中高端程序员、产品经理和设计师等等互联网相关人员提供稳定的线上工作机会，包括自由工作、远程工作和兼职工作，还支持按需雇佣，工作模式非常多，感兴趣的推荐大家尝试一下。<br>虽然名称叫程序员客栈，但是除了程序员，像产品经理，设计师等等互联网相关人员，都能在上面找到适合自己的项目。感兴趣的可以体验一下<br><a href=\"https://www.proginn.com\" target=\"_blank\" rel=\"noopener\">https://www.proginn.com</a></p>\n</li>\n<li><p>CODING 码市：<a href=\"https://mart.coding.net\" target=\"_blank\" rel=\"noopener\">https://mart.coding.net</a><br>Coding 旗下的互联网软件外包服务平台，平台以外包为主。</p>\n</li>\n<li><p>开源众包：zb.oschina.net/projects<br>开源中国的众包平台，主要是以众包为主。</p>\n</li>\n<li><p>猪八戒：<a href=\"https://zbj.com\" target=\"_blank\" rel=\"noopener\">https://zbj.com</a><br>找兼职的地方，主要是入门级项目，不适合专业程序员，只适合新手。</p>\n</li>\n<li><p>英选：linktion.cn<br>平台以定制开发外包服务为主，也是外包项目平台。</p>\n</li>\n<li><p>快码众包：kuaima.co  </p>\n</li>\n<li><p>码易众包平台：mayigeek.com  </p>\n</li>\n<li><p>一早一晚平台：yizaoyiwan.com/  </p>\n</li>\n<li><p>开发邦：<a href=\"http://www.kaifabang.com\" target=\"_blank\" rel=\"noopener\">http://www.kaifabang.com</a>  </p>\n</li>\n<li><p>人人开发：rrkf.com  </p>\n</li>\n<li><p>厘米脚印：<a href=\"http://www.limijiaoyin.com\" target=\"_blank\" rel=\"noopener\">http://www.limijiaoyin.com</a>  </p>\n</li>\n<li><p>Sxsoft：<a href=\"https://www.sxsoft.com/\" target=\"_blank\" rel=\"noopener\">https://www.sxsoft.com/</a>  </p>\n</li>\n<li><p>猿急送：<a href=\"https://www.yuanjisong.com/\" target=\"_blank\" rel=\"noopener\">https://www.yuanjisong.com/</a></p>\n</li>\n<li><p>实现网传送门：shixian.com/</p>\n</li>\n<li><p>智城外包网：<a href=\"http://www.taskcity.com/\" target=\"_blank\" rel=\"noopener\">http://www.taskcity.com/</a></p>\n</li>\n</ul>\n<h3 id=\"国外\"><a href=\"#国外\" class=\"headerlink\" title=\"国外\"></a>国外</h3><ul>\n<li><p>Upwork：<a href=\"https://www.upwork.com/\" target=\"_blank\" rel=\"noopener\">https://www.upwork.com/</a><br>Upwork 是全球最大的、最优秀的、最规范的综合类人力外包服务平台，由著名的 Elance 和 oDesk 合并。这里聚集 900 万来自全球各地的自由工作者，你肯定可以在找到适合你的职位  </p>\n</li>\n<li><p>Freelancer：<a href=\"https://www.freelance.com/\" target=\"_blank\" rel=\"noopener\">https://www.freelance.com/</a><br>工作类型覆盖了很多不同的领域，由程序开发到市场营销、广告、会计、法务等一系列的可以远程的工作  </p>\n</li>\n<li><p>Dribbble：<a href=\"https://dribbble.com/jobs\" target=\"_blank\" rel=\"noopener\">https://dribbble.com/jobs</a><br>你没看错，Dribbble 不只是全球最受欢迎的设计师社区，同样是设计师寻找远程工作的好出处。自从被 Tiny 收购后，Dribbble 的招聘属性正在慢慢增强，试着持续 PO 出自己的好作品，等待你的伯乐，同样你可以关注 Jobs 页面，给心仪的 Team 提交简历  </p>\n</li>\n<li><p>Stackoverflow：<a href=\"https://stackoverflow.com/jobs\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/jobs</a><br>被广大程序员熟知的 Stackoverflow 本身就是一个全民远程工作的公司，程序员在远程工作中有很大的先天优势，Stackoverflow Jobs 里有远程职位的筛选，这里有丰富的远程技术职位  </p>\n</li>\n<li><p>99designs：<a href=\"https://99designs.com/\" target=\"_blank\" rel=\"noopener\">https://99designs.com/</a><br>99designs 是一个专门针对设计师的雇佣平台，你可以在这里参加设计竞赛给公开的项目投标，也可以给雇主提供一对一的专业服务  </p>\n</li>\n<li><p>Remoteok：<a href=\"https://remoteok.io/\" target=\"_blank\" rel=\"noopener\">https://remoteok.io/</a><br>Remoteok 不仅提供最初的兼职类远程工作，还有全职类，签署合同类和实习类的工作。网站创始人 Pieter Levels 本身就是一名数字游民，他同样是 Nomadlist 的创始人  </p>\n</li>\n<li><p>Toptal：<a href=\"https://www.toptal.com/\" target=\"_blank\" rel=\"noopener\">https://www.toptal.com/</a><br>Toptal 是一个高端一些的自由职业者平台，适合比较有经验和工作尽力的远程工作者。它将企业与全球的软件工程师，设计师和业务顾问联系起来  </p>\n</li>\n<li><p>Ange：<a href=\"https://angel.co/job-collections/remote\" target=\"_blank\" rel=\"noopener\">https://angel.co/job-collections/remote</a><br>AngelList 主要是服务于初创公司和天使投资人的平台，这里还有初创公司提供的远程工作的机会，如果对远程加入初创公司感兴趣的，可以尝试一下  </p>\n</li>\n<li><p>Topcoder：<a href=\"https://www.topcoder.com/\" target=\"_blank\" rel=\"noopener\">https://www.topcoder.com/</a><br>Topcoder 通过算法比赛吸引世界顶级的程序员，他会将一下大型项目分割成很多小模块，通过竞赛的模式交给用户来做，优胜者可以拿到制定模块的奖金  </p>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"/2018/12/10/front/react/components\">react相关</a></p>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>各大组件、工具收藏夹(持续更新中…)<br>","more":"</p>\n<h2 id=\"后端\"><a href=\"#后端\" class=\"headerlink\" title=\"后端\"></a>后端</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">推荐组件</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">爬虫</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/GoogleChrome/puppeteer\" target=\"_blank\" rel=\"noopener\">puppeteer</a>、<a href=\"https://github.com/kblok/puppeteer-sharp\" target=\"_blank\" rel=\"noopener\">puppeteer-sharp</a>、<a href=\"https://github.com/dotnetcore/DotnetSpider\" target=\"_blank\" rel=\"noopener\">DotnetSpide</a>、<a href=\"https://github.com/ferventdesert/Hawk\" target=\"_blank\" rel=\"noopener\">Hawk</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">工业物联网</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/dathlin/HslCommunication\" target=\"_blank\" rel=\"noopener\">HslCommunication</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">斗地主</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/2881099/FightLandlord\" target=\"_blank\" rel=\"noopener\">FightLandlord</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">规则引擎</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/NRules/NRules\" target=\"_blank\" rel=\"noopener\">NRules</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">机器人</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/leonlj/BotDemo\" target=\"_blank\" rel=\"noopener\">BotDemo</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">定时任务</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/zhaopeiym/quartzui\" target=\"_blank\" rel=\"noopener\">quartzui</a>、<a href=\"https://github.com/Topshelf/Topshelf\" target=\"_blank\" rel=\"noopener\">Topshelf</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">机器学</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/dotnet/machinelearning\" target=\"_blank\" rel=\"noopener\">machinelearning</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">导出pdf</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/MrRio/jsPDF\" target=\"_blank\" rel=\"noopener\">jsPDF</a>、<a href=\"https://github.com/wkhtmltopdf/wkhtmltopdf\" target=\"_blank\" rel=\"noopener\">wkhtmltopdf</a>、<a href=\"https://github.com/itext/itextsharp\" target=\"_blank\" rel=\"noopener\">itextsharp</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">redis桌面管理器</td>\n<td style=\"text-align:left\"><a href=\"https://gitee.com/MaxBill/RedisPlus\" target=\"_blank\" rel=\"noopener\">RedisPlus</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">host切换工具</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/oldj/SwitchHosts\" target=\"_blank\" rel=\"noopener\">SwitchHosts</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">异常收集框架</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/exceptionless/Exceptionless\" target=\"_blank\" rel=\"noopener\">Exceptionless</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">容器监管</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/portainer/portainer\" target=\"_blank\" rel=\"noopener\">portainer</a></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"工具\"><a href=\"#工具\" class=\"headerlink\" title=\"工具\"></a>工具</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">推荐组件</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">redis桌面管理器</td>\n<td style=\"text-align:left\"><a href=\"https://gitee.com/MaxBill/RedisPlus\" target=\"_blank\" rel=\"noopener\">RedisPlus</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">host切换工具</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/oldj/SwitchHosts\" target=\"_blank\" rel=\"noopener\">SwitchHosts</a></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"纯前端库\"><a href=\"#纯前端库\" class=\"headerlink\" title=\"纯前端库\"></a>纯前端库</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">推荐组件</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">数字转大写</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/cnwhy/nzh\" target=\"_blank\" rel=\"noopener\">nzh</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">js帮助库</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/lodash/lodash\" target=\"_blank\" rel=\"noopener\">lodash</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">时区</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/moment/moment\" target=\"_blank\" rel=\"noopener\">moment</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">3D动画</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/mrdoob/three.js\" target=\"_blank\" rel=\"noopener\">Three.js</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">动画</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/juliangarnier/anime\" target=\"_blank\" rel=\"noopener\">Anime.js</a>、<a href=\"https://github.com/greensock/GreenSock-JS\" target=\"_blank\" rel=\"noopener\">GreenSock</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">打字机</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/luisvinicius167/ityped\" target=\"_blank\" rel=\"noopener\">ityped</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">悬停效果</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/IanLunn/Hover\" target=\"_blank\" rel=\"noopener\">Hover</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">快捷键</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/jaywcjlove/hotkeys\" target=\"_blank\" rel=\"noopener\">hotkeys</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">拖拽</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/react-dnd/react-dnd\" target=\"_blank\" rel=\"noopener\">react-dnd</a>、<a href=\"https://github.com/atlassian/react-beautiful-dnd\" target=\"_blank\" rel=\"noopener\">react-beautiful-dnd</a></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"推荐-neter常用优秀开源项目\"><a href=\"#推荐-neter常用优秀开源项目\" class=\"headerlink\" title=\"推荐.neter常用优秀开源项目\"></a>推荐.neter常用优秀开源项目</h2><ul>\n<li><p>Domain-Driven-Design-Example<br>DDD 示例 挺不错的.<br><a href=\"https://github.com/zkavtaskin/Domain-Driven-Design-Example\" target=\"_blank\" rel=\"noopener\">github https://github.com/zkavtaskin/Domain-Driven-Design-Example</a></p>\n</li>\n<li><p>SmartStoreNET<br>开源的电商项目<br><a href=\"https://github.com/smartstore/SmartStoreNET\" target=\"_blank\" rel=\"noopener\">github https://github.com/smartstore/SmartStoreNET</a></p>\n</li>\n<li><p>abp<br>ABP框架全称为“ASP.NET Boilerplate Project”，中文翻译为“ ASP.NET样板项目”，ABP是一个开源应用程序框架,专注于基于ASP.NET Core 的Web应用程序开发,但也支持开发其他类型的应用程序<br><a href=\"https://github.com/abpframework/abp\" target=\"_blank\" rel=\"noopener\">github https://github.com/abpframework/abp</a></p>\n</li>\n<li><p>grpc<br>gRPC 是一个由Google开源的，跨语言的，高性能的远程过程调用（RPC）框架。gRPC使客户端和服务端应用程序可以透明地进行通信，并简化了连接系统的构建。它使用HTTP/2作为通信协议，使用 Protocol Buffers 作为序列化协议。并且微软官方 ASP.NET 项目的人员进行维护，良好的接入 .NET Core 生态<br><a href=\"https://github.com/grpc/grpc-dotnet\" target=\"_blank\" rel=\"noopener\">github https://github.com/grpc/grpc-dotnet</a></p>\n</li>\n<li><p>Autofac<br>IOC容器<br><a href=\"https://github.com/autofac/Autofac\" target=\"_blank\" rel=\"noopener\">github https://github.com/autofac/Autofac</a></p>\n</li>\n<li><p>Hangfire<br>非常容易地在.NET或者.NETcore应用程序中执行后台任务，无需windows服务或者单独的进程。且任务信息可以被持久保存。<br><a href=\"https://github.com/HangfireIO/Hangfire\" target=\"_blank\" rel=\"noopener\">github https://github.com/HangfireIO/Hangfire</a></p>\n</li>\n<li><p>quartz<br>任务调度<br><a href=\"https://github.com/quartznet/quartznet\" target=\"_blank\" rel=\"noopener\">github https://github.com/quartznet/quartznet</a></p>\n</li>\n<li><p>polly<br>Polly 是一个 .NET 弹性和瞬态故障处理库，允许开发人员以 Fluent 和线程安全的方式来实现重试、断路、超时、隔离和回退策略。<br><a href=\"https://github.com/App-vNext/Polly\" target=\"_blank\" rel=\"noopener\">github https://github.com/App-vNext/Polly</a>  </p>\n</li>\n<li><p>redis 命令<br>《Redis Command Reference》全文的中文翻译版。 <a href=\"http://RedisDoc.com\" target=\"_blank\" rel=\"noopener\">http://RedisDoc.com</a><br><a href=\"https://github.com/huangz1990/redis\" target=\"_blank\" rel=\"noopener\">github https://github.com/huangz1990/redis</a>  </p>\n</li>\n<li><p>orleans<br>一种构建分布式、 高规模（伸缩）的应用程序， 奥尔良是一个框架，提供一个简单的方法来构建分布式的高规模计算应用程序，而无需了解并应用复杂并发或其他伸缩模式。它是由微软研究院创建和设计在云计算中使用。<br><a href=\"https://github.com/dotnet/orleans\" target=\"_blank\" rel=\"noopener\">github https://github.com/dotnet/orleans</a>  </p>\n</li>\n<li><p>rabbitmq-dotnet-client<br>rabbitmq 客户端类库<br><a href=\"https://github.com/rabbitmq/rabbitmq-dotnet-client\" target=\"_blank\" rel=\"noopener\">github https://github.com/rabbitmq/rabbitmq-dotnet-client</a>  </p>\n</li>\n<li><p>AutoMapper<br>将一个对象映射到另一个对象的代码。摆脱了繁琐的赋值过程<br><a href=\"https://github.com/AutoMapper/AutoMapper\" target=\"_blank\" rel=\"noopener\">github https://github.com/AutoMapper/AutoMapper</a>  </p>\n</li>\n</ul>\n<h2 id=\"程序员一般可以从什么平台接私活\"><a href=\"#程序员一般可以从什么平台接私活\" class=\"headerlink\" title=\"程序员一般可以从什么平台接私活\"></a>程序员一般可以从什么平台接私活</h2><h3 id=\"国内\"><a href=\"#国内\" class=\"headerlink\" title=\"国内\"></a>国内</h3><ul>\n<li><p>程序员客栈：<a href=\"https://www.proginn.com\" target=\"_blank\" rel=\"noopener\">https://www.proginn.com</a><br>程序员客栈中国非常领先的自由工作平台，为中高端程序员、产品经理和设计师等等互联网相关人员提供稳定的线上工作机会，包括自由工作、远程工作和兼职工作，还支持按需雇佣，工作模式非常多，感兴趣的推荐大家尝试一下。<br>虽然名称叫程序员客栈，但是除了程序员，像产品经理，设计师等等互联网相关人员，都能在上面找到适合自己的项目。感兴趣的可以体验一下<br><a href=\"https://www.proginn.com\" target=\"_blank\" rel=\"noopener\">https://www.proginn.com</a></p>\n</li>\n<li><p>CODING 码市：<a href=\"https://mart.coding.net\" target=\"_blank\" rel=\"noopener\">https://mart.coding.net</a><br>Coding 旗下的互联网软件外包服务平台，平台以外包为主。</p>\n</li>\n<li><p>开源众包：zb.oschina.net/projects<br>开源中国的众包平台，主要是以众包为主。</p>\n</li>\n<li><p>猪八戒：<a href=\"https://zbj.com\" target=\"_blank\" rel=\"noopener\">https://zbj.com</a><br>找兼职的地方，主要是入门级项目，不适合专业程序员，只适合新手。</p>\n</li>\n<li><p>英选：linktion.cn<br>平台以定制开发外包服务为主，也是外包项目平台。</p>\n</li>\n<li><p>快码众包：kuaima.co  </p>\n</li>\n<li><p>码易众包平台：mayigeek.com  </p>\n</li>\n<li><p>一早一晚平台：yizaoyiwan.com/  </p>\n</li>\n<li><p>开发邦：<a href=\"http://www.kaifabang.com\" target=\"_blank\" rel=\"noopener\">http://www.kaifabang.com</a>  </p>\n</li>\n<li><p>人人开发：rrkf.com  </p>\n</li>\n<li><p>厘米脚印：<a href=\"http://www.limijiaoyin.com\" target=\"_blank\" rel=\"noopener\">http://www.limijiaoyin.com</a>  </p>\n</li>\n<li><p>Sxsoft：<a href=\"https://www.sxsoft.com/\" target=\"_blank\" rel=\"noopener\">https://www.sxsoft.com/</a>  </p>\n</li>\n<li><p>猿急送：<a href=\"https://www.yuanjisong.com/\" target=\"_blank\" rel=\"noopener\">https://www.yuanjisong.com/</a></p>\n</li>\n<li><p>实现网传送门：shixian.com/</p>\n</li>\n<li><p>智城外包网：<a href=\"http://www.taskcity.com/\" target=\"_blank\" rel=\"noopener\">http://www.taskcity.com/</a></p>\n</li>\n</ul>\n<h3 id=\"国外\"><a href=\"#国外\" class=\"headerlink\" title=\"国外\"></a>国外</h3><ul>\n<li><p>Upwork：<a href=\"https://www.upwork.com/\" target=\"_blank\" rel=\"noopener\">https://www.upwork.com/</a><br>Upwork 是全球最大的、最优秀的、最规范的综合类人力外包服务平台，由著名的 Elance 和 oDesk 合并。这里聚集 900 万来自全球各地的自由工作者，你肯定可以在找到适合你的职位  </p>\n</li>\n<li><p>Freelancer：<a href=\"https://www.freelance.com/\" target=\"_blank\" rel=\"noopener\">https://www.freelance.com/</a><br>工作类型覆盖了很多不同的领域，由程序开发到市场营销、广告、会计、法务等一系列的可以远程的工作  </p>\n</li>\n<li><p>Dribbble：<a href=\"https://dribbble.com/jobs\" target=\"_blank\" rel=\"noopener\">https://dribbble.com/jobs</a><br>你没看错，Dribbble 不只是全球最受欢迎的设计师社区，同样是设计师寻找远程工作的好出处。自从被 Tiny 收购后，Dribbble 的招聘属性正在慢慢增强，试着持续 PO 出自己的好作品，等待你的伯乐，同样你可以关注 Jobs 页面，给心仪的 Team 提交简历  </p>\n</li>\n<li><p>Stackoverflow：<a href=\"https://stackoverflow.com/jobs\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/jobs</a><br>被广大程序员熟知的 Stackoverflow 本身就是一个全民远程工作的公司，程序员在远程工作中有很大的先天优势，Stackoverflow Jobs 里有远程职位的筛选，这里有丰富的远程技术职位  </p>\n</li>\n<li><p>99designs：<a href=\"https://99designs.com/\" target=\"_blank\" rel=\"noopener\">https://99designs.com/</a><br>99designs 是一个专门针对设计师的雇佣平台，你可以在这里参加设计竞赛给公开的项目投标，也可以给雇主提供一对一的专业服务  </p>\n</li>\n<li><p>Remoteok：<a href=\"https://remoteok.io/\" target=\"_blank\" rel=\"noopener\">https://remoteok.io/</a><br>Remoteok 不仅提供最初的兼职类远程工作，还有全职类，签署合同类和实习类的工作。网站创始人 Pieter Levels 本身就是一名数字游民，他同样是 Nomadlist 的创始人  </p>\n</li>\n<li><p>Toptal：<a href=\"https://www.toptal.com/\" target=\"_blank\" rel=\"noopener\">https://www.toptal.com/</a><br>Toptal 是一个高端一些的自由职业者平台，适合比较有经验和工作尽力的远程工作者。它将企业与全球的软件工程师，设计师和业务顾问联系起来  </p>\n</li>\n<li><p>Ange：<a href=\"https://angel.co/job-collections/remote\" target=\"_blank\" rel=\"noopener\">https://angel.co/job-collections/remote</a><br>AngelList 主要是服务于初创公司和天使投资人的平台，这里还有初创公司提供的远程工作的机会，如果对远程加入初创公司感兴趣的，可以尝试一下  </p>\n</li>\n<li><p>Topcoder：<a href=\"https://www.topcoder.com/\" target=\"_blank\" rel=\"noopener\">https://www.topcoder.com/</a><br>Topcoder 通过算法比赛吸引世界顶级的程序员，他会将一下大型项目分割成很多小模块，通过竞赛的模式交给用户来做，优胜者可以拿到制定模块的奖金  </p>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"/2018/12/10/front/react/components\">react相关</a></p>\n</blockquote>"},{"title":"开发中能提高工作效率的工具收集","abbrlink":10236,"date":"2018-05-16T01:10:11.000Z","_content":"\n开发工具收藏夹\n<!-- more -->\n\n##### 常用工具\n* sql对比工具：DiffUse  \n* BCompare 文件对比  \n* ORC 图片文本识别   \n\n##### VS插件  \n* Web Essentials  \n* web Extension Pack  \n* Productivity Power Tools 2015:方法开始结束标线  \n* [PicGo vscode的图床管理](https://picgo.github.io/PicGo-Doc/zh/guide/config.html#github%E5%9B%BE%E5%BA%8A)、[github](http://picgo.github.io)\n* Settings Sync vscode 同步插件\n\n##### 前端\n* 编辑器神器：webstrom、SubLime node  \n* 压缩合并混合：grunt、webpack\n* 依赖管理工具：bower、npm、cnpm、yarn\n* 轻量级服务器：httpserver  \n* 单元测试：karma 、jasmine  \n* karma是容器，jasmine是语法  \n* angularJS专用测试工具：protractor  \n\n##### 其他\n* Emmet：提供自动完成某些文档  \n* DocBlockr　　DocBlockr可以自动生成PHPDoc风格的注释。它支持的语言有Javascript, PHP, ActionScript, CoffeeScript, Java, Objective C, C, C++  \n\n##### 测试、分析工具  \n* 压力测试:Load Runner  \n* 服务器IIS分析:Visual Studio Profiler、WinDebug、opserver  \n\n##### SQL  \ntoad for mysql\n\n> 欢迎补充","source":"_posts/tools/develop.md","raw":"---\ntitle: 开发中能提高工作效率的工具收集\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 10236\ndate: 2018-05-16 09:10:11\n---\n\n开发工具收藏夹\n<!-- more -->\n\n##### 常用工具\n* sql对比工具：DiffUse  \n* BCompare 文件对比  \n* ORC 图片文本识别   \n\n##### VS插件  \n* Web Essentials  \n* web Extension Pack  \n* Productivity Power Tools 2015:方法开始结束标线  \n* [PicGo vscode的图床管理](https://picgo.github.io/PicGo-Doc/zh/guide/config.html#github%E5%9B%BE%E5%BA%8A)、[github](http://picgo.github.io)\n* Settings Sync vscode 同步插件\n\n##### 前端\n* 编辑器神器：webstrom、SubLime node  \n* 压缩合并混合：grunt、webpack\n* 依赖管理工具：bower、npm、cnpm、yarn\n* 轻量级服务器：httpserver  \n* 单元测试：karma 、jasmine  \n* karma是容器，jasmine是语法  \n* angularJS专用测试工具：protractor  \n\n##### 其他\n* Emmet：提供自动完成某些文档  \n* DocBlockr　　DocBlockr可以自动生成PHPDoc风格的注释。它支持的语言有Javascript, PHP, ActionScript, CoffeeScript, Java, Objective C, C, C++  \n\n##### 测试、分析工具  \n* 压力测试:Load Runner  \n* 服务器IIS分析:Visual Studio Profiler、WinDebug、opserver  \n\n##### SQL  \ntoad for mysql\n\n> 欢迎补充","slug":"tools/develop","published":1,"updated":"2020-02-23T13:45:22.691Z","_id":"cjocck1o9001870ukjtdyyan2","comments":1,"layout":"post","photos":[],"link":"","content":"<p>开发工具收藏夹<br><a id=\"more\"></a></p>\n<h5 id=\"常用工具\"><a href=\"#常用工具\" class=\"headerlink\" title=\"常用工具\"></a>常用工具</h5><ul>\n<li>sql对比工具：DiffUse  </li>\n<li>BCompare 文件对比  </li>\n<li>ORC 图片文本识别   </li>\n</ul>\n<h5 id=\"VS插件\"><a href=\"#VS插件\" class=\"headerlink\" title=\"VS插件\"></a>VS插件</h5><ul>\n<li>Web Essentials  </li>\n<li>web Extension Pack  </li>\n<li>Productivity Power Tools 2015:方法开始结束标线  </li>\n<li><a href=\"https://picgo.github.io/PicGo-Doc/zh/guide/config.html#github%E5%9B%BE%E5%BA%8A\">PicGo vscode的图床管理</a>、<a href=\"http://picgo.github.io\">github</a></li>\n<li>Settings Sync vscode 同步插件</li>\n</ul>\n<h5 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h5><ul>\n<li>编辑器神器：webstrom、SubLime node  </li>\n<li>压缩合并混合：grunt、webpack</li>\n<li>依赖管理工具：bower、npm、cnpm、yarn</li>\n<li>轻量级服务器：httpserver  </li>\n<li>单元测试：karma 、jasmine  </li>\n<li>karma是容器，jasmine是语法  </li>\n<li>angularJS专用测试工具：protractor  </li>\n</ul>\n<h5 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h5><ul>\n<li>Emmet：提供自动完成某些文档  </li>\n<li>DocBlockr　　DocBlockr可以自动生成PHPDoc风格的注释。它支持的语言有Javascript, PHP, ActionScript, CoffeeScript, Java, Objective C, C, C++  </li>\n</ul>\n<h5 id=\"测试、分析工具\"><a href=\"#测试、分析工具\" class=\"headerlink\" title=\"测试、分析工具\"></a>测试、分析工具</h5><ul>\n<li>压力测试:Load Runner  </li>\n<li>服务器IIS分析:Visual Studio Profiler、WinDebug、opserver  </li>\n</ul>\n<h5 id=\"SQL\"><a href=\"#SQL\" class=\"headerlink\" title=\"SQL\"></a>SQL</h5><p>toad for mysql</p>\n<blockquote>\n<p>欢迎补充</p>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>开发工具收藏夹<br>","more":"</p>\n<h5 id=\"常用工具\"><a href=\"#常用工具\" class=\"headerlink\" title=\"常用工具\"></a>常用工具</h5><ul>\n<li>sql对比工具：DiffUse  </li>\n<li>BCompare 文件对比  </li>\n<li>ORC 图片文本识别   </li>\n</ul>\n<h5 id=\"VS插件\"><a href=\"#VS插件\" class=\"headerlink\" title=\"VS插件\"></a>VS插件</h5><ul>\n<li>Web Essentials  </li>\n<li>web Extension Pack  </li>\n<li>Productivity Power Tools 2015:方法开始结束标线  </li>\n<li><a href=\"https://picgo.github.io/PicGo-Doc/zh/guide/config.html#github%E5%9B%BE%E5%BA%8A\">PicGo vscode的图床管理</a>、<a href=\"http://picgo.github.io\">github</a></li>\n<li>Settings Sync vscode 同步插件</li>\n</ul>\n<h5 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h5><ul>\n<li>编辑器神器：webstrom、SubLime node  </li>\n<li>压缩合并混合：grunt、webpack</li>\n<li>依赖管理工具：bower、npm、cnpm、yarn</li>\n<li>轻量级服务器：httpserver  </li>\n<li>单元测试：karma 、jasmine  </li>\n<li>karma是容器，jasmine是语法  </li>\n<li>angularJS专用测试工具：protractor  </li>\n</ul>\n<h5 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h5><ul>\n<li>Emmet：提供自动完成某些文档  </li>\n<li>DocBlockr　　DocBlockr可以自动生成PHPDoc风格的注释。它支持的语言有Javascript, PHP, ActionScript, CoffeeScript, Java, Objective C, C, C++  </li>\n</ul>\n<h5 id=\"测试、分析工具\"><a href=\"#测试、分析工具\" class=\"headerlink\" title=\"测试、分析工具\"></a>测试、分析工具</h5><ul>\n<li>压力测试:Load Runner  </li>\n<li>服务器IIS分析:Visual Studio Profiler、WinDebug、opserver  </li>\n</ul>\n<h5 id=\"SQL\"><a href=\"#SQL\" class=\"headerlink\" title=\"SQL\"></a>SQL</h5><p>toad for mysql</p>\n<blockquote>\n<p>欢迎补充</p>\n</blockquote>"},{"title":"nginx笔记","date":"2018-05-16T01:10:12.000Z","_content":"\nlinux安装nginx\n<!-- more -->\n\n1. nginx官网https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7\n2. 命令  \n启动:sudo nginx   \n重启:sudo nginx -s reload   \n关闭:sudo nginx -s stop  ","source":"_posts/tools/nginx.md","raw":"---\ntitle: nginx笔记\ndate: 2018-05-16 09:10:12 \ncategories: ['工具']\ntags: ['工具']\n---\n\nlinux安装nginx\n<!-- more -->\n\n1. nginx官网https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7\n2. 命令  \n启动:sudo nginx   \n重启:sudo nginx -s reload   \n关闭:sudo nginx -s stop  ","slug":"tools/nginx","published":1,"updated":"2018-09-27T10:59:38.627Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1ob001b70uk1c86xp13","content":"<p>linux安装nginx<br><a id=\"more\"></a></p>\n<ol>\n<li>nginx官网<a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7\" target=\"_blank\" rel=\"noopener\">https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7</a></li>\n<li>命令<br>启动:sudo nginx<br>重启:sudo nginx -s reload<br>关闭:sudo nginx -s stop  </li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>linux安装nginx<br>","more":"</p>\n<ol>\n<li>nginx官网<a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7\" target=\"_blank\" rel=\"noopener\">https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7</a></li>\n<li>命令<br>启动:sudo nginx<br>重启:sudo nginx -s reload<br>关闭:sudo nginx -s stop  </li>\n</ol>"},{"title":"git常用命令(笔记)","date":"2018-05-16T01:10:11.000Z","_content":"\n常用git命令\n<!-- more -->\n\n1. 创建一个版本库  \nmkdir repository    //创建一个文件夹  \ngit init [name]       //把目录编程git可以管理的仓库,[name]可选  \n2. 提交文件到版本库  \ngit add test.txt    //添加文件到版本库,此时还没有提交到git  \ngit commit -m \"提交注释\"    //告诉Git，把文件提交到仓库  \n3. 远程  \n查看当前git的状态:        git status      \n查看修改变的内容:        git diff  \n查看历史记录:                git log  \n查看修改的headid：       git reflog  \n查看分支：    git branch [-a|-r]    //-a 所有分支，-r:远程分支  \n查看远程库信息   :            git remote  \n查看远程库详细信息:        git remote -v  \n查看远程仓库：$ git remote -v                  \n添加远程仓库：$ git remote add [name] [url]  \n克隆远程仓库：git checkout [branchName] origin/[branchName] //如果远程分支有branchName而本地没  \ngit checkout -b [branchName] origin/[branchName] //如果远程分支有本地无，克隆并切换到  \n删除本地仓库: git branch -d [branch-name]  \n强制删除本地分支  git branch -D [branch-name]   \n删除远程仓库：$ git push origin :[branch-name] //删除远程分支  \n            git remote rm [branch-name]  \n            git push origin --delete [branchName]    \n修改远程仓库：$ git remote set-url --push [name] [newUrl]  \n拉取远程仓库：$ git pull origin [remoteName]:[localBranchName]  \n                            git fetch origin [remoteName]:[localBranchName]    //获取到当前分支  \n推送远程仓库：$ git push origin [remoteName]:[localBranchName]        //如果有冲突，需要先pull或者fetch远程的  \ngit push origin [remoteName]:[localBranchName] -f    //强推，使用本地覆盖服务器的  \n4. 与远程git关联  \na、在git上创建一个Repository  \nb、在本地执行命令：git remote add origin git@github.com:xiexingen/learngit.git    //将本地仓库与远程关联  \nc、重新关联：git remote set-url origin git://git.coding.net/xxxx/yyyy.git  \n5. 从远程下载到本地  \ngit clone [地址] [文件夹名称]    //将远程项目复制到本地之地文件加下  \n6. 分支  \n创建分支：git branch [branch Name]  \n切换分支：git checkout [branch Name]  \n创建+切换分支：git checkout -b [branch Name]  \n合并分支到当前分支：git merge [branch Name]  \n重命名分支：    git branch -m [new_branchName] [old_branchName]  \n查看所有分支：git branch -a  \n从指定分支创建并切换到分支:git checkout -b [local-branchName] [origin/branchName]  \n删除分支:    git branch [-d|-D] [local-branch] //-d 只能删除已经参与合并的分支,-D:可以删除为合并的分支，然后在git push origin :master 可以删除远程分支  \ngit merge命令用于合并指定分支到当前分支,注意到上面的Fast-forward信息，Git告诉我们，这次合并是“快进模式”，也就是直接把master指向dev的当前提交  \ngit merge dev :分两种情况一种是直接指向，另一种是生成另外一个将两个合并  \ngit merge --no-ff -m'comment' [branch Name]    //合并分支时，加上--no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并  \ngit merge --abort //取消合并  \n7. Bug分支  \ngit stash        //相当于tfs中的搁置  \ngit stash apply    //取消搁置到本地  \ngit stash drp     //删除搁置集  \ngit stash pop        //取消搁置到本地并删除搁置集  \ngit stash list    //查看搁置集  \ngit stash apply stash@{0}    //恢复指定的搁置集  \n8. 多人协作  \nA、git push -u origin [local-branch][:remote-branch]    //吧本地库推送到远程库上，-u，不但回吧本地的分支推送到远程新的master分支，还会把本地分支和远程分支关联起来，在以后的推送或者拉去时就可以简化命名\n后面如果有修改的话，只需要执行：git push origin [local-branch]    //吧本地分支的最新修改推送到服务器\nB、从本地推送分支，使用git push origin [local_branch]:[remote-branch]，如果推送失败，先用git pull抓取远程的新提交；\n在本地创建和远程分支对应的分支，使用git checkout -b branch-name origin/branch-name，本地和远程分支的名称最好一致；\nc、建立本地分支和远程分支的关联，使用git branch --set-upstream [local-branch] [origin/remote-branch]\n  从远程抓取分支，使用git pull，如果有冲突，要先处理冲突。\n如果git pull提示“no tracking information”，则说明本地分支和远程分支的链接关系没有创建，用命令git branch --set-upstream branch-name origin/branch-name\n9. 取消、回滚  \ngit -reflog 查看历史版本  \ngit reset --hard HEAD^    //回到上一次改动 (针对历史提交)  \ngit reset -hard 3628164    //3628164 headid 恢复到指定的记录(针对历史提交)  \ngit reset test.js //使用当前历史提交还原工作区  \ngit checkout -- test.js    //使用暂存区覆盖改动  \n10. clean  \ngit clean -n //将当前非暂存区的文件移除  \ngit clean -f //强制移除  \n11. 版本(tag)操作相关命令  \n查看版本：$ git tag  \n创建版本：$ git tag [name]  \n删除版本：$ git tag -d [name]  \n查看远程版本：$ git tag -r  \n创建远程版本(本地版本push到远程)：$ git push origin [name]  \n删除远程版本：$ git push origin :refs/tags/[name]  \n合并远程仓库的tag到本地：$ git pull origin --tags  \n上传本地tag到远程仓库：$ git push origin --tags  \n创建带注释的tag：$ git tag -a [name] -m 'yourMessage'  \n12. 忽略一些文件、文件夹不提交  \n在仓库根目录下创建名称为“.gitignore”的文件，写入不需要的文件夹名或文件，每个元素占一行即可，如  \ntarget  \nbin  \n*.db  \n13. 生成密钥  \n* 查看是否已经有了ssh密钥：cd ~/.ssh  \n    >如果提示：No such file or directory 说明你是第一次使用git  \n如果不是第一次使用，请执行下面的操作,清理原有ssh密钥。  \n $ mkdir key_backup $ cp id_rsa* key_backup $ rm id_rsa*  \n生成新的密钥：  \n$ ssh-keygen -t rsa -C “1002275364@qq.com”  \n14. 添加忽略文件  \ngit rm -f --cached [path] 移除单个文件，path表示全路径  \ngit rm -f --cached [path] -r 移除目录，path表示目录  \n15. 从暂存区移除文件  \ngit rm --cached [file] //将file从暂存区移除  \n16. tag\ngit tag -a v1.0 -m 'version 1.0'  \ngit tag 列出已有标签  \ngit tag -l 'v1.0' //列出指定标签  \ngit checkout -b [branchName] [tagname] //在特定的标签上创建一个新分支  \ngit tag v0.9 [626262] //给上次提价的commit id为626262打上标签  \ngit push origin [v1.0] //将标签v1.0push到远程  \ngit push origin --tags //将本地的所有tag push到远程  \ngit push origin :refs/tags/[v1.0] //删除v1.0  \n17. .gitignore文件无效的解决方法  \ngit rm -r --cached [指定文件]  \n提交\n\n##### 配置git使用BCompare来比对文件(用户目录\\.gitconfig里面)\n``` bash\n[user]\nname = xiexingen\nemail = 1002275364@qq.com\n[diff]\n    tool = bc4\n[difftool]\n    prompt = false\n[difftool \"bc4\"]\n    cmd = \\\"D:/Program Files/Beyond Compare 4/BComp.exe\\\" \\\"$LOCAL\\\" \\\"$REMOTE\\\"\n[merge]\n    tool = bc4\n[mergetool]\n    prompt = false\n    keepBackup = false\n[mergetool \"bc4\"]\n    cmd = \\\"D:/Program Files/Beyond Compare 4/BComp.exe\\\" \\\"$LOCAL\\\" \\\"$REMOTE\\\" \\\"$BASE\\\" \\\"$MERGED\\\"\n    trustExitCode = true\n[alias]\n    dt = difftool\n    mt = mergetool\n```\n使用：  \ngit difftool '文件1' '文件2'  \ngit mergetool  \n* 全局配置用户名\n``` bash\ngit config --global user.name xiexingen\ngit config --global user.email 1002275364@qq.com\ngit config --global alias.co checkout  //用co代替checkout\n```\n日志  \n``` bash\ngit log –graph –pretty=format:’%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset’ –abbrev-commit –date=relative **\n```\n* https带用户名密码形式迁出代码\ngit clone http://用户名:密码@gitlab.xxgtalk.cn/WT/StudyNetCore.git    \n\n* github上游合并问题\n``` js\n首先指定上游地址：git remote add upstream [original repo url]\n拉取上游代码:git fetch upstream\n合并代码:git merge upstream/master\n```","source":"_posts/tools/git.md","raw":"---\ntitle: git常用命令(笔记)\ndate: 2018-05-16 09:10:11 \ncategories: ['工具']\ntags: ['工具']\n---\n\n常用git命令\n<!-- more -->\n\n1. 创建一个版本库  \nmkdir repository    //创建一个文件夹  \ngit init [name]       //把目录编程git可以管理的仓库,[name]可选  \n2. 提交文件到版本库  \ngit add test.txt    //添加文件到版本库,此时还没有提交到git  \ngit commit -m \"提交注释\"    //告诉Git，把文件提交到仓库  \n3. 远程  \n查看当前git的状态:        git status      \n查看修改变的内容:        git diff  \n查看历史记录:                git log  \n查看修改的headid：       git reflog  \n查看分支：    git branch [-a|-r]    //-a 所有分支，-r:远程分支  \n查看远程库信息   :            git remote  \n查看远程库详细信息:        git remote -v  \n查看远程仓库：$ git remote -v                  \n添加远程仓库：$ git remote add [name] [url]  \n克隆远程仓库：git checkout [branchName] origin/[branchName] //如果远程分支有branchName而本地没  \ngit checkout -b [branchName] origin/[branchName] //如果远程分支有本地无，克隆并切换到  \n删除本地仓库: git branch -d [branch-name]  \n强制删除本地分支  git branch -D [branch-name]   \n删除远程仓库：$ git push origin :[branch-name] //删除远程分支  \n            git remote rm [branch-name]  \n            git push origin --delete [branchName]    \n修改远程仓库：$ git remote set-url --push [name] [newUrl]  \n拉取远程仓库：$ git pull origin [remoteName]:[localBranchName]  \n                            git fetch origin [remoteName]:[localBranchName]    //获取到当前分支  \n推送远程仓库：$ git push origin [remoteName]:[localBranchName]        //如果有冲突，需要先pull或者fetch远程的  \ngit push origin [remoteName]:[localBranchName] -f    //强推，使用本地覆盖服务器的  \n4. 与远程git关联  \na、在git上创建一个Repository  \nb、在本地执行命令：git remote add origin git@github.com:xiexingen/learngit.git    //将本地仓库与远程关联  \nc、重新关联：git remote set-url origin git://git.coding.net/xxxx/yyyy.git  \n5. 从远程下载到本地  \ngit clone [地址] [文件夹名称]    //将远程项目复制到本地之地文件加下  \n6. 分支  \n创建分支：git branch [branch Name]  \n切换分支：git checkout [branch Name]  \n创建+切换分支：git checkout -b [branch Name]  \n合并分支到当前分支：git merge [branch Name]  \n重命名分支：    git branch -m [new_branchName] [old_branchName]  \n查看所有分支：git branch -a  \n从指定分支创建并切换到分支:git checkout -b [local-branchName] [origin/branchName]  \n删除分支:    git branch [-d|-D] [local-branch] //-d 只能删除已经参与合并的分支,-D:可以删除为合并的分支，然后在git push origin :master 可以删除远程分支  \ngit merge命令用于合并指定分支到当前分支,注意到上面的Fast-forward信息，Git告诉我们，这次合并是“快进模式”，也就是直接把master指向dev的当前提交  \ngit merge dev :分两种情况一种是直接指向，另一种是生成另外一个将两个合并  \ngit merge --no-ff -m'comment' [branch Name]    //合并分支时，加上--no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并  \ngit merge --abort //取消合并  \n7. Bug分支  \ngit stash        //相当于tfs中的搁置  \ngit stash apply    //取消搁置到本地  \ngit stash drp     //删除搁置集  \ngit stash pop        //取消搁置到本地并删除搁置集  \ngit stash list    //查看搁置集  \ngit stash apply stash@{0}    //恢复指定的搁置集  \n8. 多人协作  \nA、git push -u origin [local-branch][:remote-branch]    //吧本地库推送到远程库上，-u，不但回吧本地的分支推送到远程新的master分支，还会把本地分支和远程分支关联起来，在以后的推送或者拉去时就可以简化命名\n后面如果有修改的话，只需要执行：git push origin [local-branch]    //吧本地分支的最新修改推送到服务器\nB、从本地推送分支，使用git push origin [local_branch]:[remote-branch]，如果推送失败，先用git pull抓取远程的新提交；\n在本地创建和远程分支对应的分支，使用git checkout -b branch-name origin/branch-name，本地和远程分支的名称最好一致；\nc、建立本地分支和远程分支的关联，使用git branch --set-upstream [local-branch] [origin/remote-branch]\n  从远程抓取分支，使用git pull，如果有冲突，要先处理冲突。\n如果git pull提示“no tracking information”，则说明本地分支和远程分支的链接关系没有创建，用命令git branch --set-upstream branch-name origin/branch-name\n9. 取消、回滚  \ngit -reflog 查看历史版本  \ngit reset --hard HEAD^    //回到上一次改动 (针对历史提交)  \ngit reset -hard 3628164    //3628164 headid 恢复到指定的记录(针对历史提交)  \ngit reset test.js //使用当前历史提交还原工作区  \ngit checkout -- test.js    //使用暂存区覆盖改动  \n10. clean  \ngit clean -n //将当前非暂存区的文件移除  \ngit clean -f //强制移除  \n11. 版本(tag)操作相关命令  \n查看版本：$ git tag  \n创建版本：$ git tag [name]  \n删除版本：$ git tag -d [name]  \n查看远程版本：$ git tag -r  \n创建远程版本(本地版本push到远程)：$ git push origin [name]  \n删除远程版本：$ git push origin :refs/tags/[name]  \n合并远程仓库的tag到本地：$ git pull origin --tags  \n上传本地tag到远程仓库：$ git push origin --tags  \n创建带注释的tag：$ git tag -a [name] -m 'yourMessage'  \n12. 忽略一些文件、文件夹不提交  \n在仓库根目录下创建名称为“.gitignore”的文件，写入不需要的文件夹名或文件，每个元素占一行即可，如  \ntarget  \nbin  \n*.db  \n13. 生成密钥  \n* 查看是否已经有了ssh密钥：cd ~/.ssh  \n    >如果提示：No such file or directory 说明你是第一次使用git  \n如果不是第一次使用，请执行下面的操作,清理原有ssh密钥。  \n $ mkdir key_backup $ cp id_rsa* key_backup $ rm id_rsa*  \n生成新的密钥：  \n$ ssh-keygen -t rsa -C “1002275364@qq.com”  \n14. 添加忽略文件  \ngit rm -f --cached [path] 移除单个文件，path表示全路径  \ngit rm -f --cached [path] -r 移除目录，path表示目录  \n15. 从暂存区移除文件  \ngit rm --cached [file] //将file从暂存区移除  \n16. tag\ngit tag -a v1.0 -m 'version 1.0'  \ngit tag 列出已有标签  \ngit tag -l 'v1.0' //列出指定标签  \ngit checkout -b [branchName] [tagname] //在特定的标签上创建一个新分支  \ngit tag v0.9 [626262] //给上次提价的commit id为626262打上标签  \ngit push origin [v1.0] //将标签v1.0push到远程  \ngit push origin --tags //将本地的所有tag push到远程  \ngit push origin :refs/tags/[v1.0] //删除v1.0  \n17. .gitignore文件无效的解决方法  \ngit rm -r --cached [指定文件]  \n提交\n\n##### 配置git使用BCompare来比对文件(用户目录\\.gitconfig里面)\n``` bash\n[user]\nname = xiexingen\nemail = 1002275364@qq.com\n[diff]\n    tool = bc4\n[difftool]\n    prompt = false\n[difftool \"bc4\"]\n    cmd = \\\"D:/Program Files/Beyond Compare 4/BComp.exe\\\" \\\"$LOCAL\\\" \\\"$REMOTE\\\"\n[merge]\n    tool = bc4\n[mergetool]\n    prompt = false\n    keepBackup = false\n[mergetool \"bc4\"]\n    cmd = \\\"D:/Program Files/Beyond Compare 4/BComp.exe\\\" \\\"$LOCAL\\\" \\\"$REMOTE\\\" \\\"$BASE\\\" \\\"$MERGED\\\"\n    trustExitCode = true\n[alias]\n    dt = difftool\n    mt = mergetool\n```\n使用：  \ngit difftool '文件1' '文件2'  \ngit mergetool  \n* 全局配置用户名\n``` bash\ngit config --global user.name xiexingen\ngit config --global user.email 1002275364@qq.com\ngit config --global alias.co checkout  //用co代替checkout\n```\n日志  \n``` bash\ngit log –graph –pretty=format:’%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset’ –abbrev-commit –date=relative **\n```\n* https带用户名密码形式迁出代码\ngit clone http://用户名:密码@gitlab.xxgtalk.cn/WT/StudyNetCore.git    \n\n* github上游合并问题\n``` js\n首先指定上游地址：git remote add upstream [original repo url]\n拉取上游代码:git fetch upstream\n合并代码:git merge upstream/master\n```","slug":"tools/git","published":1,"updated":"2018-11-11T03:32:20.523Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1od001d70uk98qrd0oz","content":"<p>常用git命令<br><a id=\"more\"></a></p>\n<ol>\n<li>创建一个版本库<br>mkdir repository    //创建一个文件夹<br>git init [name]       //把目录编程git可以管理的仓库,[name]可选  </li>\n<li>提交文件到版本库<br>git add test.txt    //添加文件到版本库,此时还没有提交到git<br>git commit -m “提交注释”    //告诉Git，把文件提交到仓库  </li>\n<li>远程<br>查看当前git的状态:        git status<br>查看修改变的内容:        git diff<br>查看历史记录:                git log<br>查看修改的headid：       git reflog<br>查看分支：    git branch [-a|-r]    //-a 所有分支，-r:远程分支<br>查看远程库信息   :            git remote<br>查看远程库详细信息:        git remote -v<br>查看远程仓库：$ git remote -v<br>添加远程仓库：$ git remote add [name] [url]<br>克隆远程仓库：git checkout [branchName] origin/[branchName] //如果远程分支有branchName而本地没<br>git checkout -b [branchName] origin/[branchName] //如果远程分支有本地无，克隆并切换到<br>删除本地仓库: git branch -d [branch-name]<br>强制删除本地分支  git branch -D [branch-name]<br>删除远程仓库：$ git push origin :[branch-name] //删除远程分支  <pre><code>git remote rm [branch-name]  \ngit push origin --delete [branchName]    \n</code></pre>修改远程仓库：$ git remote set-url –push [name] [newUrl]<br>拉取远程仓库：$ git pull origin [remoteName]:[localBranchName]  <pre><code>git fetch origin [remoteName]:[localBranchName]    //获取到当前分支  \n</code></pre>推送远程仓库：$ git push origin [remoteName]:[localBranchName]        //如果有冲突，需要先pull或者fetch远程的<br>git push origin [remoteName]:[localBranchName] -f    //强推，使用本地覆盖服务器的  </li>\n<li>与远程git关联<br>a、在git上创建一个Repository<br>b、在本地执行命令：git remote add origin <a href=\"mailto:git@github.com\" target=\"_blank\" rel=\"noopener\">git@github.com</a>:xiexingen/learngit.git    //将本地仓库与远程关联<br>c、重新关联：git remote set-url origin git://git.coding.net/xxxx/yyyy.git  </li>\n<li>从远程下载到本地<br>git clone [地址] [文件夹名称]    //将远程项目复制到本地之地文件加下  </li>\n<li>分支<br>创建分支：git branch [branch Name]<br>切换分支：git checkout [branch Name]<br>创建+切换分支：git checkout -b [branch Name]<br>合并分支到当前分支：git merge [branch Name]<br>重命名分支：    git branch -m [new_branchName] [old_branchName]<br>查看所有分支：git branch -a<br>从指定分支创建并切换到分支:git checkout -b [local-branchName] [origin/branchName]<br>删除分支:    git branch [-d|-D] [local-branch] //-d 只能删除已经参与合并的分支,-D:可以删除为合并的分支，然后在git push origin :master 可以删除远程分支<br>git merge命令用于合并指定分支到当前分支,注意到上面的Fast-forward信息，Git告诉我们，这次合并是“快进模式”，也就是直接把master指向dev的当前提交<br>git merge dev :分两种情况一种是直接指向，另一种是生成另外一个将两个合并<br>git merge –no-ff -m’comment’ [branch Name]    //合并分支时，加上–no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并<br>git merge –abort //取消合并  </li>\n<li>Bug分支<br>git stash        //相当于tfs中的搁置<br>git stash apply    //取消搁置到本地<br>git stash drp     //删除搁置集<br>git stash pop        //取消搁置到本地并删除搁置集<br>git stash list    //查看搁置集<br>git stash apply stash@{0}    //恢复指定的搁置集  </li>\n<li>多人协作<br>A、git push -u origin [local-branch][:remote-branch]    //吧本地库推送到远程库上，-u，不但回吧本地的分支推送到远程新的master分支，还会把本地分支和远程分支关联起来，在以后的推送或者拉去时就可以简化命名<br>后面如果有修改的话，只需要执行：git push origin [local-branch]    //吧本地分支的最新修改推送到服务器<br>B、从本地推送分支，使用git push origin [local_branch]:[remote-branch]，如果推送失败，先用git pull抓取远程的新提交；<br>在本地创建和远程分支对应的分支，使用git checkout -b branch-name origin/branch-name，本地和远程分支的名称最好一致；<br>c、建立本地分支和远程分支的关联，使用git branch –set-upstream [local-branch] [origin/remote-branch]<br>从远程抓取分支，使用git pull，如果有冲突，要先处理冲突。<br>如果git pull提示“no tracking information”，则说明本地分支和远程分支的链接关系没有创建，用命令git branch –set-upstream branch-name origin/branch-name</li>\n<li>取消、回滚<br>git -reflog 查看历史版本<br>git reset –hard HEAD^    //回到上一次改动 (针对历史提交)<br>git reset -hard 3628164    //3628164 headid 恢复到指定的记录(针对历史提交)<br>git reset test.js //使用当前历史提交还原工作区<br>git checkout – test.js    //使用暂存区覆盖改动  </li>\n<li>clean<br>git clean -n //将当前非暂存区的文件移除<br>git clean -f //强制移除  </li>\n<li>版本(tag)操作相关命令<br>查看版本：$ git tag<br>创建版本：$ git tag [name]<br>删除版本：$ git tag -d [name]<br>查看远程版本：$ git tag -r<br>创建远程版本(本地版本push到远程)：$ git push origin [name]<br>删除远程版本：$ git push origin :refs/tags/[name]<br>合并远程仓库的tag到本地：$ git pull origin –tags<br>上传本地tag到远程仓库：$ git push origin –tags<br>创建带注释的tag：$ git tag -a [name] -m ‘yourMessage’  </li>\n<li>忽略一些文件、文件夹不提交<br>在仓库根目录下创建名称为“.gitignore”的文件，写入不需要的文件夹名或文件，每个元素占一行即可，如<br>target<br>bin<br>*.db  </li>\n<li>生成密钥  </li>\n</ol>\n<ul>\n<li>查看是否已经有了ssh密钥：cd ~/.ssh  <blockquote>\n<p>如果提示：No such file or directory 说明你是第一次使用git<br>如果不是第一次使用，请执行下面的操作,清理原有ssh密钥。<br>$ mkdir key_backup $ cp id_rsa<em> key_backup $ rm id_rsa</em><br>生成新的密钥：<br>$ ssh-keygen -t rsa -C “<a href=\"mailto:1002275364@qq.com\" target=\"_blank\" rel=\"noopener\">1002275364@qq.com</a>”  </p>\n</blockquote>\n</li>\n</ul>\n<ol start=\"14\">\n<li>添加忽略文件<br>git rm -f –cached [path] 移除单个文件，path表示全路径<br>git rm -f –cached [path] -r 移除目录，path表示目录  </li>\n<li>从暂存区移除文件<br>git rm –cached [file] //将file从暂存区移除  </li>\n<li>tag<br>git tag -a v1.0 -m ‘version 1.0’<br>git tag 列出已有标签<br>git tag -l ‘v1.0’ //列出指定标签<br>git checkout -b [branchName] [tagname] //在特定的标签上创建一个新分支<br>git tag v0.9 [626262] //给上次提价的commit id为626262打上标签<br>git push origin [v1.0] //将标签v1.0push到远程<br>git push origin –tags //将本地的所有tag push到远程<br>git push origin :refs/tags/[v1.0] //删除v1.0  </li>\n<li>.gitignore文件无效的解决方法<br>git rm -r –cached [指定文件]<br>提交</li>\n</ol>\n<h5 id=\"配置git使用BCompare来比对文件-用户目录-gitconfig里面\"><a href=\"#配置git使用BCompare来比对文件-用户目录-gitconfig里面\" class=\"headerlink\" title=\"配置git使用BCompare来比对文件(用户目录.gitconfig里面)\"></a>配置git使用BCompare来比对文件(用户目录.gitconfig里面)</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[user]</span><br><span class=\"line\">name = xiexingen</span><br><span class=\"line\">email = 1002275364@qq.com</span><br><span class=\"line\">[diff]</span><br><span class=\"line\">    tool = bc4</span><br><span class=\"line\">[difftool]</span><br><span class=\"line\">    prompt = <span class=\"literal\">false</span></span><br><span class=\"line\">[difftool <span class=\"string\">\"bc4\"</span>]</span><br><span class=\"line\">    cmd = \\<span class=\"string\">\"D:/Program Files/Beyond Compare 4/BComp.exe\\\" \\\"<span class=\"variable\">$LOCAL</span>\\\" \\\"<span class=\"variable\">$REMOTE</span>\\\"</span></span><br><span class=\"line\"><span class=\"string\">[merge]</span></span><br><span class=\"line\"><span class=\"string\">    tool = bc4</span></span><br><span class=\"line\"><span class=\"string\">[mergetool]</span></span><br><span class=\"line\"><span class=\"string\">    prompt = false</span></span><br><span class=\"line\"><span class=\"string\">    keepBackup = false</span></span><br><span class=\"line\"><span class=\"string\">[mergetool \"</span>bc4<span class=\"string\">\"]</span></span><br><span class=\"line\"><span class=\"string\">    cmd = \\\"D:/Program Files/Beyond Compare 4/BComp.exe\\\" \\\"<span class=\"variable\">$LOCAL</span>\\\" \\\"<span class=\"variable\">$REMOTE</span>\\\" \\\"<span class=\"variable\">$BASE</span>\\\" \\\"<span class=\"variable\">$MERGED</span>\\\"</span></span><br><span class=\"line\"><span class=\"string\">    trustExitCode = true</span></span><br><span class=\"line\"><span class=\"string\">[alias]</span></span><br><span class=\"line\"><span class=\"string\">    dt = difftool</span></span><br><span class=\"line\"><span class=\"string\">    mt = mergetool</span></span><br></pre></td></tr></table></figure>\n<p>使用：<br>git difftool ‘文件1’ ‘文件2’<br>git mergetool  </p>\n<ul>\n<li>全局配置用户名<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global user.name xiexingen</span><br><span class=\"line\">git config --global user.email 1002275364@qq.com</span><br><span class=\"line\">git config --global alias.co checkout  //用co代替checkout</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>日志<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">log</span> –graph –pretty=format:’%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset’ –abbrev-commit –date=relative **</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li><p>https带用户名密码形式迁出代码<br>git clone http://用户名:密码@gitlab.xxgtalk.cn/WT/StudyNetCore.git    </p>\n</li>\n<li><p>github上游合并问题</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">首先指定上游地址：git remote add upstream [original repo url]</span><br><span class=\"line\">拉取上游代码:git fetch upstream</span><br><span class=\"line\">合并代码:git merge upstream/master</span><br></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>常用git命令<br>","more":"</p>\n<ol>\n<li>创建一个版本库<br>mkdir repository    //创建一个文件夹<br>git init [name]       //把目录编程git可以管理的仓库,[name]可选  </li>\n<li>提交文件到版本库<br>git add test.txt    //添加文件到版本库,此时还没有提交到git<br>git commit -m “提交注释”    //告诉Git，把文件提交到仓库  </li>\n<li>远程<br>查看当前git的状态:        git status<br>查看修改变的内容:        git diff<br>查看历史记录:                git log<br>查看修改的headid：       git reflog<br>查看分支：    git branch [-a|-r]    //-a 所有分支，-r:远程分支<br>查看远程库信息   :            git remote<br>查看远程库详细信息:        git remote -v<br>查看远程仓库：$ git remote -v<br>添加远程仓库：$ git remote add [name] [url]<br>克隆远程仓库：git checkout [branchName] origin/[branchName] //如果远程分支有branchName而本地没<br>git checkout -b [branchName] origin/[branchName] //如果远程分支有本地无，克隆并切换到<br>删除本地仓库: git branch -d [branch-name]<br>强制删除本地分支  git branch -D [branch-name]<br>删除远程仓库：$ git push origin :[branch-name] //删除远程分支  <pre><code>git remote rm [branch-name]  \ngit push origin --delete [branchName]    \n</code></pre>修改远程仓库：$ git remote set-url –push [name] [newUrl]<br>拉取远程仓库：$ git pull origin [remoteName]:[localBranchName]  <pre><code>git fetch origin [remoteName]:[localBranchName]    //获取到当前分支  \n</code></pre>推送远程仓库：$ git push origin [remoteName]:[localBranchName]        //如果有冲突，需要先pull或者fetch远程的<br>git push origin [remoteName]:[localBranchName] -f    //强推，使用本地覆盖服务器的  </li>\n<li>与远程git关联<br>a、在git上创建一个Repository<br>b、在本地执行命令：git remote add origin <a href=\"mailto:git@github.com\" target=\"_blank\" rel=\"noopener\">git@github.com</a>:xiexingen/learngit.git    //将本地仓库与远程关联<br>c、重新关联：git remote set-url origin git://git.coding.net/xxxx/yyyy.git  </li>\n<li>从远程下载到本地<br>git clone [地址] [文件夹名称]    //将远程项目复制到本地之地文件加下  </li>\n<li>分支<br>创建分支：git branch [branch Name]<br>切换分支：git checkout [branch Name]<br>创建+切换分支：git checkout -b [branch Name]<br>合并分支到当前分支：git merge [branch Name]<br>重命名分支：    git branch -m [new_branchName] [old_branchName]<br>查看所有分支：git branch -a<br>从指定分支创建并切换到分支:git checkout -b [local-branchName] [origin/branchName]<br>删除分支:    git branch [-d|-D] [local-branch] //-d 只能删除已经参与合并的分支,-D:可以删除为合并的分支，然后在git push origin :master 可以删除远程分支<br>git merge命令用于合并指定分支到当前分支,注意到上面的Fast-forward信息，Git告诉我们，这次合并是“快进模式”，也就是直接把master指向dev的当前提交<br>git merge dev :分两种情况一种是直接指向，另一种是生成另外一个将两个合并<br>git merge –no-ff -m’comment’ [branch Name]    //合并分支时，加上–no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并<br>git merge –abort //取消合并  </li>\n<li>Bug分支<br>git stash        //相当于tfs中的搁置<br>git stash apply    //取消搁置到本地<br>git stash drp     //删除搁置集<br>git stash pop        //取消搁置到本地并删除搁置集<br>git stash list    //查看搁置集<br>git stash apply stash@{0}    //恢复指定的搁置集  </li>\n<li>多人协作<br>A、git push -u origin [local-branch][:remote-branch]    //吧本地库推送到远程库上，-u，不但回吧本地的分支推送到远程新的master分支，还会把本地分支和远程分支关联起来，在以后的推送或者拉去时就可以简化命名<br>后面如果有修改的话，只需要执行：git push origin [local-branch]    //吧本地分支的最新修改推送到服务器<br>B、从本地推送分支，使用git push origin [local_branch]:[remote-branch]，如果推送失败，先用git pull抓取远程的新提交；<br>在本地创建和远程分支对应的分支，使用git checkout -b branch-name origin/branch-name，本地和远程分支的名称最好一致；<br>c、建立本地分支和远程分支的关联，使用git branch –set-upstream [local-branch] [origin/remote-branch]<br>从远程抓取分支，使用git pull，如果有冲突，要先处理冲突。<br>如果git pull提示“no tracking information”，则说明本地分支和远程分支的链接关系没有创建，用命令git branch –set-upstream branch-name origin/branch-name</li>\n<li>取消、回滚<br>git -reflog 查看历史版本<br>git reset –hard HEAD^    //回到上一次改动 (针对历史提交)<br>git reset -hard 3628164    //3628164 headid 恢复到指定的记录(针对历史提交)<br>git reset test.js //使用当前历史提交还原工作区<br>git checkout – test.js    //使用暂存区覆盖改动  </li>\n<li>clean<br>git clean -n //将当前非暂存区的文件移除<br>git clean -f //强制移除  </li>\n<li>版本(tag)操作相关命令<br>查看版本：$ git tag<br>创建版本：$ git tag [name]<br>删除版本：$ git tag -d [name]<br>查看远程版本：$ git tag -r<br>创建远程版本(本地版本push到远程)：$ git push origin [name]<br>删除远程版本：$ git push origin :refs/tags/[name]<br>合并远程仓库的tag到本地：$ git pull origin –tags<br>上传本地tag到远程仓库：$ git push origin –tags<br>创建带注释的tag：$ git tag -a [name] -m ‘yourMessage’  </li>\n<li>忽略一些文件、文件夹不提交<br>在仓库根目录下创建名称为“.gitignore”的文件，写入不需要的文件夹名或文件，每个元素占一行即可，如<br>target<br>bin<br>*.db  </li>\n<li>生成密钥  </li>\n</ol>\n<ul>\n<li>查看是否已经有了ssh密钥：cd ~/.ssh  <blockquote>\n<p>如果提示：No such file or directory 说明你是第一次使用git<br>如果不是第一次使用，请执行下面的操作,清理原有ssh密钥。<br>$ mkdir key_backup $ cp id_rsa<em> key_backup $ rm id_rsa</em><br>生成新的密钥：<br>$ ssh-keygen -t rsa -C “<a href=\"mailto:1002275364@qq.com\" target=\"_blank\" rel=\"noopener\">1002275364@qq.com</a>”  </p>\n</blockquote>\n</li>\n</ul>\n<ol start=\"14\">\n<li>添加忽略文件<br>git rm -f –cached [path] 移除单个文件，path表示全路径<br>git rm -f –cached [path] -r 移除目录，path表示目录  </li>\n<li>从暂存区移除文件<br>git rm –cached [file] //将file从暂存区移除  </li>\n<li>tag<br>git tag -a v1.0 -m ‘version 1.0’<br>git tag 列出已有标签<br>git tag -l ‘v1.0’ //列出指定标签<br>git checkout -b [branchName] [tagname] //在特定的标签上创建一个新分支<br>git tag v0.9 [626262] //给上次提价的commit id为626262打上标签<br>git push origin [v1.0] //将标签v1.0push到远程<br>git push origin –tags //将本地的所有tag push到远程<br>git push origin :refs/tags/[v1.0] //删除v1.0  </li>\n<li>.gitignore文件无效的解决方法<br>git rm -r –cached [指定文件]<br>提交</li>\n</ol>\n<h5 id=\"配置git使用BCompare来比对文件-用户目录-gitconfig里面\"><a href=\"#配置git使用BCompare来比对文件-用户目录-gitconfig里面\" class=\"headerlink\" title=\"配置git使用BCompare来比对文件(用户目录.gitconfig里面)\"></a>配置git使用BCompare来比对文件(用户目录.gitconfig里面)</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[user]</span><br><span class=\"line\">name = xiexingen</span><br><span class=\"line\">email = 1002275364@qq.com</span><br><span class=\"line\">[diff]</span><br><span class=\"line\">    tool = bc4</span><br><span class=\"line\">[difftool]</span><br><span class=\"line\">    prompt = <span class=\"literal\">false</span></span><br><span class=\"line\">[difftool <span class=\"string\">\"bc4\"</span>]</span><br><span class=\"line\">    cmd = \\<span class=\"string\">\"D:/Program Files/Beyond Compare 4/BComp.exe\\\" \\\"<span class=\"variable\">$LOCAL</span>\\\" \\\"<span class=\"variable\">$REMOTE</span>\\\"</span></span><br><span class=\"line\"><span class=\"string\">[merge]</span></span><br><span class=\"line\"><span class=\"string\">    tool = bc4</span></span><br><span class=\"line\"><span class=\"string\">[mergetool]</span></span><br><span class=\"line\"><span class=\"string\">    prompt = false</span></span><br><span class=\"line\"><span class=\"string\">    keepBackup = false</span></span><br><span class=\"line\"><span class=\"string\">[mergetool \"</span>bc4<span class=\"string\">\"]</span></span><br><span class=\"line\"><span class=\"string\">    cmd = \\\"D:/Program Files/Beyond Compare 4/BComp.exe\\\" \\\"<span class=\"variable\">$LOCAL</span>\\\" \\\"<span class=\"variable\">$REMOTE</span>\\\" \\\"<span class=\"variable\">$BASE</span>\\\" \\\"<span class=\"variable\">$MERGED</span>\\\"</span></span><br><span class=\"line\"><span class=\"string\">    trustExitCode = true</span></span><br><span class=\"line\"><span class=\"string\">[alias]</span></span><br><span class=\"line\"><span class=\"string\">    dt = difftool</span></span><br><span class=\"line\"><span class=\"string\">    mt = mergetool</span></span><br></pre></td></tr></table></figure>\n<p>使用：<br>git difftool ‘文件1’ ‘文件2’<br>git mergetool  </p>\n<ul>\n<li>全局配置用户名<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global user.name xiexingen</span><br><span class=\"line\">git config --global user.email 1002275364@qq.com</span><br><span class=\"line\">git config --global alias.co checkout  //用co代替checkout</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>日志<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">log</span> –graph –pretty=format:’%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset’ –abbrev-commit –date=relative **</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li><p>https带用户名密码形式迁出代码<br>git clone http://用户名:密码@gitlab.xxgtalk.cn/WT/StudyNetCore.git    </p>\n</li>\n<li><p>github上游合并问题</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">首先指定上游地址：git remote add upstream [original repo url]</span><br><span class=\"line\">拉取上游代码:git fetch upstream</span><br><span class=\"line\">合并代码:git merge upstream/master</span><br></pre></td></tr></table></figure></li>\n</ul>"},{"title":"npm前端项目","date":"2018-05-16T01:10:12.000Z","_content":"\nnpm相关前端操作\n<!-- more -->\n\n##### 本地调试\n调试本地的包  \n1. cd 到包的文件夹下 将当前包link到全局\n    ``` bash\n    npm link\n    ```\n2. cd 到项目文件夹 将要使用的包link过来 命令如下\n    ``` bash\n    npm link [package name]\n    ```\n示例：\n> 包名称 xxg-uim-plugin-locale、项目名称 xxg-admin  \n先在 xxg-uim-plugin-locale文件夹下将当前包link到全局，执行 :npm link  \n在定位到xxg-admin项目下，执行: npm link xxg-umi-plugin-locale  \n这样 如果通过yarn add xxg-umi-plugin-locale 安装包的时候会link到本地而不会从npm下载 这样方便本地开发调试\n\n##### 发布到npm  \n续待更新...","source":"_posts/tools/npm.md","raw":"---\ntitle: npm前端项目\ndate: 2018-05-16 09:10:12 \ncategories: ['工具']\ntags: ['工具']\n---\n\nnpm相关前端操作\n<!-- more -->\n\n##### 本地调试\n调试本地的包  \n1. cd 到包的文件夹下 将当前包link到全局\n    ``` bash\n    npm link\n    ```\n2. cd 到项目文件夹 将要使用的包link过来 命令如下\n    ``` bash\n    npm link [package name]\n    ```\n示例：\n> 包名称 xxg-uim-plugin-locale、项目名称 xxg-admin  \n先在 xxg-uim-plugin-locale文件夹下将当前包link到全局，执行 :npm link  \n在定位到xxg-admin项目下，执行: npm link xxg-umi-plugin-locale  \n这样 如果通过yarn add xxg-umi-plugin-locale 安装包的时候会link到本地而不会从npm下载 这样方便本地开发调试\n\n##### 发布到npm  \n续待更新...","slug":"tools/npm","published":1,"updated":"2018-09-27T10:59:38.628Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1oh001i70ukoq7vhg86","content":"<p>npm相关前端操作<br><a id=\"more\"></a></p>\n<h5 id=\"本地调试\"><a href=\"#本地调试\" class=\"headerlink\" title=\"本地调试\"></a>本地调试</h5><p>调试本地的包  </p>\n<ol>\n<li><p>cd 到包的文件夹下 将当前包link到全局</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm link</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>cd 到项目文件夹 将要使用的包link过来 命令如下</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm link [package name]</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>示例：</p>\n<blockquote>\n<p>包名称 xxg-uim-plugin-locale、项目名称 xxg-admin<br>先在 xxg-uim-plugin-locale文件夹下将当前包link到全局，执行 :npm link<br>在定位到xxg-admin项目下，执行: npm link xxg-umi-plugin-locale<br>这样 如果通过yarn add xxg-umi-plugin-locale 安装包的时候会link到本地而不会从npm下载 这样方便本地开发调试</p>\n</blockquote>\n<h5 id=\"发布到npm\"><a href=\"#发布到npm\" class=\"headerlink\" title=\"发布到npm\"></a>发布到npm</h5><p>续待更新…</p>\n","site":{"data":{}},"excerpt":"<p>npm相关前端操作<br>","more":"</p>\n<h5 id=\"本地调试\"><a href=\"#本地调试\" class=\"headerlink\" title=\"本地调试\"></a>本地调试</h5><p>调试本地的包  </p>\n<ol>\n<li><p>cd 到包的文件夹下 将当前包link到全局</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm link</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>cd 到项目文件夹 将要使用的包link过来 命令如下</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm link [package name]</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>示例：</p>\n<blockquote>\n<p>包名称 xxg-uim-plugin-locale、项目名称 xxg-admin<br>先在 xxg-uim-plugin-locale文件夹下将当前包link到全局，执行 :npm link<br>在定位到xxg-admin项目下，执行: npm link xxg-umi-plugin-locale<br>这样 如果通过yarn add xxg-umi-plugin-locale 安装包的时候会link到本地而不会从npm下载 这样方便本地开发调试</p>\n</blockquote>\n<h5 id=\"发布到npm\"><a href=\"#发布到npm\" class=\"headerlink\" title=\"发布到npm\"></a>发布到npm</h5><p>续待更新…</p>"},{"title":"通过dotnet命令上传自己的nuget包","date":"2018-05-16T01:10:13.000Z","_content":"\n通过dotnet命令上传自己的nuget包\n<!-- more -->\n\n##### 通过dotnet命令上传自己的nuget包\n- 编辑项目属性 在打包选项中设置各种东西 勾选'在版本中生成Nuget包'、设置其他东西 如包Id、版本等  \n- 通过vs发布该包 我生成的为:XXG.AutoMapper.AutoReg.1.1.0.nupkg\n- 执行命令\n    ``` bash\n    dotnet nuget push XXG.AutoMapper.AutoReg.1.1.0.nupkg -k oy2km5lmhmh4lnff32uadp2qudugxwce5jjamrh6xgx4vy -s https://api.nuget.org/v3/index.json\n    ```\n","source":"_posts/tools/nuget.md","raw":"---\ntitle: 通过dotnet命令上传自己的nuget包\ndate: 2018-05-16 09:10:13\ncategories: ['工具']\ntags: ['工具']\n---\n\n通过dotnet命令上传自己的nuget包\n<!-- more -->\n\n##### 通过dotnet命令上传自己的nuget包\n- 编辑项目属性 在打包选项中设置各种东西 勾选'在版本中生成Nuget包'、设置其他东西 如包Id、版本等  \n- 通过vs发布该包 我生成的为:XXG.AutoMapper.AutoReg.1.1.0.nupkg\n- 执行命令\n    ``` bash\n    dotnet nuget push XXG.AutoMapper.AutoReg.1.1.0.nupkg -k oy2km5lmhmh4lnff32uadp2qudugxwce5jjamrh6xgx4vy -s https://api.nuget.org/v3/index.json\n    ```\n","slug":"tools/nuget","published":1,"updated":"2018-09-27T10:59:38.629Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1oj001l70ukm7iktnso","content":"<p>通过dotnet命令上传自己的nuget包<br><a id=\"more\"></a></p>\n<h5 id=\"通过dotnet命令上传自己的nuget包\"><a href=\"#通过dotnet命令上传自己的nuget包\" class=\"headerlink\" title=\"通过dotnet命令上传自己的nuget包\"></a>通过dotnet命令上传自己的nuget包</h5><ul>\n<li>编辑项目属性 在打包选项中设置各种东西 勾选’在版本中生成Nuget包’、设置其他东西 如包Id、版本等  </li>\n<li>通过vs发布该包 我生成的为:XXG.AutoMapper.AutoReg.1.1.0.nupkg</li>\n<li>执行命令  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet nuget push XXG.AutoMapper.AutoReg.1.1.0.nupkg -k oy2km5lmhmh4lnff32uadp2qudugxwce5jjamrh6xgx4vy -s https://api.nuget.org/v3/index.json</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>通过dotnet命令上传自己的nuget包<br>","more":"</p>\n<h5 id=\"通过dotnet命令上传自己的nuget包\"><a href=\"#通过dotnet命令上传自己的nuget包\" class=\"headerlink\" title=\"通过dotnet命令上传自己的nuget包\"></a>通过dotnet命令上传自己的nuget包</h5><ul>\n<li>编辑项目属性 在打包选项中设置各种东西 勾选’在版本中生成Nuget包’、设置其他东西 如包Id、版本等  </li>\n<li>通过vs发布该包 我生成的为:XXG.AutoMapper.AutoReg.1.1.0.nupkg</li>\n<li>执行命令  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dotnet nuget push XXG.AutoMapper.AutoReg.1.1.0.nupkg -k oy2km5lmhmh4lnff32uadp2qudugxwce5jjamrh6xgx4vy -s https://api.nuget.org/v3/index.json</span><br></pre></td></tr></table></figure>\n</li>\n</ul>"},{"title":"office笔记","date":"2018-05-16T01:10:13.000Z","_content":"\noffice笔记-长期更新\n<!-- more -->\n\n1. =INDIRECT(\"Sheet1!C\"&ROW())&\"\"，引用下拉框，自动行号   \n2. 字符串拼接：=$A1&$B1，表示：输出A1和B1单元格的内容  ","source":"_posts/tools/office.md","raw":"---\ntitle: office笔记\ndate: 2018-05-16 09:10:13\ncategories: ['工具']\ntags: ['工具']\n---\n\noffice笔记-长期更新\n<!-- more -->\n\n1. =INDIRECT(\"Sheet1!C\"&ROW())&\"\"，引用下拉框，自动行号   \n2. 字符串拼接：=$A1&$B1，表示：输出A1和B1单元格的内容  ","slug":"tools/office","published":1,"updated":"2018-09-27T10:59:38.629Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1on001q70uk6685vwo8","content":"<p>office笔记-长期更新<br><a id=\"more\"></a></p>\n<ol>\n<li>=INDIRECT(“Sheet1!C”&amp;ROW())&amp;””，引用下拉框，自动行号   </li>\n<li>字符串拼接：=$A1&amp;$B1，表示：输出A1和B1单元格的内容  </li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>office笔记-长期更新<br>","more":"</p>\n<ol>\n<li>=INDIRECT(“Sheet1!C”&amp;ROW())&amp;””，引用下拉框，自动行号   </li>\n<li>字符串拼接：=$A1&amp;$B1，表示：输出A1和B1单元格的内容  </li>\n</ol>"},{"title":"windows使用相关","date":"2018-05-20T01:10:15.000Z","_content":"\n#### window技巧-长期更新\n<!-- more -->\n\n##### 一、技巧篇\n* 查看占用端口  \nnetstat -aon    [|findstr \"1005\"]      查找1005端口被那个占用  \n* windows下删除多层级文件夹：  \n安装rimraf包：npm install -g rimraf  \n然后通过：rimraf <目录名称> 来删除  \n* *#06#:查看IphoneCMD\n*  如何下载到本地，而不是边下载边更新：  \n创建一个快捷方式，在快捷方式的后面加 \"-layout\" 双击后就是下载到本地 而不是安装\n* 打开本地连接：ncpa.cpl\n* 查看系统支持的最大内存：wmic memphysical get maxcapacity\n* 修改hosts文件后刷新 ipconfig -flushdns\n##### 二、快捷键\n* comexp.msc:打开window组件服务，可以查看事务  \n* netplwiz   :修改用户组相关  \n* inetmgr:打开IIS  \n* ssms:SQLServer数据库\n* SQLServerManager11.msc 数据库管理工具\n* devenv:VS\n* mstsc:远程\n* Alt+Enter 显示所选项的属性\n* Alt+Esc 以项目打开的顺序循环切换项目\n* Alt+向上键 在 Windows 资源管理器中查看上一级文件夹\n* Win + M：最小化所有窗口\n* Windows 徽标键 + 加号或减号 放大或缩小\n* Windows 徽标键 输入mspaint 打开画图\n* Windows 徽标键 输入psr打开系统视频录制\n* Windows 徽标键  snippingtool  win7自带截图工具\n* notepad 打开记事本\n* write----------写字板\n* perfmon.msc----计算机性能监测程序\n* services.msc 服务\n* f10或alt键 激活当前程序的菜单栏\n* osk------------打开屏幕键盘 \n* 结束进程：cmd---taskkill /im`notepad.exe /t\n* cdm常用命令：具体参考（http://www.51xue8.com/e/DownSys/play/?classid=31&id=1001&pathid=4&jishu=26）\n* ver====显示系统版本······ver/? =帮助\n* dir====显示驱动版本 · ·······dir/? =帮助\n* copy（用法4，全部复制）如：copy c:\\新建文件夹\\*.* ()d:\\txt\n* chkdsk/?=====查看磁盘文件报告\n* chkdsk===检查磁盘\n* dir====C盘文件夹目录（详细，时间，大小··）\n* dir/w =====显示C盘文件夹 （不显示时间，大小）\n* dir/l 显示子文件夹\n* dir/p======屏幕显示不完时加p\n* format====格式化磁盘（慎用）如：format g:\n* format/?====格式化帮助\n* del=====删除文件 如：del c:\\···\n* del/?===删除帮助\n* md====创建文件夹\n* ipconfig ====查看ip等信息\n* ren=====文件重命名\n* nslookup======ip地址查询\n* exit=====退出\n* rd======删除目录\n* tasklist =====显示进程\n* type=======显示文本内容\n* tree=======显示所有文件名····显示D盘则tree d:\\\n* ping=======检测网络···如ping（必须空格）-f\n* net user=========更改用户\n* net share====== 查看共享文件\n* help==============显示所有命令\n* gpedit.msc-----组策略\n* sndrec32-------录音机\n* Nslookup-------IP地址侦测器\n* explorer-------打开资源管理器\n* logoff---------注销命令\n* tsshutdn-------60秒倒计时关机命令\n* lusrmgr.msc----本机用户和组\n* services.msc---本地服务设置\n* oobe/msoobe /a----检查XP是否激活\n* cleanmgr-------垃圾整理\n* net start messenger----开始信使服务\n* compmgmt.msc---计算机管理\n* net stop messenger-----停止信使服务\n* conf-----------启动netmeeting\n* dvdplay--------DVD播放器\n* charmap--------启动字符映射表\n* diskmgmt.msc---磁盘管理实用程序\n* calc-----------启动计算器\n* dfrg.msc-------磁盘碎片整理程序\n* chkdsk.exe-----Chkdsk磁盘检查\n* devmgmt.msc--- 设备管理器\n* regsvr32 /u *.dll----停止dll文件运行\n* drwtsn32------ 系统医生\n* rononce -p ----15秒关机\n* dxdiag---------检查DirectX信息\n* regedt32-------注册表编辑器\n* Msconfig.exe---系统配置实用程序\n* rsop.msc-------组策略结果集\n* mem.exe--------显示内存使用情况\n* regedit.exe----注册表\n* winchat--------XP自带局域网聊天\n* progman--------程序管理器\n* winmsd---------系统信息\n* perfmon.msc----计算机性能监测程序\n* winver---------检查Windows版本\n* sfc /scannow-----扫描错误并复原\n* taskmgr-----任务管理器（2000／xp／2003\n* winver---------检查Windows版本\n* wmimgmt.msc----打开windows管理体系结构(WMI)\n* wupdmgr--------windows更新程序\n* wscript--------windows脚本宿主设置\n* write----------写字板\n* winmsd---------系统信息\n* wiaacmgr-------扫描仪和照相机向导\n* winchat--------XP自带局域网聊天\n* mem.exe--------显示内存使用情况\n* Msconfig.exe---系统配置实用程序\n* mplayer2-------简易widnows media player\n* mspaint--------画图板\n* mstsc----------远程桌面连接\n* mplayer2-------媒体播放机\n* magnify--------放大镜实用程序\n* mmc------------打开控制台\n* mobsync--------同步命令\n* dxdiag---------检查DirectX信息\n* drwtsn32------ 系统医生\n* devmgmt.msc--- 设备管理器\n* dfrg.msc-------磁盘碎片整理程序\n* diskmgmt.msc---磁盘管理实用程序\n* dcomcnfg-------打开系统组件服务\n* ddeshare-------打开DDE共享设置\n* dvdplay--------DVD播放器\n* net stop messenger-----停止信使服务\n* net start messenger----开始信使服务\n* notepad--------打开记事本\n* nslookup-------网络管理的工具向导\n* ntbackup-------系统备份和还原\n* narrator-------屏幕“讲述人”\n* ntmsmgr.msc----移动存储管理器\n* ntmsoprq.msc---移动存储管理员操作请求\n* netstat -an----(TC)命令检查接口\n* syncapp--------创建一个公文包\n* sysedit--------系统配置编辑器\n* sigverif-------文件签名验证程序\n* sndrec32-------录音机\n* shrpubw--------创建共享文件夹\n* secpol.msc-----本地安全策略\n* syskey---------系统加密，一旦加密就不能解开，保护windows xp系统的双重密码\n* services.msc---本地服务设置\n* Sndvol32-------音量控制程序\n* sfc.exe--------系统文件检查器\n* sfc /scannow---windows文件保护\n* tsshutdn-------60秒倒计时关机命令\n* tourstart------xp简介（安装完成后出现的漫游xp程序）\n* taskmgr--------任务管理器\n* eventvwr-------事件查看器\n* eudcedit-------造字程序\n* explorer-------打开资源管理器\n* packager-------对象包装程序\n* perfmon.msc----计算机性能监测程序\n* progman--------程序管理器\n* regedit.exe----注册表\n* rsop.msc-------组策略结果集\n* regedt32-------注册表编辑器\n* rononce -p ----15秒关机\n* regsvr32 /u *.dll----停止dll文件运行\n* regsvr32 /u zipfldr.dll------取消ZIP支持\n* cmd.exe--------CMD命令提示符\n* chkdsk.exe-----Chkdsk磁盘检查\n* certmgr.msc----证书管理实用程序\n* calc-----------启动计算器\n* charmap--------启动字符映射表\n* cliconfg-------SQL SERVER 客户端网络实用程序\n* Clipbrd--------剪贴板查看器\n* conf-----------启动netmeeting\n* compmgmt.msc---计算机管理\n* cleanmgr-------垃圾整理\n* ciadv.msc------索引服务程序\n* osk------------打开屏幕键盘\n* odbcad32-------ODBC数据源管理器\n* oobe/msoobe /a----检查XP是否激活\n* lusrmgr.msc----本机用户和组\n* logoff---------注销命令\n* iexpress-------木马捆绑工具，系统自带\n* Nslookup-------IP地址侦测器\n* fsmgmt.msc-----共享文件夹管理器\n* utilman--------辅助工具管理器\n* 系统查看=========systeminfo\n\n* 轻松访问键盘快捷方式  \n　　按住右Shift 八秒钟： 启用和关闭筛选键  \n　　按左 Alt+左 Shift+PrtScn(或 PrtScn)：启用或关闭高对比度  \n　　按左 Alt+左 Shift+Num Lock ：启用或关闭鼠标键   \n　　按 Shift 五次： 启用或关闭粘滞键  \n　　按住 Num Lock 五秒钟：启用或关闭切换键  \n　　Windows 徽标键 + U ： 打开轻松访问中心\n* 常规键盘快捷方式  \n　　F1 显示帮助  \n　　Ctrl+C  复制选择的项目  \n　　Ctrl+X  剪切选择的项目  \n　　Ctrl+V  粘贴选择的项目  \n　　Ctrl+Z  撤消操作  \n　　Ctrl+Y  重新执行某项操作\n　　F2 重命名选定项目  \n　　Ctrl+向右键 将光标移动到下一个字词的起始处  \n　　Ctrl+向左键 将光标移动到上一个字词的起始处  \n　　Ctrl+向下键 将光标移动到下一个段落的起始处  \n　　Ctrl+向上键 将光标移动到上一个段落的起始处  \n　　Ctrl+Shift 加某个箭头键 选择一块文本  \n　　Shift 加任意箭头键 在窗口中或桌面上选择多个项目，或者在文档中选择文本   \n　　Ctrl 加任意箭头键+空格键 选择窗口中或桌面上的多个单个项目  \n　　Ctrl+A 选择文档或窗口中的所有项目  \n　　F3 搜索文件或文件夹  \n　　Alt+Enter 显示所选项的属性  \n　　Alt+F4 关闭活动项目或者退出活动程序  \n　　Alt+空格键 为活动窗口打开快捷方式菜单  \n　　Ctrl+F4 关闭活动文档(在允许同时打开多个文档的程序中)  \n　　Alt+Tab 在打开的项目之间切换  \n　　Ctrl+Alt+Tab 使用箭头键在打开的项目之间切换  \n　　Ctrl+鼠标滚轮 更改桌面上的图标大小  \n　　Windows 徽标键 + Tab 使用 Aero Flip 3-D 循环切换任务栏上的程序  \n　　Ctrl + Windows 徽标键 + Tab 通过 Aero Flip 3-D 使用箭头键循环切换任务栏上的程序  \n　　Alt+Esc 以项目打开的顺序循环切换项目  \n　　F6 在窗口中或桌面上循环切换屏幕元素  \n　　F4 在 Windows 资源管理器中显示地址栏列表  \n　　Shift+F10 显示选定项目的快捷菜单  \n　　Ctrl+Esc 打开「开始」菜单  \n　　Alt+加下划线的字母 显示相应的菜单  \n　　Alt+加下划线的字母 执行菜单命令(或其他有下划线的命令)  \n　　F10 激活活动程序中的菜单栏  \n　　向右键 打开右侧的下一个菜单或者打开子菜单  \n　　向左键 打开左侧的下一个菜单或者关闭子菜单  \n　　F5 刷新活动窗口  \n　　Alt+向上键 在 Windows 资源管理器中查看上一级文件夹  \n　　Esc 取消当前任务  \n　　Ctrl+Shift+Esc 打开任务管理器  \n　　插入 CD 时按住 Shift 阻止 CD 自动播放  \n* 对话框键盘快捷方式  \n　　Ctrl+Tab  在选项卡上向前移动  \n　　Ctrl+Shift+Tab  在选项卡上向后移动  \n　　Tab  在选项上向前移动  \n　　Shift+Tab  在选项上向后移动  \n　　Alt+加下划线的字母  执行与该字母匹配的命令(或选择选项)  \n　　Enter  对于许多选定命令代替单击鼠标  \n　　空格键 如果活动选项是复选框，则选中或清除该复选框  \n　　箭头键 如果活动选项是一组选项按钮，则选择某个按钮  \n　　F1 显示帮助  \n　　F4 显示活动列表中的项目  \n　　Backspace 如果在“另存为”或“打开”对话框中选中了某个文件夹，则打开上一级文件夹  \n* Windows 徽标键相关的快捷键  \n　　Windows徽标键就是显示为Windows旗帜，或标有文字Win或Windows的按键，以下简称Win键。XP时代有4个经典的 Win 键组合：R/E/F/L。到了 Win7，花样更多了。  \n　　Win：打开或关闭开始菜单  \n　　Win + Pause：显示系统属性对话框  \n　　Win + D：显示桌面  \n　　Win + M：最小化所有窗口  \n　　Win + SHIFT + M：还原最小化窗口到桌面上  \n　　Win + E：打开我的电脑  \n　　Win + F：搜索文件或文件夹  \n　　Ctrl + Win + F：搜索计算机(如果您在网络上)  \n　　Win + L：锁定您的计算机或切换用户  \n　　Win + R：打开运行对话框  \n　　Win + T：切换任务栏上的程序(感觉是和alt+ESC 一样 )  \n　　Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，新开一个实例。(感觉这个比较新颖，貌似快速启动。) Shift + Windows logo key +number：Start a new instance of the program pinned to the taskbar in the position indicated by the number  \n　　Ctrl + Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，切换到上一次的活动窗口。 Ctrl+Windows logo key +number：Switch to the last active window of the program pinned to the taskbar in the position indicated by the number  \n　　ALT + Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，显示跳转清单。 Alt+Windows logo key +number： Open the Jump List for the program pinned to the taskbar in the position indicated by the number  \n　　Win + TAB：循环切换任务栏上的程序并使用的Aero三维效果  \n　　Ctrl + Win + TAB：使用方向键来循环循环切换任务栏上的程序，并使用的Aero三维效果  \n　　按Ctrl + Win + B：切换到在通知区域中显示信息的程序  \n　　Win + 空格：预览桌面  \n　　Win + ↑：最大化窗口  \n　　Win + ↓：最小化窗口  \n　　Win + ←：最大化到窗口左侧的屏幕上  \n　　Win + →：最大化窗口到右侧的屏幕上  \n　　Win + Home：最小化所有窗口，除了当前激活窗口  \n　　Win+ SHIFT + ↑：拉伸窗口的到屏幕的顶部和底部  \n　　Win+ SHIFT + →/←：移动一个窗口，从一个显示器到另一个  \n　　Win + P：选择一个演示文稿显示模式  \n　　Win + G：循环切换侧边栏的小工具  \n　　Win + U：打开轻松访问中心  \n　　Win + x：打开Windows移动中心  \n* Windows Explorer相关快捷键    \n　　Ctrl+N 打开新窗口    \n　　Ctrl+Shift+N 新建文件夹\n","source":"_posts/tools/windows.md","raw":"---\ntitle: windows使用相关\ndate: 2018-05-20 09:10:15\ncategories: ['工具']\ntags: ['工具']\n---\n\n#### window技巧-长期更新\n<!-- more -->\n\n##### 一、技巧篇\n* 查看占用端口  \nnetstat -aon    [|findstr \"1005\"]      查找1005端口被那个占用  \n* windows下删除多层级文件夹：  \n安装rimraf包：npm install -g rimraf  \n然后通过：rimraf <目录名称> 来删除  \n* *#06#:查看IphoneCMD\n*  如何下载到本地，而不是边下载边更新：  \n创建一个快捷方式，在快捷方式的后面加 \"-layout\" 双击后就是下载到本地 而不是安装\n* 打开本地连接：ncpa.cpl\n* 查看系统支持的最大内存：wmic memphysical get maxcapacity\n* 修改hosts文件后刷新 ipconfig -flushdns\n##### 二、快捷键\n* comexp.msc:打开window组件服务，可以查看事务  \n* netplwiz   :修改用户组相关  \n* inetmgr:打开IIS  \n* ssms:SQLServer数据库\n* SQLServerManager11.msc 数据库管理工具\n* devenv:VS\n* mstsc:远程\n* Alt+Enter 显示所选项的属性\n* Alt+Esc 以项目打开的顺序循环切换项目\n* Alt+向上键 在 Windows 资源管理器中查看上一级文件夹\n* Win + M：最小化所有窗口\n* Windows 徽标键 + 加号或减号 放大或缩小\n* Windows 徽标键 输入mspaint 打开画图\n* Windows 徽标键 输入psr打开系统视频录制\n* Windows 徽标键  snippingtool  win7自带截图工具\n* notepad 打开记事本\n* write----------写字板\n* perfmon.msc----计算机性能监测程序\n* services.msc 服务\n* f10或alt键 激活当前程序的菜单栏\n* osk------------打开屏幕键盘 \n* 结束进程：cmd---taskkill /im`notepad.exe /t\n* cdm常用命令：具体参考（http://www.51xue8.com/e/DownSys/play/?classid=31&id=1001&pathid=4&jishu=26）\n* ver====显示系统版本······ver/? =帮助\n* dir====显示驱动版本 · ·······dir/? =帮助\n* copy（用法4，全部复制）如：copy c:\\新建文件夹\\*.* ()d:\\txt\n* chkdsk/?=====查看磁盘文件报告\n* chkdsk===检查磁盘\n* dir====C盘文件夹目录（详细，时间，大小··）\n* dir/w =====显示C盘文件夹 （不显示时间，大小）\n* dir/l 显示子文件夹\n* dir/p======屏幕显示不完时加p\n* format====格式化磁盘（慎用）如：format g:\n* format/?====格式化帮助\n* del=====删除文件 如：del c:\\···\n* del/?===删除帮助\n* md====创建文件夹\n* ipconfig ====查看ip等信息\n* ren=====文件重命名\n* nslookup======ip地址查询\n* exit=====退出\n* rd======删除目录\n* tasklist =====显示进程\n* type=======显示文本内容\n* tree=======显示所有文件名····显示D盘则tree d:\\\n* ping=======检测网络···如ping（必须空格）-f\n* net user=========更改用户\n* net share====== 查看共享文件\n* help==============显示所有命令\n* gpedit.msc-----组策略\n* sndrec32-------录音机\n* Nslookup-------IP地址侦测器\n* explorer-------打开资源管理器\n* logoff---------注销命令\n* tsshutdn-------60秒倒计时关机命令\n* lusrmgr.msc----本机用户和组\n* services.msc---本地服务设置\n* oobe/msoobe /a----检查XP是否激活\n* cleanmgr-------垃圾整理\n* net start messenger----开始信使服务\n* compmgmt.msc---计算机管理\n* net stop messenger-----停止信使服务\n* conf-----------启动netmeeting\n* dvdplay--------DVD播放器\n* charmap--------启动字符映射表\n* diskmgmt.msc---磁盘管理实用程序\n* calc-----------启动计算器\n* dfrg.msc-------磁盘碎片整理程序\n* chkdsk.exe-----Chkdsk磁盘检查\n* devmgmt.msc--- 设备管理器\n* regsvr32 /u *.dll----停止dll文件运行\n* drwtsn32------ 系统医生\n* rononce -p ----15秒关机\n* dxdiag---------检查DirectX信息\n* regedt32-------注册表编辑器\n* Msconfig.exe---系统配置实用程序\n* rsop.msc-------组策略结果集\n* mem.exe--------显示内存使用情况\n* regedit.exe----注册表\n* winchat--------XP自带局域网聊天\n* progman--------程序管理器\n* winmsd---------系统信息\n* perfmon.msc----计算机性能监测程序\n* winver---------检查Windows版本\n* sfc /scannow-----扫描错误并复原\n* taskmgr-----任务管理器（2000／xp／2003\n* winver---------检查Windows版本\n* wmimgmt.msc----打开windows管理体系结构(WMI)\n* wupdmgr--------windows更新程序\n* wscript--------windows脚本宿主设置\n* write----------写字板\n* winmsd---------系统信息\n* wiaacmgr-------扫描仪和照相机向导\n* winchat--------XP自带局域网聊天\n* mem.exe--------显示内存使用情况\n* Msconfig.exe---系统配置实用程序\n* mplayer2-------简易widnows media player\n* mspaint--------画图板\n* mstsc----------远程桌面连接\n* mplayer2-------媒体播放机\n* magnify--------放大镜实用程序\n* mmc------------打开控制台\n* mobsync--------同步命令\n* dxdiag---------检查DirectX信息\n* drwtsn32------ 系统医生\n* devmgmt.msc--- 设备管理器\n* dfrg.msc-------磁盘碎片整理程序\n* diskmgmt.msc---磁盘管理实用程序\n* dcomcnfg-------打开系统组件服务\n* ddeshare-------打开DDE共享设置\n* dvdplay--------DVD播放器\n* net stop messenger-----停止信使服务\n* net start messenger----开始信使服务\n* notepad--------打开记事本\n* nslookup-------网络管理的工具向导\n* ntbackup-------系统备份和还原\n* narrator-------屏幕“讲述人”\n* ntmsmgr.msc----移动存储管理器\n* ntmsoprq.msc---移动存储管理员操作请求\n* netstat -an----(TC)命令检查接口\n* syncapp--------创建一个公文包\n* sysedit--------系统配置编辑器\n* sigverif-------文件签名验证程序\n* sndrec32-------录音机\n* shrpubw--------创建共享文件夹\n* secpol.msc-----本地安全策略\n* syskey---------系统加密，一旦加密就不能解开，保护windows xp系统的双重密码\n* services.msc---本地服务设置\n* Sndvol32-------音量控制程序\n* sfc.exe--------系统文件检查器\n* sfc /scannow---windows文件保护\n* tsshutdn-------60秒倒计时关机命令\n* tourstart------xp简介（安装完成后出现的漫游xp程序）\n* taskmgr--------任务管理器\n* eventvwr-------事件查看器\n* eudcedit-------造字程序\n* explorer-------打开资源管理器\n* packager-------对象包装程序\n* perfmon.msc----计算机性能监测程序\n* progman--------程序管理器\n* regedit.exe----注册表\n* rsop.msc-------组策略结果集\n* regedt32-------注册表编辑器\n* rononce -p ----15秒关机\n* regsvr32 /u *.dll----停止dll文件运行\n* regsvr32 /u zipfldr.dll------取消ZIP支持\n* cmd.exe--------CMD命令提示符\n* chkdsk.exe-----Chkdsk磁盘检查\n* certmgr.msc----证书管理实用程序\n* calc-----------启动计算器\n* charmap--------启动字符映射表\n* cliconfg-------SQL SERVER 客户端网络实用程序\n* Clipbrd--------剪贴板查看器\n* conf-----------启动netmeeting\n* compmgmt.msc---计算机管理\n* cleanmgr-------垃圾整理\n* ciadv.msc------索引服务程序\n* osk------------打开屏幕键盘\n* odbcad32-------ODBC数据源管理器\n* oobe/msoobe /a----检查XP是否激活\n* lusrmgr.msc----本机用户和组\n* logoff---------注销命令\n* iexpress-------木马捆绑工具，系统自带\n* Nslookup-------IP地址侦测器\n* fsmgmt.msc-----共享文件夹管理器\n* utilman--------辅助工具管理器\n* 系统查看=========systeminfo\n\n* 轻松访问键盘快捷方式  \n　　按住右Shift 八秒钟： 启用和关闭筛选键  \n　　按左 Alt+左 Shift+PrtScn(或 PrtScn)：启用或关闭高对比度  \n　　按左 Alt+左 Shift+Num Lock ：启用或关闭鼠标键   \n　　按 Shift 五次： 启用或关闭粘滞键  \n　　按住 Num Lock 五秒钟：启用或关闭切换键  \n　　Windows 徽标键 + U ： 打开轻松访问中心\n* 常规键盘快捷方式  \n　　F1 显示帮助  \n　　Ctrl+C  复制选择的项目  \n　　Ctrl+X  剪切选择的项目  \n　　Ctrl+V  粘贴选择的项目  \n　　Ctrl+Z  撤消操作  \n　　Ctrl+Y  重新执行某项操作\n　　F2 重命名选定项目  \n　　Ctrl+向右键 将光标移动到下一个字词的起始处  \n　　Ctrl+向左键 将光标移动到上一个字词的起始处  \n　　Ctrl+向下键 将光标移动到下一个段落的起始处  \n　　Ctrl+向上键 将光标移动到上一个段落的起始处  \n　　Ctrl+Shift 加某个箭头键 选择一块文本  \n　　Shift 加任意箭头键 在窗口中或桌面上选择多个项目，或者在文档中选择文本   \n　　Ctrl 加任意箭头键+空格键 选择窗口中或桌面上的多个单个项目  \n　　Ctrl+A 选择文档或窗口中的所有项目  \n　　F3 搜索文件或文件夹  \n　　Alt+Enter 显示所选项的属性  \n　　Alt+F4 关闭活动项目或者退出活动程序  \n　　Alt+空格键 为活动窗口打开快捷方式菜单  \n　　Ctrl+F4 关闭活动文档(在允许同时打开多个文档的程序中)  \n　　Alt+Tab 在打开的项目之间切换  \n　　Ctrl+Alt+Tab 使用箭头键在打开的项目之间切换  \n　　Ctrl+鼠标滚轮 更改桌面上的图标大小  \n　　Windows 徽标键 + Tab 使用 Aero Flip 3-D 循环切换任务栏上的程序  \n　　Ctrl + Windows 徽标键 + Tab 通过 Aero Flip 3-D 使用箭头键循环切换任务栏上的程序  \n　　Alt+Esc 以项目打开的顺序循环切换项目  \n　　F6 在窗口中或桌面上循环切换屏幕元素  \n　　F4 在 Windows 资源管理器中显示地址栏列表  \n　　Shift+F10 显示选定项目的快捷菜单  \n　　Ctrl+Esc 打开「开始」菜单  \n　　Alt+加下划线的字母 显示相应的菜单  \n　　Alt+加下划线的字母 执行菜单命令(或其他有下划线的命令)  \n　　F10 激活活动程序中的菜单栏  \n　　向右键 打开右侧的下一个菜单或者打开子菜单  \n　　向左键 打开左侧的下一个菜单或者关闭子菜单  \n　　F5 刷新活动窗口  \n　　Alt+向上键 在 Windows 资源管理器中查看上一级文件夹  \n　　Esc 取消当前任务  \n　　Ctrl+Shift+Esc 打开任务管理器  \n　　插入 CD 时按住 Shift 阻止 CD 自动播放  \n* 对话框键盘快捷方式  \n　　Ctrl+Tab  在选项卡上向前移动  \n　　Ctrl+Shift+Tab  在选项卡上向后移动  \n　　Tab  在选项上向前移动  \n　　Shift+Tab  在选项上向后移动  \n　　Alt+加下划线的字母  执行与该字母匹配的命令(或选择选项)  \n　　Enter  对于许多选定命令代替单击鼠标  \n　　空格键 如果活动选项是复选框，则选中或清除该复选框  \n　　箭头键 如果活动选项是一组选项按钮，则选择某个按钮  \n　　F1 显示帮助  \n　　F4 显示活动列表中的项目  \n　　Backspace 如果在“另存为”或“打开”对话框中选中了某个文件夹，则打开上一级文件夹  \n* Windows 徽标键相关的快捷键  \n　　Windows徽标键就是显示为Windows旗帜，或标有文字Win或Windows的按键，以下简称Win键。XP时代有4个经典的 Win 键组合：R/E/F/L。到了 Win7，花样更多了。  \n　　Win：打开或关闭开始菜单  \n　　Win + Pause：显示系统属性对话框  \n　　Win + D：显示桌面  \n　　Win + M：最小化所有窗口  \n　　Win + SHIFT + M：还原最小化窗口到桌面上  \n　　Win + E：打开我的电脑  \n　　Win + F：搜索文件或文件夹  \n　　Ctrl + Win + F：搜索计算机(如果您在网络上)  \n　　Win + L：锁定您的计算机或切换用户  \n　　Win + R：打开运行对话框  \n　　Win + T：切换任务栏上的程序(感觉是和alt+ESC 一样 )  \n　　Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，新开一个实例。(感觉这个比较新颖，貌似快速启动。) Shift + Windows logo key +number：Start a new instance of the program pinned to the taskbar in the position indicated by the number  \n　　Ctrl + Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，切换到上一次的活动窗口。 Ctrl+Windows logo key +number：Switch to the last active window of the program pinned to the taskbar in the position indicated by the number  \n　　ALT + Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，显示跳转清单。 Alt+Windows logo key +number： Open the Jump List for the program pinned to the taskbar in the position indicated by the number  \n　　Win + TAB：循环切换任务栏上的程序并使用的Aero三维效果  \n　　Ctrl + Win + TAB：使用方向键来循环循环切换任务栏上的程序，并使用的Aero三维效果  \n　　按Ctrl + Win + B：切换到在通知区域中显示信息的程序  \n　　Win + 空格：预览桌面  \n　　Win + ↑：最大化窗口  \n　　Win + ↓：最小化窗口  \n　　Win + ←：最大化到窗口左侧的屏幕上  \n　　Win + →：最大化窗口到右侧的屏幕上  \n　　Win + Home：最小化所有窗口，除了当前激活窗口  \n　　Win+ SHIFT + ↑：拉伸窗口的到屏幕的顶部和底部  \n　　Win+ SHIFT + →/←：移动一个窗口，从一个显示器到另一个  \n　　Win + P：选择一个演示文稿显示模式  \n　　Win + G：循环切换侧边栏的小工具  \n　　Win + U：打开轻松访问中心  \n　　Win + x：打开Windows移动中心  \n* Windows Explorer相关快捷键    \n　　Ctrl+N 打开新窗口    \n　　Ctrl+Shift+N 新建文件夹\n","slug":"tools/windows","published":1,"updated":"2018-09-27T10:59:38.629Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1p6002370ukj33v8wn1","content":"<h4 id=\"window技巧-长期更新\"><a href=\"#window技巧-长期更新\" class=\"headerlink\" title=\"window技巧-长期更新\"></a>window技巧-长期更新</h4><a id=\"more\"></a>\n<h5 id=\"一、技巧篇\"><a href=\"#一、技巧篇\" class=\"headerlink\" title=\"一、技巧篇\"></a>一、技巧篇</h5><ul>\n<li>查看占用端口<br>netstat -aon    [|findstr “1005”]      查找1005端口被那个占用  </li>\n<li>windows下删除多层级文件夹：<br>安装rimraf包：npm install -g rimraf<br>然后通过：rimraf &lt;目录名称&gt; 来删除  </li>\n<li>*#06#:查看IphoneCMD</li>\n<li>如何下载到本地，而不是边下载边更新：<br>创建一个快捷方式，在快捷方式的后面加 “-layout” 双击后就是下载到本地 而不是安装</li>\n<li>打开本地连接：ncpa.cpl</li>\n<li>查看系统支持的最大内存：wmic memphysical get maxcapacity</li>\n<li>修改hosts文件后刷新 ipconfig -flushdns<h5 id=\"二、快捷键\"><a href=\"#二、快捷键\" class=\"headerlink\" title=\"二、快捷键\"></a>二、快捷键</h5></li>\n<li>comexp.msc:打开window组件服务，可以查看事务  </li>\n<li>netplwiz   :修改用户组相关  </li>\n<li>inetmgr:打开IIS  </li>\n<li>ssms:SQLServer数据库</li>\n<li>SQLServerManager11.msc 数据库管理工具</li>\n<li>devenv:VS</li>\n<li>mstsc:远程</li>\n<li>Alt+Enter 显示所选项的属性</li>\n<li>Alt+Esc 以项目打开的顺序循环切换项目</li>\n<li>Alt+向上键 在 Windows 资源管理器中查看上一级文件夹</li>\n<li>Win + M：最小化所有窗口</li>\n<li>Windows 徽标键 + 加号或减号 放大或缩小</li>\n<li>Windows 徽标键 输入mspaint 打开画图</li>\n<li>Windows 徽标键 输入psr打开系统视频录制</li>\n<li>Windows 徽标键  snippingtool  win7自带截图工具</li>\n<li>notepad 打开记事本</li>\n<li>write———-写字板</li>\n<li>perfmon.msc—-计算机性能监测程序</li>\n<li>services.msc 服务</li>\n<li>f10或alt键 激活当前程序的菜单栏</li>\n<li>osk————打开屏幕键盘 </li>\n<li>结束进程：cmd—taskkill /im`notepad.exe /t</li>\n<li>cdm常用命令：具体参考（<a href=\"http://www.51xue8.com/e/DownSys/play/?classid=31&amp;id=1001&amp;pathid=4&amp;jishu=26）\" target=\"_blank\" rel=\"noopener\">http://www.51xue8.com/e/DownSys/play/?classid=31&amp;id=1001&amp;pathid=4&amp;jishu=26）</a></li>\n<li>ver====显示系统版本······ver/? =帮助</li>\n<li>dir====显示驱动版本 · ·······dir/? =帮助</li>\n<li>copy（用法4，全部复制）如：copy c:\\新建文件夹*.* ()d:\\txt</li>\n<li>chkdsk/?=====查看磁盘文件报告</li>\n<li>chkdsk===检查磁盘</li>\n<li>dir====C盘文件夹目录（详细，时间，大小··）</li>\n<li>dir/w =====显示C盘文件夹 （不显示时间，大小）</li>\n<li>dir/l 显示子文件夹</li>\n<li>dir/p======屏幕显示不完时加p</li>\n<li>format====格式化磁盘（慎用）如：format g:</li>\n<li>format/?====格式化帮助</li>\n<li>del=====删除文件 如：del c:\\···</li>\n<li>del/?===删除帮助</li>\n<li>md====创建文件夹</li>\n<li>ipconfig ====查看ip等信息</li>\n<li>ren=====文件重命名</li>\n<li>nslookup======ip地址查询</li>\n<li>exit=====退出</li>\n<li>rd======删除目录</li>\n<li>tasklist =====显示进程</li>\n<li>type=======显示文本内容</li>\n<li>tree=======显示所有文件名····显示D盘则tree d:\\</li>\n<li>ping=======检测网络···如ping（必须空格）-f</li>\n<li>net user=========更改用户</li>\n<li>net share====== 查看共享文件</li>\n<li>help==============显示所有命令</li>\n<li>gpedit.msc—–组策略</li>\n<li>sndrec32——-录音机</li>\n<li>Nslookup——-IP地址侦测器</li>\n<li>explorer——-打开资源管理器</li>\n<li>logoff———注销命令</li>\n<li>tsshutdn——-60秒倒计时关机命令</li>\n<li>lusrmgr.msc—-本机用户和组</li>\n<li>services.msc—本地服务设置</li>\n<li>oobe/msoobe /a—-检查XP是否激活</li>\n<li>cleanmgr——-垃圾整理</li>\n<li>net start messenger—-开始信使服务</li>\n<li>compmgmt.msc—计算机管理</li>\n<li>net stop messenger—–停止信使服务</li>\n<li>conf———–启动netmeeting</li>\n<li>dvdplay——–DVD播放器</li>\n<li>charmap——–启动字符映射表</li>\n<li>diskmgmt.msc—磁盘管理实用程序</li>\n<li>calc———–启动计算器</li>\n<li>dfrg.msc——-磁盘碎片整理程序</li>\n<li>chkdsk.exe—–Chkdsk磁盘检查</li>\n<li>devmgmt.msc— 设备管理器</li>\n<li>regsvr32 /u *.dll—-停止dll文件运行</li>\n<li>drwtsn32—— 系统医生</li>\n<li>rononce -p —-15秒关机</li>\n<li>dxdiag———检查DirectX信息</li>\n<li>regedt32——-注册表编辑器</li>\n<li>Msconfig.exe—系统配置实用程序</li>\n<li>rsop.msc——-组策略结果集</li>\n<li>mem.exe——–显示内存使用情况</li>\n<li>regedit.exe—-注册表</li>\n<li>winchat——–XP自带局域网聊天</li>\n<li>progman——–程序管理器</li>\n<li>winmsd———系统信息</li>\n<li>perfmon.msc—-计算机性能监测程序</li>\n<li>winver———检查Windows版本</li>\n<li>sfc /scannow—–扫描错误并复原</li>\n<li>taskmgr—–任务管理器（2000／xp／2003</li>\n<li>winver———检查Windows版本</li>\n<li>wmimgmt.msc—-打开windows管理体系结构(WMI)</li>\n<li>wupdmgr——–windows更新程序</li>\n<li>wscript——–windows脚本宿主设置</li>\n<li>write———-写字板</li>\n<li>winmsd———系统信息</li>\n<li>wiaacmgr——-扫描仪和照相机向导</li>\n<li>winchat——–XP自带局域网聊天</li>\n<li>mem.exe——–显示内存使用情况</li>\n<li>Msconfig.exe—系统配置实用程序</li>\n<li>mplayer2——-简易widnows media player</li>\n<li>mspaint——–画图板</li>\n<li>mstsc———-远程桌面连接</li>\n<li>mplayer2——-媒体播放机</li>\n<li>magnify——–放大镜实用程序</li>\n<li>mmc————打开控制台</li>\n<li>mobsync——–同步命令</li>\n<li>dxdiag———检查DirectX信息</li>\n<li>drwtsn32—— 系统医生</li>\n<li>devmgmt.msc— 设备管理器</li>\n<li>dfrg.msc——-磁盘碎片整理程序</li>\n<li>diskmgmt.msc—磁盘管理实用程序</li>\n<li>dcomcnfg——-打开系统组件服务</li>\n<li>ddeshare——-打开DDE共享设置</li>\n<li>dvdplay——–DVD播放器</li>\n<li>net stop messenger—–停止信使服务</li>\n<li>net start messenger—-开始信使服务</li>\n<li>notepad——–打开记事本</li>\n<li>nslookup——-网络管理的工具向导</li>\n<li>ntbackup——-系统备份和还原</li>\n<li>narrator——-屏幕“讲述人”</li>\n<li>ntmsmgr.msc—-移动存储管理器</li>\n<li>ntmsoprq.msc—移动存储管理员操作请求</li>\n<li>netstat -an—-(TC)命令检查接口</li>\n<li>syncapp——–创建一个公文包</li>\n<li>sysedit——–系统配置编辑器</li>\n<li>sigverif——-文件签名验证程序</li>\n<li>sndrec32——-录音机</li>\n<li>shrpubw——–创建共享文件夹</li>\n<li>secpol.msc—–本地安全策略</li>\n<li>syskey———系统加密，一旦加密就不能解开，保护windows xp系统的双重密码</li>\n<li>services.msc—本地服务设置</li>\n<li>Sndvol32——-音量控制程序</li>\n<li>sfc.exe——–系统文件检查器</li>\n<li>sfc /scannow—windows文件保护</li>\n<li>tsshutdn——-60秒倒计时关机命令</li>\n<li>tourstart——xp简介（安装完成后出现的漫游xp程序）</li>\n<li>taskmgr——–任务管理器</li>\n<li>eventvwr——-事件查看器</li>\n<li>eudcedit——-造字程序</li>\n<li>explorer——-打开资源管理器</li>\n<li>packager——-对象包装程序</li>\n<li>perfmon.msc—-计算机性能监测程序</li>\n<li>progman——–程序管理器</li>\n<li>regedit.exe—-注册表</li>\n<li>rsop.msc——-组策略结果集</li>\n<li>regedt32——-注册表编辑器</li>\n<li>rononce -p —-15秒关机</li>\n<li>regsvr32 /u *.dll—-停止dll文件运行</li>\n<li>regsvr32 /u zipfldr.dll——取消ZIP支持</li>\n<li>cmd.exe——–CMD命令提示符</li>\n<li>chkdsk.exe—–Chkdsk磁盘检查</li>\n<li>certmgr.msc—-证书管理实用程序</li>\n<li>calc———–启动计算器</li>\n<li>charmap——–启动字符映射表</li>\n<li>cliconfg——-SQL SERVER 客户端网络实用程序</li>\n<li>Clipbrd——–剪贴板查看器</li>\n<li>conf———–启动netmeeting</li>\n<li>compmgmt.msc—计算机管理</li>\n<li>cleanmgr——-垃圾整理</li>\n<li>ciadv.msc——索引服务程序</li>\n<li>osk————打开屏幕键盘</li>\n<li>odbcad32——-ODBC数据源管理器</li>\n<li>oobe/msoobe /a—-检查XP是否激活</li>\n<li>lusrmgr.msc—-本机用户和组</li>\n<li>logoff———注销命令</li>\n<li>iexpress——-木马捆绑工具，系统自带</li>\n<li>Nslookup——-IP地址侦测器</li>\n<li>fsmgmt.msc—–共享文件夹管理器</li>\n<li>utilman——–辅助工具管理器</li>\n<li><p>系统查看=========systeminfo</p>\n</li>\n<li><p>轻松访问键盘快捷方式<br>　　按住右Shift 八秒钟： 启用和关闭筛选键<br>　　按左 Alt+左 Shift+PrtScn(或 PrtScn)：启用或关闭高对比度<br>　　按左 Alt+左 Shift+Num Lock ：启用或关闭鼠标键<br>　　按 Shift 五次： 启用或关闭粘滞键<br>　　按住 Num Lock 五秒钟：启用或关闭切换键<br>　　Windows 徽标键 + U ： 打开轻松访问中心</p>\n</li>\n<li>常规键盘快捷方式<br>　　F1 显示帮助<br>　　Ctrl+C  复制选择的项目<br>　　Ctrl+X  剪切选择的项目<br>　　Ctrl+V  粘贴选择的项目<br>　　Ctrl+Z  撤消操作<br>　　Ctrl+Y  重新执行某项操作<br>　　F2 重命名选定项目<br>　　Ctrl+向右键 将光标移动到下一个字词的起始处<br>　　Ctrl+向左键 将光标移动到上一个字词的起始处<br>　　Ctrl+向下键 将光标移动到下一个段落的起始处<br>　　Ctrl+向上键 将光标移动到上一个段落的起始处<br>　　Ctrl+Shift 加某个箭头键 选择一块文本<br>　　Shift 加任意箭头键 在窗口中或桌面上选择多个项目，或者在文档中选择文本<br>　　Ctrl 加任意箭头键+空格键 选择窗口中或桌面上的多个单个项目<br>　　Ctrl+A 选择文档或窗口中的所有项目<br>　　F3 搜索文件或文件夹<br>　　Alt+Enter 显示所选项的属性<br>　　Alt+F4 关闭活动项目或者退出活动程序<br>　　Alt+空格键 为活动窗口打开快捷方式菜单<br>　　Ctrl+F4 关闭活动文档(在允许同时打开多个文档的程序中)<br>　　Alt+Tab 在打开的项目之间切换<br>　　Ctrl+Alt+Tab 使用箭头键在打开的项目之间切换<br>　　Ctrl+鼠标滚轮 更改桌面上的图标大小<br>　　Windows 徽标键 + Tab 使用 Aero Flip 3-D 循环切换任务栏上的程序<br>　　Ctrl + Windows 徽标键 + Tab 通过 Aero Flip 3-D 使用箭头键循环切换任务栏上的程序<br>　　Alt+Esc 以项目打开的顺序循环切换项目<br>　　F6 在窗口中或桌面上循环切换屏幕元素<br>　　F4 在 Windows 资源管理器中显示地址栏列表<br>　　Shift+F10 显示选定项目的快捷菜单<br>　　Ctrl+Esc 打开「开始」菜单<br>　　Alt+加下划线的字母 显示相应的菜单<br>　　Alt+加下划线的字母 执行菜单命令(或其他有下划线的命令)<br>　　F10 激活活动程序中的菜单栏<br>　　向右键 打开右侧的下一个菜单或者打开子菜单<br>　　向左键 打开左侧的下一个菜单或者关闭子菜单<br>　　F5 刷新活动窗口<br>　　Alt+向上键 在 Windows 资源管理器中查看上一级文件夹<br>　　Esc 取消当前任务<br>　　Ctrl+Shift+Esc 打开任务管理器<br>　　插入 CD 时按住 Shift 阻止 CD 自动播放  </li>\n<li>对话框键盘快捷方式<br>　　Ctrl+Tab  在选项卡上向前移动<br>　　Ctrl+Shift+Tab  在选项卡上向后移动<br>　　Tab  在选项上向前移动<br>　　Shift+Tab  在选项上向后移动<br>　　Alt+加下划线的字母  执行与该字母匹配的命令(或选择选项)<br>　　Enter  对于许多选定命令代替单击鼠标<br>　　空格键 如果活动选项是复选框，则选中或清除该复选框<br>　　箭头键 如果活动选项是一组选项按钮，则选择某个按钮<br>　　F1 显示帮助<br>　　F4 显示活动列表中的项目<br>　　Backspace 如果在“另存为”或“打开”对话框中选中了某个文件夹，则打开上一级文件夹  </li>\n<li>Windows 徽标键相关的快捷键<br>　　Windows徽标键就是显示为Windows旗帜，或标有文字Win或Windows的按键，以下简称Win键。XP时代有4个经典的 Win 键组合：R/E/F/L。到了 Win7，花样更多了。<br>　　Win：打开或关闭开始菜单<br>　　Win + Pause：显示系统属性对话框<br>　　Win + D：显示桌面<br>　　Win + M：最小化所有窗口<br>　　Win + SHIFT + M：还原最小化窗口到桌面上<br>　　Win + E：打开我的电脑<br>　　Win + F：搜索文件或文件夹<br>　　Ctrl + Win + F：搜索计算机(如果您在网络上)<br>　　Win + L：锁定您的计算机或切换用户<br>　　Win + R：打开运行对话框<br>　　Win + T：切换任务栏上的程序(感觉是和alt+ESC 一样 )<br>　　Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，新开一个实例。(感觉这个比较新颖，貌似快速启动。) Shift + Windows logo key +number：Start a new instance of the program pinned to the taskbar in the position indicated by the number<br>　　Ctrl + Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，切换到上一次的活动窗口。 Ctrl+Windows logo key +number：Switch to the last active window of the program pinned to the taskbar in the position indicated by the number<br>　　ALT + Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，显示跳转清单。 Alt+Windows logo key +number： Open the Jump List for the program pinned to the taskbar in the position indicated by the number<br>　　Win + TAB：循环切换任务栏上的程序并使用的Aero三维效果<br>　　Ctrl + Win + TAB：使用方向键来循环循环切换任务栏上的程序，并使用的Aero三维效果<br>　　按Ctrl + Win + B：切换到在通知区域中显示信息的程序<br>　　Win + 空格：预览桌面<br>　　Win + ↑：最大化窗口<br>　　Win + ↓：最小化窗口<br>　　Win + ←：最大化到窗口左侧的屏幕上<br>　　Win + →：最大化窗口到右侧的屏幕上<br>　　Win + Home：最小化所有窗口，除了当前激活窗口<br>　　Win+ SHIFT + ↑：拉伸窗口的到屏幕的顶部和底部<br>　　Win+ SHIFT + →/←：移动一个窗口，从一个显示器到另一个<br>　　Win + P：选择一个演示文稿显示模式<br>　　Win + G：循环切换侧边栏的小工具<br>　　Win + U：打开轻松访问中心<br>　　Win + x：打开Windows移动中心  </li>\n<li>Windows Explorer相关快捷键<br>　　Ctrl+N 打开新窗口<br>　　Ctrl+Shift+N 新建文件夹</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h4 id=\"window技巧-长期更新\"><a href=\"#window技巧-长期更新\" class=\"headerlink\" title=\"window技巧-长期更新\"></a>window技巧-长期更新</h4>","more":"<h5 id=\"一、技巧篇\"><a href=\"#一、技巧篇\" class=\"headerlink\" title=\"一、技巧篇\"></a>一、技巧篇</h5><ul>\n<li>查看占用端口<br>netstat -aon    [|findstr “1005”]      查找1005端口被那个占用  </li>\n<li>windows下删除多层级文件夹：<br>安装rimraf包：npm install -g rimraf<br>然后通过：rimraf &lt;目录名称&gt; 来删除  </li>\n<li>*#06#:查看IphoneCMD</li>\n<li>如何下载到本地，而不是边下载边更新：<br>创建一个快捷方式，在快捷方式的后面加 “-layout” 双击后就是下载到本地 而不是安装</li>\n<li>打开本地连接：ncpa.cpl</li>\n<li>查看系统支持的最大内存：wmic memphysical get maxcapacity</li>\n<li>修改hosts文件后刷新 ipconfig -flushdns<h5 id=\"二、快捷键\"><a href=\"#二、快捷键\" class=\"headerlink\" title=\"二、快捷键\"></a>二、快捷键</h5></li>\n<li>comexp.msc:打开window组件服务，可以查看事务  </li>\n<li>netplwiz   :修改用户组相关  </li>\n<li>inetmgr:打开IIS  </li>\n<li>ssms:SQLServer数据库</li>\n<li>SQLServerManager11.msc 数据库管理工具</li>\n<li>devenv:VS</li>\n<li>mstsc:远程</li>\n<li>Alt+Enter 显示所选项的属性</li>\n<li>Alt+Esc 以项目打开的顺序循环切换项目</li>\n<li>Alt+向上键 在 Windows 资源管理器中查看上一级文件夹</li>\n<li>Win + M：最小化所有窗口</li>\n<li>Windows 徽标键 + 加号或减号 放大或缩小</li>\n<li>Windows 徽标键 输入mspaint 打开画图</li>\n<li>Windows 徽标键 输入psr打开系统视频录制</li>\n<li>Windows 徽标键  snippingtool  win7自带截图工具</li>\n<li>notepad 打开记事本</li>\n<li>write———-写字板</li>\n<li>perfmon.msc—-计算机性能监测程序</li>\n<li>services.msc 服务</li>\n<li>f10或alt键 激活当前程序的菜单栏</li>\n<li>osk————打开屏幕键盘 </li>\n<li>结束进程：cmd—taskkill /im`notepad.exe /t</li>\n<li>cdm常用命令：具体参考（<a href=\"http://www.51xue8.com/e/DownSys/play/?classid=31&amp;id=1001&amp;pathid=4&amp;jishu=26）\" target=\"_blank\" rel=\"noopener\">http://www.51xue8.com/e/DownSys/play/?classid=31&amp;id=1001&amp;pathid=4&amp;jishu=26）</a></li>\n<li>ver====显示系统版本······ver/? =帮助</li>\n<li>dir====显示驱动版本 · ·······dir/? =帮助</li>\n<li>copy（用法4，全部复制）如：copy c:\\新建文件夹*.* ()d:\\txt</li>\n<li>chkdsk/?=====查看磁盘文件报告</li>\n<li>chkdsk===检查磁盘</li>\n<li>dir====C盘文件夹目录（详细，时间，大小··）</li>\n<li>dir/w =====显示C盘文件夹 （不显示时间，大小）</li>\n<li>dir/l 显示子文件夹</li>\n<li>dir/p======屏幕显示不完时加p</li>\n<li>format====格式化磁盘（慎用）如：format g:</li>\n<li>format/?====格式化帮助</li>\n<li>del=====删除文件 如：del c:\\···</li>\n<li>del/?===删除帮助</li>\n<li>md====创建文件夹</li>\n<li>ipconfig ====查看ip等信息</li>\n<li>ren=====文件重命名</li>\n<li>nslookup======ip地址查询</li>\n<li>exit=====退出</li>\n<li>rd======删除目录</li>\n<li>tasklist =====显示进程</li>\n<li>type=======显示文本内容</li>\n<li>tree=======显示所有文件名····显示D盘则tree d:\\</li>\n<li>ping=======检测网络···如ping（必须空格）-f</li>\n<li>net user=========更改用户</li>\n<li>net share====== 查看共享文件</li>\n<li>help==============显示所有命令</li>\n<li>gpedit.msc—–组策略</li>\n<li>sndrec32——-录音机</li>\n<li>Nslookup——-IP地址侦测器</li>\n<li>explorer——-打开资源管理器</li>\n<li>logoff———注销命令</li>\n<li>tsshutdn——-60秒倒计时关机命令</li>\n<li>lusrmgr.msc—-本机用户和组</li>\n<li>services.msc—本地服务设置</li>\n<li>oobe/msoobe /a—-检查XP是否激活</li>\n<li>cleanmgr——-垃圾整理</li>\n<li>net start messenger—-开始信使服务</li>\n<li>compmgmt.msc—计算机管理</li>\n<li>net stop messenger—–停止信使服务</li>\n<li>conf———–启动netmeeting</li>\n<li>dvdplay——–DVD播放器</li>\n<li>charmap——–启动字符映射表</li>\n<li>diskmgmt.msc—磁盘管理实用程序</li>\n<li>calc———–启动计算器</li>\n<li>dfrg.msc——-磁盘碎片整理程序</li>\n<li>chkdsk.exe—–Chkdsk磁盘检查</li>\n<li>devmgmt.msc— 设备管理器</li>\n<li>regsvr32 /u *.dll—-停止dll文件运行</li>\n<li>drwtsn32—— 系统医生</li>\n<li>rononce -p —-15秒关机</li>\n<li>dxdiag———检查DirectX信息</li>\n<li>regedt32——-注册表编辑器</li>\n<li>Msconfig.exe—系统配置实用程序</li>\n<li>rsop.msc——-组策略结果集</li>\n<li>mem.exe——–显示内存使用情况</li>\n<li>regedit.exe—-注册表</li>\n<li>winchat——–XP自带局域网聊天</li>\n<li>progman——–程序管理器</li>\n<li>winmsd———系统信息</li>\n<li>perfmon.msc—-计算机性能监测程序</li>\n<li>winver———检查Windows版本</li>\n<li>sfc /scannow—–扫描错误并复原</li>\n<li>taskmgr—–任务管理器（2000／xp／2003</li>\n<li>winver———检查Windows版本</li>\n<li>wmimgmt.msc—-打开windows管理体系结构(WMI)</li>\n<li>wupdmgr——–windows更新程序</li>\n<li>wscript——–windows脚本宿主设置</li>\n<li>write———-写字板</li>\n<li>winmsd———系统信息</li>\n<li>wiaacmgr——-扫描仪和照相机向导</li>\n<li>winchat——–XP自带局域网聊天</li>\n<li>mem.exe——–显示内存使用情况</li>\n<li>Msconfig.exe—系统配置实用程序</li>\n<li>mplayer2——-简易widnows media player</li>\n<li>mspaint——–画图板</li>\n<li>mstsc———-远程桌面连接</li>\n<li>mplayer2——-媒体播放机</li>\n<li>magnify——–放大镜实用程序</li>\n<li>mmc————打开控制台</li>\n<li>mobsync——–同步命令</li>\n<li>dxdiag———检查DirectX信息</li>\n<li>drwtsn32—— 系统医生</li>\n<li>devmgmt.msc— 设备管理器</li>\n<li>dfrg.msc——-磁盘碎片整理程序</li>\n<li>diskmgmt.msc—磁盘管理实用程序</li>\n<li>dcomcnfg——-打开系统组件服务</li>\n<li>ddeshare——-打开DDE共享设置</li>\n<li>dvdplay——–DVD播放器</li>\n<li>net stop messenger—–停止信使服务</li>\n<li>net start messenger—-开始信使服务</li>\n<li>notepad——–打开记事本</li>\n<li>nslookup——-网络管理的工具向导</li>\n<li>ntbackup——-系统备份和还原</li>\n<li>narrator——-屏幕“讲述人”</li>\n<li>ntmsmgr.msc—-移动存储管理器</li>\n<li>ntmsoprq.msc—移动存储管理员操作请求</li>\n<li>netstat -an—-(TC)命令检查接口</li>\n<li>syncapp——–创建一个公文包</li>\n<li>sysedit——–系统配置编辑器</li>\n<li>sigverif——-文件签名验证程序</li>\n<li>sndrec32——-录音机</li>\n<li>shrpubw——–创建共享文件夹</li>\n<li>secpol.msc—–本地安全策略</li>\n<li>syskey———系统加密，一旦加密就不能解开，保护windows xp系统的双重密码</li>\n<li>services.msc—本地服务设置</li>\n<li>Sndvol32——-音量控制程序</li>\n<li>sfc.exe——–系统文件检查器</li>\n<li>sfc /scannow—windows文件保护</li>\n<li>tsshutdn——-60秒倒计时关机命令</li>\n<li>tourstart——xp简介（安装完成后出现的漫游xp程序）</li>\n<li>taskmgr——–任务管理器</li>\n<li>eventvwr——-事件查看器</li>\n<li>eudcedit——-造字程序</li>\n<li>explorer——-打开资源管理器</li>\n<li>packager——-对象包装程序</li>\n<li>perfmon.msc—-计算机性能监测程序</li>\n<li>progman——–程序管理器</li>\n<li>regedit.exe—-注册表</li>\n<li>rsop.msc——-组策略结果集</li>\n<li>regedt32——-注册表编辑器</li>\n<li>rononce -p —-15秒关机</li>\n<li>regsvr32 /u *.dll—-停止dll文件运行</li>\n<li>regsvr32 /u zipfldr.dll——取消ZIP支持</li>\n<li>cmd.exe——–CMD命令提示符</li>\n<li>chkdsk.exe—–Chkdsk磁盘检查</li>\n<li>certmgr.msc—-证书管理实用程序</li>\n<li>calc———–启动计算器</li>\n<li>charmap——–启动字符映射表</li>\n<li>cliconfg——-SQL SERVER 客户端网络实用程序</li>\n<li>Clipbrd——–剪贴板查看器</li>\n<li>conf———–启动netmeeting</li>\n<li>compmgmt.msc—计算机管理</li>\n<li>cleanmgr——-垃圾整理</li>\n<li>ciadv.msc——索引服务程序</li>\n<li>osk————打开屏幕键盘</li>\n<li>odbcad32——-ODBC数据源管理器</li>\n<li>oobe/msoobe /a—-检查XP是否激活</li>\n<li>lusrmgr.msc—-本机用户和组</li>\n<li>logoff———注销命令</li>\n<li>iexpress——-木马捆绑工具，系统自带</li>\n<li>Nslookup——-IP地址侦测器</li>\n<li>fsmgmt.msc—–共享文件夹管理器</li>\n<li>utilman——–辅助工具管理器</li>\n<li><p>系统查看=========systeminfo</p>\n</li>\n<li><p>轻松访问键盘快捷方式<br>　　按住右Shift 八秒钟： 启用和关闭筛选键<br>　　按左 Alt+左 Shift+PrtScn(或 PrtScn)：启用或关闭高对比度<br>　　按左 Alt+左 Shift+Num Lock ：启用或关闭鼠标键<br>　　按 Shift 五次： 启用或关闭粘滞键<br>　　按住 Num Lock 五秒钟：启用或关闭切换键<br>　　Windows 徽标键 + U ： 打开轻松访问中心</p>\n</li>\n<li>常规键盘快捷方式<br>　　F1 显示帮助<br>　　Ctrl+C  复制选择的项目<br>　　Ctrl+X  剪切选择的项目<br>　　Ctrl+V  粘贴选择的项目<br>　　Ctrl+Z  撤消操作<br>　　Ctrl+Y  重新执行某项操作<br>　　F2 重命名选定项目<br>　　Ctrl+向右键 将光标移动到下一个字词的起始处<br>　　Ctrl+向左键 将光标移动到上一个字词的起始处<br>　　Ctrl+向下键 将光标移动到下一个段落的起始处<br>　　Ctrl+向上键 将光标移动到上一个段落的起始处<br>　　Ctrl+Shift 加某个箭头键 选择一块文本<br>　　Shift 加任意箭头键 在窗口中或桌面上选择多个项目，或者在文档中选择文本<br>　　Ctrl 加任意箭头键+空格键 选择窗口中或桌面上的多个单个项目<br>　　Ctrl+A 选择文档或窗口中的所有项目<br>　　F3 搜索文件或文件夹<br>　　Alt+Enter 显示所选项的属性<br>　　Alt+F4 关闭活动项目或者退出活动程序<br>　　Alt+空格键 为活动窗口打开快捷方式菜单<br>　　Ctrl+F4 关闭活动文档(在允许同时打开多个文档的程序中)<br>　　Alt+Tab 在打开的项目之间切换<br>　　Ctrl+Alt+Tab 使用箭头键在打开的项目之间切换<br>　　Ctrl+鼠标滚轮 更改桌面上的图标大小<br>　　Windows 徽标键 + Tab 使用 Aero Flip 3-D 循环切换任务栏上的程序<br>　　Ctrl + Windows 徽标键 + Tab 通过 Aero Flip 3-D 使用箭头键循环切换任务栏上的程序<br>　　Alt+Esc 以项目打开的顺序循环切换项目<br>　　F6 在窗口中或桌面上循环切换屏幕元素<br>　　F4 在 Windows 资源管理器中显示地址栏列表<br>　　Shift+F10 显示选定项目的快捷菜单<br>　　Ctrl+Esc 打开「开始」菜单<br>　　Alt+加下划线的字母 显示相应的菜单<br>　　Alt+加下划线的字母 执行菜单命令(或其他有下划线的命令)<br>　　F10 激活活动程序中的菜单栏<br>　　向右键 打开右侧的下一个菜单或者打开子菜单<br>　　向左键 打开左侧的下一个菜单或者关闭子菜单<br>　　F5 刷新活动窗口<br>　　Alt+向上键 在 Windows 资源管理器中查看上一级文件夹<br>　　Esc 取消当前任务<br>　　Ctrl+Shift+Esc 打开任务管理器<br>　　插入 CD 时按住 Shift 阻止 CD 自动播放  </li>\n<li>对话框键盘快捷方式<br>　　Ctrl+Tab  在选项卡上向前移动<br>　　Ctrl+Shift+Tab  在选项卡上向后移动<br>　　Tab  在选项上向前移动<br>　　Shift+Tab  在选项上向后移动<br>　　Alt+加下划线的字母  执行与该字母匹配的命令(或选择选项)<br>　　Enter  对于许多选定命令代替单击鼠标<br>　　空格键 如果活动选项是复选框，则选中或清除该复选框<br>　　箭头键 如果活动选项是一组选项按钮，则选择某个按钮<br>　　F1 显示帮助<br>　　F4 显示活动列表中的项目<br>　　Backspace 如果在“另存为”或“打开”对话框中选中了某个文件夹，则打开上一级文件夹  </li>\n<li>Windows 徽标键相关的快捷键<br>　　Windows徽标键就是显示为Windows旗帜，或标有文字Win或Windows的按键，以下简称Win键。XP时代有4个经典的 Win 键组合：R/E/F/L。到了 Win7，花样更多了。<br>　　Win：打开或关闭开始菜单<br>　　Win + Pause：显示系统属性对话框<br>　　Win + D：显示桌面<br>　　Win + M：最小化所有窗口<br>　　Win + SHIFT + M：还原最小化窗口到桌面上<br>　　Win + E：打开我的电脑<br>　　Win + F：搜索文件或文件夹<br>　　Ctrl + Win + F：搜索计算机(如果您在网络上)<br>　　Win + L：锁定您的计算机或切换用户<br>　　Win + R：打开运行对话框<br>　　Win + T：切换任务栏上的程序(感觉是和alt+ESC 一样 )<br>　　Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，新开一个实例。(感觉这个比较新颖，貌似快速启动。) Shift + Windows logo key +number：Start a new instance of the program pinned to the taskbar in the position indicated by the number<br>　　Ctrl + Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，切换到上一次的活动窗口。 Ctrl+Windows logo key +number：Switch to the last active window of the program pinned to the taskbar in the position indicated by the number<br>　　ALT + Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，显示跳转清单。 Alt+Windows logo key +number： Open the Jump List for the program pinned to the taskbar in the position indicated by the number<br>　　Win + TAB：循环切换任务栏上的程序并使用的Aero三维效果<br>　　Ctrl + Win + TAB：使用方向键来循环循环切换任务栏上的程序，并使用的Aero三维效果<br>　　按Ctrl + Win + B：切换到在通知区域中显示信息的程序<br>　　Win + 空格：预览桌面<br>　　Win + ↑：最大化窗口<br>　　Win + ↓：最小化窗口<br>　　Win + ←：最大化到窗口左侧的屏幕上<br>　　Win + →：最大化窗口到右侧的屏幕上<br>　　Win + Home：最小化所有窗口，除了当前激活窗口<br>　　Win+ SHIFT + ↑：拉伸窗口的到屏幕的顶部和底部<br>　　Win+ SHIFT + →/←：移动一个窗口，从一个显示器到另一个<br>　　Win + P：选择一个演示文稿显示模式<br>　　Win + G：循环切换侧边栏的小工具<br>　　Win + U：打开轻松访问中心<br>　　Win + x：打开Windows移动中心  </li>\n<li>Windows Explorer相关快捷键<br>　　Ctrl+N 打开新窗口<br>　　Ctrl+Shift+N 新建文件夹</li>\n</ul>"},{"title":"Docker中安装Consul","date":"2018-09-04T13:48:20.000Z","_content":"\nDocker中安装Consul\n<!-- more -->\n\n> Consul Docker镜像地址:https://hub.docker.com/_/consul\n1. Docker中启动Consul  \n    ```\n    docker run -d -e 'CONSUL_LOCAL_CONFIG={\"skip_leave_on_interrupt\": true}' --name=consul1 consul agent -server -bind=119.29.92.252 -bootstrap-expect=3 -node=consul1\n    ```   \n    * -node：节点的名称  \n    * -bind：绑定的一个地址，用于节点之间通信的地址，可以是内外网，必须是可以访问到的地址  \n    * -server：这个就是表示这个节点是个SERVER  \n    * -bootstrap-expect：这个就是表示期望提供的SERVER节点数目，数目一达到，它就会被激活，然后就是leader节点了\n2. 启动节点2、3\n    ```\n    docker run -d -e 'CONSUL_LOCAL_CONFIG={\"skip_leave_on_interrupt\": true}' --name=consul2 consul agent -server -bind=172.17.0.3  -join=119.29.92.252 -node-id=$(uuidgen | awk '{print tolower($0)}')  -node=consul2\n\n    docker run -d -e 'CONSUL_LOCAL_CONFIG={\"skip_leave_on_interrupt\": true}' --name=consul3 consul agent -server -bind=172.17.0.4  -join=119.29.92.252 -node-id=$(uuidgen | awk '{print tolower($0)}')  -node=consul3 -client=172.17.0.4\n    ```\n    * -join：这个表示启动的时候，要加入到哪个集群内，这里就是说要加入到*节点1的集群\n    * -node-id：这个貌似版本8才加入的，这里用这个来指定唯一的节点ID，可以查看这个issue  \n    * -client：这个表示注册或者查询等一系列客户端对它操作的IP，如果不指定这个IP，默认是127.0.0.1。\n","source":"_posts/dotnetcore/consul/docker中安装Consul.md","raw":"---\ntitle: Docker中安装Consul\ndate: 2018-09-04 21:48:20 \ncategories: ['.NetCore']\ntags: ['Consul','.NetCore微服务']\n---\n\nDocker中安装Consul\n<!-- more -->\n\n> Consul Docker镜像地址:https://hub.docker.com/_/consul\n1. Docker中启动Consul  \n    ```\n    docker run -d -e 'CONSUL_LOCAL_CONFIG={\"skip_leave_on_interrupt\": true}' --name=consul1 consul agent -server -bind=119.29.92.252 -bootstrap-expect=3 -node=consul1\n    ```   \n    * -node：节点的名称  \n    * -bind：绑定的一个地址，用于节点之间通信的地址，可以是内外网，必须是可以访问到的地址  \n    * -server：这个就是表示这个节点是个SERVER  \n    * -bootstrap-expect：这个就是表示期望提供的SERVER节点数目，数目一达到，它就会被激活，然后就是leader节点了\n2. 启动节点2、3\n    ```\n    docker run -d -e 'CONSUL_LOCAL_CONFIG={\"skip_leave_on_interrupt\": true}' --name=consul2 consul agent -server -bind=172.17.0.3  -join=119.29.92.252 -node-id=$(uuidgen | awk '{print tolower($0)}')  -node=consul2\n\n    docker run -d -e 'CONSUL_LOCAL_CONFIG={\"skip_leave_on_interrupt\": true}' --name=consul3 consul agent -server -bind=172.17.0.4  -join=119.29.92.252 -node-id=$(uuidgen | awk '{print tolower($0)}')  -node=consul3 -client=172.17.0.4\n    ```\n    * -join：这个表示启动的时候，要加入到哪个集群内，这里就是说要加入到*节点1的集群\n    * -node-id：这个貌似版本8才加入的，这里用这个来指定唯一的节点ID，可以查看这个issue  \n    * -client：这个表示注册或者查询等一系列客户端对它操作的IP，如果不指定这个IP，默认是127.0.0.1。\n","slug":"dotnetcore/consul/docker中安装Consul","published":1,"updated":"2018-09-27T10:59:38.617Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1pi002670uk81qd3bzp","content":"<p>Docker中安装Consul<br><a id=\"more\"></a></p>\n<blockquote>\n<p>Consul Docker镜像地址:<a href=\"https://hub.docker.com/_/consul\" target=\"_blank\" rel=\"noopener\">https://hub.docker.com/_/consul</a></p>\n<ol>\n<li>Docker中启动Consul   <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    docker run -d -e &apos;CONSUL_LOCAL_CONFIG=&#123;&quot;skip_leave_on_interrupt&quot;: true&#125;&apos; --name=consul1 consul agent -server -bind=119.29.92.252 -bootstrap-expect=3 -node=consul1</span><br><span class=\"line\">    ```   </span><br><span class=\"line\">    * -node：节点的名称  </span><br><span class=\"line\">    * -bind：绑定的一个地址，用于节点之间通信的地址，可以是内外网，必须是可以访问到的地址  </span><br><span class=\"line\">    * -server：这个就是表示这个节点是个SERVER  </span><br><span class=\"line\">    * -bootstrap-expect：这个就是表示期望提供的SERVER节点数目，数目一达到，它就会被激活，然后就是leader节点了</span><br><span class=\"line\">2. 启动节点2、3</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</blockquote>\n<pre><code>docker run -d -e &apos;CONSUL_LOCAL_CONFIG={&quot;skip_leave_on_interrupt&quot;: true}&apos; --name=consul2 consul agent -server -bind=172.17.0.3  -join=119.29.92.252 -node-id=$(uuidgen | awk &apos;{print tolower($0)}&apos;)  -node=consul2\n\ndocker run -d -e &apos;CONSUL_LOCAL_CONFIG={&quot;skip_leave_on_interrupt&quot;: true}&apos; --name=consul3 consul agent -server -bind=172.17.0.4  -join=119.29.92.252 -node-id=$(uuidgen | awk &apos;{print tolower($0)}&apos;)  -node=consul3 -client=172.17.0.4\n```\n* -join：这个表示启动的时候，要加入到哪个集群内，这里就是说要加入到*节点1的集群\n* -node-id：这个貌似版本8才加入的，这里用这个来指定唯一的节点ID，可以查看这个issue  \n* -client：这个表示注册或者查询等一系列客户端对它操作的IP，如果不指定这个IP，默认是127.0.0.1。\n</code></pre>","site":{"data":{}},"excerpt":"<p>Docker中安装Consul<br>","more":"</p>\n<blockquote>\n<p>Consul Docker镜像地址:<a href=\"https://hub.docker.com/_/consul\" target=\"_blank\" rel=\"noopener\">https://hub.docker.com/_/consul</a></p>\n<ol>\n<li>Docker中启动Consul   <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    docker run -d -e &apos;CONSUL_LOCAL_CONFIG=&#123;&quot;skip_leave_on_interrupt&quot;: true&#125;&apos; --name=consul1 consul agent -server -bind=119.29.92.252 -bootstrap-expect=3 -node=consul1</span><br><span class=\"line\">    ```   </span><br><span class=\"line\">    * -node：节点的名称  </span><br><span class=\"line\">    * -bind：绑定的一个地址，用于节点之间通信的地址，可以是内外网，必须是可以访问到的地址  </span><br><span class=\"line\">    * -server：这个就是表示这个节点是个SERVER  </span><br><span class=\"line\">    * -bootstrap-expect：这个就是表示期望提供的SERVER节点数目，数目一达到，它就会被激活，然后就是leader节点了</span><br><span class=\"line\">2. 启动节点2、3</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</blockquote>\n<pre><code>docker run -d -e &apos;CONSUL_LOCAL_CONFIG={&quot;skip_leave_on_interrupt&quot;: true}&apos; --name=consul2 consul agent -server -bind=172.17.0.3  -join=119.29.92.252 -node-id=$(uuidgen | awk &apos;{print tolower($0)}&apos;)  -node=consul2\n\ndocker run -d -e &apos;CONSUL_LOCAL_CONFIG={&quot;skip_leave_on_interrupt&quot;: true}&apos; --name=consul3 consul agent -server -bind=172.17.0.4  -join=119.29.92.252 -node-id=$(uuidgen | awk &apos;{print tolower($0)}&apos;)  -node=consul3 -client=172.17.0.4\n```\n* -join：这个表示启动的时候，要加入到哪个集群内，这里就是说要加入到*节点1的集群\n* -node-id：这个貌似版本8才加入的，这里用这个来指定唯一的节点ID，可以查看这个issue  \n* -client：这个表示注册或者查询等一系列客户端对它操作的IP，如果不指定这个IP，默认是127.0.0.1。\n</code></pre>"},{"title":"基于CookieBase认证的模式","date":"2018-03-05T13:01:01.000Z","author":"谢新根","_content":"\n基于CookieBase认证的模式\n<!-- more -->\n\n>说明 通过vs2017新建的.net core项目默认没有添加身份认证与授权以及路由等  \n1. 在StartUp.ConfigureServices中addMvc之前添加AddAuthentication  \nusing Microsoft.AspNetCore.Authentication.Cookies;\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0101.png)\n2. 在Configure方法中  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0201.png)\n3. 模拟登陆  \nusing Microsoft.AspNetCore.Authentication;\nusing Microsoft.AspNetCore.Authentication.Cookies;\nusing System.Security.Claims;\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0301.png)\n4. 在对应的Controller或者Action中贴上属性[Authorize]  ","source":"_posts/dotnetcore/core/02cookie-base-authorization.md","raw":"---\ntitle: 基于CookieBase认证的模式\ndate: 2018-03-05 21:01:01\nauthor: 谢新根\ncategories: ['.NetCore']\ntags: ['.NetCore']\n---\n\n基于CookieBase认证的模式\n<!-- more -->\n\n>说明 通过vs2017新建的.net core项目默认没有添加身份认证与授权以及路由等  \n1. 在StartUp.ConfigureServices中addMvc之前添加AddAuthentication  \nusing Microsoft.AspNetCore.Authentication.Cookies;\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0101.png)\n2. 在Configure方法中  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0201.png)\n3. 模拟登陆  \nusing Microsoft.AspNetCore.Authentication;\nusing Microsoft.AspNetCore.Authentication.Cookies;\nusing System.Security.Claims;\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0301.png)\n4. 在对应的Controller或者Action中贴上属性[Authorize]  ","slug":"dotnetcore/core/02cookie-base-authorization","published":1,"updated":"2018-11-11T04:38:17.312Z","_id":"cjocck1pk002770uk4fpnowgo","comments":1,"layout":"post","photos":[],"link":"","content":"<p>基于CookieBase认证的模式<br><a id=\"more\"></a></p>\n<blockquote>\n<p>说明 通过vs2017新建的.net core项目默认没有添加身份认证与授权以及路由等  </p>\n<ol>\n<li>在StartUp.ConfigureServices中addMvc之前添加AddAuthentication<br>using Microsoft.AspNetCore.Authentication.Cookies;<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0101.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>在Configure方法中<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0201.png\" alt=\"\"></li>\n<li>模拟登陆<br>using Microsoft.AspNetCore.Authentication;<br>using Microsoft.AspNetCore.Authentication.Cookies;<br>using System.Security.Claims;<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0301.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>在对应的Controller或者Action中贴上属性[Authorize]  </li>\n</ol>\n</blockquote>\n","site":{"data":{}},"excerpt":"<p>基于CookieBase认证的模式<br>","more":"</p>\n<blockquote>\n<p>说明 通过vs2017新建的.net core项目默认没有添加身份认证与授权以及路由等  </p>\n<ol>\n<li>在StartUp.ConfigureServices中addMvc之前添加AddAuthentication<br>using Microsoft.AspNetCore.Authentication.Cookies;<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0101.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>在Configure方法中<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0201.png\" alt=\"\"></li>\n<li>模拟登陆<br>using Microsoft.AspNetCore.Authentication;<br>using Microsoft.AspNetCore.Authentication.Cookies;<br>using System.Security.Claims;<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0301.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>在对应的Controller或者Action中贴上属性[Authorize]  </li>\n</ol>\n</blockquote>"},{"title":"基于JWT的认证模式","date":"2018-03-06T13:01:01.000Z","author":"谢新根","_content":"\n基于JWT的认证模式\n<!-- more -->\n\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0001.png)\n1. 在项目目录下定义一个JwtSetting实体类  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0101.png)\n2. 在appsettings.json中配置值  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0201.png)\n3. 在StartUp中设置验证方式\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0301.png)\n4. 在管道中加入认证\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0401.png)\n5. 登录  \nJwtSecurityToken 需要添加包Microsoft.AspNetCore.Authentication.JwtBearer  \nusing Microsoft.IdentityModel.Tokens;  \nusing System.IdentityModel.Tokens.Jwt;  \nusing System.Security.Claims;  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0501.png)  \n6. 通过postman模拟登录获取token\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0601.png)\n7. 将token以请求头形式放到请求中发送请求\n[注] 键:Authorization      token值记得加\"bearer \" \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0701.png) \n\n-------------------------\n扩展  \n1. 使用自定义验证以及自定义头部token  \n定义MyTokenValidation 实现接口ISecurityTokenValidator\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0101.png) \n2. 在ConfigureServices方法中   \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0201.png) \n3. 运行效果  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0301.png) \n","source":"_posts/dotnetcore/core/03jwt-authorization.md","raw":"---\ntitle: 基于JWT的认证模式\ndate: 2018-03-06 21:01:01\nauthor: 谢新根\ncategories: ['.NetCore']\ntags: ['.NetCore']\n---\n\n基于JWT的认证模式\n<!-- more -->\n\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0001.png)\n1. 在项目目录下定义一个JwtSetting实体类  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0101.png)\n2. 在appsettings.json中配置值  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0201.png)\n3. 在StartUp中设置验证方式\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0301.png)\n4. 在管道中加入认证\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0401.png)\n5. 登录  \nJwtSecurityToken 需要添加包Microsoft.AspNetCore.Authentication.JwtBearer  \nusing Microsoft.IdentityModel.Tokens;  \nusing System.IdentityModel.Tokens.Jwt;  \nusing System.Security.Claims;  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0501.png)  \n6. 通过postman模拟登录获取token\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0601.png)\n7. 将token以请求头形式放到请求中发送请求\n[注] 键:Authorization      token值记得加\"bearer \" \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0701.png) \n\n-------------------------\n扩展  \n1. 使用自定义验证以及自定义头部token  \n定义MyTokenValidation 实现接口ISecurityTokenValidator\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0101.png) \n2. 在ConfigureServices方法中   \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0201.png) \n3. 运行效果  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0301.png) \n","slug":"dotnetcore/core/03jwt-authorization","published":1,"updated":"2018-11-11T04:38:17.272Z","_id":"cjocck1pm002a70ukuq2xu0k1","comments":1,"layout":"post","photos":[],"link":"","content":"<p>基于JWT的认证模式<br><a id=\"more\"></a></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0001.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<ol>\n<li>在项目目录下定义一个JwtSetting实体类<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0101.png\" alt=\"\"></li>\n<li>在appsettings.json中配置值<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0201.png\" alt=\"\"></li>\n<li>在StartUp中设置验证方式<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0301.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>在管道中加入认证<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0401.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>登录<br>JwtSecurityToken 需要添加包Microsoft.AspNetCore.Authentication.JwtBearer<br>using Microsoft.IdentityModel.Tokens;<br>using System.IdentityModel.Tokens.Jwt;<br>using System.Security.Claims;<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0501.png\" alt=\"\">  </li>\n<li>通过postman模拟登录获取token<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0601.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>将token以请求头形式放到请求中发送请求<br>[注] 键:Authorization      token值记得加”bearer “ <figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0701.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure> \n</li>\n</ol>\n<hr>\n<p>扩展  </p>\n<ol>\n<li>使用自定义验证以及自定义头部token<br>定义MyTokenValidation 实现接口ISecurityTokenValidator<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0101.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure> </li>\n<li>在ConfigureServices方法中<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0201.png\" alt=\"\"> </li>\n<li>运行效果<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0301.png\" alt=\"\"> </li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>基于JWT的认证模式<br>","more":"</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0001.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<ol>\n<li>在项目目录下定义一个JwtSetting实体类<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0101.png\" alt=\"\"></li>\n<li>在appsettings.json中配置值<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0201.png\" alt=\"\"></li>\n<li>在StartUp中设置验证方式<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0301.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>在管道中加入认证<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0401.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>登录<br>JwtSecurityToken 需要添加包Microsoft.AspNetCore.Authentication.JwtBearer<br>using Microsoft.IdentityModel.Tokens;<br>using System.IdentityModel.Tokens.Jwt;<br>using System.Security.Claims;<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0501.png\" alt=\"\">  </li>\n<li>通过postman模拟登录获取token<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0601.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>将token以请求头形式放到请求中发送请求<br>[注] 键:Authorization      token值记得加”bearer “ <figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0701.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure> \n</li>\n</ol>\n<hr>\n<p>扩展  </p>\n<ol>\n<li>使用自定义验证以及自定义头部token<br>定义MyTokenValidation 实现接口ISecurityTokenValidator<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0101.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure> </li>\n<li>在ConfigureServices方法中<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0201.png\" alt=\"\"> </li>\n<li>运行效果<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0301.png\" alt=\"\"> </li>\n</ol>"},{"title":".NetCore+centos环境搭建手摸手实战","date":"2018-03-03T13:01:01.000Z","author":"谢新根","_content":"\n.NetCore+centos环境搭建手摸手实战\n<!-- more -->\n\n1. 安装VMware Workstation  \n下载地址:https://my.vmware.com/cn/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation_pro/14_0  下载安装 \n2. 安装CentOS7  \n安装好后发现不能使用网络 参考资料\nhttp://blog.csdn.net/wanz2/article/details/52820876\n3. 安装.net core  \n参考官网步骤:https://www.microsoft.com/net/learn/get-started/linuxcentos\n4. 安装nginx  \n同样参考官网步骤:https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7\n5. vs2017新建项目发布成本地文件夹  \n新建项目，使用mvc模板发布到本地文件夹\n6. 通过Xftp上传到centos  \n通过Xftp将打包的文件直接粘贴到centos中(我是在root目录下建了个web文件夹专门用于存放部署的站点)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0601.png)\n7. 将dotnetcore站点运行起来  \n在Xftp中点击新建终端打开XsHell 将路径定位到站点文件夹 cd /root/web/mvc  执行 dotnet HelloWord.dll  看到如下信息 表示你已经成功了\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0701.png)\n这个时候你在外面访问是访问不了的 因为防火墙没有启用5000端口\n如果一定想看看 可以再开一个终端 输入如图\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0702.png)\n8. 配置nginx将80端口指向dotnetcore站点  \n这一步就是通过nginx将80请求转到上面的localhost:5000\n先找着nginx中的配置\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0801.png)\n打开后会发现里面有个\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0802.png)\n在如下目录中新建一个文件 输入配置   \n    ```nginx\n        server {\n            listen 80;\n            location / {\n                proxy_pass http://localhost:5000;\n                proxy_http_version 1.1;\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection keep-alive;\n                proxy_set_header Host $host;\n                proxy_cache_bypass $http_upgrade;\n            }\n        }\n    ```  \n    ![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0803.png)\n然后重启nginx ==》sudo nginx -s reload  \n9. 查看成果  \n在浏览器中输入192.168.2.105  如图\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0901.png)\n\n> 总结:  \n> 过程中遇到一些问题，比如虚拟机中的centos系统中使用不了网络 这个折腾了劳资一个上午(如有碰到，第2点中有参考资料)","source":"_posts/dotnetcore/core/01dotnetcore-centos-install.md","raw":"---\ntitle: .NetCore+centos环境搭建手摸手实战\ndate: 2018-03-03 21:01:01\nauthor: 谢新根\ncategories: ['.NetCore']\ntags: ['.NetCore']\n---\n\n.NetCore+centos环境搭建手摸手实战\n<!-- more -->\n\n1. 安装VMware Workstation  \n下载地址:https://my.vmware.com/cn/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation_pro/14_0  下载安装 \n2. 安装CentOS7  \n安装好后发现不能使用网络 参考资料\nhttp://blog.csdn.net/wanz2/article/details/52820876\n3. 安装.net core  \n参考官网步骤:https://www.microsoft.com/net/learn/get-started/linuxcentos\n4. 安装nginx  \n同样参考官网步骤:https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7\n5. vs2017新建项目发布成本地文件夹  \n新建项目，使用mvc模板发布到本地文件夹\n6. 通过Xftp上传到centos  \n通过Xftp将打包的文件直接粘贴到centos中(我是在root目录下建了个web文件夹专门用于存放部署的站点)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0601.png)\n7. 将dotnetcore站点运行起来  \n在Xftp中点击新建终端打开XsHell 将路径定位到站点文件夹 cd /root/web/mvc  执行 dotnet HelloWord.dll  看到如下信息 表示你已经成功了\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0701.png)\n这个时候你在外面访问是访问不了的 因为防火墙没有启用5000端口\n如果一定想看看 可以再开一个终端 输入如图\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0702.png)\n8. 配置nginx将80端口指向dotnetcore站点  \n这一步就是通过nginx将80请求转到上面的localhost:5000\n先找着nginx中的配置\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0801.png)\n打开后会发现里面有个\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0802.png)\n在如下目录中新建一个文件 输入配置   \n    ```nginx\n        server {\n            listen 80;\n            location / {\n                proxy_pass http://localhost:5000;\n                proxy_http_version 1.1;\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection keep-alive;\n                proxy_set_header Host $host;\n                proxy_cache_bypass $http_upgrade;\n            }\n        }\n    ```  \n    ![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0803.png)\n然后重启nginx ==》sudo nginx -s reload  \n9. 查看成果  \n在浏览器中输入192.168.2.105  如图\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0901.png)\n\n> 总结:  \n> 过程中遇到一些问题，比如虚拟机中的centos系统中使用不了网络 这个折腾了劳资一个上午(如有碰到，第2点中有参考资料)","slug":"dotnetcore/core/01dotnetcore-centos-install","published":1,"updated":"2018-11-11T04:38:17.312Z","_id":"cjocck1pp002b70uko6q1msox","comments":1,"layout":"post","photos":[],"link":"","content":"<p>.NetCore+centos环境搭建手摸手实战<br><a id=\"more\"></a></p>\n<ol>\n<li>安装VMware Workstation<br>下载地址:<a href=\"https://my.vmware.com/cn/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation_pro/14_0\" target=\"_blank\" rel=\"noopener\">https://my.vmware.com/cn/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation_pro/14_0</a>  下载安装 </li>\n<li>安装CentOS7<br>安装好后发现不能使用网络 参考资料<br><a href=\"http://blog.csdn.net/wanz2/article/details/52820876\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/wanz2/article/details/52820876</a></li>\n<li>安装.net core<br>参考官网步骤:<a href=\"https://www.microsoft.com/net/learn/get-started/linuxcentos\" target=\"_blank\" rel=\"noopener\">https://www.microsoft.com/net/learn/get-started/linuxcentos</a></li>\n<li>安装nginx<br>同样参考官网步骤:<a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7\" target=\"_blank\" rel=\"noopener\">https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7</a></li>\n<li>vs2017新建项目发布成本地文件夹<br>新建项目，使用mvc模板发布到本地文件夹</li>\n<li>通过Xftp上传到centos<br>通过Xftp将打包的文件直接粘贴到centos中(我是在root目录下建了个web文件夹专门用于存放部署的站点)<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0601.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>将dotnetcore站点运行起来<br>在Xftp中点击新建终端打开XsHell 将路径定位到站点文件夹 cd /root/web/mvc  执行 dotnet HelloWord.dll  看到如下信息 表示你已经成功了<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0701.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n这个时候你在外面访问是访问不了的 因为防火墙没有启用5000端口<br>如果一定想看看 可以再开一个终端 输入如图<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0702.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>配置nginx将80端口指向dotnetcore站点<br>这一步就是通过nginx将80请求转到上面的localhost:5000<br>先找着nginx中的配置<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0801.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n打开后会发现里面有个<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0802.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n在如下目录中新建一个文件 输入配置   <pre><code class=\"nginx\"><span class=\"section\">server</span> {\n    <span class=\"attribute\">listen</span> <span class=\"number\">80</span>;\n    <span class=\"attribute\">location</span> / {\n        <span class=\"attribute\">proxy_pass</span> http://localhost:5000;\n        <span class=\"attribute\">proxy_http_version</span> <span class=\"number\">1</span>.<span class=\"number\">1</span>;\n        <span class=\"attribute\">proxy_set_header</span> Upgrade <span class=\"variable\">$http_upgrade</span>;\n        <span class=\"attribute\">proxy_set_header</span> Connection keep-alive;\n        <span class=\"attribute\">proxy_set_header</span> Host <span class=\"variable\">$host</span>;\n        <span class=\"attribute\">proxy_cache_bypass</span> <span class=\"variable\">$http_upgrade</span>;\n    }\n}\n</code></pre>\n <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0803.png\" alt=\"\"><br>然后重启nginx ==》sudo nginx -s reload  </li>\n<li>查看成果<br>在浏览器中输入192.168.2.105  如图<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0901.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n</li>\n</ol>\n<blockquote>\n<p>总结:<br>过程中遇到一些问题，比如虚拟机中的centos系统中使用不了网络 这个折腾了劳资一个上午(如有碰到，第2点中有参考资料)</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<p>.NetCore+centos环境搭建手摸手实战<br>","more":"</p>\n<ol>\n<li>安装VMware Workstation<br>下载地址:<a href=\"https://my.vmware.com/cn/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation_pro/14_0\" target=\"_blank\" rel=\"noopener\">https://my.vmware.com/cn/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation_pro/14_0</a>  下载安装 </li>\n<li>安装CentOS7<br>安装好后发现不能使用网络 参考资料<br><a href=\"http://blog.csdn.net/wanz2/article/details/52820876\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/wanz2/article/details/52820876</a></li>\n<li>安装.net core<br>参考官网步骤:<a href=\"https://www.microsoft.com/net/learn/get-started/linuxcentos\" target=\"_blank\" rel=\"noopener\">https://www.microsoft.com/net/learn/get-started/linuxcentos</a></li>\n<li>安装nginx<br>同样参考官网步骤:<a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7\" target=\"_blank\" rel=\"noopener\">https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7</a></li>\n<li>vs2017新建项目发布成本地文件夹<br>新建项目，使用mvc模板发布到本地文件夹</li>\n<li>通过Xftp上传到centos<br>通过Xftp将打包的文件直接粘贴到centos中(我是在root目录下建了个web文件夹专门用于存放部署的站点)<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0601.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>将dotnetcore站点运行起来<br>在Xftp中点击新建终端打开XsHell 将路径定位到站点文件夹 cd /root/web/mvc  执行 dotnet HelloWord.dll  看到如下信息 表示你已经成功了<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0701.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n这个时候你在外面访问是访问不了的 因为防火墙没有启用5000端口<br>如果一定想看看 可以再开一个终端 输入如图<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0702.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>配置nginx将80端口指向dotnetcore站点<br>这一步就是通过nginx将80请求转到上面的localhost:5000<br>先找着nginx中的配置<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0801.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n打开后会发现里面有个<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0802.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n在如下目录中新建一个文件 输入配置   <pre><code class=\"nginx\"><span class=\"section\">server</span> {\n    <span class=\"attribute\">listen</span> <span class=\"number\">80</span>;\n    <span class=\"attribute\">location</span> / {\n        <span class=\"attribute\">proxy_pass</span> http://localhost:5000;\n        <span class=\"attribute\">proxy_http_version</span> <span class=\"number\">1</span>.<span class=\"number\">1</span>;\n        <span class=\"attribute\">proxy_set_header</span> Upgrade <span class=\"variable\">$http_upgrade</span>;\n        <span class=\"attribute\">proxy_set_header</span> Connection keep-alive;\n        <span class=\"attribute\">proxy_set_header</span> Host <span class=\"variable\">$host</span>;\n        <span class=\"attribute\">proxy_cache_bypass</span> <span class=\"variable\">$http_upgrade</span>;\n    }\n}\n</code></pre>\n <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0803.png\" alt=\"\"><br>然后重启nginx ==》sudo nginx -s reload  </li>\n<li>查看成果<br>在浏览器中输入192.168.2.105  如图<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0901.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n</li>\n</ol>\n<blockquote>\n<p>总结:<br>过程中遇到一些问题，比如虚拟机中的centos系统中使用不了网络 这个折腾了劳资一个上午(如有碰到，第2点中有参考资料)</p>\n</blockquote>"},{"title":"NetCore相关框架收集","date":"2018-02-27T13:01:01.000Z","author":"谢新根","_content":"\n.NetCore相关框架收集\n<!-- more -->\n\n.net core的 开源项目地址 https://github.com/dotnet/corefx \n\nasp.net core 框架的地址 https://github.com/aspnet\n\nEF Core源码 https://github.com/aspnet/EntityFrameworkCore\n\n配置模块源码 https://github.com/aspnet/Configuration \n\n路由模块 https://github.com/aspnet/Routing\n\n认证及授权  https://github.com/aspnet/Security\n\n依赖注入 https://github.com/aspnet/DependencyInjection\n\n 这个一定要看，有很多的一些HTTP管道的抽象接口都定义在这里 https://github.com/aspnet/HttpAbstractions \n\nhttps://github.com/aspnet/Options\n\nhttps://github.com/aspnet/Mvc \n\nhttps://github.com/aspnet/Hosting","source":"_posts/dotnetcore/core/collections.md","raw":"---\ntitle: NetCore相关框架收集\ndate: 2018-02-27 21:01:01\nauthor: 谢新根\ncategories: ['.NetCore']\ntags: ['.NetCore']\n---\n\n.NetCore相关框架收集\n<!-- more -->\n\n.net core的 开源项目地址 https://github.com/dotnet/corefx \n\nasp.net core 框架的地址 https://github.com/aspnet\n\nEF Core源码 https://github.com/aspnet/EntityFrameworkCore\n\n配置模块源码 https://github.com/aspnet/Configuration \n\n路由模块 https://github.com/aspnet/Routing\n\n认证及授权  https://github.com/aspnet/Security\n\n依赖注入 https://github.com/aspnet/DependencyInjection\n\n 这个一定要看，有很多的一些HTTP管道的抽象接口都定义在这里 https://github.com/aspnet/HttpAbstractions \n\nhttps://github.com/aspnet/Options\n\nhttps://github.com/aspnet/Mvc \n\nhttps://github.com/aspnet/Hosting","slug":"dotnetcore/core/collections","published":1,"updated":"2018-09-27T10:59:38.620Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1pq002c70uk5b6uk5aa","content":"<p>.NetCore相关框架收集<br><a id=\"more\"></a></p>\n<p>.net core的 开源项目地址 <a href=\"https://github.com/dotnet/corefx\" target=\"_blank\" rel=\"noopener\">https://github.com/dotnet/corefx</a> </p>\n<p>asp.net core 框架的地址 <a href=\"https://github.com/aspnet\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet</a></p>\n<p>EF Core源码 <a href=\"https://github.com/aspnet/EntityFrameworkCore\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/EntityFrameworkCore</a></p>\n<p>配置模块源码 <a href=\"https://github.com/aspnet/Configuration\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/Configuration</a> </p>\n<p>路由模块 <a href=\"https://github.com/aspnet/Routing\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/Routing</a></p>\n<p>认证及授权  <a href=\"https://github.com/aspnet/Security\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/Security</a></p>\n<p>依赖注入 <a href=\"https://github.com/aspnet/DependencyInjection\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/DependencyInjection</a></p>\n<p> 这个一定要看，有很多的一些HTTP管道的抽象接口都定义在这里 <a href=\"https://github.com/aspnet/HttpAbstractions\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/HttpAbstractions</a> </p>\n<p><a href=\"https://github.com/aspnet/Options\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/Options</a></p>\n<p><a href=\"https://github.com/aspnet/Mvc\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/Mvc</a> </p>\n<p><a href=\"https://github.com/aspnet/Hosting\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/Hosting</a></p>\n","site":{"data":{}},"excerpt":"<p>.NetCore相关框架收集<br>","more":"</p>\n<p>.net core的 开源项目地址 <a href=\"https://github.com/dotnet/corefx\" target=\"_blank\" rel=\"noopener\">https://github.com/dotnet/corefx</a> </p>\n<p>asp.net core 框架的地址 <a href=\"https://github.com/aspnet\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet</a></p>\n<p>EF Core源码 <a href=\"https://github.com/aspnet/EntityFrameworkCore\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/EntityFrameworkCore</a></p>\n<p>配置模块源码 <a href=\"https://github.com/aspnet/Configuration\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/Configuration</a> </p>\n<p>路由模块 <a href=\"https://github.com/aspnet/Routing\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/Routing</a></p>\n<p>认证及授权  <a href=\"https://github.com/aspnet/Security\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/Security</a></p>\n<p>依赖注入 <a href=\"https://github.com/aspnet/DependencyInjection\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/DependencyInjection</a></p>\n<p> 这个一定要看，有很多的一些HTTP管道的抽象接口都定义在这里 <a href=\"https://github.com/aspnet/HttpAbstractions\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/HttpAbstractions</a> </p>\n<p><a href=\"https://github.com/aspnet/Options\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/Options</a></p>\n<p><a href=\"https://github.com/aspnet/Mvc\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/Mvc</a> </p>\n<p><a href=\"https://github.com/aspnet/Hosting\" target=\"_blank\" rel=\"noopener\">https://github.com/aspnet/Hosting</a></p>"},{"title":"EFCore相关资料","date":"2018-03-01T13:01:01.000Z","author":"谢新根","_content":"EFCore相关资料\n<!-- more -->\n\n1. 命令行  \nCMD形式 | VS中Package Manager形式\n---- | ---\ndotnet ef migrations add InitCreate\t[-o 路径] | Add-Migration InitCreate\ndotnet ef database update   | Update-Database\ndotnet ef migrations remove | Remove-Migrations\ndonet ef database update [LastGoodMigration] | Update-Database LastGoodMigration\ndotnet ef migrations script [-o 路径] | Script-Migration\n>生成 migrationName1 到 -migrationName2的脚本  \n> dotnet ef migrations script migrationName1 migrationName2    \n> 不能使用dotnet ef命令行解决方式 在项目文件csproj文件中添加  \n```\n<DotNetCliToolReference Include=\"Microsoft.EntityFrameworkCore.Tools.DotNet\" Version=\"2.0.1\" />\n```","source":"_posts/dotnetcore/core/efcore.md","raw":"---\ntitle: EFCore相关资料\ndate: 2018-03-01 21:01:01\nauthor: 谢新根\ncategories: ['.NetCore']\ntags: ['.NetCore']\n---\nEFCore相关资料\n<!-- more -->\n\n1. 命令行  \nCMD形式 | VS中Package Manager形式\n---- | ---\ndotnet ef migrations add InitCreate\t[-o 路径] | Add-Migration InitCreate\ndotnet ef database update   | Update-Database\ndotnet ef migrations remove | Remove-Migrations\ndonet ef database update [LastGoodMigration] | Update-Database LastGoodMigration\ndotnet ef migrations script [-o 路径] | Script-Migration\n>生成 migrationName1 到 -migrationName2的脚本  \n> dotnet ef migrations script migrationName1 migrationName2    \n> 不能使用dotnet ef命令行解决方式 在项目文件csproj文件中添加  \n```\n<DotNetCliToolReference Include=\"Microsoft.EntityFrameworkCore.Tools.DotNet\" Version=\"2.0.1\" />\n```","slug":"dotnetcore/core/efcore","published":1,"updated":"2018-09-27T10:59:38.620Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1pt002f70ukfgcamsr3","content":"<p>EFCore相关资料<br><a id=\"more\"></a></p>\n<ol>\n<li>命令行<br>CMD形式 | VS中Package Manager形式<br>—- | —<br>dotnet ef migrations add InitCreate    [-o 路径] | Add-Migration InitCreate<br>dotnet ef database update   | Update-Database<br>dotnet ef migrations remove | Remove-Migrations<br>donet ef database update [LastGoodMigration] | Update-Database LastGoodMigration<br>dotnet ef migrations script [-o 路径] | Script-Migration<blockquote>\n<p>生成 migrationName1 到 -migrationName2的脚本<br>dotnet ef migrations script migrationName1 migrationName2<br>不能使用dotnet ef命令行解决方式 在项目文件csproj文件中添加  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;DotNetCliToolReference Include=&quot;Microsoft.EntityFrameworkCore.Tools.DotNet&quot; Version=&quot;2.0.1&quot; /&gt;</span><br></pre></td></tr></table></figure></blockquote>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>EFCore相关资料<br>","more":"</p>\n<ol>\n<li>命令行<br>CMD形式 | VS中Package Manager形式<br>—- | —<br>dotnet ef migrations add InitCreate    [-o 路径] | Add-Migration InitCreate<br>dotnet ef database update   | Update-Database<br>dotnet ef migrations remove | Remove-Migrations<br>donet ef database update [LastGoodMigration] | Update-Database LastGoodMigration<br>dotnet ef migrations script [-o 路径] | Script-Migration<blockquote>\n<p>生成 migrationName1 到 -migrationName2的脚本<br>dotnet ef migrations script migrationName1 migrationName2<br>不能使用dotnet ef命令行解决方式 在项目文件csproj文件中添加  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;DotNetCliToolReference Include=&quot;Microsoft.EntityFrameworkCore.Tools.DotNet&quot; Version=&quot;2.0.1&quot; /&gt;</span><br></pre></td></tr></table></figure></blockquote>\n</li>\n</ol>"},{"title":"IdentityServer4-ClientCredentials模式","date":"2018-03-10T13:01:01.000Z","author":"谢新根","_content":"\nIdentityServer4-ClientCredentials模式\n<!-- more -->\n\n##### 一、IdentityServer端 也叫服务端\n1. 新建.netcore web项目 设置启动端口为60000 并通过Nuget引用IdentityServer4\n2. 添加ApiResource和Client(此处方便测试固定了一些数据)\n    ``` cs\n    using IdentityServer4.Models;\n    using System.Collections.Generic;\n\n    namespace Api\n    {\n        public class Config\n        {\n            public static IEnumerable<ApiResource> GetResources()\n            {\n                return new List<ApiResource>()\n                {\n                    new ApiResource(\"api\",\"My Api\")\n                };\n            }\n\n            public static IEnumerable<Client> GetClients()\n            {\n                return new List<Client>()\n                {\n                    new Client(){\n                        ClientId=\"client\",\n                        AllowedGrantTypes=GrantTypes.ClientCredentials,\n                        ClientSecrets={\n                            new Secret(\"secret\".Sha256())\n                        },\n                        AllowedScopes={\"api\"}\n                    }\n                };\n            }\n        }\n    }\n    ```\n3. 使用IdentityServe4\n    ``` cs\n    public void ConfigureServices(IServiceCollection services)\n    {\n        services.AddIdentityServer()\n            .AddDeveloperSigningCredential()\n            .AddInMemoryApiResources(Config.GetResources())\n            .AddInMemoryClients(Config.GetClients());\n    }\n\n    public void Configure(IApplicationBuilder app,IHostingEnvironment env)\n    {\n        if (env.IsDevelopment())\n        {\n            app.UseDeveloperExceptionPage();\n        }\n        app.UseIdentityServer();\n    }\n    ```\n4. 启动项目 http://localhost:60000/.well-known/openid-configuration 可以看到相关json数据\n![json](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/1-0401.png)\n\n#### 二、Api端\n1. 新建.netcore web项目 设置启动端口为60001 \n通过Nuget引用IdentityServer4.AccessTokenValidation 此处只需要验证所以不需要引用IdentityServer4\n2. 配置StartUp\n    ``` cs\n    using Microsoft.AspNetCore.Builder;\n    using Microsoft.AspNetCore.Hosting;\n    using Microsoft.Extensions.Configuration;\n    using Microsoft.Extensions.DependencyInjection;\n\n    namespace Api\n    {\n        public class Startup\n        {\n            public Startup(IConfiguration configuration)\n            {\n                Configuration = configuration;\n            }\n\n            public IConfiguration Configuration { get; }\n\n            // This method gets called by the runtime. Use this method to add services to the container.\n            public void ConfigureServices(IServiceCollection services)\n            {\n                services.AddAuthentication(\"Bearer\")\n                    .AddIdentityServerAuthentication(options =>\n                    {\n                        options.Authority = \"http://localhost:60001\";//设置认证服务器地址\n                        options.RequireHttpsMetadata = false;//不需要https\n                        options.ApiName = \"api\";//api resource的名字 对应定义的ApiResource中的name\n                    });\n                services.AddMvc();\n            }\n\n            // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\n            public void Configure(IApplicationBuilder app, IHostingEnvironment env)\n            {\n                if (env.IsDevelopment())\n                {\n                    app.UseDeveloperExceptionPage();\n                }\n                app.UseAuthentication();\n                app.UseMvc();\n            }\n        }\n    }\n    ```\n3. 在controller上贴上属性[Authorize] 表示只允许登录用户访问\n4. 通过postman获取token(注意请求body中的参数)\n![json](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/2-0401.png)\n5. 请求需要登录的api 此处为api/values\n![json](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/2-0501.png)\n\n#### 三、client 客户端也叫ThirPart【选修】\n定义一个控制台程序 访问api获取数据\n1. 创建.net core控制台程序 通过Nuget引用包IdentityModel\n    ``` cs\n    using IdentityModel.Client;\n    using System;\n    using System.Net.Http;\n\n    namespace Client\n    {\n        class Program\n        {\n            static void Main(string[] args)\n            {\n                var diso = DiscoveryClient.GetAsync(\"http://localhost:60000\").Result;\n                if (diso.IsError)\n                {\n                    Console.WriteLine(diso.Error);\n                }\n                var tokenClient = new TokenClient(diso.TokenEndpoint, \"client\", \"secret\");\n                var tokenResponse = tokenClient.RequestClientCredentialsAsync(\"api\").Result;\n                if (tokenResponse.IsError)\n                {\n                    Console.WriteLine(tokenResponse.Error);\n                }\n                else {\n                    Console.WriteLine(tokenResponse.Json);\n                }\n\n                var httpClient= new HttpClient();\n                httpClient.SetBearerToken(tokenResponse.AccessToken);\n                var response = httpClient.GetAsync(\"http://localhost:60001/api/values\").Result;\n                if (response.IsSuccessStatusCode)\n                {\n                    Console.WriteLine(response.Content.ReadAsStringAsync().Result);\n                }\n\n\n\n                Console.ReadKey();\n            }\n        }\n    }\n\n    ```","source":"_posts/dotnetcore/identityserver4/01client-credentials.md","raw":"---\ntitle: IdentityServer4-ClientCredentials模式\ndate: 2018-03-10 21:01:01\nauthor: 谢新根\ncategories: ['.NetCore']\ntags: ['.NetCore','IdentityServer4']\n---\n\nIdentityServer4-ClientCredentials模式\n<!-- more -->\n\n##### 一、IdentityServer端 也叫服务端\n1. 新建.netcore web项目 设置启动端口为60000 并通过Nuget引用IdentityServer4\n2. 添加ApiResource和Client(此处方便测试固定了一些数据)\n    ``` cs\n    using IdentityServer4.Models;\n    using System.Collections.Generic;\n\n    namespace Api\n    {\n        public class Config\n        {\n            public static IEnumerable<ApiResource> GetResources()\n            {\n                return new List<ApiResource>()\n                {\n                    new ApiResource(\"api\",\"My Api\")\n                };\n            }\n\n            public static IEnumerable<Client> GetClients()\n            {\n                return new List<Client>()\n                {\n                    new Client(){\n                        ClientId=\"client\",\n                        AllowedGrantTypes=GrantTypes.ClientCredentials,\n                        ClientSecrets={\n                            new Secret(\"secret\".Sha256())\n                        },\n                        AllowedScopes={\"api\"}\n                    }\n                };\n            }\n        }\n    }\n    ```\n3. 使用IdentityServe4\n    ``` cs\n    public void ConfigureServices(IServiceCollection services)\n    {\n        services.AddIdentityServer()\n            .AddDeveloperSigningCredential()\n            .AddInMemoryApiResources(Config.GetResources())\n            .AddInMemoryClients(Config.GetClients());\n    }\n\n    public void Configure(IApplicationBuilder app,IHostingEnvironment env)\n    {\n        if (env.IsDevelopment())\n        {\n            app.UseDeveloperExceptionPage();\n        }\n        app.UseIdentityServer();\n    }\n    ```\n4. 启动项目 http://localhost:60000/.well-known/openid-configuration 可以看到相关json数据\n![json](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/1-0401.png)\n\n#### 二、Api端\n1. 新建.netcore web项目 设置启动端口为60001 \n通过Nuget引用IdentityServer4.AccessTokenValidation 此处只需要验证所以不需要引用IdentityServer4\n2. 配置StartUp\n    ``` cs\n    using Microsoft.AspNetCore.Builder;\n    using Microsoft.AspNetCore.Hosting;\n    using Microsoft.Extensions.Configuration;\n    using Microsoft.Extensions.DependencyInjection;\n\n    namespace Api\n    {\n        public class Startup\n        {\n            public Startup(IConfiguration configuration)\n            {\n                Configuration = configuration;\n            }\n\n            public IConfiguration Configuration { get; }\n\n            // This method gets called by the runtime. Use this method to add services to the container.\n            public void ConfigureServices(IServiceCollection services)\n            {\n                services.AddAuthentication(\"Bearer\")\n                    .AddIdentityServerAuthentication(options =>\n                    {\n                        options.Authority = \"http://localhost:60001\";//设置认证服务器地址\n                        options.RequireHttpsMetadata = false;//不需要https\n                        options.ApiName = \"api\";//api resource的名字 对应定义的ApiResource中的name\n                    });\n                services.AddMvc();\n            }\n\n            // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\n            public void Configure(IApplicationBuilder app, IHostingEnvironment env)\n            {\n                if (env.IsDevelopment())\n                {\n                    app.UseDeveloperExceptionPage();\n                }\n                app.UseAuthentication();\n                app.UseMvc();\n            }\n        }\n    }\n    ```\n3. 在controller上贴上属性[Authorize] 表示只允许登录用户访问\n4. 通过postman获取token(注意请求body中的参数)\n![json](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/2-0401.png)\n5. 请求需要登录的api 此处为api/values\n![json](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/2-0501.png)\n\n#### 三、client 客户端也叫ThirPart【选修】\n定义一个控制台程序 访问api获取数据\n1. 创建.net core控制台程序 通过Nuget引用包IdentityModel\n    ``` cs\n    using IdentityModel.Client;\n    using System;\n    using System.Net.Http;\n\n    namespace Client\n    {\n        class Program\n        {\n            static void Main(string[] args)\n            {\n                var diso = DiscoveryClient.GetAsync(\"http://localhost:60000\").Result;\n                if (diso.IsError)\n                {\n                    Console.WriteLine(diso.Error);\n                }\n                var tokenClient = new TokenClient(diso.TokenEndpoint, \"client\", \"secret\");\n                var tokenResponse = tokenClient.RequestClientCredentialsAsync(\"api\").Result;\n                if (tokenResponse.IsError)\n                {\n                    Console.WriteLine(tokenResponse.Error);\n                }\n                else {\n                    Console.WriteLine(tokenResponse.Json);\n                }\n\n                var httpClient= new HttpClient();\n                httpClient.SetBearerToken(tokenResponse.AccessToken);\n                var response = httpClient.GetAsync(\"http://localhost:60001/api/values\").Result;\n                if (response.IsSuccessStatusCode)\n                {\n                    Console.WriteLine(response.Content.ReadAsStringAsync().Result);\n                }\n\n\n\n                Console.ReadKey();\n            }\n        }\n    }\n\n    ```","slug":"dotnetcore/identityserver4/01client-credentials","published":1,"updated":"2018-11-11T04:38:17.272Z","_id":"cjocck1pv002g70ukqh5fh14e","comments":1,"layout":"post","photos":[],"link":"","content":"<p>IdentityServer4-ClientCredentials模式<br><a id=\"more\"></a></p>\n<h5 id=\"一、IdentityServer端-也叫服务端\"><a href=\"#一、IdentityServer端-也叫服务端\" class=\"headerlink\" title=\"一、IdentityServer端 也叫服务端\"></a>一、IdentityServer端 也叫服务端</h5><ol>\n<li>新建.netcore web项目 设置启动端口为60000 并通过Nuget引用IdentityServer4</li>\n<li><p>添加ApiResource和Client(此处方便测试固定了一些数据)</p>\n <figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> IdentityServer4.Models;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">Api</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Config</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> IEnumerable&lt;ApiResource&gt; <span class=\"title\">GetResources</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> List&lt;ApiResource&gt;()</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">new</span> ApiResource(<span class=\"string\">\"api\"</span>,<span class=\"string\">\"My Api\"</span>)</span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> IEnumerable&lt;Client&gt; <span class=\"title\">GetClients</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> List&lt;Client&gt;()</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">new</span> Client()&#123;</span><br><span class=\"line\">                    ClientId=<span class=\"string\">\"client\"</span>,</span><br><span class=\"line\">                    AllowedGrantTypes=GrantTypes.ClientCredentials,</span><br><span class=\"line\">                    ClientSecrets=&#123;</span><br><span class=\"line\">                        <span class=\"keyword\">new</span> Secret(<span class=\"string\">\"secret\"</span>.Sha256())</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    AllowedScopes=&#123;<span class=\"string\">\"api\"</span>&#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用IdentityServe4</p>\n <figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">ConfigureServices</span>(<span class=\"params\">IServiceCollection services</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    services.AddIdentityServer()</span><br><span class=\"line\">        .AddDeveloperSigningCredential()</span><br><span class=\"line\">        .AddInMemoryApiResources(Config.GetResources())</span><br><span class=\"line\">        .AddInMemoryClients(Config.GetClients());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Configure</span>(<span class=\"params\">IApplicationBuilder app,IHostingEnvironment env</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (env.IsDevelopment())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        app.UseDeveloperExceptionPage();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    app.UseIdentityServer();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动项目 <a href=\"http://localhost:60000/.well-known/openid-configuration\" target=\"_blank\" rel=\"noopener\">http://localhost:60000/.well-known/openid-configuration</a> 可以看到相关json数据</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/1-0401.png\" alt=\"json\" title=\"\">\n                </div>\n                <div class=\"image-caption\">json</div>\n            </figure>\n</li>\n</ol>\n<h4 id=\"二、Api端\"><a href=\"#二、Api端\" class=\"headerlink\" title=\"二、Api端\"></a>二、Api端</h4><ol>\n<li>新建.netcore web项目 设置启动端口为60001<br>通过Nuget引用IdentityServer4.AccessTokenValidation 此处只需要验证所以不需要引用IdentityServer4</li>\n<li><p>配置StartUp</p>\n <figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> Microsoft.AspNetCore.Builder;</span><br><span class=\"line\"><span class=\"keyword\">using</span> Microsoft.AspNetCore.Hosting;</span><br><span class=\"line\"><span class=\"keyword\">using</span> Microsoft.Extensions.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">using</span> Microsoft.Extensions.DependencyInjection;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">Api</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Startup</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Startup</span>(<span class=\"params\">IConfiguration configuration</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            Configuration = configuration;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> IConfiguration Configuration &#123; <span class=\"keyword\">get</span>; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// This method gets called by the runtime. Use this method to add services to the container.</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">ConfigureServices</span>(<span class=\"params\">IServiceCollection services</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            services.AddAuthentication(<span class=\"string\">\"Bearer\"</span>)</span><br><span class=\"line\">                .AddIdentityServerAuthentication(options =&gt;</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    options.Authority = <span class=\"string\">\"http://localhost:60001\"</span>;<span class=\"comment\">//设置认证服务器地址</span></span><br><span class=\"line\">                    options.RequireHttpsMetadata = <span class=\"literal\">false</span>;<span class=\"comment\">//不需要https</span></span><br><span class=\"line\">                    options.ApiName = <span class=\"string\">\"api\"</span>;<span class=\"comment\">//api resource的名字 对应定义的ApiResource中的name</span></span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            services.AddMvc();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Configure</span>(<span class=\"params\">IApplicationBuilder app, IHostingEnvironment env</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (env.IsDevelopment())</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                app.UseDeveloperExceptionPage();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            app.UseAuthentication();</span><br><span class=\"line\">            app.UseMvc();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在controller上贴上属性[Authorize] 表示只允许登录用户访问</p>\n</li>\n<li>通过postman获取token(注意请求body中的参数)<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/2-0401.png\" alt=\"json\" title=\"\">\n                </div>\n                <div class=\"image-caption\">json</div>\n            </figure></li>\n<li>请求需要登录的api 此处为api/values<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/2-0501.png\" alt=\"json\" title=\"\">\n                </div>\n                <div class=\"image-caption\">json</div>\n            </figure>\n</li>\n</ol>\n<h4 id=\"三、client-客户端也叫ThirPart【选修】\"><a href=\"#三、client-客户端也叫ThirPart【选修】\" class=\"headerlink\" title=\"三、client 客户端也叫ThirPart【选修】\"></a>三、client 客户端也叫ThirPart【选修】</h4><p>定义一个控制台程序 访问api获取数据</p>\n<ol>\n<li>创建.net core控制台程序 通过Nuget引用包IdentityModel <figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> IdentityModel.Client;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Net.Http;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">Client</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title\">Program</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">Main</span>(<span class=\"params\"><span class=\"keyword\">string</span>[] args</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> diso = DiscoveryClient.GetAsync(<span class=\"string\">\"http://localhost:60000\"</span>).Result;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (diso.IsError)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                Console.WriteLine(diso.Error);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> tokenClient = <span class=\"keyword\">new</span> TokenClient(diso.TokenEndpoint, <span class=\"string\">\"client\"</span>, <span class=\"string\">\"secret\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">var</span> tokenResponse = tokenClient.RequestClientCredentialsAsync(<span class=\"string\">\"api\"</span>).Result;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (tokenResponse.IsError)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                Console.WriteLine(tokenResponse.Error);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                Console.WriteLine(tokenResponse.Json);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">var</span> httpClient= <span class=\"keyword\">new</span> HttpClient();</span><br><span class=\"line\">            httpClient.SetBearerToken(tokenResponse.AccessToken);</span><br><span class=\"line\">            <span class=\"keyword\">var</span> response = httpClient.GetAsync(<span class=\"string\">\"http://localhost:60001/api/values\"</span>).Result;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (response.IsSuccessStatusCode)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                Console.WriteLine(response.Content.ReadAsStringAsync().Result);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            Console.ReadKey();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>IdentityServer4-ClientCredentials模式<br>","more":"</p>\n<h5 id=\"一、IdentityServer端-也叫服务端\"><a href=\"#一、IdentityServer端-也叫服务端\" class=\"headerlink\" title=\"一、IdentityServer端 也叫服务端\"></a>一、IdentityServer端 也叫服务端</h5><ol>\n<li>新建.netcore web项目 设置启动端口为60000 并通过Nuget引用IdentityServer4</li>\n<li><p>添加ApiResource和Client(此处方便测试固定了一些数据)</p>\n <figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> IdentityServer4.Models;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Collections.Generic;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">Api</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Config</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> IEnumerable&lt;ApiResource&gt; <span class=\"title\">GetResources</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> List&lt;ApiResource&gt;()</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">new</span> ApiResource(<span class=\"string\">\"api\"</span>,<span class=\"string\">\"My Api\"</span>)</span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> IEnumerable&lt;Client&gt; <span class=\"title\">GetClients</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> List&lt;Client&gt;()</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">new</span> Client()&#123;</span><br><span class=\"line\">                    ClientId=<span class=\"string\">\"client\"</span>,</span><br><span class=\"line\">                    AllowedGrantTypes=GrantTypes.ClientCredentials,</span><br><span class=\"line\">                    ClientSecrets=&#123;</span><br><span class=\"line\">                        <span class=\"keyword\">new</span> Secret(<span class=\"string\">\"secret\"</span>.Sha256())</span><br><span class=\"line\">                    &#125;,</span><br><span class=\"line\">                    AllowedScopes=&#123;<span class=\"string\">\"api\"</span>&#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用IdentityServe4</p>\n <figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">ConfigureServices</span>(<span class=\"params\">IServiceCollection services</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    services.AddIdentityServer()</span><br><span class=\"line\">        .AddDeveloperSigningCredential()</span><br><span class=\"line\">        .AddInMemoryApiResources(Config.GetResources())</span><br><span class=\"line\">        .AddInMemoryClients(Config.GetClients());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Configure</span>(<span class=\"params\">IApplicationBuilder app,IHostingEnvironment env</span>)</span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (env.IsDevelopment())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        app.UseDeveloperExceptionPage();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    app.UseIdentityServer();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>启动项目 <a href=\"http://localhost:60000/.well-known/openid-configuration\" target=\"_blank\" rel=\"noopener\">http://localhost:60000/.well-known/openid-configuration</a> 可以看到相关json数据</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/1-0401.png\" alt=\"json\" title=\"\">\n                </div>\n                <div class=\"image-caption\">json</div>\n            </figure>\n</li>\n</ol>\n<h4 id=\"二、Api端\"><a href=\"#二、Api端\" class=\"headerlink\" title=\"二、Api端\"></a>二、Api端</h4><ol>\n<li>新建.netcore web项目 设置启动端口为60001<br>通过Nuget引用IdentityServer4.AccessTokenValidation 此处只需要验证所以不需要引用IdentityServer4</li>\n<li><p>配置StartUp</p>\n <figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> Microsoft.AspNetCore.Builder;</span><br><span class=\"line\"><span class=\"keyword\">using</span> Microsoft.AspNetCore.Hosting;</span><br><span class=\"line\"><span class=\"keyword\">using</span> Microsoft.Extensions.Configuration;</span><br><span class=\"line\"><span class=\"keyword\">using</span> Microsoft.Extensions.DependencyInjection;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">Api</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Startup</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Startup</span>(<span class=\"params\">IConfiguration configuration</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            Configuration = configuration;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> IConfiguration Configuration &#123; <span class=\"keyword\">get</span>; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// This method gets called by the runtime. Use this method to add services to the container.</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">ConfigureServices</span>(<span class=\"params\">IServiceCollection services</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            services.AddAuthentication(<span class=\"string\">\"Bearer\"</span>)</span><br><span class=\"line\">                .AddIdentityServerAuthentication(options =&gt;</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    options.Authority = <span class=\"string\">\"http://localhost:60001\"</span>;<span class=\"comment\">//设置认证服务器地址</span></span><br><span class=\"line\">                    options.RequireHttpsMetadata = <span class=\"literal\">false</span>;<span class=\"comment\">//不需要https</span></span><br><span class=\"line\">                    options.ApiName = <span class=\"string\">\"api\"</span>;<span class=\"comment\">//api resource的名字 对应定义的ApiResource中的name</span></span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            services.AddMvc();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">Configure</span>(<span class=\"params\">IApplicationBuilder app, IHostingEnvironment env</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (env.IsDevelopment())</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                app.UseDeveloperExceptionPage();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            app.UseAuthentication();</span><br><span class=\"line\">            app.UseMvc();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在controller上贴上属性[Authorize] 表示只允许登录用户访问</p>\n</li>\n<li>通过postman获取token(注意请求body中的参数)<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/2-0401.png\" alt=\"json\" title=\"\">\n                </div>\n                <div class=\"image-caption\">json</div>\n            </figure></li>\n<li>请求需要登录的api 此处为api/values<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/2-0501.png\" alt=\"json\" title=\"\">\n                </div>\n                <div class=\"image-caption\">json</div>\n            </figure>\n</li>\n</ol>\n<h4 id=\"三、client-客户端也叫ThirPart【选修】\"><a href=\"#三、client-客户端也叫ThirPart【选修】\" class=\"headerlink\" title=\"三、client 客户端也叫ThirPart【选修】\"></a>三、client 客户端也叫ThirPart【选修】</h4><p>定义一个控制台程序 访问api获取数据</p>\n<ol>\n<li>创建.net core控制台程序 通过Nuget引用包IdentityModel <figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> IdentityModel.Client;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System;</span><br><span class=\"line\"><span class=\"keyword\">using</span> System.Net.Http;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">Client</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title\">Program</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">Main</span>(<span class=\"params\"><span class=\"keyword\">string</span>[] args</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> diso = DiscoveryClient.GetAsync(<span class=\"string\">\"http://localhost:60000\"</span>).Result;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (diso.IsError)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                Console.WriteLine(diso.Error);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> tokenClient = <span class=\"keyword\">new</span> TokenClient(diso.TokenEndpoint, <span class=\"string\">\"client\"</span>, <span class=\"string\">\"secret\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">var</span> tokenResponse = tokenClient.RequestClientCredentialsAsync(<span class=\"string\">\"api\"</span>).Result;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (tokenResponse.IsError)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                Console.WriteLine(tokenResponse.Error);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                Console.WriteLine(tokenResponse.Json);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">var</span> httpClient= <span class=\"keyword\">new</span> HttpClient();</span><br><span class=\"line\">            httpClient.SetBearerToken(tokenResponse.AccessToken);</span><br><span class=\"line\">            <span class=\"keyword\">var</span> response = httpClient.GetAsync(<span class=\"string\">\"http://localhost:60001/api/values\"</span>).Result;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (response.IsSuccessStatusCode)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                Console.WriteLine(response.Content.ReadAsStringAsync().Result);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            Console.ReadKey();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>"},{"title":"IdentityServer4-使用密码授权模式","date":"2018-03-11T13:01:01.000Z","author":"谢新根","_content":"\nIdentityServer4-使用密码授权模式\n<!-- more -->\n\n##### 一、IdentityServer 也叫服务端\n1. 新建.netcore web项目 设置启动端口为60000 并通过Nuget引用IdentityServer4\n2. 添加ApiResource和Client(此处方便测试固定了一些数据)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0201.png)\n3. 使用IdentityServer\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0301.png)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0302.png)\n4. 启动项目 http://localhost:60000/.well-known/openid-configuration 可以看到相关json数据\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0401.png)\n##### 二、Api端 (与clientCredentials模式完全一致)\n1. 新建.netcore web项目 设置启动端口为60001\n   通过Nuget引用IdentityServer4.AccessTokenValidation 此处只需要验证所以不需要引用IdentityServer4\n2. 配置\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0201.png)\n3. 在controller上贴上属性[Authorize] 表示只允许登录用户访问\n4. 通过postman获取token(注意请求body中的参数)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0401.png)\n5. 请求需要登录的api 此处为api/values\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0501.png)\n##### 三、client 客户端也叫ThirPart【选修】\n>定义一个控制台程序 访问api获取数据\n1. 创建.net core控制台程序 通过Nuget引用包IdentityModel\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/3-0101.png)\n","source":"_posts/dotnetcore/identityserver4/02passport.md","raw":"---\ntitle: IdentityServer4-使用密码授权模式\ndate: 2018-03-11 21:01:01\nauthor: 谢新根\ncategories: ['.NetCore']\ntags: ['.NetCore','IdentityServer4']\n---\n\nIdentityServer4-使用密码授权模式\n<!-- more -->\n\n##### 一、IdentityServer 也叫服务端\n1. 新建.netcore web项目 设置启动端口为60000 并通过Nuget引用IdentityServer4\n2. 添加ApiResource和Client(此处方便测试固定了一些数据)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0201.png)\n3. 使用IdentityServer\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0301.png)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0302.png)\n4. 启动项目 http://localhost:60000/.well-known/openid-configuration 可以看到相关json数据\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0401.png)\n##### 二、Api端 (与clientCredentials模式完全一致)\n1. 新建.netcore web项目 设置启动端口为60001\n   通过Nuget引用IdentityServer4.AccessTokenValidation 此处只需要验证所以不需要引用IdentityServer4\n2. 配置\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0201.png)\n3. 在controller上贴上属性[Authorize] 表示只允许登录用户访问\n4. 通过postman获取token(注意请求body中的参数)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0401.png)\n5. 请求需要登录的api 此处为api/values\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0501.png)\n##### 三、client 客户端也叫ThirPart【选修】\n>定义一个控制台程序 访问api获取数据\n1. 创建.net core控制台程序 通过Nuget引用包IdentityModel\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/3-0101.png)\n","slug":"dotnetcore/identityserver4/02passport","published":1,"updated":"2018-11-11T04:38:17.272Z","_id":"cjocck1py002k70ukt7qaypz0","comments":1,"layout":"post","photos":[],"link":"","content":"<p>IdentityServer4-使用密码授权模式<br><a id=\"more\"></a></p>\n<h5 id=\"一、IdentityServer-也叫服务端\"><a href=\"#一、IdentityServer-也叫服务端\" class=\"headerlink\" title=\"一、IdentityServer 也叫服务端\"></a>一、IdentityServer 也叫服务端</h5><ol>\n<li>新建.netcore web项目 设置启动端口为60000 并通过Nuget引用IdentityServer4</li>\n<li>添加ApiResource和Client(此处方便测试固定了一些数据)<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0201.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>使用IdentityServer<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0301.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0302.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>启动项目 <a href=\"http://localhost:60000/.well-known/openid-configuration\" target=\"_blank\" rel=\"noopener\">http://localhost:60000/.well-known/openid-configuration</a> 可以看到相关json数据<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0401.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h5 id=\"二、Api端-与clientCredentials模式完全一致\"><a href=\"#二、Api端-与clientCredentials模式完全一致\" class=\"headerlink\" title=\"二、Api端 (与clientCredentials模式完全一致)\"></a>二、Api端 (与clientCredentials模式完全一致)</h5></li>\n<li>新建.netcore web项目 设置启动端口为60001<br>通过Nuget引用IdentityServer4.AccessTokenValidation 此处只需要验证所以不需要引用IdentityServer4</li>\n<li>配置<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0201.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>在controller上贴上属性[Authorize] 表示只允许登录用户访问</li>\n<li>通过postman获取token(注意请求body中的参数)<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0401.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>请求需要登录的api 此处为api/values<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0501.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h5 id=\"三、client-客户端也叫ThirPart【选修】\"><a href=\"#三、client-客户端也叫ThirPart【选修】\" class=\"headerlink\" title=\"三、client 客户端也叫ThirPart【选修】\"></a>三、client 客户端也叫ThirPart【选修】</h5><blockquote>\n<p>定义一个控制台程序 访问api获取数据</p>\n</blockquote>\n</li>\n<li>创建.net core控制台程序 通过Nuget引用包IdentityModel<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/3-0101.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>IdentityServer4-使用密码授权模式<br>","more":"</p>\n<h5 id=\"一、IdentityServer-也叫服务端\"><a href=\"#一、IdentityServer-也叫服务端\" class=\"headerlink\" title=\"一、IdentityServer 也叫服务端\"></a>一、IdentityServer 也叫服务端</h5><ol>\n<li>新建.netcore web项目 设置启动端口为60000 并通过Nuget引用IdentityServer4</li>\n<li>添加ApiResource和Client(此处方便测试固定了一些数据)<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0201.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>使用IdentityServer<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0301.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0302.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>启动项目 <a href=\"http://localhost:60000/.well-known/openid-configuration\" target=\"_blank\" rel=\"noopener\">http://localhost:60000/.well-known/openid-configuration</a> 可以看到相关json数据<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0401.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h5 id=\"二、Api端-与clientCredentials模式完全一致\"><a href=\"#二、Api端-与clientCredentials模式完全一致\" class=\"headerlink\" title=\"二、Api端 (与clientCredentials模式完全一致)\"></a>二、Api端 (与clientCredentials模式完全一致)</h5></li>\n<li>新建.netcore web项目 设置启动端口为60001<br>通过Nuget引用IdentityServer4.AccessTokenValidation 此处只需要验证所以不需要引用IdentityServer4</li>\n<li>配置<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0201.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>在controller上贴上属性[Authorize] 表示只允许登录用户访问</li>\n<li>通过postman获取token(注意请求body中的参数)<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0401.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure></li>\n<li>请求需要登录的api 此处为api/values<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0501.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h5 id=\"三、client-客户端也叫ThirPart【选修】\"><a href=\"#三、client-客户端也叫ThirPart【选修】\" class=\"headerlink\" title=\"三、client 客户端也叫ThirPart【选修】\"></a>三、client 客户端也叫ThirPart【选修】</h5><blockquote>\n<p>定义一个控制台程序 访问api获取数据</p>\n</blockquote>\n</li>\n<li>创建.net core控制台程序 通过Nuget引用包IdentityModel<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/3-0101.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n</li>\n</ol>"},{"title":"IdentityServer4 资料收集","date":"2018-03-09T13:01:01.000Z","author":"谢新根","_content":"IdentityServer4 资料收集\n<!-- more -->\n\n* IdentityServer4  endPoint查看地址：http://localhost:5000/.well-known/openId-configuration\n\n* 博客推荐 http://www.cnblogs.com/stulzq/p/8119928.html\n\n* 八幅漫画理解使用JSON Web Token设计单点登录系统\nhttp://blog.leapoahead.com/2015/09/07/user-authentication-with-jwt/\n\n* JSON Web Token - 在Web应用间安全地传递信息\nhttp://blog.leapoahead.com/2015/09/06/understanding-jwt/\n\n* 纯OAuth2 授权码模式的实现 。 (不包含OICD）\nhttps://github.com/bayardw/IdentityServer4.Authorization.Code\n\n* YAML语法介绍：\nhttp://www.ruanyifeng.com/blog/2016/07/yaml.html","source":"_posts/dotnetcore/identityserver4/article.md","raw":"---\ntitle: IdentityServer4 资料收集\ndate: 2018-03-09 21:01:01\nauthor: 谢新根\ncategories: ['.NetCore']\ntags: ['.NetCore','IdentityServer4']\n---\nIdentityServer4 资料收集\n<!-- more -->\n\n* IdentityServer4  endPoint查看地址：http://localhost:5000/.well-known/openId-configuration\n\n* 博客推荐 http://www.cnblogs.com/stulzq/p/8119928.html\n\n* 八幅漫画理解使用JSON Web Token设计单点登录系统\nhttp://blog.leapoahead.com/2015/09/07/user-authentication-with-jwt/\n\n* JSON Web Token - 在Web应用间安全地传递信息\nhttp://blog.leapoahead.com/2015/09/06/understanding-jwt/\n\n* 纯OAuth2 授权码模式的实现 。 (不包含OICD）\nhttps://github.com/bayardw/IdentityServer4.Authorization.Code\n\n* YAML语法介绍：\nhttp://www.ruanyifeng.com/blog/2016/07/yaml.html","slug":"dotnetcore/identityserver4/article","published":1,"updated":"2018-09-27T10:59:38.623Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1q0002n70ukb1jwtedk","content":"<p>IdentityServer4 资料收集<br><a id=\"more\"></a></p>\n<ul>\n<li><p>IdentityServer4  endPoint查看地址：<a href=\"http://localhost:5000/.well-known/openId-configuration\" target=\"_blank\" rel=\"noopener\">http://localhost:5000/.well-known/openId-configuration</a></p>\n</li>\n<li><p>博客推荐 <a href=\"http://www.cnblogs.com/stulzq/p/8119928.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/stulzq/p/8119928.html</a></p>\n</li>\n<li><p>八幅漫画理解使用JSON Web Token设计单点登录系统<br><a href=\"http://blog.leapoahead.com/2015/09/07/user-authentication-with-jwt/\" target=\"_blank\" rel=\"noopener\">http://blog.leapoahead.com/2015/09/07/user-authentication-with-jwt/</a></p>\n</li>\n<li><p>JSON Web Token - 在Web应用间安全地传递信息<br><a href=\"http://blog.leapoahead.com/2015/09/06/understanding-jwt/\" target=\"_blank\" rel=\"noopener\">http://blog.leapoahead.com/2015/09/06/understanding-jwt/</a></p>\n</li>\n<li><p>纯OAuth2 授权码模式的实现 。 (不包含OICD）<br><a href=\"https://github.com/bayardw/IdentityServer4.Authorization.Code\" target=\"_blank\" rel=\"noopener\">https://github.com/bayardw/IdentityServer4.Authorization.Code</a></p>\n</li>\n<li><p>YAML语法介绍：<br><a href=\"http://www.ruanyifeng.com/blog/2016/07/yaml.html\" target=\"_blank\" rel=\"noopener\">http://www.ruanyifeng.com/blog/2016/07/yaml.html</a></p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>IdentityServer4 资料收集<br>","more":"</p>\n<ul>\n<li><p>IdentityServer4  endPoint查看地址：<a href=\"http://localhost:5000/.well-known/openId-configuration\" target=\"_blank\" rel=\"noopener\">http://localhost:5000/.well-known/openId-configuration</a></p>\n</li>\n<li><p>博客推荐 <a href=\"http://www.cnblogs.com/stulzq/p/8119928.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/stulzq/p/8119928.html</a></p>\n</li>\n<li><p>八幅漫画理解使用JSON Web Token设计单点登录系统<br><a href=\"http://blog.leapoahead.com/2015/09/07/user-authentication-with-jwt/\" target=\"_blank\" rel=\"noopener\">http://blog.leapoahead.com/2015/09/07/user-authentication-with-jwt/</a></p>\n</li>\n<li><p>JSON Web Token - 在Web应用间安全地传递信息<br><a href=\"http://blog.leapoahead.com/2015/09/06/understanding-jwt/\" target=\"_blank\" rel=\"noopener\">http://blog.leapoahead.com/2015/09/06/understanding-jwt/</a></p>\n</li>\n<li><p>纯OAuth2 授权码模式的实现 。 (不包含OICD）<br><a href=\"https://github.com/bayardw/IdentityServer4.Authorization.Code\" target=\"_blank\" rel=\"noopener\">https://github.com/bayardw/IdentityServer4.Authorization.Code</a></p>\n</li>\n<li><p>YAML语法介绍：<br><a href=\"http://www.ruanyifeng.com/blog/2016/07/yaml.html\" target=\"_blank\" rel=\"noopener\">http://www.ruanyifeng.com/blog/2016/07/yaml.html</a></p>\n</li>\n</ul>"},{"title":"DotNetCore 备忘录","date":"2018-03-01T11:01:01.000Z","author":"谢新根","_content":"\nDotNetCore 备忘录\n<!-- more -->\n\n##### 常用备忘录\n> docker run -d -p 8081:80 --name wechat -v /docker/wechat/App_Data/:/app/App_Data/ --restart always registry.cn-hangzhou.aliyuncs.com/xxg/wechat:v1.1.5 \n1. 使用dotnet watch 在项目项目文件夹中添加(自.netcore2.1.0开始已经集成进去 不需要手动添加)     \n   ``` c#\n   <ItemGroup>\n    <DotNetCliToolReference Include=\"Microsoft.DotNet.Watcher.Tools\" Version=\"2.0.0\" />\n   </ItemGroup>   \n\n   <!-- 使用dotnet ef ... -->\n   <ItemGroup>\n   <DotNetCliToolReference Include=\"Microsoft.EntityFrameworkCore.Tools.DotNet\" Version=\"2.0.1\" />\n   </ItemGroup>   \n   ```\n2. 测试框架   \nMoq  \nfluentassertions\n3. 查看nuget目录  \n通过dotnet dotnet nuget locals all --list  \n4. JSON解析不适用首字母小写形式(默认会首字母小写)  \n在ConfigureServices中配置\n    ``` c#\n    services.AddMvc()\n        .AddJsonOptions(options =>\n        {\n            if (options.SerializerSettings.ContractResolver is DefaultContractResolver resolver)\n            {\n                resolver.NamingStrategy = null;\n            }\n        });\n    ```\n5. 添加输出响应内容xml格式   \n.net core中默认只返回json格式需要xml的话需要修改Output formatter\n    ``` c#\n    services.AddMvc()\n        .AddMvcOptions(options=> {\n            options.OutputFormatters.Add(new XmlDataContractSerializerOutputFormatter());\n        })\n    ```\n6. 全局异常  \n+ [6.1] 往MVC Filters中添加过滤器  \n添加一个全局异常类继承ExceptionFilterAttribute\n    ``` c#\n    public class GlobalExceptionFilter : IExceptionFilter\n    {\n        private readonly IHostingEnvironment _hostingEnvironment;\n        private readonly ILogger<GlobalExceptionFilter> _logger;\n\n        public GlobalExceptionFilter(\n            IHostingEnvironment hostingEnvironment,\n            IModelMetadataProvider modelMetadataProvider,\n            ILogger<GlobalExceptionFilter> logger)\n        {\n            _hostingEnvironment = hostingEnvironment;\n            _logger = logger;\n        }\n\n\n\n        public void OnException(ExceptionContext context)\n        {\n            HttpStatusCode status = HttpStatusCode.InternalServerError;\n            String message = String.Empty;\n\n            var exceptionType = context.Exception.GetType();\n            if (exceptionType == typeof(UnauthorizedAccessException))\n            {\n                message = \"Unauthorized Access\";\n                status = HttpStatusCode.Unauthorized;\n            }\n            else if (exceptionType == typeof(NotImplementedException))\n            {\n                message = \"A server error occurred.\";\n                status = HttpStatusCode.NotImplemented;\n            }\n            else if (exceptionType == typeof(BusinessException))\n            {\n                message = context.Exception.ToString();\n                status = HttpStatusCode.InternalServerError;\n            }\n            else\n            {\n                message = context.Exception.Message;\n                status = HttpStatusCode.NotFound;\n            }\n            context.ExceptionHandled = true;\n\n            HttpResponse response = context.HttpContext.Response;\n            response.StatusCode = (int)status;\n            response.ContentType = \"application/json\";\n\n            var ar = new AjaxResponse()\n            {\n                Success = false,\n                Message = message,\n                Data = context.Exception\n            };\n            response.WriteAsync(JsonConvert.SerializeObject(ar));\n\n\n            //context.Result = new JsonNetResult(new AjaxResponse() {\n            //    Success=false,\n            //    Message=context.Exception.Message,\n            //    Data=context.Exception\n            //});\n        }\n    }\n    ```\n在ConfigureServices方法AddMvc中\n    ``` c# \n    services.AddMvc(config=> {\n        config.Filters.Add(typeof(GlobalExceptionFilter));\n    })\n    ```\n+ [6.2] 在Configure方法中添加异常处理管道(注意在所有请求管道的最前面)\n    ```\n    app.UseExceptionHandler(options =>\n    {\n        options.Run(async context =>\n        {\n            context.Response.StatusCode = (int)HttpStatusCode.InternalServerError;\n            context.Response.ContentType = \"application/json\";\n            var ex = context.Features.Get<IExceptionHandlerFeature>();\n            if (ex != null)\n            {\n                var response = new AjaxResponse()\n                {\n                    Success = false,\n                    Message = ex.Error.Message,\n                    Data = ex.Error\n                };\n                await context.Response.WriteAsync(JsonConvert.SerializeObject(response)).ConfigureAwait(false);\n            }\n        });\n    });\n    ```\n","source":"_posts/dotnetcore/core/remark.md","raw":"---\ntitle: DotNetCore 备忘录\ndate: 2018-03-01 19:01:01\nauthor: 谢新根\ncategories: ['.NetCore']\ntags: ['.NetCore']\n---\n\nDotNetCore 备忘录\n<!-- more -->\n\n##### 常用备忘录\n> docker run -d -p 8081:80 --name wechat -v /docker/wechat/App_Data/:/app/App_Data/ --restart always registry.cn-hangzhou.aliyuncs.com/xxg/wechat:v1.1.5 \n1. 使用dotnet watch 在项目项目文件夹中添加(自.netcore2.1.0开始已经集成进去 不需要手动添加)     \n   ``` c#\n   <ItemGroup>\n    <DotNetCliToolReference Include=\"Microsoft.DotNet.Watcher.Tools\" Version=\"2.0.0\" />\n   </ItemGroup>   \n\n   <!-- 使用dotnet ef ... -->\n   <ItemGroup>\n   <DotNetCliToolReference Include=\"Microsoft.EntityFrameworkCore.Tools.DotNet\" Version=\"2.0.1\" />\n   </ItemGroup>   \n   ```\n2. 测试框架   \nMoq  \nfluentassertions\n3. 查看nuget目录  \n通过dotnet dotnet nuget locals all --list  \n4. JSON解析不适用首字母小写形式(默认会首字母小写)  \n在ConfigureServices中配置\n    ``` c#\n    services.AddMvc()\n        .AddJsonOptions(options =>\n        {\n            if (options.SerializerSettings.ContractResolver is DefaultContractResolver resolver)\n            {\n                resolver.NamingStrategy = null;\n            }\n        });\n    ```\n5. 添加输出响应内容xml格式   \n.net core中默认只返回json格式需要xml的话需要修改Output formatter\n    ``` c#\n    services.AddMvc()\n        .AddMvcOptions(options=> {\n            options.OutputFormatters.Add(new XmlDataContractSerializerOutputFormatter());\n        })\n    ```\n6. 全局异常  \n+ [6.1] 往MVC Filters中添加过滤器  \n添加一个全局异常类继承ExceptionFilterAttribute\n    ``` c#\n    public class GlobalExceptionFilter : IExceptionFilter\n    {\n        private readonly IHostingEnvironment _hostingEnvironment;\n        private readonly ILogger<GlobalExceptionFilter> _logger;\n\n        public GlobalExceptionFilter(\n            IHostingEnvironment hostingEnvironment,\n            IModelMetadataProvider modelMetadataProvider,\n            ILogger<GlobalExceptionFilter> logger)\n        {\n            _hostingEnvironment = hostingEnvironment;\n            _logger = logger;\n        }\n\n\n\n        public void OnException(ExceptionContext context)\n        {\n            HttpStatusCode status = HttpStatusCode.InternalServerError;\n            String message = String.Empty;\n\n            var exceptionType = context.Exception.GetType();\n            if (exceptionType == typeof(UnauthorizedAccessException))\n            {\n                message = \"Unauthorized Access\";\n                status = HttpStatusCode.Unauthorized;\n            }\n            else if (exceptionType == typeof(NotImplementedException))\n            {\n                message = \"A server error occurred.\";\n                status = HttpStatusCode.NotImplemented;\n            }\n            else if (exceptionType == typeof(BusinessException))\n            {\n                message = context.Exception.ToString();\n                status = HttpStatusCode.InternalServerError;\n            }\n            else\n            {\n                message = context.Exception.Message;\n                status = HttpStatusCode.NotFound;\n            }\n            context.ExceptionHandled = true;\n\n            HttpResponse response = context.HttpContext.Response;\n            response.StatusCode = (int)status;\n            response.ContentType = \"application/json\";\n\n            var ar = new AjaxResponse()\n            {\n                Success = false,\n                Message = message,\n                Data = context.Exception\n            };\n            response.WriteAsync(JsonConvert.SerializeObject(ar));\n\n\n            //context.Result = new JsonNetResult(new AjaxResponse() {\n            //    Success=false,\n            //    Message=context.Exception.Message,\n            //    Data=context.Exception\n            //});\n        }\n    }\n    ```\n在ConfigureServices方法AddMvc中\n    ``` c# \n    services.AddMvc(config=> {\n        config.Filters.Add(typeof(GlobalExceptionFilter));\n    })\n    ```\n+ [6.2] 在Configure方法中添加异常处理管道(注意在所有请求管道的最前面)\n    ```\n    app.UseExceptionHandler(options =>\n    {\n        options.Run(async context =>\n        {\n            context.Response.StatusCode = (int)HttpStatusCode.InternalServerError;\n            context.Response.ContentType = \"application/json\";\n            var ex = context.Features.Get<IExceptionHandlerFeature>();\n            if (ex != null)\n            {\n                var response = new AjaxResponse()\n                {\n                    Success = false,\n                    Message = ex.Error.Message,\n                    Data = ex.Error\n                };\n                await context.Response.WriteAsync(JsonConvert.SerializeObject(response)).ConfigureAwait(false);\n            }\n        });\n    });\n    ```\n","slug":"dotnetcore/core/remark","published":1,"updated":"2018-09-27T10:59:38.621Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjocck1q4002r70uk5cfr2son","content":"<p>DotNetCore 备忘录<br><a id=\"more\"></a></p>\n<h5 id=\"常用备忘录\"><a href=\"#常用备忘录\" class=\"headerlink\" title=\"常用备忘录\"></a>常用备忘录</h5><blockquote>\n<p>docker run -d -p 8081:80 –name wechat -v /docker/wechat/App_Data/:/app/App_Data/ –restart always registry.cn-hangzhou.aliyuncs.com/xxg/wechat:v1.1.5 </p>\n<ol>\n<li>使用dotnet watch 在项目项目文件夹中添加(自.netcore2.1.0开始已经集成进去 不需要手动添加)     <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;ItemGroup&gt;</span><br><span class=\"line\"> &lt;DotNetCliToolReference Include=&quot;Microsoft.DotNet.Watcher.Tools&quot; Version=&quot;2.0.0&quot; /&gt;</span><br><span class=\"line\">&lt;/ItemGroup&gt;   </span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- 使用dotnet ef ... --&gt;</span><br><span class=\"line\">&lt;ItemGroup&gt;</span><br><span class=\"line\">&lt;DotNetCliToolReference Include=&quot;Microsoft.EntityFrameworkCore.Tools.DotNet&quot; Version=&quot;2.0.1&quot; /&gt;</span><br><span class=\"line\">&lt;/ItemGroup&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</blockquote>\n<ol start=\"2\">\n<li>测试框架<br>Moq<br>fluentassertions</li>\n<li>查看nuget目录<br>通过dotnet dotnet nuget locals all –list  </li>\n<li><p>JSON解析不适用首字母小写形式(默认会首字母小写)<br>在ConfigureServices中配置</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">services.AddMvc()</span><br><span class=\"line\">    .AddJsonOptions(options =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        if (options.SerializerSettings.ContractResolver is DefaultContractResolver resolver)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            resolver.NamingStrategy = null;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>添加输出响应内容xml格式<br>.net core中默认只返回json格式需要xml的话需要修改Output formatter</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">services.AddMvc()</span><br><span class=\"line\">    .AddMvcOptions(options=&gt; &#123;</span><br><span class=\"line\">        options.OutputFormatters.Add(new XmlDataContractSerializerOutputFormatter());</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>全局异常  </p>\n</li>\n</ol>\n<ul>\n<li>[6.1] 往MVC Filters中添加过滤器<br>添加一个全局异常类继承ExceptionFilterAttribute  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class GlobalExceptionFilter : IExceptionFilter</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    private readonly IHostingEnvironment _hostingEnvironment;</span><br><span class=\"line\">    private readonly ILogger&lt;GlobalExceptionFilter&gt; _logger;</span><br><span class=\"line\"></span><br><span class=\"line\">    public GlobalExceptionFilter(</span><br><span class=\"line\">        IHostingEnvironment hostingEnvironment,</span><br><span class=\"line\">        IModelMetadataProvider modelMetadataProvider,</span><br><span class=\"line\">        ILogger&lt;GlobalExceptionFilter&gt; logger)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        _hostingEnvironment = hostingEnvironment;</span><br><span class=\"line\">        _logger = logger;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    public void OnException(ExceptionContext context)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        HttpStatusCode status = HttpStatusCode.InternalServerError;</span><br><span class=\"line\">        String message = String.Empty;</span><br><span class=\"line\"></span><br><span class=\"line\">        var exceptionType = context.Exception.GetType();</span><br><span class=\"line\">        if (exceptionType == typeof(UnauthorizedAccessException))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            message = &quot;Unauthorized Access&quot;;</span><br><span class=\"line\">            status = HttpStatusCode.Unauthorized;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        else if (exceptionType == typeof(NotImplementedException))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            message = &quot;A server error occurred.&quot;;</span><br><span class=\"line\">            status = HttpStatusCode.NotImplemented;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        else if (exceptionType == typeof(BusinessException))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            message = context.Exception.ToString();</span><br><span class=\"line\">            status = HttpStatusCode.InternalServerError;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        else</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            message = context.Exception.Message;</span><br><span class=\"line\">            status = HttpStatusCode.NotFound;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        context.ExceptionHandled = true;</span><br><span class=\"line\"></span><br><span class=\"line\">        HttpResponse response = context.HttpContext.Response;</span><br><span class=\"line\">        response.StatusCode = (int)status;</span><br><span class=\"line\">        response.ContentType = &quot;application/json&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">        var ar = new AjaxResponse()</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            Success = false,</span><br><span class=\"line\">            Message = message,</span><br><span class=\"line\">            Data = context.Exception</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        response.WriteAsync(JsonConvert.SerializeObject(ar));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        //context.Result = new JsonNetResult(new AjaxResponse() &#123;</span><br><span class=\"line\">        //    Success=false,</span><br><span class=\"line\">        //    Message=context.Exception.Message,</span><br><span class=\"line\">        //    Data=context.Exception</span><br><span class=\"line\">        //&#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>在ConfigureServices方法AddMvc中<br>    <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">services.AddMvc(config=&gt; &#123;</span><br><span class=\"line\">    config.Filters.Add(typeof(GlobalExceptionFilter));</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>[6.2] 在Configure方法中添加异常处理管道(注意在所有请求管道的最前面)  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.UseExceptionHandler(options =&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    options.Run(async context =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        context.Response.StatusCode = (int)HttpStatusCode.InternalServerError;</span><br><span class=\"line\">        context.Response.ContentType = &quot;application/json&quot;;</span><br><span class=\"line\">        var ex = context.Features.Get&lt;IExceptionHandlerFeature&gt;();</span><br><span class=\"line\">        if (ex != null)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            var response = new AjaxResponse()</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                Success = false,</span><br><span class=\"line\">                Message = ex.Error.Message,</span><br><span class=\"line\">                Data = ex.Error</span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\">            await context.Response.WriteAsync(JsonConvert.SerializeObject(response)).ConfigureAwait(false);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"<p>DotNetCore 备忘录<br>","more":"</p>\n<h5 id=\"常用备忘录\"><a href=\"#常用备忘录\" class=\"headerlink\" title=\"常用备忘录\"></a>常用备忘录</h5><blockquote>\n<p>docker run -d -p 8081:80 –name wechat -v /docker/wechat/App_Data/:/app/App_Data/ –restart always registry.cn-hangzhou.aliyuncs.com/xxg/wechat:v1.1.5 </p>\n<ol>\n<li>使用dotnet watch 在项目项目文件夹中添加(自.netcore2.1.0开始已经集成进去 不需要手动添加)     <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;ItemGroup&gt;</span><br><span class=\"line\"> &lt;DotNetCliToolReference Include=&quot;Microsoft.DotNet.Watcher.Tools&quot; Version=&quot;2.0.0&quot; /&gt;</span><br><span class=\"line\">&lt;/ItemGroup&gt;   </span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- 使用dotnet ef ... --&gt;</span><br><span class=\"line\">&lt;ItemGroup&gt;</span><br><span class=\"line\">&lt;DotNetCliToolReference Include=&quot;Microsoft.EntityFrameworkCore.Tools.DotNet&quot; Version=&quot;2.0.1&quot; /&gt;</span><br><span class=\"line\">&lt;/ItemGroup&gt;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</blockquote>\n<ol start=\"2\">\n<li>测试框架<br>Moq<br>fluentassertions</li>\n<li>查看nuget目录<br>通过dotnet dotnet nuget locals all –list  </li>\n<li><p>JSON解析不适用首字母小写形式(默认会首字母小写)<br>在ConfigureServices中配置</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">services.AddMvc()</span><br><span class=\"line\">    .AddJsonOptions(options =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        if (options.SerializerSettings.ContractResolver is DefaultContractResolver resolver)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            resolver.NamingStrategy = null;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>添加输出响应内容xml格式<br>.net core中默认只返回json格式需要xml的话需要修改Output formatter</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">services.AddMvc()</span><br><span class=\"line\">    .AddMvcOptions(options=&gt; &#123;</span><br><span class=\"line\">        options.OutputFormatters.Add(new XmlDataContractSerializerOutputFormatter());</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>全局异常  </p>\n</li>\n</ol>\n<ul>\n<li>[6.1] 往MVC Filters中添加过滤器<br>添加一个全局异常类继承ExceptionFilterAttribute  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class GlobalExceptionFilter : IExceptionFilter</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    private readonly IHostingEnvironment _hostingEnvironment;</span><br><span class=\"line\">    private readonly ILogger&lt;GlobalExceptionFilter&gt; _logger;</span><br><span class=\"line\"></span><br><span class=\"line\">    public GlobalExceptionFilter(</span><br><span class=\"line\">        IHostingEnvironment hostingEnvironment,</span><br><span class=\"line\">        IModelMetadataProvider modelMetadataProvider,</span><br><span class=\"line\">        ILogger&lt;GlobalExceptionFilter&gt; logger)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        _hostingEnvironment = hostingEnvironment;</span><br><span class=\"line\">        _logger = logger;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    public void OnException(ExceptionContext context)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        HttpStatusCode status = HttpStatusCode.InternalServerError;</span><br><span class=\"line\">        String message = String.Empty;</span><br><span class=\"line\"></span><br><span class=\"line\">        var exceptionType = context.Exception.GetType();</span><br><span class=\"line\">        if (exceptionType == typeof(UnauthorizedAccessException))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            message = &quot;Unauthorized Access&quot;;</span><br><span class=\"line\">            status = HttpStatusCode.Unauthorized;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        else if (exceptionType == typeof(NotImplementedException))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            message = &quot;A server error occurred.&quot;;</span><br><span class=\"line\">            status = HttpStatusCode.NotImplemented;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        else if (exceptionType == typeof(BusinessException))</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            message = context.Exception.ToString();</span><br><span class=\"line\">            status = HttpStatusCode.InternalServerError;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        else</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            message = context.Exception.Message;</span><br><span class=\"line\">            status = HttpStatusCode.NotFound;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        context.ExceptionHandled = true;</span><br><span class=\"line\"></span><br><span class=\"line\">        HttpResponse response = context.HttpContext.Response;</span><br><span class=\"line\">        response.StatusCode = (int)status;</span><br><span class=\"line\">        response.ContentType = &quot;application/json&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">        var ar = new AjaxResponse()</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            Success = false,</span><br><span class=\"line\">            Message = message,</span><br><span class=\"line\">            Data = context.Exception</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        response.WriteAsync(JsonConvert.SerializeObject(ar));</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        //context.Result = new JsonNetResult(new AjaxResponse() &#123;</span><br><span class=\"line\">        //    Success=false,</span><br><span class=\"line\">        //    Message=context.Exception.Message,</span><br><span class=\"line\">        //    Data=context.Exception</span><br><span class=\"line\">        //&#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>在ConfigureServices方法AddMvc中<br>    <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">services.AddMvc(config=&gt; &#123;</span><br><span class=\"line\">    config.Filters.Add(typeof(GlobalExceptionFilter));</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>[6.2] 在Configure方法中添加异常处理管道(注意在所有请求管道的最前面)  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.UseExceptionHandler(options =&gt;</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    options.Run(async context =&gt;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        context.Response.StatusCode = (int)HttpStatusCode.InternalServerError;</span><br><span class=\"line\">        context.Response.ContentType = &quot;application/json&quot;;</span><br><span class=\"line\">        var ex = context.Features.Get&lt;IExceptionHandlerFeature&gt;();</span><br><span class=\"line\">        if (ex != null)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            var response = new AjaxResponse()</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                Success = false,</span><br><span class=\"line\">                Message = ex.Error.Message,</span><br><span class=\"line\">                Data = ex.Error</span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\">            await context.Response.WriteAsync(JsonConvert.SerializeObject(response)).ConfigureAwait(false);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n</li>\n</ul>"},{"title":"vscode下调试es6编写的npm包","comments":0,"abbrlink":100,"date":"2018-09-22T13:10:10.000Z","img":null,"_content":"\n0. 前置条件 安装好node环境\n1. 创建一个文件夹  执行npm init 更具需要选择\n2. 通过yarn安装babel-preset-es2015 (也可以通过npm等)\n```\nyarn add -d babel-cli babel-preset-es2015 //安装babel-cli与babel-preset-es2015\nyarn add -d babel-preset-stage-1 //支持babel-preset-stage-1\n//yarn add -d babel-preset-react //如果需要支持react\n//yarn add -d babel-plugin-transform-object-assign //适用于Object.assign()\n//yarn add -d babel-plugin-transform-object-rest-spread //适用于展开运算符\n```\n3. 在package.json文件夹中添加一个scripts 如下所示:\n```\nscripts: {\n    \"build\": \"babel src --watch --source-maps --presets=es2015,stage-1 --out-dir dist\" //切记 --source-maps一定要加上\n}\n```\n4. 跟目录下添加.babelrc 内容如下\n```\n{\n    \"presets\": [\n        \"es2015\"\n        //,\"react\" //如果有使用react\n    ]\n    //,\n    //\"plugins\":[\n    //    \"transform-object-assign\", //适用于Object.assign()\n    //    \"transform-object-rest-spread\" //适用于展开运算符 ...\n    //]\n}\n```\n5. 编写自己的代码，整体项目结构如下  \n|-src  \n&emsp;|--cores  \n&emsp;&emsp;|--math.js  --被引用的js文件  \n&emsp;|--index.js   --主入口js文件 \n|.babelrc  \n|.package.json  \n6. 切到vscode左侧的调试窗口，点击添加配置  \n这个时候会生成一个launch.json文件，修改内容如下\n```\n{\n    // 使用 IntelliSense 了解相关属性。 \n    // 悬停以查看现有属性的描述。\n    // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"type\": \"node\",\n            \"request\": \"launch\",\n            \"name\": \"Launch App.js\",\n            \"program\": \"${workspaceRoot}/src/index.js\",\n            \"outFiles\": [\n                \"${workspaceRoot}/dist/**/*.js\"\n            ]\n        }\n    ]\n}\n```\n7. 先生成在运行调试\nnpm run build会生成一个dist目录，然后点击调试上的运行按钮 执行调试","source":"_posts/front/other/VSCodeDebug.md","raw":"---\ntitle: vscode下调试es6编写的npm包\ncategories:\n  - 前端-其他\ntags:\n  - 前端-其他\ncomments: false\nabbrlink: 100\ndate: 2018-09-22 21:10:10\nimg:\n---\n\n0. 前置条件 安装好node环境\n1. 创建一个文件夹  执行npm init 更具需要选择\n2. 通过yarn安装babel-preset-es2015 (也可以通过npm等)\n```\nyarn add -d babel-cli babel-preset-es2015 //安装babel-cli与babel-preset-es2015\nyarn add -d babel-preset-stage-1 //支持babel-preset-stage-1\n//yarn add -d babel-preset-react //如果需要支持react\n//yarn add -d babel-plugin-transform-object-assign //适用于Object.assign()\n//yarn add -d babel-plugin-transform-object-rest-spread //适用于展开运算符\n```\n3. 在package.json文件夹中添加一个scripts 如下所示:\n```\nscripts: {\n    \"build\": \"babel src --watch --source-maps --presets=es2015,stage-1 --out-dir dist\" //切记 --source-maps一定要加上\n}\n```\n4. 跟目录下添加.babelrc 内容如下\n```\n{\n    \"presets\": [\n        \"es2015\"\n        //,\"react\" //如果有使用react\n    ]\n    //,\n    //\"plugins\":[\n    //    \"transform-object-assign\", //适用于Object.assign()\n    //    \"transform-object-rest-spread\" //适用于展开运算符 ...\n    //]\n}\n```\n5. 编写自己的代码，整体项目结构如下  \n|-src  \n&emsp;|--cores  \n&emsp;&emsp;|--math.js  --被引用的js文件  \n&emsp;|--index.js   --主入口js文件 \n|.babelrc  \n|.package.json  \n6. 切到vscode左侧的调试窗口，点击添加配置  \n这个时候会生成一个launch.json文件，修改内容如下\n```\n{\n    // 使用 IntelliSense 了解相关属性。 \n    // 悬停以查看现有属性的描述。\n    // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"type\": \"node\",\n            \"request\": \"launch\",\n            \"name\": \"Launch App.js\",\n            \"program\": \"${workspaceRoot}/src/index.js\",\n            \"outFiles\": [\n                \"${workspaceRoot}/dist/**/*.js\"\n            ]\n        }\n    ]\n}\n```\n7. 先生成在运行调试\nnpm run build会生成一个dist目录，然后点击调试上的运行按钮 执行调试","slug":"front/other/VSCodeDebug","published":1,"updated":"2019-05-22T11:55:21.261Z","_id":"cjocck1q6002u70uk3smsk6ry","layout":"post","photos":[],"link":"","content":"<ol start=\"0\">\n<li>前置条件 安装好node环境</li>\n<li>创建一个文件夹  执行npm init 更具需要选择</li>\n<li>通过yarn安装babel-preset-es2015 (也可以通过npm等)<pre><code>yarn add -d babel-cli babel-preset-es2015 //安装babel-cli与babel-preset-es2015\nyarn add -d babel-preset-stage-1 //支持babel-preset-stage-1\n//yarn add -d babel-preset-react //如果需要支持react\n//yarn add -d babel-plugin-transform-object-assign //适用于Object.assign()\n//yarn add -d babel-plugin-transform-object-rest-spread //适用于展开运算符\n</code></pre></li>\n<li>在package.json文件夹中添加一个scripts 如下所示:<pre><code>scripts: {\n &quot;build&quot;: &quot;babel src --watch --source-maps --presets=es2015,stage-1 --out-dir dist&quot; //切记 --source-maps一定要加上\n}\n</code></pre></li>\n<li>跟目录下添加.babelrc 内容如下<pre><code>{\n &quot;presets&quot;: [\n     &quot;es2015&quot;\n     //,&quot;react&quot; //如果有使用react\n ]\n //,\n //&quot;plugins&quot;:[\n //    &quot;transform-object-assign&quot;, //适用于Object.assign()\n //    &quot;transform-object-rest-spread&quot; //适用于展开运算符 ...\n //]\n}\n</code></pre></li>\n<li>编写自己的代码，整体项目结构如下<br>|-src<br>&emsp;|–cores<br>&emsp;&emsp;|–math.js  –被引用的js文件<br>&emsp;|–index.js   –主入口js文件<br>|.babelrc<br>|.package.json  </li>\n<li>切到vscode左侧的调试窗口，点击添加配置<br>这个时候会生成一个launch.json文件，修改内容如下<pre><code>{\n // 使用 IntelliSense 了解相关属性。 \n // 悬停以查看现有属性的描述。\n // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387\n &quot;version&quot;: &quot;0.2.0&quot;,\n &quot;configurations&quot;: [\n     {\n         &quot;type&quot;: &quot;node&quot;,\n         &quot;request&quot;: &quot;launch&quot;,\n         &quot;name&quot;: &quot;Launch App.js&quot;,\n         &quot;program&quot;: &quot;${workspaceRoot}/src/index.js&quot;,\n         &quot;outFiles&quot;: [\n             &quot;${workspaceRoot}/dist/**/*.js&quot;\n         ]\n     }\n ]\n}\n</code></pre></li>\n<li>先生成在运行调试<br>npm run build会生成一个dist目录，然后点击调试上的运行按钮 执行调试</li>\n</ol>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"","more":"<ol start=\"0\">\n<li>前置条件 安装好node环境</li>\n<li>创建一个文件夹  执行npm init 更具需要选择</li>\n<li>通过yarn安装babel-preset-es2015 (也可以通过npm等)<pre><code>yarn add -d babel-cli babel-preset-es2015 //安装babel-cli与babel-preset-es2015\nyarn add -d babel-preset-stage-1 //支持babel-preset-stage-1\n//yarn add -d babel-preset-react //如果需要支持react\n//yarn add -d babel-plugin-transform-object-assign //适用于Object.assign()\n//yarn add -d babel-plugin-transform-object-rest-spread //适用于展开运算符\n</code></pre></li>\n<li>在package.json文件夹中添加一个scripts 如下所示:<pre><code>scripts: {\n &quot;build&quot;: &quot;babel src --watch --source-maps --presets=es2015,stage-1 --out-dir dist&quot; //切记 --source-maps一定要加上\n}\n</code></pre></li>\n<li>跟目录下添加.babelrc 内容如下<pre><code>{\n &quot;presets&quot;: [\n     &quot;es2015&quot;\n     //,&quot;react&quot; //如果有使用react\n ]\n //,\n //&quot;plugins&quot;:[\n //    &quot;transform-object-assign&quot;, //适用于Object.assign()\n //    &quot;transform-object-rest-spread&quot; //适用于展开运算符 ...\n //]\n}\n</code></pre></li>\n<li>编写自己的代码，整体项目结构如下<br>|-src<br>&emsp;|–cores<br>&emsp;&emsp;|–math.js  –被引用的js文件<br>&emsp;|–index.js   –主入口js文件<br>|.babelrc<br>|.package.json  </li>\n<li>切到vscode左侧的调试窗口，点击添加配置<br>这个时候会生成一个launch.json文件，修改内容如下<pre><code>{\n // 使用 IntelliSense 了解相关属性。 \n // 悬停以查看现有属性的描述。\n // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387\n &quot;version&quot;: &quot;0.2.0&quot;,\n &quot;configurations&quot;: [\n     {\n         &quot;type&quot;: &quot;node&quot;,\n         &quot;request&quot;: &quot;launch&quot;,\n         &quot;name&quot;: &quot;Launch App.js&quot;,\n         &quot;program&quot;: &quot;${workspaceRoot}/src/index.js&quot;,\n         &quot;outFiles&quot;: [\n             &quot;${workspaceRoot}/dist/**/*.js&quot;\n         ]\n     }\n ]\n}\n</code></pre></li>\n<li>先生成在运行调试<br>npm run build会生成一个dist目录，然后点击调试上的运行按钮 执行调试</li>\n</ol>\n"},{"title":"React资料收集","abbrlink":14655,"date":"2018-08-01T01:10:10.000Z","_content":"\nReact资料收集\n<!-- more -->\n\n##### 开发工具\nvscode、Rekit\n##### ESLint \neslint-config-airbnb  最最最完整的javascript eslint规则\n##### Prettier\n代码格式化工具,vscode支持 安装插件 添加.prettier文件\n##### React DevTool、Redux DevTool\nchrome浏览器插件\n##### 单元测试相关\n1. Jest:Facebook开源的JS单元测试狂阿基\n2. JS DOM浏览器环境的NodeJS模拟\n3. Enzyme:React组件渲染和测试\n4. nock:模拟http请求\n5. sinon：函数模拟和调用跟踪\n6. istanbul:单元测试覆盖率\n\n\n> [其他请查看](/2018/09/13/tools/collections/)","source":"_posts/front/react/collection.md","raw":"---\ntitle: React资料收集\ncategories:\n  - React\ntags:\n  - 前端\n  - React\nabbrlink: 14655\ndate: 2018-08-01 09:10:10\n---\n\nReact资料收集\n<!-- more -->\n\n##### 开发工具\nvscode、Rekit\n##### ESLint \neslint-config-airbnb  最最最完整的javascript eslint规则\n##### Prettier\n代码格式化工具,vscode支持 安装插件 添加.prettier文件\n##### React DevTool、Redux DevTool\nchrome浏览器插件\n##### 单元测试相关\n1. Jest:Facebook开源的JS单元测试狂阿基\n2. JS DOM浏览器环境的NodeJS模拟\n3. Enzyme:React组件渲染和测试\n4. nock:模拟http请求\n5. sinon：函数模拟和调用跟踪\n6. istanbul:单元测试覆盖率\n\n\n> [其他请查看](/2018/09/13/tools/collections/)","slug":"front/react/collection","published":1,"updated":"2020-12-25T13:52:14.362Z","_id":"cjocck1q9002y70ukerbldtmo","comments":1,"layout":"post","photos":[],"link":"","content":"<p>React资料收集</p>\n<a id=\"more\"></a>\n\n<h5 id=\"开发工具\"><a href=\"#开发工具\" class=\"headerlink\" title=\"开发工具\"></a>开发工具</h5><p>vscode、Rekit</p>\n<h5 id=\"ESLint\"><a href=\"#ESLint\" class=\"headerlink\" title=\"ESLint\"></a>ESLint</h5><p>eslint-config-airbnb  最最最完整的javascript eslint规则</p>\n<h5 id=\"Prettier\"><a href=\"#Prettier\" class=\"headerlink\" title=\"Prettier\"></a>Prettier</h5><p>代码格式化工具,vscode支持 安装插件 添加.prettier文件</p>\n<h5 id=\"React-DevTool、Redux-DevTool\"><a href=\"#React-DevTool、Redux-DevTool\" class=\"headerlink\" title=\"React DevTool、Redux DevTool\"></a>React DevTool、Redux DevTool</h5><p>chrome浏览器插件</p>\n<h5 id=\"单元测试相关\"><a href=\"#单元测试相关\" class=\"headerlink\" title=\"单元测试相关\"></a>单元测试相关</h5><ol>\n<li>Jest:Facebook开源的JS单元测试狂阿基</li>\n<li>JS DOM浏览器环境的NodeJS模拟</li>\n<li>Enzyme:React组件渲染和测试</li>\n<li>nock:模拟http请求</li>\n<li>sinon：函数模拟和调用跟踪</li>\n<li>istanbul:单元测试覆盖率</li>\n</ol>\n<blockquote>\n<p><a href=\"/2018/09/13/tools/collections/\">其他请查看</a></p>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>React资料收集</p>","more":"<h5 id=\"开发工具\"><a href=\"#开发工具\" class=\"headerlink\" title=\"开发工具\"></a>开发工具</h5><p>vscode、Rekit</p>\n<h5 id=\"ESLint\"><a href=\"#ESLint\" class=\"headerlink\" title=\"ESLint\"></a>ESLint</h5><p>eslint-config-airbnb  最最最完整的javascript eslint规则</p>\n<h5 id=\"Prettier\"><a href=\"#Prettier\" class=\"headerlink\" title=\"Prettier\"></a>Prettier</h5><p>代码格式化工具,vscode支持 安装插件 添加.prettier文件</p>\n<h5 id=\"React-DevTool、Redux-DevTool\"><a href=\"#React-DevTool、Redux-DevTool\" class=\"headerlink\" title=\"React DevTool、Redux DevTool\"></a>React DevTool、Redux DevTool</h5><p>chrome浏览器插件</p>\n<h5 id=\"单元测试相关\"><a href=\"#单元测试相关\" class=\"headerlink\" title=\"单元测试相关\"></a>单元测试相关</h5><ol>\n<li>Jest:Facebook开源的JS单元测试狂阿基</li>\n<li>JS DOM浏览器环境的NodeJS模拟</li>\n<li>Enzyme:React组件渲染和测试</li>\n<li>nock:模拟http请求</li>\n<li>sinon：函数模拟和调用跟踪</li>\n<li>istanbul:单元测试覆盖率</li>\n</ol>\n<blockquote>\n<p><a href=\"/2018/09/13/tools/collections/\">其他请查看</a></p>\n</blockquote>"},{"title":"umi文件拆分","date":"2018-11-11T03:35:10.000Z","_content":"\numi文件拆分\n<!-- more -->\n\n> 前言 在umi群里有群友在问umi打包后umi.js文件有1M多甚至更多，那么网站加载的时候会等待这个文件加载完成 可能需要好些时间 这个是比较难忍受的,其实umi有提供代码拆分的功能 只是文档不是很全 这里写了个片博客 谈谈怎么拆分的\n\n1. 使用命令yarn run analyze 打开分析页面，运行后会打开如图的页面\n> analyze是package.js中定义好的命令'cross-env ANALYZE=1 umi build' 可以自行添加或者查看umi文档\n\n![](http://qiniu.xxgtalk.cn/blog/images/front/reactumi-split-pre.jpg)\n如图所示，目前umi文件比较大，现在来做拆分，比如这：把@ant-design和antd这两个拆分为antdesigns文件、把react|react-dom|react-router|react-router-dom|lodash|lodash-decorators|redux-saga|re-select|dva|moment这些拆分为wendors文件\n2. 编写拆分规则 在umi.js||config.js文件的chainWebpack 中加入\n``` bash\nconfig.optimization.splitChunks({\n    chunks: 'async',\n    minSize: 30000,\n    maxSize: 0,\n    minChunks: 1,\n    maxAsyncRequests: 5,\n    maxInitialRequests: 3,\n    automaticNameDelimiter: '~',\n    name: true,\n    cacheGroups: {\n      vendors: {\n        name: 'vendors',\n        chunks: 'all',\n        test: /[\\\\/]node_modules[\\\\/](react|react-dom|react-router|react-router-dom|lodash|lodash-decorators|redux-saga|re-select|dva|moment)[\\\\/]/,\n        priority: -10,\n      },\n      antdesigns: {\n        name: 'antdesigns',\n        chunks: 'all',\n        test: /[\\\\/]node_modules[\\\\/](@ant-design|antd)[\\\\/]/,\n        priority: -11,\n      }\n    },\n  });\n```\n3. 在umi.js或者config.js 的umi-plugin-react中的chunks属性中配置配置如下\n``` bash\nchunks: ['vendors','antdesigns', 'umi']\n```\n4. 重新执行 yarn run analyze 查看拆分后的情况，如图\n![](http://qiniu.xxgtalk.cn/blog/images/front/reactumi-split-next.jpg)\n\n致次 拆分完成\n","source":"_posts/front/react/umi-split-chunks.md","raw":"---\ntitle: umi文件拆分\ndate: 2018-11-11 11:35:10 \ncategories: ['React']\ntags: ['前端','React','umi']\n---\n\numi文件拆分\n<!-- more -->\n\n> 前言 在umi群里有群友在问umi打包后umi.js文件有1M多甚至更多，那么网站加载的时候会等待这个文件加载完成 可能需要好些时间 这个是比较难忍受的,其实umi有提供代码拆分的功能 只是文档不是很全 这里写了个片博客 谈谈怎么拆分的\n\n1. 使用命令yarn run analyze 打开分析页面，运行后会打开如图的页面\n> analyze是package.js中定义好的命令'cross-env ANALYZE=1 umi build' 可以自行添加或者查看umi文档\n\n![](http://qiniu.xxgtalk.cn/blog/images/front/reactumi-split-pre.jpg)\n如图所示，目前umi文件比较大，现在来做拆分，比如这：把@ant-design和antd这两个拆分为antdesigns文件、把react|react-dom|react-router|react-router-dom|lodash|lodash-decorators|redux-saga|re-select|dva|moment这些拆分为wendors文件\n2. 编写拆分规则 在umi.js||config.js文件的chainWebpack 中加入\n``` bash\nconfig.optimization.splitChunks({\n    chunks: 'async',\n    minSize: 30000,\n    maxSize: 0,\n    minChunks: 1,\n    maxAsyncRequests: 5,\n    maxInitialRequests: 3,\n    automaticNameDelimiter: '~',\n    name: true,\n    cacheGroups: {\n      vendors: {\n        name: 'vendors',\n        chunks: 'all',\n        test: /[\\\\/]node_modules[\\\\/](react|react-dom|react-router|react-router-dom|lodash|lodash-decorators|redux-saga|re-select|dva|moment)[\\\\/]/,\n        priority: -10,\n      },\n      antdesigns: {\n        name: 'antdesigns',\n        chunks: 'all',\n        test: /[\\\\/]node_modules[\\\\/](@ant-design|antd)[\\\\/]/,\n        priority: -11,\n      }\n    },\n  });\n```\n3. 在umi.js或者config.js 的umi-plugin-react中的chunks属性中配置配置如下\n``` bash\nchunks: ['vendors','antdesigns', 'umi']\n```\n4. 重新执行 yarn run analyze 查看拆分后的情况，如图\n![](http://qiniu.xxgtalk.cn/blog/images/front/reactumi-split-next.jpg)\n\n致次 拆分完成\n","slug":"front/react/umi-split-chunks","published":1,"updated":"2018-11-11T04:41:24.635Z","_id":"cjocck1r2003u70ukjwof918l","comments":1,"layout":"post","photos":[],"link":"","content":"<p>umi文件拆分<br><a id=\"more\"></a></p>\n<blockquote>\n<p>前言 在umi群里有群友在问umi打包后umi.js文件有1M多甚至更多，那么网站加载的时候会等待这个文件加载完成 可能需要好些时间 这个是比较难忍受的,其实umi有提供代码拆分的功能 只是文档不是很全 这里写了个片博客 谈谈怎么拆分的</p>\n</blockquote>\n<ol>\n<li>使用命令yarn run analyze 打开分析页面，运行后会打开如图的页面<blockquote>\n<p>analyze是package.js中定义好的命令’cross-env ANALYZE=1 umi build’ 可以自行添加或者查看umi文档</p>\n</blockquote>\n</li>\n</ol>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/front/reactumi-split-pre.jpg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>如图所示，目前umi文件比较大，现在来做拆分，比如这：把@ant-design和antd这两个拆分为antdesigns文件、把react|react-dom|react-router|react-router-dom|lodash|lodash-decorators|redux-saga|re-select|dva|moment这些拆分为wendors文件</p>\n<ol start=\"2\">\n<li><p>编写拆分规则 在umi.js||config.js文件的chainWebpack 中加入</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">config.optimization.splitChunks(&#123;</span><br><span class=\"line\">    chunks: <span class=\"string\">'async'</span>,</span><br><span class=\"line\">    minSize: 30000,</span><br><span class=\"line\">    maxSize: 0,</span><br><span class=\"line\">    minChunks: 1,</span><br><span class=\"line\">    maxAsyncRequests: 5,</span><br><span class=\"line\">    maxInitialRequests: 3,</span><br><span class=\"line\">    automaticNameDelimiter: <span class=\"string\">'~'</span>,</span><br><span class=\"line\">    name: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    cacheGroups: &#123;</span><br><span class=\"line\">      vendors: &#123;</span><br><span class=\"line\">        name: <span class=\"string\">'vendors'</span>,</span><br><span class=\"line\">        chunks: <span class=\"string\">'all'</span>,</span><br><span class=\"line\">        <span class=\"built_in\">test</span>: /[\\\\/]node_modules[\\\\/](react|react-dom|react-router|react-router-dom|lodash|lodash-decorators|redux-saga|re-select|dva|moment)[\\\\/]/,</span><br><span class=\"line\">        priority: -10,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      antdesigns: &#123;</span><br><span class=\"line\">        name: <span class=\"string\">'antdesigns'</span>,</span><br><span class=\"line\">        chunks: <span class=\"string\">'all'</span>,</span><br><span class=\"line\">        <span class=\"built_in\">test</span>: /[\\\\/]node_modules[\\\\/](@ant-design|antd)[\\\\/]/,</span><br><span class=\"line\">        priority: -11,</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在umi.js或者config.js 的umi-plugin-react中的chunks属性中配置配置如下</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chunks: [<span class=\"string\">'vendors'</span>,<span class=\"string\">'antdesigns'</span>, <span class=\"string\">'umi'</span>]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>重新执行 yarn run analyze 查看拆分后的情况，如图</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/front/reactumi-split-next.jpg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n</li>\n</ol>\n<p>致次 拆分完成</p>\n","site":{"data":{}},"excerpt":"<p>umi文件拆分<br>","more":"</p>\n<blockquote>\n<p>前言 在umi群里有群友在问umi打包后umi.js文件有1M多甚至更多，那么网站加载的时候会等待这个文件加载完成 可能需要好些时间 这个是比较难忍受的,其实umi有提供代码拆分的功能 只是文档不是很全 这里写了个片博客 谈谈怎么拆分的</p>\n</blockquote>\n<ol>\n<li>使用命令yarn run analyze 打开分析页面，运行后会打开如图的页面<blockquote>\n<p>analyze是package.js中定义好的命令’cross-env ANALYZE=1 umi build’ 可以自行添加或者查看umi文档</p>\n</blockquote>\n</li>\n</ol>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/front/reactumi-split-pre.jpg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>如图所示，目前umi文件比较大，现在来做拆分，比如这：把@ant-design和antd这两个拆分为antdesigns文件、把react|react-dom|react-router|react-router-dom|lodash|lodash-decorators|redux-saga|re-select|dva|moment这些拆分为wendors文件</p>\n<ol start=\"2\">\n<li><p>编写拆分规则 在umi.js||config.js文件的chainWebpack 中加入</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">config.optimization.splitChunks(&#123;</span><br><span class=\"line\">    chunks: <span class=\"string\">'async'</span>,</span><br><span class=\"line\">    minSize: 30000,</span><br><span class=\"line\">    maxSize: 0,</span><br><span class=\"line\">    minChunks: 1,</span><br><span class=\"line\">    maxAsyncRequests: 5,</span><br><span class=\"line\">    maxInitialRequests: 3,</span><br><span class=\"line\">    automaticNameDelimiter: <span class=\"string\">'~'</span>,</span><br><span class=\"line\">    name: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    cacheGroups: &#123;</span><br><span class=\"line\">      vendors: &#123;</span><br><span class=\"line\">        name: <span class=\"string\">'vendors'</span>,</span><br><span class=\"line\">        chunks: <span class=\"string\">'all'</span>,</span><br><span class=\"line\">        <span class=\"built_in\">test</span>: /[\\\\/]node_modules[\\\\/](react|react-dom|react-router|react-router-dom|lodash|lodash-decorators|redux-saga|re-select|dva|moment)[\\\\/]/,</span><br><span class=\"line\">        priority: -10,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      antdesigns: &#123;</span><br><span class=\"line\">        name: <span class=\"string\">'antdesigns'</span>,</span><br><span class=\"line\">        chunks: <span class=\"string\">'all'</span>,</span><br><span class=\"line\">        <span class=\"built_in\">test</span>: /[\\\\/]node_modules[\\\\/](@ant-design|antd)[\\\\/]/,</span><br><span class=\"line\">        priority: -11,</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在umi.js或者config.js 的umi-plugin-react中的chunks属性中配置配置如下</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chunks: [<span class=\"string\">'vendors'</span>,<span class=\"string\">'antdesigns'</span>, <span class=\"string\">'umi'</span>]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>重新执行 yarn run analyze 查看拆分后的情况，如图</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/front/reactumi-split-next.jpg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n</li>\n</ol>\n<p>致次 拆分完成</p>"},{"title":"React社区精选组件","abbrlink":4184,"date":"2018-12-10T01:10:10.000Z","_content":"\nReactReact社区精选组件\n<!-- more -->\n\n其他地址：https://ant.design/docs/react/recommendation-cn\n| 类型 | 推荐组件 | 描述\n| :--- | :--- | :---\n|滚动条 |[react-perfect-scrollbar](https://github.com/goldenyz/react-perfect-scrollbar) [reactScrollbar](https://github.com/souhe/reactScrollbar)  | 虚拟滚动条\n|图片缩放|[react-viewer](https://github.com/infeng/react-viewer) | 图片缩放\n|媒体查询|[react-media](https://github.com/ReactTraining/react-media)|媒体查询\n|标题修改|[react-document-title](https://github.com/gaearon/react-document-title)| 修改标题\n|浏览器存储|[store](https://github.com/marcuswestin/store.js) | 浏览器存储技术\n|pdf|[react-pdf](https://github.com/diegomura/react-pdf) | pdf\n|react-virtualized|[react-virtualized](https://github.com/bvaughn/react-virtualized) | 大数据渲染\n\n\n\n#### 其他类型\n| 类型 | 推荐组件 | 描述\n| :--- | :--- | :---\n|生成pdf |[jsPDF](https://github.com/MrRio/jsPDF?utm_source=gold_browser_extension)  | 前端生成pdf\n|谷歌浏览器API |[puppeteer](https://github.com/GoogleChrome/puppeteer)  | 可以用来写爬虫 一个无界面的谷歌浏览器","source":"_posts/front/react/components.md","raw":"---\ntitle: React社区精选组件\ncategories:\n  - React\ntags:\n  - 前端\n  - React\nabbrlink: 4184\ndate: 2018-12-10 09:10:10\n---\n\nReactReact社区精选组件\n<!-- more -->\n\n其他地址：https://ant.design/docs/react/recommendation-cn\n| 类型 | 推荐组件 | 描述\n| :--- | :--- | :---\n|滚动条 |[react-perfect-scrollbar](https://github.com/goldenyz/react-perfect-scrollbar) [reactScrollbar](https://github.com/souhe/reactScrollbar)  | 虚拟滚动条\n|图片缩放|[react-viewer](https://github.com/infeng/react-viewer) | 图片缩放\n|媒体查询|[react-media](https://github.com/ReactTraining/react-media)|媒体查询\n|标题修改|[react-document-title](https://github.com/gaearon/react-document-title)| 修改标题\n|浏览器存储|[store](https://github.com/marcuswestin/store.js) | 浏览器存储技术\n|pdf|[react-pdf](https://github.com/diegomura/react-pdf) | pdf\n|react-virtualized|[react-virtualized](https://github.com/bvaughn/react-virtualized) | 大数据渲染\n\n\n\n#### 其他类型\n| 类型 | 推荐组件 | 描述\n| :--- | :--- | :---\n|生成pdf |[jsPDF](https://github.com/MrRio/jsPDF?utm_source=gold_browser_extension)  | 前端生成pdf\n|谷歌浏览器API |[puppeteer](https://github.com/GoogleChrome/puppeteer)  | 可以用来写爬虫 一个无界面的谷歌浏览器","slug":"front/react/components","published":1,"updated":"2020-12-25T13:52:18.335Z","_id":"cjtav8xzn0000jguk0nkm2371","comments":1,"layout":"post","photos":[],"link":"","content":"<p>ReactReact社区精选组件</p>\n<a id=\"more\"></a>\n\n<p>其他地址：<a href=\"https://ant.design/docs/react/recommendation-cn\">https://ant.design/docs/react/recommendation-cn</a><br>| 类型 | 推荐组件 | 描述<br>| :— | :— | :—<br>|滚动条 |<a href=\"https://github.com/goldenyz/react-perfect-scrollbar\">react-perfect-scrollbar</a> <a href=\"https://github.com/souhe/reactScrollbar\">reactScrollbar</a>  | 虚拟滚动条<br>|图片缩放|<a href=\"https://github.com/infeng/react-viewer\">react-viewer</a> | 图片缩放<br>|媒体查询|<a href=\"https://github.com/ReactTraining/react-media\">react-media</a>|媒体查询<br>|标题修改|<a href=\"https://github.com/gaearon/react-document-title\">react-document-title</a>| 修改标题<br>|浏览器存储|<a href=\"https://github.com/marcuswestin/store.js\">store</a> | 浏览器存储技术<br>|pdf|<a href=\"https://github.com/diegomura/react-pdf\">react-pdf</a> | pdf<br>|react-virtualized|<a href=\"https://github.com/bvaughn/react-virtualized\">react-virtualized</a> | 大数据渲染</p>\n<h4 id=\"其他类型\"><a href=\"#其他类型\" class=\"headerlink\" title=\"其他类型\"></a>其他类型</h4><table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">推荐组件</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">生成pdf</td>\n<td align=\"left\"><a href=\"https://github.com/MrRio/jsPDF?utm_source=gold_browser_extension\">jsPDF</a></td>\n<td align=\"left\">前端生成pdf</td>\n</tr>\n<tr>\n<td align=\"left\">谷歌浏览器API</td>\n<td align=\"left\"><a href=\"https://github.com/GoogleChrome/puppeteer\">puppeteer</a></td>\n<td align=\"left\">可以用来写爬虫 一个无界面的谷歌浏览器</td>\n</tr>\n</tbody></table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>ReactReact社区精选组件</p>","more":"<p>其他地址：<a href=\"https://ant.design/docs/react/recommendation-cn\">https://ant.design/docs/react/recommendation-cn</a><br>| 类型 | 推荐组件 | 描述<br>| :— | :— | :—<br>|滚动条 |<a href=\"https://github.com/goldenyz/react-perfect-scrollbar\">react-perfect-scrollbar</a> <a href=\"https://github.com/souhe/reactScrollbar\">reactScrollbar</a>  | 虚拟滚动条<br>|图片缩放|<a href=\"https://github.com/infeng/react-viewer\">react-viewer</a> | 图片缩放<br>|媒体查询|<a href=\"https://github.com/ReactTraining/react-media\">react-media</a>|媒体查询<br>|标题修改|<a href=\"https://github.com/gaearon/react-document-title\">react-document-title</a>| 修改标题<br>|浏览器存储|<a href=\"https://github.com/marcuswestin/store.js\">store</a> | 浏览器存储技术<br>|pdf|<a href=\"https://github.com/diegomura/react-pdf\">react-pdf</a> | pdf<br>|react-virtualized|<a href=\"https://github.com/bvaughn/react-virtualized\">react-virtualized</a> | 大数据渲染</p>\n<h4 id=\"其他类型\"><a href=\"#其他类型\" class=\"headerlink\" title=\"其他类型\"></a>其他类型</h4><table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">推荐组件</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">生成pdf</td>\n<td align=\"left\"><a href=\"https://github.com/MrRio/jsPDF?utm_source=gold_browser_extension\">jsPDF</a></td>\n<td align=\"left\">前端生成pdf</td>\n</tr>\n<tr>\n<td align=\"left\">谷歌浏览器API</td>\n<td align=\"left\"><a href=\"https://github.com/GoogleChrome/puppeteer\">puppeteer</a></td>\n<td align=\"left\">可以用来写爬虫 一个无界面的谷歌浏览器</td>\n</tr>\n</tbody></table>"},{"title":"使用travis自动部署到github","date":"2019-03-16T01:10:15.000Z","_content":"\n\n#### 使用github+travis+ant-design-pro-site打造自己公司的前端开发文档站点\n<!-- more -->\n\n#### 开篇\n\n> 插播一条小广告，我们公司招人.net、前端(react栈) ；有求职意向可以私我内推(qq:1002275364)\n\n目前公司的系统是基于.net web mvc开发，由于历史原因吧，里面有razor写的，也有公司自定义的前端单页框架jui写的一部分，在后续的开发、维护过程中愈发困难；基于各方面考虑以最后打算后端基于.netcore；前端基于react+antd+dva+umi栈重构；\n1. 为什么用.net core  \n其实吧，我跟后端是有很大的渊源的，做了好几年后端吧，发现.net后端其实蛮苦逼的，不仅得写后端api还得写前端页面(没办法，你让美工去写razor页面感觉有点过分)，这也是为什么要前后端分离的原因之一(虽然分离之后前端页面还是后端开发人员兼职写^_^)；  \n.net core 天生为了跨平台、高性能、微服务、云而生；作为一个后端黑带6道的我，中小型项目里面玩的还是蛮顺手的(像什么abp、DI、dapper、ef、NPOI、itextsharp、quartznet、CAP、SignalR、Polly、DotnetSpider等还是玩过一些些的，只要别跟我扯什么动不动就双十一的场景，还是可以聊的下去的)  \n其次，.net core生态圈目前虽然不如java等，但是还是可以看到一直在进步；像什么桌面应用、Xamarin、ML.NET、爬虫、Xamarin、区块链、IoT、Unity3D、等都有涉及到;微服务方向，有Ocelot、Consul、Polly 等等等等等等等等等等等等等...  \n2. 为啥用react+antd+dva+umi【+ts】栈\n目前开发人员以后端人员为主力，对jquery栈比较熟悉；切换到react后需要比较大的转变，需要接触很多新知识，比如es6的析构赋值、rest、箭头函数、Generate、Promise、模板字符串;再比如 react的生命周期、redux的数据流等 这些都是新的东西；考虑到各方面，最终打算数据量方案使用dva(简单明了以model为单位集reducers、effects、subscribe等)，至于antd不用过多介绍，业界公认前端ui库\n\n好像有点跑题了~~~~~\n\n#### 工作准备\n1. 注册账号[github](https://github.com)、[travis](https://travis-ci.org)\n2. github上创建仓库(wetrial-site)\n3. github上生成一个token(记得保存下来)，用于travis推送代码到gh-pages分支  \n![生成token](http://qiniu.xxgtalk.cn/blog/images/tools/travis_github_generate_token.jpg) \n记得将tokens保存下来，稍后要用到，仓库权限选择第一项 repo即可  \n4. travis设置  \n点击头像、然后选择项目，默认是用户，如果你的项目是组织项目的，需要切换到组织，如图所示  \n![travis项目选择](http://qiniu.xxgtalk.cn/blog/images/tools/travis_project_list.jpg) \n5. 进入项目配置页面，如图  \n![travis项目选择](http://qiniu.xxgtalk.cn/blog/images/tools/travis_project_setting.jpg) \n添加环境变量相关东西，包括域名、token等\n![配置](http://qiniu.xxgtalk.cn/blog/images/tools/travis_environment.jpg)   \n6. 回到实际的项目\n从ant-design-pro-site拉取代码，然后根据自己的实际情况做修改；比如我去掉了尾栏的一些东西，增加了css相关的大栏(这里不具体介绍)  \n7. 在根目录下添加travis的配置文件.travis.yml 内容如下所示\n``` yml\nlanguage: node_js\n\nnode_js:\n  - \"8\"\n\n# 缓存依赖\ncache:\n  directories:\n    - node_modules\n\nbefore_install:\n  - export TZ='Asia/Shanghai' # 更改时区\n\n# 依赖安装\ninstall:\n  - npm install\n\n# 构建脚本\nscript: \n  - npm run build-site\n\n# 分支白名单\nbranches:\n  only:\n    - master # 只对 master 分支进行构建\n\n# GitHub Pages 部署\ndeploy:\n  - provider: pages\n    skip_cleanup: true\n     # 在项目仪表盘的 Settings -> Environment Variables 中配置\n    github_token: $GITHUB_TOKEN\n    # 将 build 目录下的内容推送到默认的 gh-pages 分支上，并不会连带 build 目录一起\n    local_dir: _site\n    # 绑定自定义域名，根据自己的情况来\n    fqdn: $CUSTOM_DOMAIN\n    name: $GIT_NAME\n    email: $GIT_EMAIL\n```\n然后提交并同步到github,回到travis将会看到如下一幕  \n![配置](http://qiniu.xxgtalk.cn/blog/images/tools/travis_log.jpg)    \n你也可以从日志里面看到具体的执行过程，等待执行完成后回到github中将会看到里面多了一个gh-pages分支，没错 这个分支就是travis中的deploy推送过去的，里面就是编译后的代码，再回到setting里面，将会看到已经默认配置好站点地址了，这里我们改改 使用自己的域名，如图所示:  \n![](http://qiniu.xxgtalk.cn/blog/images/tools/travis_github_config.jpg) \n最后，去域名管理页，将自己的这个子域名一定一个类型为CNAME的，地址为:wetrial.github.io\n\n#### 结尾  \n访问刚配置的地址:http://ant.xxgtalk.cn 可以看到部署好的文档\n\n![wetrial示例](http://qiniu.xxgtalk.cn/blog/images/tools/wetrial-site.jpg) \n\n> 此外,打算写一篇这块的手册，[地址:https://www.yuque.com/wetrial/front-end/xuyan](https://www.yuque.com/wetrial/front-end/xuyan) 欢迎 [FORK](https://www.yuque.com/wetrial/front-end/xuyan)","source":"_posts/tools/travis.md","raw":"---\ntitle: 使用travis自动部署到github\ndate: 2019-03-16 09:10:15\ncategories: ['工具']\ntags: ['工具']\n---\n\n\n#### 使用github+travis+ant-design-pro-site打造自己公司的前端开发文档站点\n<!-- more -->\n\n#### 开篇\n\n> 插播一条小广告，我们公司招人.net、前端(react栈) ；有求职意向可以私我内推(qq:1002275364)\n\n目前公司的系统是基于.net web mvc开发，由于历史原因吧，里面有razor写的，也有公司自定义的前端单页框架jui写的一部分，在后续的开发、维护过程中愈发困难；基于各方面考虑以最后打算后端基于.netcore；前端基于react+antd+dva+umi栈重构；\n1. 为什么用.net core  \n其实吧，我跟后端是有很大的渊源的，做了好几年后端吧，发现.net后端其实蛮苦逼的，不仅得写后端api还得写前端页面(没办法，你让美工去写razor页面感觉有点过分)，这也是为什么要前后端分离的原因之一(虽然分离之后前端页面还是后端开发人员兼职写^_^)；  \n.net core 天生为了跨平台、高性能、微服务、云而生；作为一个后端黑带6道的我，中小型项目里面玩的还是蛮顺手的(像什么abp、DI、dapper、ef、NPOI、itextsharp、quartznet、CAP、SignalR、Polly、DotnetSpider等还是玩过一些些的，只要别跟我扯什么动不动就双十一的场景，还是可以聊的下去的)  \n其次，.net core生态圈目前虽然不如java等，但是还是可以看到一直在进步；像什么桌面应用、Xamarin、ML.NET、爬虫、Xamarin、区块链、IoT、Unity3D、等都有涉及到;微服务方向，有Ocelot、Consul、Polly 等等等等等等等等等等等等等...  \n2. 为啥用react+antd+dva+umi【+ts】栈\n目前开发人员以后端人员为主力，对jquery栈比较熟悉；切换到react后需要比较大的转变，需要接触很多新知识，比如es6的析构赋值、rest、箭头函数、Generate、Promise、模板字符串;再比如 react的生命周期、redux的数据流等 这些都是新的东西；考虑到各方面，最终打算数据量方案使用dva(简单明了以model为单位集reducers、effects、subscribe等)，至于antd不用过多介绍，业界公认前端ui库\n\n好像有点跑题了~~~~~\n\n#### 工作准备\n1. 注册账号[github](https://github.com)、[travis](https://travis-ci.org)\n2. github上创建仓库(wetrial-site)\n3. github上生成一个token(记得保存下来)，用于travis推送代码到gh-pages分支  \n![生成token](http://qiniu.xxgtalk.cn/blog/images/tools/travis_github_generate_token.jpg) \n记得将tokens保存下来，稍后要用到，仓库权限选择第一项 repo即可  \n4. travis设置  \n点击头像、然后选择项目，默认是用户，如果你的项目是组织项目的，需要切换到组织，如图所示  \n![travis项目选择](http://qiniu.xxgtalk.cn/blog/images/tools/travis_project_list.jpg) \n5. 进入项目配置页面，如图  \n![travis项目选择](http://qiniu.xxgtalk.cn/blog/images/tools/travis_project_setting.jpg) \n添加环境变量相关东西，包括域名、token等\n![配置](http://qiniu.xxgtalk.cn/blog/images/tools/travis_environment.jpg)   \n6. 回到实际的项目\n从ant-design-pro-site拉取代码，然后根据自己的实际情况做修改；比如我去掉了尾栏的一些东西，增加了css相关的大栏(这里不具体介绍)  \n7. 在根目录下添加travis的配置文件.travis.yml 内容如下所示\n``` yml\nlanguage: node_js\n\nnode_js:\n  - \"8\"\n\n# 缓存依赖\ncache:\n  directories:\n    - node_modules\n\nbefore_install:\n  - export TZ='Asia/Shanghai' # 更改时区\n\n# 依赖安装\ninstall:\n  - npm install\n\n# 构建脚本\nscript: \n  - npm run build-site\n\n# 分支白名单\nbranches:\n  only:\n    - master # 只对 master 分支进行构建\n\n# GitHub Pages 部署\ndeploy:\n  - provider: pages\n    skip_cleanup: true\n     # 在项目仪表盘的 Settings -> Environment Variables 中配置\n    github_token: $GITHUB_TOKEN\n    # 将 build 目录下的内容推送到默认的 gh-pages 分支上，并不会连带 build 目录一起\n    local_dir: _site\n    # 绑定自定义域名，根据自己的情况来\n    fqdn: $CUSTOM_DOMAIN\n    name: $GIT_NAME\n    email: $GIT_EMAIL\n```\n然后提交并同步到github,回到travis将会看到如下一幕  \n![配置](http://qiniu.xxgtalk.cn/blog/images/tools/travis_log.jpg)    \n你也可以从日志里面看到具体的执行过程，等待执行完成后回到github中将会看到里面多了一个gh-pages分支，没错 这个分支就是travis中的deploy推送过去的，里面就是编译后的代码，再回到setting里面，将会看到已经默认配置好站点地址了，这里我们改改 使用自己的域名，如图所示:  \n![](http://qiniu.xxgtalk.cn/blog/images/tools/travis_github_config.jpg) \n最后，去域名管理页，将自己的这个子域名一定一个类型为CNAME的，地址为:wetrial.github.io\n\n#### 结尾  \n访问刚配置的地址:http://ant.xxgtalk.cn 可以看到部署好的文档\n\n![wetrial示例](http://qiniu.xxgtalk.cn/blog/images/tools/wetrial-site.jpg) \n\n> 此外,打算写一篇这块的手册，[地址:https://www.yuque.com/wetrial/front-end/xuyan](https://www.yuque.com/wetrial/front-end/xuyan) 欢迎 [FORK](https://www.yuque.com/wetrial/front-end/xuyan)","slug":"tools/travis","published":1,"updated":"2019-03-16T12:24:43.404Z","_id":"cjtawhtg80000d0uknf81oms7","comments":1,"layout":"post","photos":[],"link":"","content":"<h4 id=\"使用github-travis-ant-design-pro-site打造自己公司的前端开发文档站点\"><a href=\"#使用github-travis-ant-design-pro-site打造自己公司的前端开发文档站点\" class=\"headerlink\" title=\"使用github+travis+ant-design-pro-site打造自己公司的前端开发文档站点\"></a>使用github+travis+ant-design-pro-site打造自己公司的前端开发文档站点</h4><a id=\"more\"></a>\n<h4 id=\"开篇\"><a href=\"#开篇\" class=\"headerlink\" title=\"开篇\"></a>开篇</h4><blockquote>\n<p>插播一条小广告，我们公司招人.net、前端(react栈) ；有求职意向可以私我内推(qq:1002275364)</p>\n</blockquote>\n<p>目前公司的系统是基于.net web mvc开发，由于历史原因吧，里面有razor写的，也有公司自定义的前端单页框架jui写的一部分，在后续的开发、维护过程中愈发困难；基于各方面考虑以最后打算后端基于.netcore；前端基于react+antd+dva+umi栈重构；</p>\n<ol>\n<li>为什么用.net core<br>其实吧，我跟后端是有很大的渊源的，做了好几年后端吧，发现.net后端其实蛮苦逼的，不仅得写后端api还得写前端页面(没办法，你让美工去写razor页面感觉有点过分)，这也是为什么要前后端分离的原因之一(虽然分离之后前端页面还是后端开发人员兼职写^_^)；<br>.net core 天生为了跨平台、高性能、微服务、云而生；作为一个后端黑带6道的我，中小型项目里面玩的还是蛮顺手的(像什么abp、DI、dapper、ef、NPOI、itextsharp、quartznet、CAP、SignalR、Polly、DotnetSpider等还是玩过一些些的，只要别跟我扯什么动不动就双十一的场景，还是可以聊的下去的)<br>其次，.net core生态圈目前虽然不如java等，但是还是可以看到一直在进步；像什么桌面应用、Xamarin、ML.NET、爬虫、Xamarin、区块链、IoT、Unity3D、等都有涉及到;微服务方向，有Ocelot、Consul、Polly 等等等等等等等等等等等等等…  </li>\n<li>为啥用react+antd+dva+umi【+ts】栈<br>目前开发人员以后端人员为主力，对jquery栈比较熟悉；切换到react后需要比较大的转变，需要接触很多新知识，比如es6的析构赋值、rest、箭头函数、Generate、Promise、模板字符串;再比如 react的生命周期、redux的数据流等 这些都是新的东西；考虑到各方面，最终打算数据量方案使用dva(简单明了以model为单位集reducers、effects、subscribe等)，至于antd不用过多介绍，业界公认前端ui库</li>\n</ol>\n<p>好像有点跑题了<del>~</del></p>\n<h4 id=\"工作准备\"><a href=\"#工作准备\" class=\"headerlink\" title=\"工作准备\"></a>工作准备</h4><ol>\n<li>注册账号<a href=\"https://github.com\" target=\"_blank\" rel=\"noopener\">github</a>、<a href=\"https://travis-ci.org\" target=\"_blank\" rel=\"noopener\">travis</a></li>\n<li>github上创建仓库(wetrial-site)</li>\n<li>github上生成一个token(记得保存下来)，用于travis推送代码到gh-pages分支<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/travis_github_generate_token.jpg\" alt=\"生成token\"><br>记得将tokens保存下来，稍后要用到，仓库权限选择第一项 repo即可  </li>\n<li>travis设置<br>点击头像、然后选择项目，默认是用户，如果你的项目是组织项目的，需要切换到组织，如图所示<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/travis_project_list.jpg\" alt=\"travis项目选择\"> </li>\n<li>进入项目配置页面，如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/travis_project_setting.jpg\" alt=\"travis项目选择\"><br>添加环境变量相关东西，包括域名、token等<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/travis_environment.jpg\" alt=\"配置\" title=\"\">\n                </div>\n                <div class=\"image-caption\">配置</div>\n            </figure>   </li>\n<li>回到实际的项目<br>从ant-design-pro-site拉取代码，然后根据自己的实际情况做修改；比如我去掉了尾栏的一些东西，增加了css相关的大栏(这里不具体介绍)  </li>\n<li>在根目录下添加travis的配置文件.travis.yml 内容如下所示<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">language:</span> <span class=\"string\">node_js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">node_js:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"8\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 缓存依赖</span></span><br><span class=\"line\"><span class=\"attr\">cache:</span></span><br><span class=\"line\"><span class=\"attr\">  directories:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">node_modules</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">before_install:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">export</span> <span class=\"string\">TZ='Asia/Shanghai'</span> <span class=\"comment\"># 更改时区</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 依赖安装</span></span><br><span class=\"line\"><span class=\"attr\">install:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">npm</span> <span class=\"string\">install</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 构建脚本</span></span><br><span class=\"line\"><span class=\"attr\">script:</span> </span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">npm</span> <span class=\"string\">run</span> <span class=\"string\">build-site</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 分支白名单</span></span><br><span class=\"line\"><span class=\"attr\">branches:</span></span><br><span class=\"line\"><span class=\"attr\">  only:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">master</span> <span class=\"comment\"># 只对 master 分支进行构建</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># GitHub Pages 部署</span></span><br><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\"><span class=\"attr\">  - provider:</span> <span class=\"string\">pages</span></span><br><span class=\"line\"><span class=\"attr\">    skip_cleanup:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">     <span class=\"comment\"># 在项目仪表盘的 Settings -&gt; Environment Variables 中配置</span></span><br><span class=\"line\"><span class=\"attr\">    github_token:</span> <span class=\"string\">$GITHUB_TOKEN</span></span><br><span class=\"line\">    <span class=\"comment\"># 将 build 目录下的内容推送到默认的 gh-pages 分支上，并不会连带 build 目录一起</span></span><br><span class=\"line\"><span class=\"attr\">    local_dir:</span> <span class=\"string\">_site</span></span><br><span class=\"line\">    <span class=\"comment\"># 绑定自定义域名，根据自己的情况来</span></span><br><span class=\"line\"><span class=\"attr\">    fqdn:</span> <span class=\"string\">$CUSTOM_DOMAIN</span></span><br><span class=\"line\"><span class=\"attr\">    name:</span> <span class=\"string\">$GIT_NAME</span></span><br><span class=\"line\"><span class=\"attr\">    email:</span> <span class=\"string\">$GIT_EMAIL</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>然后提交并同步到github,回到travis将会看到如下一幕<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/travis_log.jpg\" alt=\"配置\"><br>你也可以从日志里面看到具体的执行过程，等待执行完成后回到github中将会看到里面多了一个gh-pages分支，没错 这个分支就是travis中的deploy推送过去的，里面就是编译后的代码，再回到setting里面，将会看到已经默认配置好站点地址了，这里我们改改 使用自己的域名，如图所示:<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/travis_github_config.jpg\" alt=\"\"><br>最后，去域名管理页，将自己的这个子域名一定一个类型为CNAME的，地址为:wetrial.github.io</p>\n<h4 id=\"结尾\"><a href=\"#结尾\" class=\"headerlink\" title=\"结尾\"></a>结尾</h4><p>访问刚配置的地址:<a href=\"http://ant.xxgtalk.cn\" target=\"_blank\" rel=\"noopener\">http://ant.xxgtalk.cn</a> 可以看到部署好的文档</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/wetrial-site.jpg\" alt=\"wetrial示例\" title=\"\">\n                </div>\n                <div class=\"image-caption\">wetrial示例</div>\n            </figure> \n<blockquote>\n<p>此外,打算写一篇这块的手册，<a href=\"https://www.yuque.com/wetrial/front-end/xuyan\" target=\"_blank\" rel=\"noopener\">地址:https://www.yuque.com/wetrial/front-end/xuyan</a> 欢迎 <a href=\"https://www.yuque.com/wetrial/front-end/xuyan\" target=\"_blank\" rel=\"noopener\">FORK</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<h4 id=\"使用github-travis-ant-design-pro-site打造自己公司的前端开发文档站点\"><a href=\"#使用github-travis-ant-design-pro-site打造自己公司的前端开发文档站点\" class=\"headerlink\" title=\"使用github+travis+ant-design-pro-site打造自己公司的前端开发文档站点\"></a>使用github+travis+ant-design-pro-site打造自己公司的前端开发文档站点</h4>","more":"<h4 id=\"开篇\"><a href=\"#开篇\" class=\"headerlink\" title=\"开篇\"></a>开篇</h4><blockquote>\n<p>插播一条小广告，我们公司招人.net、前端(react栈) ；有求职意向可以私我内推(qq:1002275364)</p>\n</blockquote>\n<p>目前公司的系统是基于.net web mvc开发，由于历史原因吧，里面有razor写的，也有公司自定义的前端单页框架jui写的一部分，在后续的开发、维护过程中愈发困难；基于各方面考虑以最后打算后端基于.netcore；前端基于react+antd+dva+umi栈重构；</p>\n<ol>\n<li>为什么用.net core<br>其实吧，我跟后端是有很大的渊源的，做了好几年后端吧，发现.net后端其实蛮苦逼的，不仅得写后端api还得写前端页面(没办法，你让美工去写razor页面感觉有点过分)，这也是为什么要前后端分离的原因之一(虽然分离之后前端页面还是后端开发人员兼职写^_^)；<br>.net core 天生为了跨平台、高性能、微服务、云而生；作为一个后端黑带6道的我，中小型项目里面玩的还是蛮顺手的(像什么abp、DI、dapper、ef、NPOI、itextsharp、quartznet、CAP、SignalR、Polly、DotnetSpider等还是玩过一些些的，只要别跟我扯什么动不动就双十一的场景，还是可以聊的下去的)<br>其次，.net core生态圈目前虽然不如java等，但是还是可以看到一直在进步；像什么桌面应用、Xamarin、ML.NET、爬虫、Xamarin、区块链、IoT、Unity3D、等都有涉及到;微服务方向，有Ocelot、Consul、Polly 等等等等等等等等等等等等等…  </li>\n<li>为啥用react+antd+dva+umi【+ts】栈<br>目前开发人员以后端人员为主力，对jquery栈比较熟悉；切换到react后需要比较大的转变，需要接触很多新知识，比如es6的析构赋值、rest、箭头函数、Generate、Promise、模板字符串;再比如 react的生命周期、redux的数据流等 这些都是新的东西；考虑到各方面，最终打算数据量方案使用dva(简单明了以model为单位集reducers、effects、subscribe等)，至于antd不用过多介绍，业界公认前端ui库</li>\n</ol>\n<p>好像有点跑题了<del>~</del></p>\n<h4 id=\"工作准备\"><a href=\"#工作准备\" class=\"headerlink\" title=\"工作准备\"></a>工作准备</h4><ol>\n<li>注册账号<a href=\"https://github.com\" target=\"_blank\" rel=\"noopener\">github</a>、<a href=\"https://travis-ci.org\" target=\"_blank\" rel=\"noopener\">travis</a></li>\n<li>github上创建仓库(wetrial-site)</li>\n<li>github上生成一个token(记得保存下来)，用于travis推送代码到gh-pages分支<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/travis_github_generate_token.jpg\" alt=\"生成token\"><br>记得将tokens保存下来，稍后要用到，仓库权限选择第一项 repo即可  </li>\n<li>travis设置<br>点击头像、然后选择项目，默认是用户，如果你的项目是组织项目的，需要切换到组织，如图所示<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/travis_project_list.jpg\" alt=\"travis项目选择\"> </li>\n<li>进入项目配置页面，如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/travis_project_setting.jpg\" alt=\"travis项目选择\"><br>添加环境变量相关东西，包括域名、token等<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/travis_environment.jpg\" alt=\"配置\" title=\"\">\n                </div>\n                <div class=\"image-caption\">配置</div>\n            </figure>   </li>\n<li>回到实际的项目<br>从ant-design-pro-site拉取代码，然后根据自己的实际情况做修改；比如我去掉了尾栏的一些东西，增加了css相关的大栏(这里不具体介绍)  </li>\n<li>在根目录下添加travis的配置文件.travis.yml 内容如下所示<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">language:</span> <span class=\"string\">node_js</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">node_js:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">\"8\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 缓存依赖</span></span><br><span class=\"line\"><span class=\"attr\">cache:</span></span><br><span class=\"line\"><span class=\"attr\">  directories:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">node_modules</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">before_install:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">export</span> <span class=\"string\">TZ='Asia/Shanghai'</span> <span class=\"comment\"># 更改时区</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 依赖安装</span></span><br><span class=\"line\"><span class=\"attr\">install:</span></span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">npm</span> <span class=\"string\">install</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 构建脚本</span></span><br><span class=\"line\"><span class=\"attr\">script:</span> </span><br><span class=\"line\"><span class=\"bullet\">  -</span> <span class=\"string\">npm</span> <span class=\"string\">run</span> <span class=\"string\">build-site</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 分支白名单</span></span><br><span class=\"line\"><span class=\"attr\">branches:</span></span><br><span class=\"line\"><span class=\"attr\">  only:</span></span><br><span class=\"line\"><span class=\"bullet\">    -</span> <span class=\"string\">master</span> <span class=\"comment\"># 只对 master 分支进行构建</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># GitHub Pages 部署</span></span><br><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\"><span class=\"attr\">  - provider:</span> <span class=\"string\">pages</span></span><br><span class=\"line\"><span class=\"attr\">    skip_cleanup:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">     <span class=\"comment\"># 在项目仪表盘的 Settings -&gt; Environment Variables 中配置</span></span><br><span class=\"line\"><span class=\"attr\">    github_token:</span> <span class=\"string\">$GITHUB_TOKEN</span></span><br><span class=\"line\">    <span class=\"comment\"># 将 build 目录下的内容推送到默认的 gh-pages 分支上，并不会连带 build 目录一起</span></span><br><span class=\"line\"><span class=\"attr\">    local_dir:</span> <span class=\"string\">_site</span></span><br><span class=\"line\">    <span class=\"comment\"># 绑定自定义域名，根据自己的情况来</span></span><br><span class=\"line\"><span class=\"attr\">    fqdn:</span> <span class=\"string\">$CUSTOM_DOMAIN</span></span><br><span class=\"line\"><span class=\"attr\">    name:</span> <span class=\"string\">$GIT_NAME</span></span><br><span class=\"line\"><span class=\"attr\">    email:</span> <span class=\"string\">$GIT_EMAIL</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>然后提交并同步到github,回到travis将会看到如下一幕<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/travis_log.jpg\" alt=\"配置\"><br>你也可以从日志里面看到具体的执行过程，等待执行完成后回到github中将会看到里面多了一个gh-pages分支，没错 这个分支就是travis中的deploy推送过去的，里面就是编译后的代码，再回到setting里面，将会看到已经默认配置好站点地址了，这里我们改改 使用自己的域名，如图所示:<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/travis_github_config.jpg\" alt=\"\"><br>最后，去域名管理页，将自己的这个子域名一定一个类型为CNAME的，地址为:wetrial.github.io</p>\n<h4 id=\"结尾\"><a href=\"#结尾\" class=\"headerlink\" title=\"结尾\"></a>结尾</h4><p>访问刚配置的地址:<a href=\"http://ant.xxgtalk.cn\" target=\"_blank\" rel=\"noopener\">http://ant.xxgtalk.cn</a> 可以看到部署好的文档</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"http://qiniu.xxgtalk.cn/blog/images/tools/wetrial-site.jpg\" alt=\"wetrial示例\" title=\"\">\n                </div>\n                <div class=\"image-caption\">wetrial示例</div>\n            </figure> \n<blockquote>\n<p>此外,打算写一篇这块的手册，<a href=\"https://www.yuque.com/wetrial/front-end/xuyan\" target=\"_blank\" rel=\"noopener\">地址:https://www.yuque.com/wetrial/front-end/xuyan</a> 欢迎 <a href=\"https://www.yuque.com/wetrial/front-end/xuyan\" target=\"_blank\" rel=\"noopener\">FORK</a></p>\n</blockquote>"},{"title":"优质文章收集(持续更新中...)","abbrlink":28144,"date":"2019-04-26T01:10:10.000Z","_content":"\n各大优质文章收集(持续更新中...)\n<!-- more -->\n\n\n#### 前端 \n[可能是最全的前端动效库汇总](https://juejin.im/post/5cc089eae51d456e7d189f9d)\n\n[常用前端库](https://github.com/sorrycc/awesome-f2e-libs)\n\n[awesome-tools](https://github.com/sorrycc/awesome-tools)\n\n[前端工程化-5:你所需要的npm知识储备都在这了](https://juejin.im/post/5d08d3d3f265da1b7e103a4d?utm_source=gold_browser_extension)\n\n[正则相关](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)\n\n[flex布局-语法篇](http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html)、[flex布局-实战篇](http://www.ruanyifeng.com/blog/2015/07/flex-examples.html)  \n[ES6](https://juejin.im/post/5d9bf530518825427b27639d)\n\n\n#### Chrome插件开发\n[chrome插件开发](https://github.com/sxei/chrome-plugin-demo)\n\n[博客文章](http://www.cnblogs.com/champagne/p/?page=2)\n\n[官方资料](https://zjcqoo.github.io/-----https://developer.chrome.com/extensions)\n\n#### 其他\nNAS 私有文件服务器","source":"_posts/tools/articleCollections.md","raw":"---\ntitle: 优质文章收集(持续更新中...)\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 28144\ndate: 2019-04-26 09:10:10\n---\n\n各大优质文章收集(持续更新中...)\n<!-- more -->\n\n\n#### 前端 \n[可能是最全的前端动效库汇总](https://juejin.im/post/5cc089eae51d456e7d189f9d)\n\n[常用前端库](https://github.com/sorrycc/awesome-f2e-libs)\n\n[awesome-tools](https://github.com/sorrycc/awesome-tools)\n\n[前端工程化-5:你所需要的npm知识储备都在这了](https://juejin.im/post/5d08d3d3f265da1b7e103a4d?utm_source=gold_browser_extension)\n\n[正则相关](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)\n\n[flex布局-语法篇](http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html)、[flex布局-实战篇](http://www.ruanyifeng.com/blog/2015/07/flex-examples.html)  \n[ES6](https://juejin.im/post/5d9bf530518825427b27639d)\n\n\n#### Chrome插件开发\n[chrome插件开发](https://github.com/sxei/chrome-plugin-demo)\n\n[博客文章](http://www.cnblogs.com/champagne/p/?page=2)\n\n[官方资料](https://zjcqoo.github.io/-----https://developer.chrome.com/extensions)\n\n#### 其他\nNAS 私有文件服务器","slug":"tools/articleCollections","published":1,"updated":"2020-02-23T13:45:22.719Z","_id":"cjvx3v8ho0000ykv854cq1kcc","comments":1,"layout":"post","photos":[],"link":"","content":"<p>各大优质文章收集(持续更新中…)<br><a id=\"more\"></a></p>\n<h4 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h4><p><a href=\"https://juejin.im/post/5cc089eae51d456e7d189f9d\">可能是最全的前端动效库汇总</a></p>\n<p><a href=\"https://github.com/sorrycc/awesome-f2e-libs\">常用前端库</a></p>\n<p><a href=\"https://github.com/sorrycc/awesome-tools\">awesome-tools</a></p>\n<p><a href=\"https://juejin.im/post/5d08d3d3f265da1b7e103a4d?utm_source=gold_browser_extension\">前端工程化-5:你所需要的npm知识储备都在这了</a></p>\n<p><a href=\"https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md\">正则相关</a></p>\n<p><a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html\">flex布局-语法篇</a>、<a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-examples.html\">flex布局-实战篇</a><br><a href=\"https://juejin.im/post/5d9bf530518825427b27639d\">ES6</a></p>\n<h4 id=\"Chrome插件开发\"><a href=\"#Chrome插件开发\" class=\"headerlink\" title=\"Chrome插件开发\"></a>Chrome插件开发</h4><p><a href=\"https://github.com/sxei/chrome-plugin-demo\">chrome插件开发</a></p>\n<p><a href=\"http://www.cnblogs.com/champagne/p/?page=2\">博客文章</a></p>\n<p><a href=\"https://zjcqoo.github.io/-----https://developer.chrome.com/extensions\">官方资料</a></p>\n<h4 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h4><p>NAS 私有文件服务器</p>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>各大优质文章收集(持续更新中…)<br>","more":"</p>\n<h4 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h4><p><a href=\"https://juejin.im/post/5cc089eae51d456e7d189f9d\">可能是最全的前端动效库汇总</a></p>\n<p><a href=\"https://github.com/sorrycc/awesome-f2e-libs\">常用前端库</a></p>\n<p><a href=\"https://github.com/sorrycc/awesome-tools\">awesome-tools</a></p>\n<p><a href=\"https://juejin.im/post/5d08d3d3f265da1b7e103a4d?utm_source=gold_browser_extension\">前端工程化-5:你所需要的npm知识储备都在这了</a></p>\n<p><a href=\"https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md\">正则相关</a></p>\n<p><a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html\">flex布局-语法篇</a>、<a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-examples.html\">flex布局-实战篇</a><br><a href=\"https://juejin.im/post/5d9bf530518825427b27639d\">ES6</a></p>\n<h4 id=\"Chrome插件开发\"><a href=\"#Chrome插件开发\" class=\"headerlink\" title=\"Chrome插件开发\"></a>Chrome插件开发</h4><p><a href=\"https://github.com/sxei/chrome-plugin-demo\">chrome插件开发</a></p>\n<p><a href=\"http://www.cnblogs.com/champagne/p/?page=2\">博客文章</a></p>\n<p><a href=\"https://zjcqoo.github.io/-----https://developer.chrome.com/extensions\">官方资料</a></p>\n<h4 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h4><p>NAS 私有文件服务器</p>"},{"title":"使用umi-library来打包组件","abbrlink":53720,"date":"2019-04-02T13:35:10.000Z","_content":"\n通过umi-library将自己的组件打包成各种类型的包...\n<!-- more -->\n\n# 文件格式说明 \n### esm 用途\nes6语法格式(也叫AMD)，主要用在浏览器中 export default ...；可以做 tree-shaking(打包成一个文件，但是项目中使用时只引入需要的那一部分) \n### cjs 用途\nes5的语法(也叫CommonJS)，目前主要给node用； module.exports=...\n### umd 用途\n兼容esm和cjs，先判断是否支持node模块module.exports\n\n# 步骤  \n1. 安装umi-library  \n    ``` node\n    yarn add umi-library -D\n    ```\n2. 配置.umirc.library.js文件\n    ``` js\n    export default {\n    // 使用babel方式打包 将按照源代码的文件目录进行打包，默认为rollup方式(将文件合并成一个)\n    esm: 'babel', \n    cjs: 'babel',\n    autoprefixer: {\n        browsers: ['ie>8', 'Safari >= 6'],\n    },\n    extraBabelPlugins: [\n        [\n        'babel-plugin-import',\n        {\n            libraryName: 'antd',\n            libraryDirectory: 'es',\n            style: true,\n        },\n        ],\n    ],\n    };\n    ```\n3. 执行打包\n可以参考github项目 https://github.com/wetrial/wetrial\n\n> umi-library[地址](https://github.com/umijs/umi/tree/master/packages/umi-library)","source":"_posts/front/react/umi-library-self.md","raw":"---\ntitle: 使用umi-library来打包组件\ncategories:\n  - React\ntags:\n  - 前端\n  - React\n  - umi\nabbrlink: 53720\ndate: 2019-04-02 21:35:10\n---\n\n通过umi-library将自己的组件打包成各种类型的包...\n<!-- more -->\n\n# 文件格式说明 \n### esm 用途\nes6语法格式(也叫AMD)，主要用在浏览器中 export default ...；可以做 tree-shaking(打包成一个文件，但是项目中使用时只引入需要的那一部分) \n### cjs 用途\nes5的语法(也叫CommonJS)，目前主要给node用； module.exports=...\n### umd 用途\n兼容esm和cjs，先判断是否支持node模块module.exports\n\n# 步骤  \n1. 安装umi-library  \n    ``` node\n    yarn add umi-library -D\n    ```\n2. 配置.umirc.library.js文件\n    ``` js\n    export default {\n    // 使用babel方式打包 将按照源代码的文件目录进行打包，默认为rollup方式(将文件合并成一个)\n    esm: 'babel', \n    cjs: 'babel',\n    autoprefixer: {\n        browsers: ['ie>8', 'Safari >= 6'],\n    },\n    extraBabelPlugins: [\n        [\n        'babel-plugin-import',\n        {\n            libraryName: 'antd',\n            libraryDirectory: 'es',\n            style: true,\n        },\n        ],\n    ],\n    };\n    ```\n3. 执行打包\n可以参考github项目 https://github.com/wetrial/wetrial\n\n> umi-library[地址](https://github.com/umijs/umi/tree/master/packages/umi-library)","slug":"front/react/umi-library-self","published":1,"updated":"2020-12-25T13:52:24.295Z","_id":"cjvx3v8jb0003ykv8z1w8reu9","comments":1,"layout":"post","photos":[],"link":"","content":"<p>通过umi-library将自己的组件打包成各种类型的包…</p>\n<a id=\"more\"></a>\n\n<h1 id=\"文件格式说明\"><a href=\"#文件格式说明\" class=\"headerlink\" title=\"文件格式说明\"></a>文件格式说明</h1><h3 id=\"esm-用途\"><a href=\"#esm-用途\" class=\"headerlink\" title=\"esm 用途\"></a>esm 用途</h3><p>es6语法格式(也叫AMD)，主要用在浏览器中 export default …；可以做 tree-shaking(打包成一个文件，但是项目中使用时只引入需要的那一部分) </p>\n<h3 id=\"cjs-用途\"><a href=\"#cjs-用途\" class=\"headerlink\" title=\"cjs 用途\"></a>cjs 用途</h3><p>es5的语法(也叫CommonJS)，目前主要给node用； module.exports=…</p>\n<h3 id=\"umd-用途\"><a href=\"#umd-用途\" class=\"headerlink\" title=\"umd 用途\"></a>umd 用途</h3><p>兼容esm和cjs，先判断是否支持node模块module.exports</p>\n<h1 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h1><ol>\n<li>安装umi-library  <pre class=\" language-node\"><code class=\"language-node\">yarn add umi-library -D</code></pre>\n</li>\n<li>配置.umirc.library.js文件<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\" spellcheck=\"true\">// 使用babel方式打包 将按照源代码的文件目录进行打包，默认为rollup方式(将文件合并成一个)</span>\nesm<span class=\"token punctuation\">:</span> <span class=\"token string\">'babel'</span><span class=\"token punctuation\">,</span> \ncjs<span class=\"token punctuation\">:</span> <span class=\"token string\">'babel'</span><span class=\"token punctuation\">,</span>\nautoprefixer<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    browsers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ie>8'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Safari >= 6'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>\nextraBabelPlugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'babel-plugin-import'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n        libraryName<span class=\"token punctuation\">:</span> <span class=\"token string\">'antd'</span><span class=\"token punctuation\">,</span>\n        libraryDirectory<span class=\"token punctuation\">:</span> <span class=\"token string\">'es'</span><span class=\"token punctuation\">,</span>\n        style<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></code></pre>\n</li>\n<li>执行打包<br>可以参考github项目 <a href=\"https://github.com/wetrial/wetrial\">https://github.com/wetrial/wetrial</a></li>\n</ol>\n<blockquote>\n<p>umi-library<a href=\"https://github.com/umijs/umi/tree/master/packages/umi-library\">地址</a></p>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>通过umi-library将自己的组件打包成各种类型的包…</p>","more":"<h1 id=\"文件格式说明\"><a href=\"#文件格式说明\" class=\"headerlink\" title=\"文件格式说明\"></a>文件格式说明</h1><h3 id=\"esm-用途\"><a href=\"#esm-用途\" class=\"headerlink\" title=\"esm 用途\"></a>esm 用途</h3><p>es6语法格式(也叫AMD)，主要用在浏览器中 export default …；可以做 tree-shaking(打包成一个文件，但是项目中使用时只引入需要的那一部分) </p>\n<h3 id=\"cjs-用途\"><a href=\"#cjs-用途\" class=\"headerlink\" title=\"cjs 用途\"></a>cjs 用途</h3><p>es5的语法(也叫CommonJS)，目前主要给node用； module.exports=…</p>\n<h3 id=\"umd-用途\"><a href=\"#umd-用途\" class=\"headerlink\" title=\"umd 用途\"></a>umd 用途</h3><p>兼容esm和cjs，先判断是否支持node模块module.exports</p>\n<h1 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h1><ol>\n<li>安装umi-library  <pre><code class=\"node\">yarn add umi-library -D</code></pre>\n</li>\n<li>配置.umirc.library.js文件<pre><code class=\"js\">export default &#123;\n// 使用babel方式打包 将按照源代码的文件目录进行打包，默认为rollup方式(将文件合并成一个)\nesm: &#39;babel&#39;, \ncjs: &#39;babel&#39;,\nautoprefixer: &#123;\n    browsers: [&#39;ie&gt;8&#39;, &#39;Safari &gt;= 6&#39;],\n&#125;,\nextraBabelPlugins: [\n    [\n    &#39;babel-plugin-import&#39;,\n    &#123;\n        libraryName: &#39;antd&#39;,\n        libraryDirectory: &#39;es&#39;,\n        style: true,\n    &#125;,\n    ],\n],\n&#125;;</code></pre>\n</li>\n<li>执行打包<br>可以参考github项目 <a href=\"https://github.com/wetrial/wetrial\">https://github.com/wetrial/wetrial</a></li>\n</ol>\n<blockquote>\n<p>umi-library<a href=\"https://github.com/umijs/umi/tree/master/packages/umi-library\">地址</a></p>\n</blockquote>"},{"title":"DIY一个集搜索、排序、分页功能的列表组件","abbrlink":22484,"date":"2019-05-22T12:10:10.000Z","_content":"\nDIY一个集搜索、排序、分页功能的列表组件\n<!-- more -->\n\n[源码地址](https://github.com/wetrial/wetrial-template): [https://github.com/wetrial/wetrial-template](https://github.com/wetrial/wetrial-template)<br />效果<br />![test.gif](https://cdn.nlark.com/yuque/0/2019/gif/173421/1558523693173-c0265a6e-5263-4317-bf76-99b17c86ec1c.gif#align=left&display=inline&height=513&name=test.gif&originHeight=1508&originWidth=2193&size=4252316&status=done&width=746)\n<a name=\"UKzZ5\"></a>\n# 背景\n在中控台系统中经常需要带条件过滤、分页、排序等的列表页面，antd提供了表格、排序、分页等，多个页面中使用会发现里面其实有很多重复的代码，自己捣腾下最后有了这个组件，\n<a name=\"pfCYQ\"></a>\n# 使用说明\n<a name=\"7qJ13\"></a>\n## 列表使用\n如图所示:<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/173421/1558524295889-fe6fce9b-1d53-4849-898c-39a7decf52ec.png#align=left&display=inline&height=1323&name=image.png&originHeight=1985&originWidth=2000&size=270488&status=done&width=1333.3333333333333)\n\n1. 引入高阶组件pagedQuery\n1. 引入封装的TableList 基本上跟Antd table组件用法一致，只是初始化了许多默认参数\n1. 用高阶组件包裹组件，并传参\n```jsx\n// type为必须参数，一般对应dva中model的effects\n{\n  type: string; // 类型 一般指获取数据源的action\n  page?: number; // 当前页 从1开始\n  defaultPageSize?:number; // 每页默认显示的条数\n  pageSize?: number; // 每页显示数量\n  record?: boolean; // 是否记录搜索状态\n}\n```\n\n4. 请求附带的基础参数，通过_getQueryParams返回一个对象，用于一些特殊场景，一般为空_\n4. 处理搜索按钮的点击事件，将搜索表单中的值收集并传递给onSearchData方法\n4. 处理重置按钮，将重置按钮的点击事件绑定来源于高阶组件给组件的onResetData\n4. 获取数据源并给到table\n<a name=\"AiF39\"></a>\n## 详情页面\n回退到列表页面有两种形式，<br />1.通过浏览器上的回退按钮<br />2.详情页面放置一个回退按钮，代码层面实现路由跳转到列表页<br />一般情况都使用第二种方式，因为如果编辑页面比较负责，可能里面有子页面，子页面又可以进入这一通过浏览器上的回退按钮需要点击N多次，再者，浏览器的回退有数量限制<br />同样，如图所示：<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/173421/1558524894480-261376dd-c130-40e0-b993-23812add160f.png#align=left&display=inline&height=877&name=image.png&originHeight=1316&originWidth=1714&size=188537&status=done&width=1142.6666666666667)\n\n1. 引入方法backRouter\n1. 在需要跳转路由的地方调用一下backRoute方法，并将路由传递给方法，该方法会返回之前记录的列表路由\n<a name=\"VNgB5\"></a>\n# 思路\n\n实现思路，通过高阶组件实现，[代码](https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.tsx)  、  [api文档](https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.zh-CN.md)  <br />记录搜索状态，通过sessionStorage来实现，考虑到sessionStore的一个优势，关闭当前tab页就失效了 省去还得去手动清除记录状态的麻烦(比如放到localStorage)，再者 这种查询状态不需要持久记录  <br />回退方法backRouter，由于高阶组件中会在组件的componentWillUnmount方法中记录搜索状态，以location的pathname为key，以location的search为值存放，所以通过backRouter方法匹配的时候会从sessionStorage中查询，如果有则带上查询串，以此来达到记录页面状态的效果\n\n> 更多请参观：[https://www.yuque.com/wetrial/front-end/](https://www.yuque.com/wetrial/front-end/)","source":"_posts/front/react/diy-component-pagedquery.md","raw":"---\ntitle: DIY一个集搜索、排序、分页功能的列表组件\ncategories:\n  - React\ntags:\n  - 前端\n  - React\nabbrlink: 22484\ndate: 2019-05-22 20:10:10\n---\n\nDIY一个集搜索、排序、分页功能的列表组件\n<!-- more -->\n\n[源码地址](https://github.com/wetrial/wetrial-template): [https://github.com/wetrial/wetrial-template](https://github.com/wetrial/wetrial-template)<br />效果<br />![test.gif](https://cdn.nlark.com/yuque/0/2019/gif/173421/1558523693173-c0265a6e-5263-4317-bf76-99b17c86ec1c.gif#align=left&display=inline&height=513&name=test.gif&originHeight=1508&originWidth=2193&size=4252316&status=done&width=746)\n<a name=\"UKzZ5\"></a>\n# 背景\n在中控台系统中经常需要带条件过滤、分页、排序等的列表页面，antd提供了表格、排序、分页等，多个页面中使用会发现里面其实有很多重复的代码，自己捣腾下最后有了这个组件，\n<a name=\"pfCYQ\"></a>\n# 使用说明\n<a name=\"7qJ13\"></a>\n## 列表使用\n如图所示:<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/173421/1558524295889-fe6fce9b-1d53-4849-898c-39a7decf52ec.png#align=left&display=inline&height=1323&name=image.png&originHeight=1985&originWidth=2000&size=270488&status=done&width=1333.3333333333333)\n\n1. 引入高阶组件pagedQuery\n1. 引入封装的TableList 基本上跟Antd table组件用法一致，只是初始化了许多默认参数\n1. 用高阶组件包裹组件，并传参\n```jsx\n// type为必须参数，一般对应dva中model的effects\n{\n  type: string; // 类型 一般指获取数据源的action\n  page?: number; // 当前页 从1开始\n  defaultPageSize?:number; // 每页默认显示的条数\n  pageSize?: number; // 每页显示数量\n  record?: boolean; // 是否记录搜索状态\n}\n```\n\n4. 请求附带的基础参数，通过_getQueryParams返回一个对象，用于一些特殊场景，一般为空_\n4. 处理搜索按钮的点击事件，将搜索表单中的值收集并传递给onSearchData方法\n4. 处理重置按钮，将重置按钮的点击事件绑定来源于高阶组件给组件的onResetData\n4. 获取数据源并给到table\n<a name=\"AiF39\"></a>\n## 详情页面\n回退到列表页面有两种形式，<br />1.通过浏览器上的回退按钮<br />2.详情页面放置一个回退按钮，代码层面实现路由跳转到列表页<br />一般情况都使用第二种方式，因为如果编辑页面比较负责，可能里面有子页面，子页面又可以进入这一通过浏览器上的回退按钮需要点击N多次，再者，浏览器的回退有数量限制<br />同样，如图所示：<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/173421/1558524894480-261376dd-c130-40e0-b993-23812add160f.png#align=left&display=inline&height=877&name=image.png&originHeight=1316&originWidth=1714&size=188537&status=done&width=1142.6666666666667)\n\n1. 引入方法backRouter\n1. 在需要跳转路由的地方调用一下backRoute方法，并将路由传递给方法，该方法会返回之前记录的列表路由\n<a name=\"VNgB5\"></a>\n# 思路\n\n实现思路，通过高阶组件实现，[代码](https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.tsx)  、  [api文档](https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.zh-CN.md)  <br />记录搜索状态，通过sessionStorage来实现，考虑到sessionStore的一个优势，关闭当前tab页就失效了 省去还得去手动清除记录状态的麻烦(比如放到localStorage)，再者 这种查询状态不需要持久记录  <br />回退方法backRouter，由于高阶组件中会在组件的componentWillUnmount方法中记录搜索状态，以location的pathname为key，以location的search为值存放，所以通过backRouter方法匹配的时候会从sessionStorage中查询，如果有则带上查询串，以此来达到记录页面状态的效果\n\n> 更多请参观：[https://www.yuque.com/wetrial/front-end/](https://www.yuque.com/wetrial/front-end/)","slug":"front/react/diy-component-pagedquery","published":1,"updated":"2020-12-25T13:52:21.363Z","_id":"cjvz6b6900000ugukc4ebw27x","comments":1,"layout":"post","photos":[],"link":"","content":"<p>DIY一个集搜索、排序、分页功能的列表组件</p>\n<a id=\"more\"></a>\n\n<p><a href=\"https://github.com/wetrial/wetrial-template\">源码地址</a>: <a href=\"https://github.com/wetrial/wetrial-template\">https://github.com/wetrial/wetrial-template</a><br />效果<br /><img src=\"https://cdn.nlark.com/yuque/0/2019/gif/173421/1558523693173-c0265a6e-5263-4317-bf76-99b17c86ec1c.gif#align=left&display=inline&height=513&name=test.gif&originHeight=1508&originWidth=2193&size=4252316&status=done&width=746\" alt=\"test.gif\"><br><a name=\"UKzZ5\"></a></p>\n<h1 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h1><p>在中控台系统中经常需要带条件过滤、分页、排序等的列表页面，antd提供了表格、排序、分页等，多个页面中使用会发现里面其实有很多重复的代码，自己捣腾下最后有了这个组件，<br><a name=\"pfCYQ\"></a></p>\n<h1 id=\"使用说明\"><a href=\"#使用说明\" class=\"headerlink\" title=\"使用说明\"></a>使用说明</h1><p><a name=\"7qJ13\"></a></p>\n<h2 id=\"列表使用\"><a href=\"#列表使用\" class=\"headerlink\" title=\"列表使用\"></a>列表使用</h2><p>如图所示:<br /><img src=\"https://cdn.nlark.com/yuque/0/2019/png/173421/1558524295889-fe6fce9b-1d53-4849-898c-39a7decf52ec.png#align=left&display=inline&height=1323&name=image.png&originHeight=1985&originWidth=2000&size=270488&status=done&width=1333.3333333333333\" alt=\"image.png\"></p>\n<ol>\n<li><p>引入高阶组件pagedQuery</p>\n</li>\n<li><p>引入封装的TableList 基本上跟Antd table组件用法一致，只是初始化了许多默认参数</p>\n</li>\n<li><p>用高阶组件包裹组件，并传参</p>\n<pre class=\" language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\" spellcheck=\"true\">// type为必须参数，一般对应dva中model的effects</span>\n<span class=\"token entity\" title=\"&#123;\">&amp;#123;</span>\ntype<span class=\"token punctuation\">:</span> string<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// 类型 一般指获取数据源的action</span>\npage<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> number<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// 当前页 从1开始</span>\ndefaultPageSize<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span>number<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// 每页默认显示的条数</span>\npageSize<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> number<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// 每页显示数量</span>\nrecord<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> boolean<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// 是否记录搜索状态</span>\n<span class=\"token entity\" title=\"&#125;\">&amp;#125;</span></code></pre>\n</li>\n<li><p>请求附带的基础参数，通过<em>getQueryParams返回一个对象，用于一些特殊场景，一般为空</em></p>\n</li>\n<li><p>处理搜索按钮的点击事件，将搜索表单中的值收集并传递给onSearchData方法</p>\n</li>\n<li><p>处理重置按钮，将重置按钮的点击事件绑定来源于高阶组件给组件的onResetData</p>\n</li>\n<li><p>获取数据源并给到table<br><a name=\"AiF39\"></a></p>\n<h2 id=\"详情页面\"><a href=\"#详情页面\" class=\"headerlink\" title=\"详情页面\"></a>详情页面</h2><p>回退到列表页面有两种形式，<br />1.通过浏览器上的回退按钮<br />2.详情页面放置一个回退按钮，代码层面实现路由跳转到列表页<br />一般情况都使用第二种方式，因为如果编辑页面比较负责，可能里面有子页面，子页面又可以进入这一通过浏览器上的回退按钮需要点击N多次，再者，浏览器的回退有数量限制<br />同样，如图所示：<br /><img src=\"https://cdn.nlark.com/yuque/0/2019/png/173421/1558524894480-261376dd-c130-40e0-b993-23812add160f.png#align=left&display=inline&height=877&name=image.png&originHeight=1316&originWidth=1714&size=188537&status=done&width=1142.6666666666667\" alt=\"image.png\"></p>\n</li>\n<li><p>引入方法backRouter</p>\n</li>\n<li><p>在需要跳转路由的地方调用一下backRoute方法，并将路由传递给方法，该方法会返回之前记录的列表路由<br><a name=\"VNgB5\"></a></p>\n<h1 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h1></li>\n</ol>\n<p>实现思路，通过高阶组件实现，<a href=\"https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.tsx\">代码</a>  、  <a href=\"https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.zh-CN.md\">api文档</a>  <br />记录搜索状态，通过sessionStorage来实现，考虑到sessionStore的一个优势，关闭当前tab页就失效了 省去还得去手动清除记录状态的麻烦(比如放到localStorage)，再者 这种查询状态不需要持久记录  <br />回退方法backRouter，由于高阶组件中会在组件的componentWillUnmount方法中记录搜索状态，以location的pathname为key，以location的search为值存放，所以通过backRouter方法匹配的时候会从sessionStorage中查询，如果有则带上查询串，以此来达到记录页面状态的效果</p>\n<blockquote>\n<p>更多请参观：<a href=\"https://www.yuque.com/wetrial/front-end/\">https://www.yuque.com/wetrial/front-end/</a></p>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>DIY一个集搜索、排序、分页功能的列表组件</p>","more":"<p><a href=\"https://github.com/wetrial/wetrial-template\">源码地址</a>: <a href=\"https://github.com/wetrial/wetrial-template\">https://github.com/wetrial/wetrial-template</a><br />效果<br /><img src=\"https://cdn.nlark.com/yuque/0/2019/gif/173421/1558523693173-c0265a6e-5263-4317-bf76-99b17c86ec1c.gif#align=left&display=inline&height=513&name=test.gif&originHeight=1508&originWidth=2193&size=4252316&status=done&width=746\" alt=\"test.gif\"><br><a name=\"UKzZ5\"></a></p>\n<h1 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h1><p>在中控台系统中经常需要带条件过滤、分页、排序等的列表页面，antd提供了表格、排序、分页等，多个页面中使用会发现里面其实有很多重复的代码，自己捣腾下最后有了这个组件，<br><a name=\"pfCYQ\"></a></p>\n<h1 id=\"使用说明\"><a href=\"#使用说明\" class=\"headerlink\" title=\"使用说明\"></a>使用说明</h1><p><a name=\"7qJ13\"></a></p>\n<h2 id=\"列表使用\"><a href=\"#列表使用\" class=\"headerlink\" title=\"列表使用\"></a>列表使用</h2><p>如图所示:<br /><img src=\"https://cdn.nlark.com/yuque/0/2019/png/173421/1558524295889-fe6fce9b-1d53-4849-898c-39a7decf52ec.png#align=left&display=inline&height=1323&name=image.png&originHeight=1985&originWidth=2000&size=270488&status=done&width=1333.3333333333333\" alt=\"image.png\"></p>\n<ol>\n<li><p>引入高阶组件pagedQuery</p>\n</li>\n<li><p>引入封装的TableList 基本上跟Antd table组件用法一致，只是初始化了许多默认参数</p>\n</li>\n<li><p>用高阶组件包裹组件，并传参</p>\n<pre><code class=\"jsx\">// type为必须参数，一般对应dva中model的effects\n&#123;\ntype: string; // 类型 一般指获取数据源的action\npage?: number; // 当前页 从1开始\ndefaultPageSize?:number; // 每页默认显示的条数\npageSize?: number; // 每页显示数量\nrecord?: boolean; // 是否记录搜索状态\n&#125;</code></pre>\n</li>\n<li><p>请求附带的基础参数，通过<em>getQueryParams返回一个对象，用于一些特殊场景，一般为空</em></p>\n</li>\n<li><p>处理搜索按钮的点击事件，将搜索表单中的值收集并传递给onSearchData方法</p>\n</li>\n<li><p>处理重置按钮，将重置按钮的点击事件绑定来源于高阶组件给组件的onResetData</p>\n</li>\n<li><p>获取数据源并给到table<br><a name=\"AiF39\"></a></p>\n<h2 id=\"详情页面\"><a href=\"#详情页面\" class=\"headerlink\" title=\"详情页面\"></a>详情页面</h2><p>回退到列表页面有两种形式，<br />1.通过浏览器上的回退按钮<br />2.详情页面放置一个回退按钮，代码层面实现路由跳转到列表页<br />一般情况都使用第二种方式，因为如果编辑页面比较负责，可能里面有子页面，子页面又可以进入这一通过浏览器上的回退按钮需要点击N多次，再者，浏览器的回退有数量限制<br />同样，如图所示：<br /><img src=\"https://cdn.nlark.com/yuque/0/2019/png/173421/1558524894480-261376dd-c130-40e0-b993-23812add160f.png#align=left&display=inline&height=877&name=image.png&originHeight=1316&originWidth=1714&size=188537&status=done&width=1142.6666666666667\" alt=\"image.png\"></p>\n</li>\n<li><p>引入方法backRouter</p>\n</li>\n<li><p>在需要跳转路由的地方调用一下backRoute方法，并将路由传递给方法，该方法会返回之前记录的列表路由<br><a name=\"VNgB5\"></a></p>\n<h1 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h1></li>\n</ol>\n<p>实现思路，通过高阶组件实现，<a href=\"https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.tsx\">代码</a>  、  <a href=\"https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.zh-CN.md\">api文档</a>  <br />记录搜索状态，通过sessionStorage来实现，考虑到sessionStore的一个优势，关闭当前tab页就失效了 省去还得去手动清除记录状态的麻烦(比如放到localStorage)，再者 这种查询状态不需要持久记录  <br />回退方法backRouter，由于高阶组件中会在组件的componentWillUnmount方法中记录搜索状态，以location的pathname为key，以location的search为值存放，所以通过backRouter方法匹配的时候会从sessionStorage中查询，如果有则带上查询串，以此来达到记录页面状态的效果</p>\n<blockquote>\n<p>更多请参观：<a href=\"https://www.yuque.com/wetrial/front-end/\">https://www.yuque.com/wetrial/front-end/</a></p>\n</blockquote>"},{"title":"写博客的神器-图床篇","abbrlink":5711,"date":"2019-08-26T12:10:10.000Z","_content":"\nvscode下使用 PicGo自动上传图片\n<!-- more -->\n\n### 前言\n> [PicGo github地址](https://github.com/Molunerfinn/PicGo)  \n> [PicGo 文档地址](https://picgo.github.io/PicGo-Doc/zh/guide/config.html) \n\n\n### 纯手工时代\n| 类型 | 优点 | 缺点\n| :--- | :---  | :---\n|站内 | 1.图片自定义命名<br/> 2.方便管理迁移  | 1.增加博客服务器压力(一般都是比较弱的机器)<br/> 2. 操作麻烦\n|外部资源服务器<br/>比如(七牛、微博、腾讯云、阿里云等) |1. 减轻服务器压力<br/> |1.操作麻烦，不好管理图片\n\n### 工业1.0时代\n今天的重点是，vscode下的[PicGo](https://github.com/Molunerfinn/PicGo)插件,通过简单的配置可以实现切换 七牛、微博、腾讯云COS、又拍云、github、阿里云oss、imgur等，与vscode很方便的集成，综合对比了下 腾讯云、阿里云皆收费，github国内又有点慢，最后选择了七牛，每个月10G 博客应该够用，配置如下:\n![](http://qiniu.xxgtalk.cn/blog/images/20190807085943.png)\n","source":"_posts/other/blog_image_lib.md","raw":"---\ntitle: 写博客的神器-图床篇\ncategories:\n  - 其他\ntags:\n  - 其他\nabbrlink: 5711\ndate: 2019-08-26 20:10:10\n---\n\nvscode下使用 PicGo自动上传图片\n<!-- more -->\n\n### 前言\n> [PicGo github地址](https://github.com/Molunerfinn/PicGo)  \n> [PicGo 文档地址](https://picgo.github.io/PicGo-Doc/zh/guide/config.html) \n\n\n### 纯手工时代\n| 类型 | 优点 | 缺点\n| :--- | :---  | :---\n|站内 | 1.图片自定义命名<br/> 2.方便管理迁移  | 1.增加博客服务器压力(一般都是比较弱的机器)<br/> 2. 操作麻烦\n|外部资源服务器<br/>比如(七牛、微博、腾讯云、阿里云等) |1. 减轻服务器压力<br/> |1.操作麻烦，不好管理图片\n\n### 工业1.0时代\n今天的重点是，vscode下的[PicGo](https://github.com/Molunerfinn/PicGo)插件,通过简单的配置可以实现切换 七牛、微博、腾讯云COS、又拍云、github、阿里云oss、imgur等，与vscode很方便的集成，综合对比了下 腾讯云、阿里云皆收费，github国内又有点慢，最后选择了七牛，每个月10G 博客应该够用，配置如下:\n![](http://qiniu.xxgtalk.cn/blog/images/20190807085943.png)\n","slug":"other/blog_image_lib","published":1,"updated":"2020-02-23T13:45:22.684Z","_id":"ck0sx0lpo000084scsueua6ej","comments":1,"layout":"post","photos":[],"link":"","content":"<p>vscode下使用 PicGo自动上传图片<br><a id=\"more\"></a></p>\n<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><blockquote>\n<p><a href=\"https://github.com/Molunerfinn/PicGo\">PicGo github地址</a><br><a href=\"https://picgo.github.io/PicGo-Doc/zh/guide/config.html\">PicGo 文档地址</a> </p>\n</blockquote>\n<h3 id=\"纯手工时代\"><a href=\"#纯手工时代\" class=\"headerlink\" title=\"纯手工时代\"></a>纯手工时代</h3><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">优点</th>\n<th style=\"text-align:left\">缺点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">站内</td>\n<td style=\"text-align:left\">1.图片自定义命名<br/> 2.方便管理迁移</td>\n<td style=\"text-align:left\">1.增加博客服务器压力(一般都是比较弱的机器)<br/> 2. 操作麻烦</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">外部资源服务器<br/>比如(七牛、微博、腾讯云、阿里云等)</td>\n<td style=\"text-align:left\">1. 减轻服务器压力<br/></td>\n<td style=\"text-align:left\">1.操作麻烦，不好管理图片</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"工业1-0时代\"><a href=\"#工业1-0时代\" class=\"headerlink\" title=\"工业1.0时代\"></a>工业1.0时代</h3><p>今天的重点是，vscode下的<a href=\"https://github.com/Molunerfinn/PicGo\">PicGo</a>插件,通过简单的配置可以实现切换 七牛、微博、腾讯云COS、又拍云、github、阿里云oss、imgur等，与vscode很方便的集成，综合对比了下 腾讯云、阿里云皆收费，github国内又有点慢，最后选择了七牛，每个月10G 博客应该够用，配置如下:<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190807085943.png\" alt=\"\"></p>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>vscode下使用 PicGo自动上传图片<br>","more":"</p>\n<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><blockquote>\n<p><a href=\"https://github.com/Molunerfinn/PicGo\">PicGo github地址</a><br><a href=\"https://picgo.github.io/PicGo-Doc/zh/guide/config.html\">PicGo 文档地址</a> </p>\n</blockquote>\n<h3 id=\"纯手工时代\"><a href=\"#纯手工时代\" class=\"headerlink\" title=\"纯手工时代\"></a>纯手工时代</h3><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">类型</th>\n<th style=\"text-align:left\">优点</th>\n<th style=\"text-align:left\">缺点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">站内</td>\n<td style=\"text-align:left\">1.图片自定义命名<br/> 2.方便管理迁移</td>\n<td style=\"text-align:left\">1.增加博客服务器压力(一般都是比较弱的机器)<br/> 2. 操作麻烦</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">外部资源服务器<br/>比如(七牛、微博、腾讯云、阿里云等)</td>\n<td style=\"text-align:left\">1. 减轻服务器压力<br/></td>\n<td style=\"text-align:left\">1.操作麻烦，不好管理图片</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"工业1-0时代\"><a href=\"#工业1-0时代\" class=\"headerlink\" title=\"工业1.0时代\"></a>工业1.0时代</h3><p>今天的重点是，vscode下的<a href=\"https://github.com/Molunerfinn/PicGo\">PicGo</a>插件,通过简单的配置可以实现切换 七牛、微博、腾讯云COS、又拍云、github、阿里云oss、imgur等，与vscode很方便的集成，综合对比了下 腾讯云、阿里云皆收费，github国内又有点慢，最后选择了七牛，每个月10G 博客应该够用，配置如下:<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190807085943.png\" alt=\"\"></p>"},{"title":"Flutter-01 环境搭建","abbrlink":5925,"date":"2019-09-09T11:40:22.000Z","_content":"\nFlutter-01 环境搭建\n<!-- more -->\n\n文档地址 https://developer.android.google.cn/studio/intro\n\n# Window10环境搭建Flutter开发环境\n\n## 前置条件\n- 磁盘空间足够\n- git 2.x\n\n## 安装\n\n### Android Studio(建议3.0及以上)\n1. 下载\n- https://developer.android.google.com/studio(需要翻墙)\n- https://developer.android.google.cn/studio  \n如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk\n\n2. 为Android Studio安装Flutter和Dart插件\nFile->Settings->Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio\n如图\n![20190909203319.png](http://qiniu.xxgtalk.cn/blog/images/20190909203319.png)\n\n### Flutter SDK\n1. 配置flutter临时镜像(非必须)\n``` bash\n// 增加如下变量到用户环境变量中\nPUB_HOSTED_URL=https://pub.flutter-io.cn  \nFLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址\n```\n\n2. 下载并安装\n- 通过 git 克隆flutter项目代码到本地，比如我的是D:\\Program Files\\Flutter\n不建议放到高级目录，比如C:\\Program Files\n- 然后在Flutter安装目录的flutter文件下找到flutter_console.bat 双击运行  \n\n### 设置环境变量\n1. 系统环境PATH添加 D:\\Program Files\\Flutter\\bin\n2. Android环境变量配置\n- 添加系统环境变量\n``` bash\n// 键和值，其中目录为Android SDK的目录，可以通过android studio菜单File->Settings 然后搜索SDK 可查看SDK的安装目录\nANDROID_HOME:C:\\Users\\xiexingen\\AppData\\Local\\Android\\Sdk\n```\n- 在系统环境变量中的Path中添加%ANDROID_HOME%\\emulator\n- 在系统环境变量中的Path中添加%ANDROID_HOME%\\platform-tools\n- 在系统环境变量中的Path中添加%ANDROID_HOME%\\tools\n\n> 配置完成后，需要重启电脑\n\n### 在Android模拟器上运行Flutter\n* 机器上需要启用VM acceleration\n* 启动android studio 菜单 Tools->AVD Manager 并选择 `Create Virtual Device`\n* 选择一个设备 然后点 Next\n* 为要模拟的Android版本选择一个或多个系统镜像，然后选择Next(建议使用x86)\n* 在Emulated Performance下，选择 Hardware-GLES 2.0 以启用硬件加速\n* 验证AVD配置是否正确，然后选Finish,更多问题可以参考文档\n* 在Android Virtual Device Manager中，点击工具栏的 `Run`,启动模拟器并显示所选择的操作系统版本或设备的启动画面\n* 通过 `flutter run` 命令行运行启动项目\n\n## 如何在Android真机运行\n要准备在Android设备上运行并测试Flutter，需要安装Android4.1 (API level 16)或者更高低版本\n* 在设备上启用 `开发人员选项`和`USB调试`，可自行google\n* 使用USB将手机插入电脑，如果有授权提示则点同意\n* 在终端中，运行 `flutter devices`命令以验证Flutter是否识别你连接的Android设备\n* 通过 `flutter run` 启动项目\n\n\n------------------------------------------------------\n\n\n# Mac 环境搭建Flutter开发环境\n> 由于没有mac电脑，所以特地在VM下安装了一个mac系统\n\n## 前置条件\n- 磁盘空间足够\n- 安装了命令行工具: bash、curl、git 2.x、mkdir、rm、unzip、which\n- 由于国内访问Flutter可能受限，Flutter官方为中国地区待见了临时镜像，可添加如下环境变量到用户的环境变量中\n``` bash\n// Macintosh HD->Users->用户名->.bash_profile\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址\n```\n\n## 安装\n\n### Flutter SDK\n\n2. 下载并安装\n- 下载stable版本的sdk，然后解压到~/flutter\n\n\n3. 添加flutter路径到path中\n``` bash\ncd ~\nvim .bash_profile\n// 然后添加下面行,;wq 保存，然后重启bash\nexport PATH=/Users/xiexingen/flutter/bin:$PATH\n```\n\n4. 运行flutter doctor来检查flutter\n会有很多xx 比如xcode，android相关的工具\n\n### Android Studio(建议3.0及以上)\n1. 下载\n- https://developer.android.google.com/studio(需要翻墙)\n- https://developer.android.google.cn/studio  \n如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk\n\n2. 为Android Studio安装Flutter和Dart插件\nFile->Settings->Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio\n如图\n![20190909203319.png](http://qiniu.xxgtalk.cn/blog/images/20190909203319.png)\n\n### 设置环境变量\n- 添加系统环境变量\n``` bash\n// 电脑/Users/用户名/.bash_profile\n# Android 环境变量 xiexingen为我的用户名\nexport ANDROID_HOME=/Users/xiexingen/Library/Android/sdk\n# Android 模拟器路径\nexport PATH=${PATH}:${ANDROID_HOME}/emulator\n# Android tools 路径\nexport PATH=${PATH}:${ANDROID_HOME}/tools\n# Android 平台工具路径\nexport PATH=${PATH}:${ANDROID_HOME}/platform-tools\n# Android NDK路径\nANDROID_NDK_HOME=/Users/xiexingen/Library/Android/ndk/android-ndk-r10e\n# Flutter镜像\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n# Flutter 环境变量\nexport PATH=/Users/xiexingen/flutter/bin:$PATH\n```\n\n> 配置完成后，需要重启电脑\n\n### 安装Xcode\n1. 通过苹果应用商店安装\n2. 配置Xcode命令行工具以使用最新安装的Xcode版本\n``` bash\nsudo xcode-select --switch /Applications/Xcode.app/Contents/Developer\n```\n\n### 设置IOS模拟器\n1. 在终端输入如下命令行打开一个ios模拟器\n``` bash\nopen -a Simulator\n```\n2. 通过模拟器菜单的 *硬件->设备*,确保是64位的iphone5s或更新的模拟器\n\n### 如何将Flutter安装到IOS真机上\n\n要通过*flutter run* 将Flutter应用安装到ios整机设备，需要一些额外的工具和一个Apple账号，还需要在Xcode中进行设置：\n> 当然，用XCode来讲Flutter运行在真机上更简单，只需要点 *run*按钮即可，可以根据需要进行两种不同的运行方式；  \n1. 安装 [Homebrew](https://brew.sh)\n2. 确保homebrew最新\n``` bash\nbrew update\n```\n3. 打开终端并运行如下命令来安装用于将Flutter应用安装到IOS设备的工具\n``` bash\nbrew install --HEAD usbmuxd\nbrew link usbmuxd\nbrew install --HEAd libimobiledevice\nbrew install ideviceinstaller ios-deploy cocoapods\npod setup\n```\n如果这些命令中的任何一个失败并出现错误，可运行*brew doctor*并按照说明来解决问题\n\n4. 遵循Xcode前面流程来配置项目\n* 在你Flutter项目目录中通过*open ios/Runner.xcworkspace*打开默认的Xcode workspace\n* 在Xcode中，选择导航面板左侧中的Runner项目\n* 在Runner target设置页面中，确保在 常规>前面>团队 下选择了您的开发团队。当你选择一个团队时，Xcode会创建并下载开发证书，向您的设备注册您的账户，并创建和下载配置文件(如果需要)\n    * 要开始您的第一个IOS开发项目，您可能需要使用您的APP ID登录Xcode\n    * 任何App Id都支持开发和测试，但是如想法不到App Store则需要支付99到的开发者账号\n* 当你第一次attach真机设备进行ios开发时，需要同时信任你的Mac和该设备上的开发证书。首次将IOS设备连接到Mac时，请在对话中选择 *信任*,然后，转到IOS设备上的设置应用程序，选择 常规>设备管理 并信任您的证书\n    * 如果Xcode中的自动签名失败，请验证项目的 General>Identity>Bundle Identifier值是否唯一.\n\n5. 通过flutter run 运行启动项目\n``` bash\nflutter run\n```\n\n\n# 其他\n\n## 验证\n- 运行 adb // 检测android相关\n- 运行flutter doctor  // 检测flutter相关\n> 第一次运行flutter命令(如 flutter doctor)，它会下载自己的依赖项目并自动编译，并缓存\n\n\n## FAQ\n\n### 无法启动模拟器\n> emulator: ERROR:x86 emulation currently requires hardware acceleration! Please ensure Windows Hypervisor Platform (WHPX) is properly installed and usable. CPU acceleration status: HAXM is not installed on this machine  \n解决方案:选择 Tools-> SDK Manager -> SDK Tools,安装 HAXM 即可\n![20190909204602.png](http://qiniu.xxgtalk.cn/blog/images/20190909204602.png)\n\n### 创建flutter项目\n1. 通过android studio创建\nFile->Create->New Flutter Project\n\n2. 通过命令行\nflutter create my_first_app\n\n### 运行flutter项目\n1. 通过android studio 启动按钮\n\n2. 命令行运行android模拟器\n``` bash\n// hw1 表示模拟器的名称\nemulator -avd hw1\n```\n\n3. 命令行 flutter run\n前置条件，需要一个已经启动的android模拟器或者连接到电脑的android设备","source":"_posts/flutter/01-environment.md","raw":"---\ntitle: Flutter-01 环境搭建\ncategories:\n  - Flutter\ntags:\n  - Flutter\nabbrlink: 5925\ndate: 2019-09-09 19:40:22\n---\n\nFlutter-01 环境搭建\n<!-- more -->\n\n文档地址 https://developer.android.google.cn/studio/intro\n\n# Window10环境搭建Flutter开发环境\n\n## 前置条件\n- 磁盘空间足够\n- git 2.x\n\n## 安装\n\n### Android Studio(建议3.0及以上)\n1. 下载\n- https://developer.android.google.com/studio(需要翻墙)\n- https://developer.android.google.cn/studio  \n如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk\n\n2. 为Android Studio安装Flutter和Dart插件\nFile->Settings->Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio\n如图\n![20190909203319.png](http://qiniu.xxgtalk.cn/blog/images/20190909203319.png)\n\n### Flutter SDK\n1. 配置flutter临时镜像(非必须)\n``` bash\n// 增加如下变量到用户环境变量中\nPUB_HOSTED_URL=https://pub.flutter-io.cn  \nFLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址\n```\n\n2. 下载并安装\n- 通过 git 克隆flutter项目代码到本地，比如我的是D:\\Program Files\\Flutter\n不建议放到高级目录，比如C:\\Program Files\n- 然后在Flutter安装目录的flutter文件下找到flutter_console.bat 双击运行  \n\n### 设置环境变量\n1. 系统环境PATH添加 D:\\Program Files\\Flutter\\bin\n2. Android环境变量配置\n- 添加系统环境变量\n``` bash\n// 键和值，其中目录为Android SDK的目录，可以通过android studio菜单File->Settings 然后搜索SDK 可查看SDK的安装目录\nANDROID_HOME:C:\\Users\\xiexingen\\AppData\\Local\\Android\\Sdk\n```\n- 在系统环境变量中的Path中添加%ANDROID_HOME%\\emulator\n- 在系统环境变量中的Path中添加%ANDROID_HOME%\\platform-tools\n- 在系统环境变量中的Path中添加%ANDROID_HOME%\\tools\n\n> 配置完成后，需要重启电脑\n\n### 在Android模拟器上运行Flutter\n* 机器上需要启用VM acceleration\n* 启动android studio 菜单 Tools->AVD Manager 并选择 `Create Virtual Device`\n* 选择一个设备 然后点 Next\n* 为要模拟的Android版本选择一个或多个系统镜像，然后选择Next(建议使用x86)\n* 在Emulated Performance下，选择 Hardware-GLES 2.0 以启用硬件加速\n* 验证AVD配置是否正确，然后选Finish,更多问题可以参考文档\n* 在Android Virtual Device Manager中，点击工具栏的 `Run`,启动模拟器并显示所选择的操作系统版本或设备的启动画面\n* 通过 `flutter run` 命令行运行启动项目\n\n## 如何在Android真机运行\n要准备在Android设备上运行并测试Flutter，需要安装Android4.1 (API level 16)或者更高低版本\n* 在设备上启用 `开发人员选项`和`USB调试`，可自行google\n* 使用USB将手机插入电脑，如果有授权提示则点同意\n* 在终端中，运行 `flutter devices`命令以验证Flutter是否识别你连接的Android设备\n* 通过 `flutter run` 启动项目\n\n\n------------------------------------------------------\n\n\n# Mac 环境搭建Flutter开发环境\n> 由于没有mac电脑，所以特地在VM下安装了一个mac系统\n\n## 前置条件\n- 磁盘空间足够\n- 安装了命令行工具: bash、curl、git 2.x、mkdir、rm、unzip、which\n- 由于国内访问Flutter可能受限，Flutter官方为中国地区待见了临时镜像，可添加如下环境变量到用户的环境变量中\n``` bash\n// Macintosh HD->Users->用户名->.bash_profile\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址\n```\n\n## 安装\n\n### Flutter SDK\n\n2. 下载并安装\n- 下载stable版本的sdk，然后解压到~/flutter\n\n\n3. 添加flutter路径到path中\n``` bash\ncd ~\nvim .bash_profile\n// 然后添加下面行,;wq 保存，然后重启bash\nexport PATH=/Users/xiexingen/flutter/bin:$PATH\n```\n\n4. 运行flutter doctor来检查flutter\n会有很多xx 比如xcode，android相关的工具\n\n### Android Studio(建议3.0及以上)\n1. 下载\n- https://developer.android.google.com/studio(需要翻墙)\n- https://developer.android.google.cn/studio  \n如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk\n\n2. 为Android Studio安装Flutter和Dart插件\nFile->Settings->Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio\n如图\n![20190909203319.png](http://qiniu.xxgtalk.cn/blog/images/20190909203319.png)\n\n### 设置环境变量\n- 添加系统环境变量\n``` bash\n// 电脑/Users/用户名/.bash_profile\n# Android 环境变量 xiexingen为我的用户名\nexport ANDROID_HOME=/Users/xiexingen/Library/Android/sdk\n# Android 模拟器路径\nexport PATH=${PATH}:${ANDROID_HOME}/emulator\n# Android tools 路径\nexport PATH=${PATH}:${ANDROID_HOME}/tools\n# Android 平台工具路径\nexport PATH=${PATH}:${ANDROID_HOME}/platform-tools\n# Android NDK路径\nANDROID_NDK_HOME=/Users/xiexingen/Library/Android/ndk/android-ndk-r10e\n# Flutter镜像\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n# Flutter 环境变量\nexport PATH=/Users/xiexingen/flutter/bin:$PATH\n```\n\n> 配置完成后，需要重启电脑\n\n### 安装Xcode\n1. 通过苹果应用商店安装\n2. 配置Xcode命令行工具以使用最新安装的Xcode版本\n``` bash\nsudo xcode-select --switch /Applications/Xcode.app/Contents/Developer\n```\n\n### 设置IOS模拟器\n1. 在终端输入如下命令行打开一个ios模拟器\n``` bash\nopen -a Simulator\n```\n2. 通过模拟器菜单的 *硬件->设备*,确保是64位的iphone5s或更新的模拟器\n\n### 如何将Flutter安装到IOS真机上\n\n要通过*flutter run* 将Flutter应用安装到ios整机设备，需要一些额外的工具和一个Apple账号，还需要在Xcode中进行设置：\n> 当然，用XCode来讲Flutter运行在真机上更简单，只需要点 *run*按钮即可，可以根据需要进行两种不同的运行方式；  \n1. 安装 [Homebrew](https://brew.sh)\n2. 确保homebrew最新\n``` bash\nbrew update\n```\n3. 打开终端并运行如下命令来安装用于将Flutter应用安装到IOS设备的工具\n``` bash\nbrew install --HEAD usbmuxd\nbrew link usbmuxd\nbrew install --HEAd libimobiledevice\nbrew install ideviceinstaller ios-deploy cocoapods\npod setup\n```\n如果这些命令中的任何一个失败并出现错误，可运行*brew doctor*并按照说明来解决问题\n\n4. 遵循Xcode前面流程来配置项目\n* 在你Flutter项目目录中通过*open ios/Runner.xcworkspace*打开默认的Xcode workspace\n* 在Xcode中，选择导航面板左侧中的Runner项目\n* 在Runner target设置页面中，确保在 常规>前面>团队 下选择了您的开发团队。当你选择一个团队时，Xcode会创建并下载开发证书，向您的设备注册您的账户，并创建和下载配置文件(如果需要)\n    * 要开始您的第一个IOS开发项目，您可能需要使用您的APP ID登录Xcode\n    * 任何App Id都支持开发和测试，但是如想法不到App Store则需要支付99到的开发者账号\n* 当你第一次attach真机设备进行ios开发时，需要同时信任你的Mac和该设备上的开发证书。首次将IOS设备连接到Mac时，请在对话中选择 *信任*,然后，转到IOS设备上的设置应用程序，选择 常规>设备管理 并信任您的证书\n    * 如果Xcode中的自动签名失败，请验证项目的 General>Identity>Bundle Identifier值是否唯一.\n\n5. 通过flutter run 运行启动项目\n``` bash\nflutter run\n```\n\n\n# 其他\n\n## 验证\n- 运行 adb // 检测android相关\n- 运行flutter doctor  // 检测flutter相关\n> 第一次运行flutter命令(如 flutter doctor)，它会下载自己的依赖项目并自动编译，并缓存\n\n\n## FAQ\n\n### 无法启动模拟器\n> emulator: ERROR:x86 emulation currently requires hardware acceleration! Please ensure Windows Hypervisor Platform (WHPX) is properly installed and usable. CPU acceleration status: HAXM is not installed on this machine  \n解决方案:选择 Tools-> SDK Manager -> SDK Tools,安装 HAXM 即可\n![20190909204602.png](http://qiniu.xxgtalk.cn/blog/images/20190909204602.png)\n\n### 创建flutter项目\n1. 通过android studio创建\nFile->Create->New Flutter Project\n\n2. 通过命令行\nflutter create my_first_app\n\n### 运行flutter项目\n1. 通过android studio 启动按钮\n\n2. 命令行运行android模拟器\n``` bash\n// hw1 表示模拟器的名称\nemulator -avd hw1\n```\n\n3. 命令行 flutter run\n前置条件，需要一个已经启动的android模拟器或者连接到电脑的android设备","slug":"flutter/01-environment","published":1,"updated":"2020-02-23T13:45:22.676Z","_id":"ck0sx0lpx000184scjriitqc0","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Flutter-01 环境搭建<br><a id=\"more\"></a></p>\n<p>文档地址 <a href=\"https://developer.android.google.cn/studio/intro\">https://developer.android.google.cn/studio/intro</a></p>\n<h1 id=\"Window10环境搭建Flutter开发环境\"><a href=\"#Window10环境搭建Flutter开发环境\" class=\"headerlink\" title=\"Window10环境搭建Flutter开发环境\"></a>Window10环境搭建Flutter开发环境</h1><h2 id=\"前置条件\"><a href=\"#前置条件\" class=\"headerlink\" title=\"前置条件\"></a>前置条件</h2><ul>\n<li>磁盘空间足够</li>\n<li>git 2.x</li>\n</ul>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"Android-Studio-建议3-0及以上\"><a href=\"#Android-Studio-建议3-0及以上\" class=\"headerlink\" title=\"Android Studio(建议3.0及以上)\"></a>Android Studio(建议3.0及以上)</h3><ol>\n<li>下载</li>\n</ol>\n<ul>\n<li><a href=\"https://developer.android.google.com/studio(需要翻墙)\">https://developer.android.google.com/studio(需要翻墙)</a></li>\n<li><a href=\"https://developer.android.google.cn/studio\">https://developer.android.google.cn/studio</a><br>如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk</li>\n</ul>\n<ol start=\"2\">\n<li>为Android Studio安装Flutter和Dart插件<br>File-&gt;Settings-&gt;Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio<br>如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190909203319.png\" alt=\"20190909203319.png\"></li>\n</ol>\n<h3 id=\"Flutter-SDK\"><a href=\"#Flutter-SDK\" class=\"headerlink\" title=\"Flutter SDK\"></a>Flutter SDK</h3><ol>\n<li><p>配置flutter临时镜像(非必须)</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">// 增加如下变量到用户环境变量中\nPUB_HOSTED_URL<span class=\"token operator\">=</span>https://pub.flutter-io.cn  \nFLUTTER_STORAGE_BASE_URL<span class=\"token operator\">=</span>https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址\n</code></pre>\n</li>\n<li><p>下载并安装</p>\n</li>\n</ol>\n<ul>\n<li>通过 git 克隆flutter项目代码到本地，比如我的是D:\\Program Files\\Flutter<br>不建议放到高级目录，比如C:\\Program Files</li>\n<li>然后在Flutter安装目录的flutter文件下找到flutter_console.bat 双击运行  </li>\n</ul>\n<h3 id=\"设置环境变量\"><a href=\"#设置环境变量\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h3><ol>\n<li>系统环境PATH添加 D:\\Program Files\\Flutter\\bin</li>\n<li>Android环境变量配置</li>\n</ol>\n<ul>\n<li>添加系统环境变量<pre class=\" language-bash\"><code class=\"language-bash\">// 键和值，其中目录为Android SDK的目录，可以通过android studio菜单File-<span class=\"token operator\">></span>Settings 然后搜索SDK 可查看SDK的安装目录\nANDROID_HOME:C:\\Users\\xiexingen\\AppData\\Local\\Android\\Sdk\n</code></pre>\n</li>\n<li>在系统环境变量中的Path中添加%ANDROID_HOME%\\emulator</li>\n<li>在系统环境变量中的Path中添加%ANDROID_HOME%\\platform-tools</li>\n<li>在系统环境变量中的Path中添加%ANDROID_HOME%\\tools</li>\n</ul>\n<blockquote>\n<p>配置完成后，需要重启电脑</p>\n</blockquote>\n<h3 id=\"在Android模拟器上运行Flutter\"><a href=\"#在Android模拟器上运行Flutter\" class=\"headerlink\" title=\"在Android模拟器上运行Flutter\"></a>在Android模拟器上运行Flutter</h3><ul>\n<li>机器上需要启用VM acceleration</li>\n<li>启动android studio 菜单 Tools-&gt;AVD Manager 并选择 <code>Create Virtual Device</code></li>\n<li>选择一个设备 然后点 Next</li>\n<li>为要模拟的Android版本选择一个或多个系统镜像，然后选择Next(建议使用x86)</li>\n<li>在Emulated Performance下，选择 Hardware-GLES 2.0 以启用硬件加速</li>\n<li>验证AVD配置是否正确，然后选Finish,更多问题可以参考文档</li>\n<li>在Android Virtual Device Manager中，点击工具栏的 <code>Run</code>,启动模拟器并显示所选择的操作系统版本或设备的启动画面</li>\n<li>通过 <code>flutter run</code> 命令行运行启动项目</li>\n</ul>\n<h2 id=\"如何在Android真机运行\"><a href=\"#如何在Android真机运行\" class=\"headerlink\" title=\"如何在Android真机运行\"></a>如何在Android真机运行</h2><p>要准备在Android设备上运行并测试Flutter，需要安装Android4.1 (API level 16)或者更高低版本</p>\n<ul>\n<li>在设备上启用 <code>开发人员选项</code>和<code>USB调试</code>，可自行google</li>\n<li>使用USB将手机插入电脑，如果有授权提示则点同意</li>\n<li>在终端中，运行 <code>flutter devices</code>命令以验证Flutter是否识别你连接的Android设备</li>\n<li>通过 <code>flutter run</code> 启动项目</li>\n</ul>\n<hr>\n<h1 id=\"Mac-环境搭建Flutter开发环境\"><a href=\"#Mac-环境搭建Flutter开发环境\" class=\"headerlink\" title=\"Mac 环境搭建Flutter开发环境\"></a>Mac 环境搭建Flutter开发环境</h1><blockquote>\n<p>由于没有mac电脑，所以特地在VM下安装了一个mac系统</p>\n</blockquote>\n<h2 id=\"前置条件-1\"><a href=\"#前置条件-1\" class=\"headerlink\" title=\"前置条件\"></a>前置条件</h2><ul>\n<li>磁盘空间足够</li>\n<li>安装了命令行工具: bash、curl、git 2.x、mkdir、rm、unzip、which</li>\n<li>由于国内访问Flutter可能受限，Flutter官方为中国地区待见了临时镜像，可添加如下环境变量到用户的环境变量中<pre class=\" language-bash\"><code class=\"language-bash\">// Macintosh HD-<span class=\"token operator\">></span>Users-<span class=\"token operator\">></span>用户名-<span class=\"token operator\">></span>.bash_profile\n<span class=\"token function\">export</span> PUB_HOSTED_URL<span class=\"token operator\">=</span>https://pub.flutter-io.cn\n<span class=\"token function\">export</span> FLUTTER_STORAGE_BASE_URL<span class=\"token operator\">=</span>https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址\n</code></pre>\n</li>\n</ul>\n<h2 id=\"安装-1\"><a href=\"#安装-1\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"Flutter-SDK-1\"><a href=\"#Flutter-SDK-1\" class=\"headerlink\" title=\"Flutter SDK\"></a>Flutter SDK</h3><ol start=\"2\">\n<li>下载并安装</li>\n</ol>\n<ul>\n<li>下载stable版本的sdk，然后解压到~/flutter</li>\n</ul>\n<ol start=\"3\">\n<li><p>添加flutter路径到path中</p>\n<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token function\">cd</span> ~\nvim .bash_profile\n// 然后添加下面行,<span class=\"token punctuation\">;</span>wq 保存，然后重启bash\n<span class=\"token function\">export</span> PATH<span class=\"token operator\">=</span>/Users/xiexingen/flutter/bin:<span class=\"token variable\">$PATH</span>\n</code></pre>\n</li>\n<li><p>运行flutter doctor来检查flutter<br>会有很多xx 比如xcode，android相关的工具</p>\n</li>\n</ol>\n<h3 id=\"Android-Studio-建议3-0及以上-1\"><a href=\"#Android-Studio-建议3-0及以上-1\" class=\"headerlink\" title=\"Android Studio(建议3.0及以上)\"></a>Android Studio(建议3.0及以上)</h3><ol>\n<li>下载</li>\n</ol>\n<ul>\n<li><a href=\"https://developer.android.google.com/studio(需要翻墙)\">https://developer.android.google.com/studio(需要翻墙)</a></li>\n<li><a href=\"https://developer.android.google.cn/studio\">https://developer.android.google.cn/studio</a><br>如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk</li>\n</ul>\n<ol start=\"2\">\n<li>为Android Studio安装Flutter和Dart插件<br>File-&gt;Settings-&gt;Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio<br>如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190909203319.png\" alt=\"20190909203319.png\"></li>\n</ol>\n<h3 id=\"设置环境变量-1\"><a href=\"#设置环境变量-1\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h3><ul>\n<li>添加系统环境变量<pre class=\" language-bash\"><code class=\"language-bash\">// 电脑/Users/用户名/.bash_profile\n<span class=\"token comment\" spellcheck=\"true\"># Android 环境变量 xiexingen为我的用户名</span>\n<span class=\"token function\">export</span> ANDROID_HOME<span class=\"token operator\">=</span>/Users/xiexingen/Library/Android/sdk\n<span class=\"token comment\" spellcheck=\"true\"># Android 模拟器路径</span>\n<span class=\"token function\">export</span> PATH<span class=\"token operator\">=</span>$<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;PATH&amp;#125;:$&amp;#123;ANDROID_HOME&amp;#125;/emulator</span>\n<span class=\"token comment\" spellcheck=\"true\"># Android tools 路径</span>\n<span class=\"token function\">export</span> PATH<span class=\"token operator\">=</span>$<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;PATH&amp;#125;:$&amp;#123;ANDROID_HOME&amp;#125;/tools</span>\n<span class=\"token comment\" spellcheck=\"true\"># Android 平台工具路径</span>\n<span class=\"token function\">export</span> PATH<span class=\"token operator\">=</span>$<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;PATH&amp;#125;:$&amp;#123;ANDROID_HOME&amp;#125;/platform-tools</span>\n<span class=\"token comment\" spellcheck=\"true\"># Android NDK路径</span>\nANDROID_NDK_HOME<span class=\"token operator\">=</span>/Users/xiexingen/Library/Android/ndk/android-ndk-r10e\n<span class=\"token comment\" spellcheck=\"true\"># Flutter镜像</span>\n<span class=\"token function\">export</span> PUB_HOSTED_URL<span class=\"token operator\">=</span>https://pub.flutter-io.cn\n<span class=\"token function\">export</span> FLUTTER_STORAGE_BASE_URL<span class=\"token operator\">=</span>https://storage.flutter-io.cn\n<span class=\"token comment\" spellcheck=\"true\"># Flutter 环境变量</span>\n<span class=\"token function\">export</span> PATH<span class=\"token operator\">=</span>/Users/xiexingen/flutter/bin:<span class=\"token variable\">$PATH</span>\n</code></pre>\n</li>\n</ul>\n<blockquote>\n<p>配置完成后，需要重启电脑</p>\n</blockquote>\n<h3 id=\"安装Xcode\"><a href=\"#安装Xcode\" class=\"headerlink\" title=\"安装Xcode\"></a>安装Xcode</h3><ol>\n<li>通过苹果应用商店安装</li>\n<li>配置Xcode命令行工具以使用最新安装的Xcode版本<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> xcode-select --switch /Applications/Xcode.app/Contents/Developer\n</code></pre>\n</li>\n</ol>\n<h3 id=\"设置IOS模拟器\"><a href=\"#设置IOS模拟器\" class=\"headerlink\" title=\"设置IOS模拟器\"></a>设置IOS模拟器</h3><ol>\n<li>在终端输入如下命令行打开一个ios模拟器<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token function\">open</span> -a Simulator\n</code></pre>\n</li>\n<li>通过模拟器菜单的 <em>硬件-&gt;设备</em>,确保是64位的iphone5s或更新的模拟器</li>\n</ol>\n<h3 id=\"如何将Flutter安装到IOS真机上\"><a href=\"#如何将Flutter安装到IOS真机上\" class=\"headerlink\" title=\"如何将Flutter安装到IOS真机上\"></a>如何将Flutter安装到IOS真机上</h3><p>要通过<em>flutter run</em> 将Flutter应用安装到ios整机设备，需要一些额外的工具和一个Apple账号，还需要在Xcode中进行设置：</p>\n<blockquote>\n<p>当然，用XCode来讲Flutter运行在真机上更简单，只需要点 <em>run</em>按钮即可，可以根据需要进行两种不同的运行方式；  </p>\n<ol>\n<li>安装 <a href=\"https://brew.sh\">Homebrew</a></li>\n<li>确保homebrew最新<pre class=\" language-bash\"><code class=\"language-bash\">brew update\n</code></pre>\n</li>\n<li>打开终端并运行如下命令来安装用于将Flutter应用安装到IOS设备的工具<pre class=\" language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> --HEAD usbmuxd\nbrew <span class=\"token function\">link</span> usbmuxd\nbrew <span class=\"token function\">install</span> --HEAd libimobiledevice\nbrew <span class=\"token function\">install</span> ideviceinstaller ios-deploy cocoapods\npod setup\n</code></pre>\n如果这些命令中的任何一个失败并出现错误，可运行<em>brew doctor</em>并按照说明来解决问题</li>\n</ol>\n</blockquote>\n<ol start=\"4\">\n<li>遵循Xcode前面流程来配置项目</li>\n</ol>\n<ul>\n<li>在你Flutter项目目录中通过<em>open ios/Runner.xcworkspace</em>打开默认的Xcode workspace</li>\n<li>在Xcode中，选择导航面板左侧中的Runner项目</li>\n<li>在Runner target设置页面中，确保在 常规&gt;前面&gt;团队 下选择了您的开发团队。当你选择一个团队时，Xcode会创建并下载开发证书，向您的设备注册您的账户，并创建和下载配置文件(如果需要)<ul>\n<li>要开始您的第一个IOS开发项目，您可能需要使用您的APP ID登录Xcode</li>\n<li>任何App Id都支持开发和测试，但是如想法不到App Store则需要支付99到的开发者账号</li>\n</ul>\n</li>\n<li>当你第一次attach真机设备进行ios开发时，需要同时信任你的Mac和该设备上的开发证书。首次将IOS设备连接到Mac时，请在对话中选择 <em>信任</em>,然后，转到IOS设备上的设置应用程序，选择 常规&gt;设备管理 并信任您的证书<ul>\n<li>如果Xcode中的自动签名失败，请验证项目的 General&gt;Identity&gt;Bundle Identifier值是否唯一.</li>\n</ul>\n</li>\n</ul>\n<ol start=\"5\">\n<li>通过flutter run 运行启动项目<pre class=\" language-bash\"><code class=\"language-bash\">flutter run\n</code></pre>\n</li>\n</ol>\n<h1 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h1><h2 id=\"验证\"><a href=\"#验证\" class=\"headerlink\" title=\"验证\"></a>验证</h2><ul>\n<li>运行 adb // 检测android相关</li>\n<li>运行flutter doctor  // 检测flutter相关<blockquote>\n<p>第一次运行flutter命令(如 flutter doctor)，它会下载自己的依赖项目并自动编译，并缓存</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"FAQ\"><a href=\"#FAQ\" class=\"headerlink\" title=\"FAQ\"></a>FAQ</h2><h3 id=\"无法启动模拟器\"><a href=\"#无法启动模拟器\" class=\"headerlink\" title=\"无法启动模拟器\"></a>无法启动模拟器</h3><blockquote>\n<p>emulator: ERROR:x86 emulation currently requires hardware acceleration! Please ensure Windows Hypervisor Platform (WHPX) is properly installed and usable. CPU acceleration status: HAXM is not installed on this machine<br>解决方案:选择 Tools-&gt; SDK Manager -&gt; SDK Tools,安装 HAXM 即可<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190909204602.png\" alt=\"20190909204602.png\"></p>\n</blockquote>\n<h3 id=\"创建flutter项目\"><a href=\"#创建flutter项目\" class=\"headerlink\" title=\"创建flutter项目\"></a>创建flutter项目</h3><ol>\n<li><p>通过android studio创建<br>File-&gt;Create-&gt;New Flutter Project</p>\n</li>\n<li><p>通过命令行<br>flutter create my_first_app</p>\n</li>\n</ol>\n<h3 id=\"运行flutter项目\"><a href=\"#运行flutter项目\" class=\"headerlink\" title=\"运行flutter项目\"></a>运行flutter项目</h3><ol>\n<li><p>通过android studio 启动按钮</p>\n</li>\n<li><p>命令行运行android模拟器</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">// hw1 表示模拟器的名称\nemulator -avd hw1\n</code></pre>\n</li>\n<li><p>命令行 flutter run<br>前置条件，需要一个已经启动的android模拟器或者连接到电脑的android设备</p>\n</li>\n</ol>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Flutter-01 环境搭建<br>","more":"</p>\n<p>文档地址 <a href=\"https://developer.android.google.cn/studio/intro\">https://developer.android.google.cn/studio/intro</a></p>\n<h1 id=\"Window10环境搭建Flutter开发环境\"><a href=\"#Window10环境搭建Flutter开发环境\" class=\"headerlink\" title=\"Window10环境搭建Flutter开发环境\"></a>Window10环境搭建Flutter开发环境</h1><h2 id=\"前置条件\"><a href=\"#前置条件\" class=\"headerlink\" title=\"前置条件\"></a>前置条件</h2><ul>\n<li>磁盘空间足够</li>\n<li>git 2.x</li>\n</ul>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"Android-Studio-建议3-0及以上\"><a href=\"#Android-Studio-建议3-0及以上\" class=\"headerlink\" title=\"Android Studio(建议3.0及以上)\"></a>Android Studio(建议3.0及以上)</h3><ol>\n<li>下载</li>\n</ol>\n<ul>\n<li><a href=\"https://developer.android.google.com/studio(需要翻墙)\">https://developer.android.google.com/studio(需要翻墙)</a></li>\n<li><a href=\"https://developer.android.google.cn/studio\">https://developer.android.google.cn/studio</a><br>如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk</li>\n</ul>\n<ol start=\"2\">\n<li>为Android Studio安装Flutter和Dart插件<br>File-&gt;Settings-&gt;Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio<br>如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190909203319.png\" alt=\"20190909203319.png\"></li>\n</ol>\n<h3 id=\"Flutter-SDK\"><a href=\"#Flutter-SDK\" class=\"headerlink\" title=\"Flutter SDK\"></a>Flutter SDK</h3><ol>\n<li><p>配置flutter临时镜像(非必须)</p>\n<pre><code class=\"bash\">// 增加如下变量到用户环境变量中\nPUB_HOSTED_URL=https://pub.flutter-io.cn  \nFLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址\n</code></pre>\n</li>\n<li><p>下载并安装</p>\n</li>\n</ol>\n<ul>\n<li>通过 git 克隆flutter项目代码到本地，比如我的是D:\\Program Files\\Flutter<br>不建议放到高级目录，比如C:\\Program Files</li>\n<li>然后在Flutter安装目录的flutter文件下找到flutter_console.bat 双击运行  </li>\n</ul>\n<h3 id=\"设置环境变量\"><a href=\"#设置环境变量\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h3><ol>\n<li>系统环境PATH添加 D:\\Program Files\\Flutter\\bin</li>\n<li>Android环境变量配置</li>\n</ol>\n<ul>\n<li>添加系统环境变量<pre><code class=\"bash\">// 键和值，其中目录为Android SDK的目录，可以通过android studio菜单File-&gt;Settings 然后搜索SDK 可查看SDK的安装目录\nANDROID_HOME:C:\\Users\\xiexingen\\AppData\\Local\\Android\\Sdk\n</code></pre>\n</li>\n<li>在系统环境变量中的Path中添加%ANDROID_HOME%\\emulator</li>\n<li>在系统环境变量中的Path中添加%ANDROID_HOME%\\platform-tools</li>\n<li>在系统环境变量中的Path中添加%ANDROID_HOME%\\tools</li>\n</ul>\n<blockquote>\n<p>配置完成后，需要重启电脑</p>\n</blockquote>\n<h3 id=\"在Android模拟器上运行Flutter\"><a href=\"#在Android模拟器上运行Flutter\" class=\"headerlink\" title=\"在Android模拟器上运行Flutter\"></a>在Android模拟器上运行Flutter</h3><ul>\n<li>机器上需要启用VM acceleration</li>\n<li>启动android studio 菜单 Tools-&gt;AVD Manager 并选择 <code>Create Virtual Device</code></li>\n<li>选择一个设备 然后点 Next</li>\n<li>为要模拟的Android版本选择一个或多个系统镜像，然后选择Next(建议使用x86)</li>\n<li>在Emulated Performance下，选择 Hardware-GLES 2.0 以启用硬件加速</li>\n<li>验证AVD配置是否正确，然后选Finish,更多问题可以参考文档</li>\n<li>在Android Virtual Device Manager中，点击工具栏的 <code>Run</code>,启动模拟器并显示所选择的操作系统版本或设备的启动画面</li>\n<li>通过 <code>flutter run</code> 命令行运行启动项目</li>\n</ul>\n<h2 id=\"如何在Android真机运行\"><a href=\"#如何在Android真机运行\" class=\"headerlink\" title=\"如何在Android真机运行\"></a>如何在Android真机运行</h2><p>要准备在Android设备上运行并测试Flutter，需要安装Android4.1 (API level 16)或者更高低版本</p>\n<ul>\n<li>在设备上启用 <code>开发人员选项</code>和<code>USB调试</code>，可自行google</li>\n<li>使用USB将手机插入电脑，如果有授权提示则点同意</li>\n<li>在终端中，运行 <code>flutter devices</code>命令以验证Flutter是否识别你连接的Android设备</li>\n<li>通过 <code>flutter run</code> 启动项目</li>\n</ul>\n<hr>\n<h1 id=\"Mac-环境搭建Flutter开发环境\"><a href=\"#Mac-环境搭建Flutter开发环境\" class=\"headerlink\" title=\"Mac 环境搭建Flutter开发环境\"></a>Mac 环境搭建Flutter开发环境</h1><blockquote>\n<p>由于没有mac电脑，所以特地在VM下安装了一个mac系统</p>\n</blockquote>\n<h2 id=\"前置条件-1\"><a href=\"#前置条件-1\" class=\"headerlink\" title=\"前置条件\"></a>前置条件</h2><ul>\n<li>磁盘空间足够</li>\n<li>安装了命令行工具: bash、curl、git 2.x、mkdir、rm、unzip、which</li>\n<li>由于国内访问Flutter可能受限，Flutter官方为中国地区待见了临时镜像，可添加如下环境变量到用户的环境变量中<pre><code class=\"bash\">// Macintosh HD-&gt;Users-&gt;用户名-&gt;.bash_profile\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址\n</code></pre>\n</li>\n</ul>\n<h2 id=\"安装-1\"><a href=\"#安装-1\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"Flutter-SDK-1\"><a href=\"#Flutter-SDK-1\" class=\"headerlink\" title=\"Flutter SDK\"></a>Flutter SDK</h3><ol start=\"2\">\n<li>下载并安装</li>\n</ol>\n<ul>\n<li>下载stable版本的sdk，然后解压到~/flutter</li>\n</ul>\n<ol start=\"3\">\n<li><p>添加flutter路径到path中</p>\n<pre><code class=\"bash\">cd ~\nvim .bash_profile\n// 然后添加下面行,;wq 保存，然后重启bash\nexport PATH=/Users/xiexingen/flutter/bin:$PATH\n</code></pre>\n</li>\n<li><p>运行flutter doctor来检查flutter<br>会有很多xx 比如xcode，android相关的工具</p>\n</li>\n</ol>\n<h3 id=\"Android-Studio-建议3-0及以上-1\"><a href=\"#Android-Studio-建议3-0及以上-1\" class=\"headerlink\" title=\"Android Studio(建议3.0及以上)\"></a>Android Studio(建议3.0及以上)</h3><ol>\n<li>下载</li>\n</ol>\n<ul>\n<li><a href=\"https://developer.android.google.com/studio(需要翻墙)\">https://developer.android.google.com/studio(需要翻墙)</a></li>\n<li><a href=\"https://developer.android.google.cn/studio\">https://developer.android.google.cn/studio</a><br>如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk</li>\n</ul>\n<ol start=\"2\">\n<li>为Android Studio安装Flutter和Dart插件<br>File-&gt;Settings-&gt;Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio<br>如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190909203319.png\" alt=\"20190909203319.png\"></li>\n</ol>\n<h3 id=\"设置环境变量-1\"><a href=\"#设置环境变量-1\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h3><ul>\n<li>添加系统环境变量<pre><code class=\"bash\">// 电脑/Users/用户名/.bash_profile\n# Android 环境变量 xiexingen为我的用户名\nexport ANDROID_HOME=/Users/xiexingen/Library/Android/sdk\n# Android 模拟器路径\nexport PATH=$&#123;PATH&#125;:$&#123;ANDROID_HOME&#125;/emulator\n# Android tools 路径\nexport PATH=$&#123;PATH&#125;:$&#123;ANDROID_HOME&#125;/tools\n# Android 平台工具路径\nexport PATH=$&#123;PATH&#125;:$&#123;ANDROID_HOME&#125;/platform-tools\n# Android NDK路径\nANDROID_NDK_HOME=/Users/xiexingen/Library/Android/ndk/android-ndk-r10e\n# Flutter镜像\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n# Flutter 环境变量\nexport PATH=/Users/xiexingen/flutter/bin:$PATH\n</code></pre>\n</li>\n</ul>\n<blockquote>\n<p>配置完成后，需要重启电脑</p>\n</blockquote>\n<h3 id=\"安装Xcode\"><a href=\"#安装Xcode\" class=\"headerlink\" title=\"安装Xcode\"></a>安装Xcode</h3><ol>\n<li>通过苹果应用商店安装</li>\n<li>配置Xcode命令行工具以使用最新安装的Xcode版本<pre><code class=\"bash\">sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer\n</code></pre>\n</li>\n</ol>\n<h3 id=\"设置IOS模拟器\"><a href=\"#设置IOS模拟器\" class=\"headerlink\" title=\"设置IOS模拟器\"></a>设置IOS模拟器</h3><ol>\n<li>在终端输入如下命令行打开一个ios模拟器<pre><code class=\"bash\">open -a Simulator\n</code></pre>\n</li>\n<li>通过模拟器菜单的 <em>硬件-&gt;设备</em>,确保是64位的iphone5s或更新的模拟器</li>\n</ol>\n<h3 id=\"如何将Flutter安装到IOS真机上\"><a href=\"#如何将Flutter安装到IOS真机上\" class=\"headerlink\" title=\"如何将Flutter安装到IOS真机上\"></a>如何将Flutter安装到IOS真机上</h3><p>要通过<em>flutter run</em> 将Flutter应用安装到ios整机设备，需要一些额外的工具和一个Apple账号，还需要在Xcode中进行设置：</p>\n<blockquote>\n<p>当然，用XCode来讲Flutter运行在真机上更简单，只需要点 <em>run</em>按钮即可，可以根据需要进行两种不同的运行方式；  </p>\n<ol>\n<li>安装 <a href=\"https://brew.sh\">Homebrew</a></li>\n<li>确保homebrew最新<pre><code class=\"bash\">brew update\n</code></pre>\n</li>\n<li>打开终端并运行如下命令来安装用于将Flutter应用安装到IOS设备的工具<pre><code class=\"bash\">brew install --HEAD usbmuxd\nbrew link usbmuxd\nbrew install --HEAd libimobiledevice\nbrew install ideviceinstaller ios-deploy cocoapods\npod setup\n</code></pre>\n如果这些命令中的任何一个失败并出现错误，可运行<em>brew doctor</em>并按照说明来解决问题</li>\n</ol>\n</blockquote>\n<ol start=\"4\">\n<li>遵循Xcode前面流程来配置项目</li>\n</ol>\n<ul>\n<li>在你Flutter项目目录中通过<em>open ios/Runner.xcworkspace</em>打开默认的Xcode workspace</li>\n<li>在Xcode中，选择导航面板左侧中的Runner项目</li>\n<li>在Runner target设置页面中，确保在 常规&gt;前面&gt;团队 下选择了您的开发团队。当你选择一个团队时，Xcode会创建并下载开发证书，向您的设备注册您的账户，并创建和下载配置文件(如果需要)<ul>\n<li>要开始您的第一个IOS开发项目，您可能需要使用您的APP ID登录Xcode</li>\n<li>任何App Id都支持开发和测试，但是如想法不到App Store则需要支付99到的开发者账号</li>\n</ul>\n</li>\n<li>当你第一次attach真机设备进行ios开发时，需要同时信任你的Mac和该设备上的开发证书。首次将IOS设备连接到Mac时，请在对话中选择 <em>信任</em>,然后，转到IOS设备上的设置应用程序，选择 常规&gt;设备管理 并信任您的证书<ul>\n<li>如果Xcode中的自动签名失败，请验证项目的 General&gt;Identity&gt;Bundle Identifier值是否唯一.</li>\n</ul>\n</li>\n</ul>\n<ol start=\"5\">\n<li>通过flutter run 运行启动项目<pre><code class=\"bash\">flutter run\n</code></pre>\n</li>\n</ol>\n<h1 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h1><h2 id=\"验证\"><a href=\"#验证\" class=\"headerlink\" title=\"验证\"></a>验证</h2><ul>\n<li>运行 adb // 检测android相关</li>\n<li>运行flutter doctor  // 检测flutter相关<blockquote>\n<p>第一次运行flutter命令(如 flutter doctor)，它会下载自己的依赖项目并自动编译，并缓存</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"FAQ\"><a href=\"#FAQ\" class=\"headerlink\" title=\"FAQ\"></a>FAQ</h2><h3 id=\"无法启动模拟器\"><a href=\"#无法启动模拟器\" class=\"headerlink\" title=\"无法启动模拟器\"></a>无法启动模拟器</h3><blockquote>\n<p>emulator: ERROR:x86 emulation currently requires hardware acceleration! Please ensure Windows Hypervisor Platform (WHPX) is properly installed and usable. CPU acceleration status: HAXM is not installed on this machine<br>解决方案:选择 Tools-&gt; SDK Manager -&gt; SDK Tools,安装 HAXM 即可<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190909204602.png\" alt=\"20190909204602.png\"></p>\n</blockquote>\n<h3 id=\"创建flutter项目\"><a href=\"#创建flutter项目\" class=\"headerlink\" title=\"创建flutter项目\"></a>创建flutter项目</h3><ol>\n<li><p>通过android studio创建<br>File-&gt;Create-&gt;New Flutter Project</p>\n</li>\n<li><p>通过命令行<br>flutter create my_first_app</p>\n</li>\n</ol>\n<h3 id=\"运行flutter项目\"><a href=\"#运行flutter项目\" class=\"headerlink\" title=\"运行flutter项目\"></a>运行flutter项目</h3><ol>\n<li><p>通过android studio 启动按钮</p>\n</li>\n<li><p>命令行运行android模拟器</p>\n<pre><code class=\"bash\">// hw1 表示模拟器的名称\nemulator -avd hw1\n</code></pre>\n</li>\n<li><p>命令行 flutter run<br>前置条件，需要一个已经启动的android模拟器或者连接到电脑的android设备</p>\n</li>\n</ol>"},{"title":".net core 3.0 Signalr - 实现一个业务推送系统","date":"2019-09-20T12:00:10.000Z","abbrlink":34744,"_content":"\n## 介绍\nASP.NET Core SignalR 是一个开源代码库，它简化了向应用添加实时 Web 功能的过程。 实时 Web 功能使服务器端代码能够即时将内容推送到客户端。  \nSignalR 的适用对象：  \n- 需要来自服务器的高频率更新的应用。 例如：游戏、社交网络、投票、拍卖、地图和 GPS 应用。\n- 仪表板和监视应用。 示例包括公司仪表板、销售状态即时更新或行程警示。\n- 协作应用。 协作应用的示例包括白板应用和团队会议软件。\n- 需要通知的应用。 社交网络、电子邮件、聊天、游戏、行程警示以及许多其他应用都使用通知。\nSignalR 提供了一个用于创建服务器到客户端远程过程调用（RPC）的 API。 RPC 通过服务器端 .NET Core 代码调用客户端上的 JavaScript 函数。\n以下是 ASP.NET Core SignalR 的一些功能：\n- 自动管理连接。\n- 同时向所有连接的客户端发送消息。 例如，聊天室。\n- 将消息发送到特定的客户端或客户端组。\n- 扩展以处理增加的流量。\n\n## 业务需求\n- 一个人可以开多个tab有多个连接\n- 给指定的一个、一批人推送(以User为中心对该用户的所有连接进行推送(浏览器多个tab))\n- 给指定的组中某些人推送(群聊)\n- 给指定的人某些Connect推送(登录排斥，不允许多台电同时脑登录)\n\n## 改进部分\n- 优先使用socket进行通信\n- 支持一个用户多个连接\n- 使用MessagePack进行传输\n- 使用Redis作为底板来支持横向扩展\n\n本系列共分为10篇，包括基础知识介绍，项目实战等，目录如下\n\n[.net core 3.0 Signalr - 01 基础篇](/2019/09/21/dotnetcore/signalr/01-base/)   \n[.net core 3.0 Signalr - 02 使用强类型的Hub](/2019/09/22/dotnetcore/signalr/02-type-hub/)   \n[.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容](/2019/09/29/dotnetcore/signalr/03-message-pack/)   \n[.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展](/2019/10/01/dotnetcore/signalr/04-redis/)   \n[.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联](/2019/10/02/dotnetcore/signalr/05-jwt/)   \n[.net core 3.0 Signalr - 06 业务实现-业务分析](/2019/10/03/dotnetcore/signalr/06-analysis/)   \n[.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接](/2019/10/04/dotnetcore/signalr/07-self-manager/)   \n[.net core 3.0 Signalr - 08 业务实现-客户端demo](/2019/10/05/dotnetcore/signalr/08-clientdemo/)   \n[.net core 3.0 Signalr - 09 待改进&交流](/2019/10/05/dotnetcore/signalr/09-todo/)   \n\n## Demo源码地址\n> https://github.com/xiexingen/CTS.Signalr\n\n## 强烈推荐的参考文档  \n> 微软官方文档:https://docs.microsoft.com/zh-CN/aspnet/core/signalr/introduction?view=aspnetcore-3.0  \n> 发现写的不错的博客: https://www.cnblogs.com/cgzl/p/9509207.html  \n> 发现写的不错的博客:https://www.cnblogs.com/cgzl/p/9515516.html\n","source":"_posts/dotnetcore/signalr/00-introduct.md","raw":"---\ntitle: .net core 3.0 Signalr - 实现一个业务推送系统\ndate: '2019-09-20 20:00:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\nabbrlink: 34744\n---\n\n## 介绍\nASP.NET Core SignalR 是一个开源代码库，它简化了向应用添加实时 Web 功能的过程。 实时 Web 功能使服务器端代码能够即时将内容推送到客户端。  \nSignalR 的适用对象：  \n- 需要来自服务器的高频率更新的应用。 例如：游戏、社交网络、投票、拍卖、地图和 GPS 应用。\n- 仪表板和监视应用。 示例包括公司仪表板、销售状态即时更新或行程警示。\n- 协作应用。 协作应用的示例包括白板应用和团队会议软件。\n- 需要通知的应用。 社交网络、电子邮件、聊天、游戏、行程警示以及许多其他应用都使用通知。\nSignalR 提供了一个用于创建服务器到客户端远程过程调用（RPC）的 API。 RPC 通过服务器端 .NET Core 代码调用客户端上的 JavaScript 函数。\n以下是 ASP.NET Core SignalR 的一些功能：\n- 自动管理连接。\n- 同时向所有连接的客户端发送消息。 例如，聊天室。\n- 将消息发送到特定的客户端或客户端组。\n- 扩展以处理增加的流量。\n\n## 业务需求\n- 一个人可以开多个tab有多个连接\n- 给指定的一个、一批人推送(以User为中心对该用户的所有连接进行推送(浏览器多个tab))\n- 给指定的组中某些人推送(群聊)\n- 给指定的人某些Connect推送(登录排斥，不允许多台电同时脑登录)\n\n## 改进部分\n- 优先使用socket进行通信\n- 支持一个用户多个连接\n- 使用MessagePack进行传输\n- 使用Redis作为底板来支持横向扩展\n\n本系列共分为10篇，包括基础知识介绍，项目实战等，目录如下\n\n[.net core 3.0 Signalr - 01 基础篇](/2019/09/21/dotnetcore/signalr/01-base/)   \n[.net core 3.0 Signalr - 02 使用强类型的Hub](/2019/09/22/dotnetcore/signalr/02-type-hub/)   \n[.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容](/2019/09/29/dotnetcore/signalr/03-message-pack/)   \n[.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展](/2019/10/01/dotnetcore/signalr/04-redis/)   \n[.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联](/2019/10/02/dotnetcore/signalr/05-jwt/)   \n[.net core 3.0 Signalr - 06 业务实现-业务分析](/2019/10/03/dotnetcore/signalr/06-analysis/)   \n[.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接](/2019/10/04/dotnetcore/signalr/07-self-manager/)   \n[.net core 3.0 Signalr - 08 业务实现-客户端demo](/2019/10/05/dotnetcore/signalr/08-clientdemo/)   \n[.net core 3.0 Signalr - 09 待改进&交流](/2019/10/05/dotnetcore/signalr/09-todo/)   \n\n## Demo源码地址\n> https://github.com/xiexingen/CTS.Signalr\n\n## 强烈推荐的参考文档  \n> 微软官方文档:https://docs.microsoft.com/zh-CN/aspnet/core/signalr/introduction?view=aspnetcore-3.0  \n> 发现写的不错的博客: https://www.cnblogs.com/cgzl/p/9509207.html  \n> 发现写的不错的博客:https://www.cnblogs.com/cgzl/p/9515516.html\n","slug":"dotnetcore/signalr/00-introduct","published":1,"updated":"2019-09-27T14:26:02.899Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck1dks9pp0000t0scx3a9530h","content":"<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>ASP.NET Core SignalR 是一个开源代码库，它简化了向应用添加实时 Web 功能的过程。 实时 Web 功能使服务器端代码能够即时将内容推送到客户端。<br>SignalR 的适用对象：  </p>\n<ul>\n<li>需要来自服务器的高频率更新的应用。 例如：游戏、社交网络、投票、拍卖、地图和 GPS 应用。</li>\n<li>仪表板和监视应用。 示例包括公司仪表板、销售状态即时更新或行程警示。</li>\n<li>协作应用。 协作应用的示例包括白板应用和团队会议软件。</li>\n<li>需要通知的应用。 社交网络、电子邮件、聊天、游戏、行程警示以及许多其他应用都使用通知。<br>SignalR 提供了一个用于创建服务器到客户端远程过程调用（RPC）的 API。 RPC 通过服务器端 .NET Core 代码调用客户端上的 JavaScript 函数。<br>以下是 ASP.NET Core SignalR 的一些功能：</li>\n<li>自动管理连接。</li>\n<li>同时向所有连接的客户端发送消息。 例如，聊天室。</li>\n<li>将消息发送到特定的客户端或客户端组。</li>\n<li>扩展以处理增加的流量。</li>\n</ul>\n<h2 id=\"业务需求\"><a href=\"#业务需求\" class=\"headerlink\" title=\"业务需求\"></a>业务需求</h2><ul>\n<li>一个人可以开多个tab有多个连接</li>\n<li>给指定的一个、一批人推送(以User为中心对该用户的所有连接进行推送(浏览器多个tab))</li>\n<li>给指定的组中某些人推送(群聊)</li>\n<li>给指定的人某些Connect推送(登录排斥，不允许多台电同时脑登录)</li>\n</ul>\n<h2 id=\"改进部分\"><a href=\"#改进部分\" class=\"headerlink\" title=\"改进部分\"></a>改进部分</h2><ul>\n<li>优先使用socket进行通信</li>\n<li>支持一个用户多个连接</li>\n<li>使用MessagePack进行传输</li>\n<li>使用Redis作为底板来支持横向扩展</li>\n</ul>\n<p>本系列共分为10篇，包括基础知识介绍，项目实战等，目录如下</p>\n<p><a href=\"/2019/09/21/dotnetcore/signalr/01-base/\">.net core 3.0 Signalr - 01 基础篇</a><br><a href=\"/2019/09/22/dotnetcore/signalr/02-type-hub/\">.net core 3.0 Signalr - 02 使用强类型的Hub</a><br><a href=\"/2019/09/29/dotnetcore/signalr/03-message-pack/\">.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</a><br><a href=\"/2019/10/01/dotnetcore/signalr/04-redis/\">.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</a><br><a href=\"/2019/10/02/dotnetcore/signalr/05-jwt/\">.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</a><br><a href=\"/2019/10/03/dotnetcore/signalr/06-analysis/\">.net core 3.0 Signalr - 06 业务实现-业务分析</a><br><a href=\"/2019/10/04/dotnetcore/signalr/07-self-manager/\">.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</a><br><a href=\"/2019/10/05/dotnetcore/signalr/08-clientdemo/\">.net core 3.0 Signalr - 08 业务实现-客户端demo</a><br><a href=\"/2019/10/05/dotnetcore/signalr/09-todo/\">.net core 3.0 Signalr - 09 待改进&amp;交流</a>   </p>\n<h2 id=\"Demo源码地址\"><a href=\"#Demo源码地址\" class=\"headerlink\" title=\"Demo源码地址\"></a>Demo源码地址</h2><blockquote>\n<p><a href=\"https://github.com/xiexingen/CTS.Signalr\" target=\"_blank\" rel=\"noopener\">https://github.com/xiexingen/CTS.Signalr</a></p>\n</blockquote>\n<h2 id=\"强烈推荐的参考文档\"><a href=\"#强烈推荐的参考文档\" class=\"headerlink\" title=\"强烈推荐的参考文档\"></a>强烈推荐的参考文档</h2><blockquote>\n<p>微软官方文档:<a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/signalr/introduction?view=aspnetcore-3.0\" target=\"_blank\" rel=\"noopener\">https://docs.microsoft.com/zh-CN/aspnet/core/signalr/introduction?view=aspnetcore-3.0</a><br>发现写的不错的博客: <a href=\"https://www.cnblogs.com/cgzl/p/9509207.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/cgzl/p/9509207.html</a><br>发现写的不错的博客:<a href=\"https://www.cnblogs.com/cgzl/p/9515516.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/cgzl/p/9515516.html</a></p>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"","more":"<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>ASP.NET Core SignalR 是一个开源代码库，它简化了向应用添加实时 Web 功能的过程。 实时 Web 功能使服务器端代码能够即时将内容推送到客户端。<br>SignalR 的适用对象：  </p>\n<ul>\n<li>需要来自服务器的高频率更新的应用。 例如：游戏、社交网络、投票、拍卖、地图和 GPS 应用。</li>\n<li>仪表板和监视应用。 示例包括公司仪表板、销售状态即时更新或行程警示。</li>\n<li>协作应用。 协作应用的示例包括白板应用和团队会议软件。</li>\n<li>需要通知的应用。 社交网络、电子邮件、聊天、游戏、行程警示以及许多其他应用都使用通知。<br>SignalR 提供了一个用于创建服务器到客户端远程过程调用（RPC）的 API。 RPC 通过服务器端 .NET Core 代码调用客户端上的 JavaScript 函数。<br>以下是 ASP.NET Core SignalR 的一些功能：</li>\n<li>自动管理连接。</li>\n<li>同时向所有连接的客户端发送消息。 例如，聊天室。</li>\n<li>将消息发送到特定的客户端或客户端组。</li>\n<li>扩展以处理增加的流量。</li>\n</ul>\n<h2 id=\"业务需求\"><a href=\"#业务需求\" class=\"headerlink\" title=\"业务需求\"></a>业务需求</h2><ul>\n<li>一个人可以开多个tab有多个连接</li>\n<li>给指定的一个、一批人推送(以User为中心对该用户的所有连接进行推送(浏览器多个tab))</li>\n<li>给指定的组中某些人推送(群聊)</li>\n<li>给指定的人某些Connect推送(登录排斥，不允许多台电同时脑登录)</li>\n</ul>\n<h2 id=\"改进部分\"><a href=\"#改进部分\" class=\"headerlink\" title=\"改进部分\"></a>改进部分</h2><ul>\n<li>优先使用socket进行通信</li>\n<li>支持一个用户多个连接</li>\n<li>使用MessagePack进行传输</li>\n<li>使用Redis作为底板来支持横向扩展</li>\n</ul>\n<p>本系列共分为10篇，包括基础知识介绍，项目实战等，目录如下</p>\n<p><a href=\"/2019/09/21/dotnetcore/signalr/01-base/\">.net core 3.0 Signalr - 01 基础篇</a><br><a href=\"/2019/09/22/dotnetcore/signalr/02-type-hub/\">.net core 3.0 Signalr - 02 使用强类型的Hub</a><br><a href=\"/2019/09/29/dotnetcore/signalr/03-message-pack/\">.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</a><br><a href=\"/2019/10/01/dotnetcore/signalr/04-redis/\">.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</a><br><a href=\"/2019/10/02/dotnetcore/signalr/05-jwt/\">.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</a><br><a href=\"/2019/10/03/dotnetcore/signalr/06-analysis/\">.net core 3.0 Signalr - 06 业务实现-业务分析</a><br><a href=\"/2019/10/04/dotnetcore/signalr/07-self-manager/\">.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</a><br><a href=\"/2019/10/05/dotnetcore/signalr/08-clientdemo/\">.net core 3.0 Signalr - 08 业务实现-客户端demo</a><br><a href=\"/2019/10/05/dotnetcore/signalr/09-todo/\">.net core 3.0 Signalr - 09 待改进&amp;交流</a>   </p>\n<h2 id=\"Demo源码地址\"><a href=\"#Demo源码地址\" class=\"headerlink\" title=\"Demo源码地址\"></a>Demo源码地址</h2><blockquote>\n<p><a href=\"https://github.com/xiexingen/CTS.Signalr\" target=\"_blank\" rel=\"noopener\">https://github.com/xiexingen/CTS.Signalr</a></p>\n</blockquote>\n<h2 id=\"强烈推荐的参考文档\"><a href=\"#强烈推荐的参考文档\" class=\"headerlink\" title=\"强烈推荐的参考文档\"></a>强烈推荐的参考文档</h2><blockquote>\n<p>微软官方文档:<a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/signalr/introduction?view=aspnetcore-3.0\" target=\"_blank\" rel=\"noopener\">https://docs.microsoft.com/zh-CN/aspnet/core/signalr/introduction?view=aspnetcore-3.0</a><br>发现写的不错的博客: <a href=\"https://www.cnblogs.com/cgzl/p/9509207.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/cgzl/p/9509207.html</a><br>发现写的不错的博客:<a href=\"https://www.cnblogs.com/cgzl/p/9515516.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/cgzl/p/9515516.html</a></p>\n</blockquote>\n"},{"title":".net core 3.0 Signalr - 01 基础篇","date":"2019-09-21T02:34:10.000Z","abbrlink":61070,"_content":"\n.net core 3.0 Signalr - 01 基础篇 以最简洁的方式介绍如何创建一个可连接的hub\n<!-- more -->\n\n因为将signalr作为单独的站点，此处需要建立两个项目，一个专门用于signalr作为推送项目，一个客户端(实际的业务项目)\n\n## 基础知识速览\n\n### Clients对象属性\n|   属性    |   描述 \n|   :---    |   :--- \n|   All    |   在所有连接的客户端上调用方法\n|   Caller  |   在调用集线器方法的客户端上调用方法\n|   Others  |   除当前连接外的所有连接\n\n### Clients对象方法\n|   方法    |   描述 \n|   :---    |   :--- \n|   AllExcept    |   在所有连接的客户端（指定的连接除外）上调用方法\n|   Client  |   在特定连接的客户端上调用方法(单个)\n|   Clients  |   在特定连接的客户端上调用方法(多个)\n|   Group  |   对指定组中的所有连接调用方法\n|   GroupExcept  |   对指定组中的所有连接调用方法，指定的连接除外\n|   Groups  |   在多组连接上调用方法\n|   OthersInGroup  |   对一组连接调用方法，而不包括调用该集线器方法的客户端\n|   User  |   对与特定用户关联的所有连接调用方法\n|   Users  |   对与指定用户相关联的所有连接调用方法\n\n\n## Signalr推送端\n- 通过命令行或者vs 2019新建.netcore web项目，选择.net core 3.0、webapi  \n- 建立一个Hub\n    ``` C#\n    public class NotifyHub : Hub\n    {\n\n    }\n    ```\n\n- 修改Startup中的ConfigServices方法，注册对应的服务\n    ``` C#\n    // 添加Signalr\n    services.AddSignalR(config =>\n    {\n        // _webEnv为通过依赖注入在Startup的构造函数中注入的 IWebHostEnvironment\n        if (_webEnv.IsDevelopment())\n        {\n            config.EnableDetailedErrors = true;\n        }\n    });\n    ```\n- 修改Configure配置HTTP请求的管道\n    ``` C#\n    ...\n    app.UseRouting();\n    app.UseEndpoints(endpoints =>{\n        endpoints.MapHub<NotifyHub>(\"/notify-hub\");\n    });\n\n    ```\n## 业务端\n[相关文档](https://docs.microsoft.com/zh-CN/aspnet/core/tutorials/signalr?view=aspnetcore-3.0&tabs=visual-studio)\n\n- 创建连接对象\n    ``` js\n    var connection=new signalR.HubConnectionBuilder()\n    .configureLogging(signalR.LogLevel.Error) // 前端控制台的日志级别，根据需要配置\n    .withUrl('http://localhost:50001/notify-hub') // 连接地址,这个地址是signalr项目的地址\n    .withAutomaticReconnect([0, 2000, 5000, 10000, 20000]) // 配置重连的时间\n    .build();\n\n    // 重连的时候触发\n    connection.onreconnecting(function (info) {\n        console.info('----------------------------------signalr-- onreconnecting', info);\n    });\n\n    //连接关闭的回调\n    connection.onclose(function (err) {\n        console.info('--------------------------------signalr-- onclose', err);\n    });\n\n    connection.start().then(function (data) {\n        console.log('已成功连接到signalr服务器')\n    }).catch(function (error) {\n        console.error(error.toString());\n    });\n\n    ```\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   下一篇  |   [.net core 3.0 Signalr - 02 使用强类型的Hub](/2019/09/22/dotnetcore/signalr/02-type-hub/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/01-base.md","raw":"---\ntitle: .net core 3.0 Signalr - 01 基础篇\ndate: '2019-09-21 10:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\nabbrlink: 61070\n---\n\n.net core 3.0 Signalr - 01 基础篇 以最简洁的方式介绍如何创建一个可连接的hub\n<!-- more -->\n\n因为将signalr作为单独的站点，此处需要建立两个项目，一个专门用于signalr作为推送项目，一个客户端(实际的业务项目)\n\n## 基础知识速览\n\n### Clients对象属性\n|   属性    |   描述 \n|   :---    |   :--- \n|   All    |   在所有连接的客户端上调用方法\n|   Caller  |   在调用集线器方法的客户端上调用方法\n|   Others  |   除当前连接外的所有连接\n\n### Clients对象方法\n|   方法    |   描述 \n|   :---    |   :--- \n|   AllExcept    |   在所有连接的客户端（指定的连接除外）上调用方法\n|   Client  |   在特定连接的客户端上调用方法(单个)\n|   Clients  |   在特定连接的客户端上调用方法(多个)\n|   Group  |   对指定组中的所有连接调用方法\n|   GroupExcept  |   对指定组中的所有连接调用方法，指定的连接除外\n|   Groups  |   在多组连接上调用方法\n|   OthersInGroup  |   对一组连接调用方法，而不包括调用该集线器方法的客户端\n|   User  |   对与特定用户关联的所有连接调用方法\n|   Users  |   对与指定用户相关联的所有连接调用方法\n\n\n## Signalr推送端\n- 通过命令行或者vs 2019新建.netcore web项目，选择.net core 3.0、webapi  \n- 建立一个Hub\n    ``` C#\n    public class NotifyHub : Hub\n    {\n\n    }\n    ```\n\n- 修改Startup中的ConfigServices方法，注册对应的服务\n    ``` C#\n    // 添加Signalr\n    services.AddSignalR(config =>\n    {\n        // _webEnv为通过依赖注入在Startup的构造函数中注入的 IWebHostEnvironment\n        if (_webEnv.IsDevelopment())\n        {\n            config.EnableDetailedErrors = true;\n        }\n    });\n    ```\n- 修改Configure配置HTTP请求的管道\n    ``` C#\n    ...\n    app.UseRouting();\n    app.UseEndpoints(endpoints =>{\n        endpoints.MapHub<NotifyHub>(\"/notify-hub\");\n    });\n\n    ```\n## 业务端\n[相关文档](https://docs.microsoft.com/zh-CN/aspnet/core/tutorials/signalr?view=aspnetcore-3.0&tabs=visual-studio)\n\n- 创建连接对象\n    ``` js\n    var connection=new signalR.HubConnectionBuilder()\n    .configureLogging(signalR.LogLevel.Error) // 前端控制台的日志级别，根据需要配置\n    .withUrl('http://localhost:50001/notify-hub') // 连接地址,这个地址是signalr项目的地址\n    .withAutomaticReconnect([0, 2000, 5000, 10000, 20000]) // 配置重连的时间\n    .build();\n\n    // 重连的时候触发\n    connection.onreconnecting(function (info) {\n        console.info('----------------------------------signalr-- onreconnecting', info);\n    });\n\n    //连接关闭的回调\n    connection.onclose(function (err) {\n        console.info('--------------------------------signalr-- onclose', err);\n    });\n\n    connection.start().then(function (data) {\n        console.log('已成功连接到signalr服务器')\n    }).catch(function (error) {\n        console.error(error.toString());\n    });\n\n    ```\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   下一篇  |   [.net core 3.0 Signalr - 02 使用强类型的Hub](/2019/09/22/dotnetcore/signalr/02-type-hub/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/01-base","published":1,"updated":"2020-02-23T13:45:22.665Z","_id":"ck1dks9ps0001t0sc3eh7pcey","comments":1,"layout":"post","photos":[],"link":"","content":"<p>.net core 3.0 Signalr - 01 基础篇 以最简洁的方式介绍如何创建一个可连接的hub<br><a id=\"more\"></a></p>\n<p>因为将signalr作为单独的站点，此处需要建立两个项目，一个专门用于signalr作为推送项目，一个客户端(实际的业务项目)</p>\n<h2 id=\"基础知识速览\"><a href=\"#基础知识速览\" class=\"headerlink\" title=\"基础知识速览\"></a>基础知识速览</h2><h3 id=\"Clients对象属性\"><a href=\"#Clients对象属性\" class=\"headerlink\" title=\"Clients对象属性\"></a>Clients对象属性</h3><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">属性</th>\n<th style=\"text-align:left\">描述 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">All</td>\n<td style=\"text-align:left\">在所有连接的客户端上调用方法</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Caller</td>\n<td style=\"text-align:left\">在调用集线器方法的客户端上调用方法</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Others</td>\n<td style=\"text-align:left\">除当前连接外的所有连接</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"Clients对象方法\"><a href=\"#Clients对象方法\" class=\"headerlink\" title=\"Clients对象方法\"></a>Clients对象方法</h3><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">方法</th>\n<th style=\"text-align:left\">描述 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">AllExcept</td>\n<td style=\"text-align:left\">在所有连接的客户端（指定的连接除外）上调用方法</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Client</td>\n<td style=\"text-align:left\">在特定连接的客户端上调用方法(单个)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Clients</td>\n<td style=\"text-align:left\">在特定连接的客户端上调用方法(多个)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Group</td>\n<td style=\"text-align:left\">对指定组中的所有连接调用方法</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">GroupExcept</td>\n<td style=\"text-align:left\">对指定组中的所有连接调用方法，指定的连接除外</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Groups</td>\n<td style=\"text-align:left\">在多组连接上调用方法</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">OthersInGroup</td>\n<td style=\"text-align:left\">对一组连接调用方法，而不包括调用该集线器方法的客户端</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">User</td>\n<td style=\"text-align:left\">对与特定用户关联的所有连接调用方法</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Users</td>\n<td style=\"text-align:left\">对与指定用户相关联的所有连接调用方法</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"Signalr推送端\"><a href=\"#Signalr推送端\" class=\"headerlink\" title=\"Signalr推送端\"></a>Signalr推送端</h2><ul>\n<li>通过命令行或者vs 2019新建.netcore web项目，选择.net core 3.0、webapi  </li>\n<li><p>建立一个Hub</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">  public class NotifyHub : Hub\n  &#123;\n\n  &#125;\n</code></pre>\n</li>\n<li><p>修改Startup中的ConfigServices方法，注册对应的服务</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">  // 添加Signalr\n  services.AddSignalR(config =>\n  &#123;\n      // _webEnv为通过依赖注入在Startup的构造函数中注入的 IWebHostEnvironment\n      if (_webEnv.IsDevelopment())\n      &#123;\n          config.EnableDetailedErrors = true;\n      &#125;\n  &#125;);\n</code></pre>\n</li>\n<li><p>修改Configure配置HTTP请求的管道</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">  ...\n  app.UseRouting();\n  app.UseEndpoints(endpoints =>&#123;\n      endpoints.MapHub<NotifyHub>(\"/notify-hub\");\n  &#125;);\n\n</code></pre>\n<h2 id=\"业务端\"><a href=\"#业务端\" class=\"headerlink\" title=\"业务端\"></a>业务端</h2><p><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/tutorials/signalr?view=aspnetcore-3.0&amp;tabs=visual-studio\">相关文档</a></p>\n</li>\n<li><p>创建连接对象</p>\n<pre class=\" language-js\"><code class=\"language-js\">  <span class=\"token keyword\">var</span> connection<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">signalR<span class=\"token punctuation\">.</span>HubConnectionBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">configureLogging</span><span class=\"token punctuation\">(</span>signalR<span class=\"token punctuation\">.</span>LogLevel<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 前端控制台的日志级别，根据需要配置</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">withUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:50001/notify-hub'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 连接地址,这个地址是signalr项目的地址</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">withAutomaticReconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 配置重连的时间</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\" spellcheck=\"true\">// 重连的时候触发</span>\n  connection<span class=\"token punctuation\">.</span><span class=\"token function\">onreconnecting</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'----------------------------------signalr-- onreconnecting'</span><span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\" spellcheck=\"true\">//连接关闭的回调</span>\n  connection<span class=\"token punctuation\">.</span><span class=\"token function\">onclose</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--------------------------------signalr-- onclose'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  connection<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'已成功连接到signalr服务器'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n</code></pre>\n</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/22/dotnetcore/signalr/02-type-hub/\">.net core 3.0 Signalr - 02 使用强类型的Hub</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 01 基础篇 以最简洁的方式介绍如何创建一个可连接的hub<br>","more":"</p>\n<p>因为将signalr作为单独的站点，此处需要建立两个项目，一个专门用于signalr作为推送项目，一个客户端(实际的业务项目)</p>\n<h2 id=\"基础知识速览\"><a href=\"#基础知识速览\" class=\"headerlink\" title=\"基础知识速览\"></a>基础知识速览</h2><h3 id=\"Clients对象属性\"><a href=\"#Clients对象属性\" class=\"headerlink\" title=\"Clients对象属性\"></a>Clients对象属性</h3><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">属性</th>\n<th style=\"text-align:left\">描述 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">All</td>\n<td style=\"text-align:left\">在所有连接的客户端上调用方法</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Caller</td>\n<td style=\"text-align:left\">在调用集线器方法的客户端上调用方法</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Others</td>\n<td style=\"text-align:left\">除当前连接外的所有连接</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"Clients对象方法\"><a href=\"#Clients对象方法\" class=\"headerlink\" title=\"Clients对象方法\"></a>Clients对象方法</h3><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">方法</th>\n<th style=\"text-align:left\">描述 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">AllExcept</td>\n<td style=\"text-align:left\">在所有连接的客户端（指定的连接除外）上调用方法</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Client</td>\n<td style=\"text-align:left\">在特定连接的客户端上调用方法(单个)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Clients</td>\n<td style=\"text-align:left\">在特定连接的客户端上调用方法(多个)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Group</td>\n<td style=\"text-align:left\">对指定组中的所有连接调用方法</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">GroupExcept</td>\n<td style=\"text-align:left\">对指定组中的所有连接调用方法，指定的连接除外</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Groups</td>\n<td style=\"text-align:left\">在多组连接上调用方法</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">OthersInGroup</td>\n<td style=\"text-align:left\">对一组连接调用方法，而不包括调用该集线器方法的客户端</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">User</td>\n<td style=\"text-align:left\">对与特定用户关联的所有连接调用方法</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Users</td>\n<td style=\"text-align:left\">对与指定用户相关联的所有连接调用方法</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"Signalr推送端\"><a href=\"#Signalr推送端\" class=\"headerlink\" title=\"Signalr推送端\"></a>Signalr推送端</h2><ul>\n<li>通过命令行或者vs 2019新建.netcore web项目，选择.net core 3.0、webapi  </li>\n<li><p>建立一个Hub</p>\n<pre><code class=\"C#\">  public class NotifyHub : Hub\n  &#123;\n\n  &#125;\n</code></pre>\n</li>\n<li><p>修改Startup中的ConfigServices方法，注册对应的服务</p>\n<pre><code class=\"C#\">  // 添加Signalr\n  services.AddSignalR(config =&gt;\n  &#123;\n      // _webEnv为通过依赖注入在Startup的构造函数中注入的 IWebHostEnvironment\n      if (_webEnv.IsDevelopment())\n      &#123;\n          config.EnableDetailedErrors = true;\n      &#125;\n  &#125;);\n</code></pre>\n</li>\n<li><p>修改Configure配置HTTP请求的管道</p>\n<pre><code class=\"C#\">  ...\n  app.UseRouting();\n  app.UseEndpoints(endpoints =&gt;&#123;\n      endpoints.MapHub&lt;NotifyHub&gt;(&quot;/notify-hub&quot;);\n  &#125;);\n\n</code></pre>\n<h2 id=\"业务端\"><a href=\"#业务端\" class=\"headerlink\" title=\"业务端\"></a>业务端</h2><p><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/tutorials/signalr?view=aspnetcore-3.0&amp;tabs=visual-studio\">相关文档</a></p>\n</li>\n<li><p>创建连接对象</p>\n<pre><code class=\"js\">  var connection=new signalR.HubConnectionBuilder()\n  .configureLogging(signalR.LogLevel.Error) // 前端控制台的日志级别，根据需要配置\n  .withUrl(&#39;http://localhost:50001/notify-hub&#39;) // 连接地址,这个地址是signalr项目的地址\n  .withAutomaticReconnect([0, 2000, 5000, 10000, 20000]) // 配置重连的时间\n  .build();\n\n  // 重连的时候触发\n  connection.onreconnecting(function (info) &#123;\n      console.info(&#39;----------------------------------signalr-- onreconnecting&#39;, info);\n  &#125;);\n\n  //连接关闭的回调\n  connection.onclose(function (err) &#123;\n      console.info(&#39;--------------------------------signalr-- onclose&#39;, err);\n  &#125;);\n\n  connection.start().then(function (data) &#123;\n      console.log(&#39;已成功连接到signalr服务器&#39;)\n  &#125;).catch(function (error) &#123;\n      console.error(error.toString());\n  &#125;);\n\n</code></pre>\n</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/22/dotnetcore/signalr/02-type-hub/\">.net core 3.0 Signalr - 02 使用强类型的Hub</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>"},{"title":".net core 3.0 Signalr - 03 使用MessagePack压缩传输内容","date":"2019-09-29T06:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容\n<!-- more -->\n\n## MessagePack基础介绍\nSignalr默认使用的是json形式传递数据，但是signalr提供了灵活的扩展，支持MessagePack形式序列化数据，以增加性能降低网络传输的效果，极大的提高响应速度。\n\n先看一个MessagePack自定义序列化的例子,以一个自定义的实体对象为例，可以使用MessagepackObject标记为序列化的对象，同时定义使用属性名作为key(区分大小写)，同时可以定义忽略某个属性等、以及自定义key等\n  ``` C#\n    [MessagePackObject(keyAsPropertyName: true)]\n    public class OffLineData\n    {\n        /// <summary>\n        /// 用户Id\n        /// </summary>\n        public string UserId { set; get; }\n        /// <summary>\n        /// 连接Id\n        /// </summary>\n        public string ConnectionId { set; get; }\n        /// <summary>\n        /// 是否该用户的最后一个连接\n        /// </summary>\n        public bool IsLast { set; get; }\n        [IgnoreMember]\n        public string Test { set;get;}\n    }\n\n    // 比如对象，new OffLineData(){UserId=\"1000\",ConnectionId=\"AZDEFASDFASDF\",IsLast:true}通过MessagePack序列化后应该会是{UserId:\"1000\",ConnectionId:\"AZDEFASDFASDF\",IsLast:true},这个跟常用的json基本相同\n  ```\n\n同时MessagePack还可以定义序列化成数组形式，代码如下\n  ``` C#\n    [MessagePackObject]\n    public class OffLineData\n      {\n          /// <summary>\n          /// 用户Id\n          /// </summary>\n          [Key(0)]\n          public string UserId { set; get; }\n          /// <summary>\n          /// 连接Id\n          /// </summary>\n          [Key(0)]\n          public string ConnectionId { set; get; }\n          /// <summary>\n          /// 是否该用户的最后一个连接\n          /// </summary>\n          [Key(0)]\n          public bool IsLast { set; get; }\n      }\n\n    // 比如对象，new OffLineData(){UserId=\"1000\",ConnectionId=\"AZDEFASDFASDF\",IsLast:true}通过MessagePack序列化后应该会是[\"10000\",\"AZDEFASDFASDF\",true]\n  ```\n更多MessagePack的内容可以自行结尾的文档，此处不再过多介绍.\n\n\n## 为Signalr添加MessagePack支持\n- 引入需要的Nuget包\nMicrosoft.AspNetCore.SignalR.Protocols.MessagePack  \n- 修改之前的ConfigureServices\n  ``` C#\n    // 添加Signalr\n    services.AddSignalR(config =>\n    {\n        if (_webEnv.IsDevelopment())\n        {\n            config.EnableDetailedErrors = true;\n        }\n    })\n    // 支持MessagePack\n    .AddMessagePackProtocol();\n  ```\n- 前端引入messagepack解析库\n由于MessagePack传输是以二进制形式进行传输，降低了带宽，但是同时也增加到了代码的复杂度，原本直接获取数据就可以用的，现在需要先将二进制数据转换成正常数据，好在官方提供了对应的js库*msgpack5*、*signalr-protocol-msgpack*  \n可以通过vs的包管理工具或者npm安装，然后拷贝需要的文件到项目的lib文件夹,比如我的结构是\n  ``` bash\n    signalr-protocol-msgpack\n    |-msgpack5.js\n    |-msgpack5.min.js\n    |-signalr-protocol-msgpack.js\n    |-signalr-protocol-msgpack.min.js\n  ```\n前端页面引入这两个js(注意顺序:signalr、msgpack5、signalr-protocol-msgpack)  \n\n- 修改js连接对象，支持上MessagePack\n  ``` js\n  new signalR.HubConnectionBuilder()\n    .configureLogging(signalR.LogLevel.Error) // 前端控制台的日志级别，根据需要配置\n    .withUrl('http://localhost:50001/notify-hub') // 连接地址,这个地址是signalr项目的地址\n    .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol()) // 使用Messagepack来解析推送的数据\n    .withAutomaticReconnect([0, 2000, 5000, 10000, 20000]) // 配置重连的时间\n    .build();\n\n    // 重连的时候触发\n    connection.onreconnecting(function (info) {\n        console.info('----------------------------------signalr-- onreconnecting', info);\n    });\n\n    //连接关闭的回调\n    connection.onclose(function (err) {\n        console.info('--------------------------------signalr-- onclose', err);\n    });\n\n    connection.start().then(function (data) {\n        console.log('已成功连接到signalr服务器')\n    }).catch(function (error) {\n        console.error(error.toString());\n    });\n\n  ```\n\n## 尚未解决问题\n发现通过json.net序列化得到的对象，直接传递给MessagePack序列化会报错，没找着解决方法，直接改成字符串传递，然后在前端解析了，有遇到过的大佬欢迎指点下\n  \n至此，MessagePack介绍算结束了，更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 02 使用强类型的Hub](/2019/09/22/dotnetcore/signalr/02-type-hub/) \n|   下一篇  |   [.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展](/2019/10/01/dotnetcore/signalr/04-redis/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n|   MessagePack-CSharp  |   [MessagePack-CSharp](https://github.com/neuecc/MessagePack-CSharp) \n|   MessagePack  |   [MessagePack](https://msgpack.org/index.html) \n","source":"_posts/dotnetcore/signalr/03-message-pack.md","raw":"---\ntitle: .net core 3.0 Signalr - 03 使用MessagePack压缩传输内容\ndate: '2019-09-29 14:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容\n<!-- more -->\n\n## MessagePack基础介绍\nSignalr默认使用的是json形式传递数据，但是signalr提供了灵活的扩展，支持MessagePack形式序列化数据，以增加性能降低网络传输的效果，极大的提高响应速度。\n\n先看一个MessagePack自定义序列化的例子,以一个自定义的实体对象为例，可以使用MessagepackObject标记为序列化的对象，同时定义使用属性名作为key(区分大小写)，同时可以定义忽略某个属性等、以及自定义key等\n  ``` C#\n    [MessagePackObject(keyAsPropertyName: true)]\n    public class OffLineData\n    {\n        /// <summary>\n        /// 用户Id\n        /// </summary>\n        public string UserId { set; get; }\n        /// <summary>\n        /// 连接Id\n        /// </summary>\n        public string ConnectionId { set; get; }\n        /// <summary>\n        /// 是否该用户的最后一个连接\n        /// </summary>\n        public bool IsLast { set; get; }\n        [IgnoreMember]\n        public string Test { set;get;}\n    }\n\n    // 比如对象，new OffLineData(){UserId=\"1000\",ConnectionId=\"AZDEFASDFASDF\",IsLast:true}通过MessagePack序列化后应该会是{UserId:\"1000\",ConnectionId:\"AZDEFASDFASDF\",IsLast:true},这个跟常用的json基本相同\n  ```\n\n同时MessagePack还可以定义序列化成数组形式，代码如下\n  ``` C#\n    [MessagePackObject]\n    public class OffLineData\n      {\n          /// <summary>\n          /// 用户Id\n          /// </summary>\n          [Key(0)]\n          public string UserId { set; get; }\n          /// <summary>\n          /// 连接Id\n          /// </summary>\n          [Key(0)]\n          public string ConnectionId { set; get; }\n          /// <summary>\n          /// 是否该用户的最后一个连接\n          /// </summary>\n          [Key(0)]\n          public bool IsLast { set; get; }\n      }\n\n    // 比如对象，new OffLineData(){UserId=\"1000\",ConnectionId=\"AZDEFASDFASDF\",IsLast:true}通过MessagePack序列化后应该会是[\"10000\",\"AZDEFASDFASDF\",true]\n  ```\n更多MessagePack的内容可以自行结尾的文档，此处不再过多介绍.\n\n\n## 为Signalr添加MessagePack支持\n- 引入需要的Nuget包\nMicrosoft.AspNetCore.SignalR.Protocols.MessagePack  \n- 修改之前的ConfigureServices\n  ``` C#\n    // 添加Signalr\n    services.AddSignalR(config =>\n    {\n        if (_webEnv.IsDevelopment())\n        {\n            config.EnableDetailedErrors = true;\n        }\n    })\n    // 支持MessagePack\n    .AddMessagePackProtocol();\n  ```\n- 前端引入messagepack解析库\n由于MessagePack传输是以二进制形式进行传输，降低了带宽，但是同时也增加到了代码的复杂度，原本直接获取数据就可以用的，现在需要先将二进制数据转换成正常数据，好在官方提供了对应的js库*msgpack5*、*signalr-protocol-msgpack*  \n可以通过vs的包管理工具或者npm安装，然后拷贝需要的文件到项目的lib文件夹,比如我的结构是\n  ``` bash\n    signalr-protocol-msgpack\n    |-msgpack5.js\n    |-msgpack5.min.js\n    |-signalr-protocol-msgpack.js\n    |-signalr-protocol-msgpack.min.js\n  ```\n前端页面引入这两个js(注意顺序:signalr、msgpack5、signalr-protocol-msgpack)  \n\n- 修改js连接对象，支持上MessagePack\n  ``` js\n  new signalR.HubConnectionBuilder()\n    .configureLogging(signalR.LogLevel.Error) // 前端控制台的日志级别，根据需要配置\n    .withUrl('http://localhost:50001/notify-hub') // 连接地址,这个地址是signalr项目的地址\n    .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol()) // 使用Messagepack来解析推送的数据\n    .withAutomaticReconnect([0, 2000, 5000, 10000, 20000]) // 配置重连的时间\n    .build();\n\n    // 重连的时候触发\n    connection.onreconnecting(function (info) {\n        console.info('----------------------------------signalr-- onreconnecting', info);\n    });\n\n    //连接关闭的回调\n    connection.onclose(function (err) {\n        console.info('--------------------------------signalr-- onclose', err);\n    });\n\n    connection.start().then(function (data) {\n        console.log('已成功连接到signalr服务器')\n    }).catch(function (error) {\n        console.error(error.toString());\n    });\n\n  ```\n\n## 尚未解决问题\n发现通过json.net序列化得到的对象，直接传递给MessagePack序列化会报错，没找着解决方法，直接改成字符串传递，然后在前端解析了，有遇到过的大佬欢迎指点下\n  \n至此，MessagePack介绍算结束了，更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 02 使用强类型的Hub](/2019/09/22/dotnetcore/signalr/02-type-hub/) \n|   下一篇  |   [.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展](/2019/10/01/dotnetcore/signalr/04-redis/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n|   MessagePack-CSharp  |   [MessagePack-CSharp](https://github.com/neuecc/MessagePack-CSharp) \n|   MessagePack  |   [MessagePack](https://msgpack.org/index.html) \n","slug":"dotnetcore/signalr/03-message-pack","published":1,"updated":"2020-02-23T13:45:22.667Z","_id":"ck1dks9pt0003t0scjye5uc6u","comments":1,"layout":"post","photos":[],"link":"","content":"<p>.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容<br><a id=\"more\"></a></p>\n<h2 id=\"MessagePack基础介绍\"><a href=\"#MessagePack基础介绍\" class=\"headerlink\" title=\"MessagePack基础介绍\"></a>MessagePack基础介绍</h2><p>Signalr默认使用的是json形式传递数据，但是signalr提供了灵活的扩展，支持MessagePack形式序列化数据，以增加性能降低网络传输的效果，极大的提高响应速度。</p>\n<p>先看一个MessagePack自定义序列化的例子,以一个自定义的实体对象为例，可以使用MessagepackObject标记为序列化的对象，同时定义使用属性名作为key(区分大小写)，同时可以定义忽略某个属性等、以及自定义key等</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">    [MessagePackObject(keyAsPropertyName: true)]\n    public class OffLineData\n    &#123;\n        /// <summary>\n        /// 用户Id\n        /// </summary>\n        public string UserId &#123; set; get; &#125;\n        /// <summary>\n        /// 连接Id\n        /// </summary>\n        public string ConnectionId &#123; set; get; &#125;\n        /// <summary>\n        /// 是否该用户的最后一个连接\n        /// </summary>\n        public bool IsLast &#123; set; get; &#125;\n        [IgnoreMember]\n        public string Test &#123; set;get;&#125;\n    &#125;\n\n    // 比如对象，new OffLineData()&#123;UserId=\"1000\",ConnectionId=\"AZDEFASDFASDF\",IsLast:true&#125;通过MessagePack序列化后应该会是&#123;UserId:\"1000\",ConnectionId:\"AZDEFASDFASDF\",IsLast:true&#125;,这个跟常用的json基本相同\n</code></pre>\n<p>同时MessagePack还可以定义序列化成数组形式，代码如下</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">    [MessagePackObject]\n    public class OffLineData\n      &#123;\n          /// <summary>\n          /// 用户Id\n          /// </summary>\n          [Key(0)]\n          public string UserId &#123; set; get; &#125;\n          /// <summary>\n          /// 连接Id\n          /// </summary>\n          [Key(0)]\n          public string ConnectionId &#123; set; get; &#125;\n          /// <summary>\n          /// 是否该用户的最后一个连接\n          /// </summary>\n          [Key(0)]\n          public bool IsLast &#123; set; get; &#125;\n      &#125;\n\n    // 比如对象，new OffLineData()&#123;UserId=\"1000\",ConnectionId=\"AZDEFASDFASDF\",IsLast:true&#125;通过MessagePack序列化后应该会是[\"10000\",\"AZDEFASDFASDF\",true]\n</code></pre>\n<p>更多MessagePack的内容可以自行结尾的文档，此处不再过多介绍.</p>\n<h2 id=\"为Signalr添加MessagePack支持\"><a href=\"#为Signalr添加MessagePack支持\" class=\"headerlink\" title=\"为Signalr添加MessagePack支持\"></a>为Signalr添加MessagePack支持</h2><ul>\n<li>引入需要的Nuget包<br>Microsoft.AspNetCore.SignalR.Protocols.MessagePack  </li>\n<li>修改之前的ConfigureServices<pre class=\" language-C#\"><code class=\"language-C#\">  // 添加Signalr\n  services.AddSignalR(config =>\n  &#123;\n      if (_webEnv.IsDevelopment())\n      &#123;\n          config.EnableDetailedErrors = true;\n      &#125;\n  &#125;)\n  // 支持MessagePack\n  .AddMessagePackProtocol();\n</code></pre>\n</li>\n<li><p>前端引入messagepack解析库<br>由于MessagePack传输是以二进制形式进行传输，降低了带宽，但是同时也增加到了代码的复杂度，原本直接获取数据就可以用的，现在需要先将二进制数据转换成正常数据，好在官方提供了对应的js库<em>msgpack5</em>、<em>signalr-protocol-msgpack</em><br>可以通过vs的包管理工具或者npm安装，然后拷贝需要的文件到项目的lib文件夹,比如我的结构是</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">  signalr-protocol-msgpack\n  <span class=\"token operator\">|</span>-msgpack5.js\n  <span class=\"token operator\">|</span>-msgpack5.min.js\n  <span class=\"token operator\">|</span>-signalr-protocol-msgpack.js\n  <span class=\"token operator\">|</span>-signalr-protocol-msgpack.min.js\n</code></pre>\n<p>前端页面引入这两个js(注意顺序:signalr、msgpack5、signalr-protocol-msgpack)  </p>\n</li>\n<li><p>修改js连接对象，支持上MessagePack</p>\n<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">signalR<span class=\"token punctuation\">.</span>HubConnectionBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">configureLogging</span><span class=\"token punctuation\">(</span>signalR<span class=\"token punctuation\">.</span>LogLevel<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 前端控制台的日志级别，根据需要配置</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">withUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:50001/notify-hub'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 连接地址,这个地址是signalr项目的地址</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">withHubProtocol</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">signalR<span class=\"token punctuation\">.</span>protocols<span class=\"token punctuation\">.</span>msgpack<span class=\"token punctuation\">.</span>MessagePackHubProtocol</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 使用Messagepack来解析推送的数据</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">withAutomaticReconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 配置重连的时间</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\" spellcheck=\"true\">// 重连的时候触发</span>\n  connection<span class=\"token punctuation\">.</span><span class=\"token function\">onreconnecting</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'----------------------------------signalr-- onreconnecting'</span><span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\" spellcheck=\"true\">//连接关闭的回调</span>\n  connection<span class=\"token punctuation\">.</span><span class=\"token function\">onclose</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--------------------------------signalr-- onclose'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  connection<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'已成功连接到signalr服务器'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n</code></pre>\n</li>\n</ul>\n<h2 id=\"尚未解决问题\"><a href=\"#尚未解决问题\" class=\"headerlink\" title=\"尚未解决问题\"></a>尚未解决问题</h2><p>发现通过json.net序列化得到的对象，直接传递给MessagePack序列化会报错，没找着解决方法，直接改成字符串传递，然后在前端解析了，有遇到过的大佬欢迎指点下</p>\n<p>至此，MessagePack介绍算结束了，更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/22/dotnetcore/signalr/02-type-hub/\">.net core 3.0 Signalr - 02 使用强类型的Hub</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/01/dotnetcore/signalr/04-redis/\">.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MessagePack-CSharp</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/neuecc/MessagePack-CSharp\">MessagePack-CSharp</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MessagePack</td>\n<td style=\"text-align:left\"><a href=\"https://msgpack.org/index.html\">MessagePack</a> </td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容<br>","more":"</p>\n<h2 id=\"MessagePack基础介绍\"><a href=\"#MessagePack基础介绍\" class=\"headerlink\" title=\"MessagePack基础介绍\"></a>MessagePack基础介绍</h2><p>Signalr默认使用的是json形式传递数据，但是signalr提供了灵活的扩展，支持MessagePack形式序列化数据，以增加性能降低网络传输的效果，极大的提高响应速度。</p>\n<p>先看一个MessagePack自定义序列化的例子,以一个自定义的实体对象为例，可以使用MessagepackObject标记为序列化的对象，同时定义使用属性名作为key(区分大小写)，同时可以定义忽略某个属性等、以及自定义key等</p>\n<pre><code class=\"C#\">    [MessagePackObject(keyAsPropertyName: true)]\n    public class OffLineData\n    &#123;\n        /// &lt;summary&gt;\n        /// 用户Id\n        /// &lt;/summary&gt;\n        public string UserId &#123; set; get; &#125;\n        /// &lt;summary&gt;\n        /// 连接Id\n        /// &lt;/summary&gt;\n        public string ConnectionId &#123; set; get; &#125;\n        /// &lt;summary&gt;\n        /// 是否该用户的最后一个连接\n        /// &lt;/summary&gt;\n        public bool IsLast &#123; set; get; &#125;\n        [IgnoreMember]\n        public string Test &#123; set;get;&#125;\n    &#125;\n\n    // 比如对象，new OffLineData()&#123;UserId=&quot;1000&quot;,ConnectionId=&quot;AZDEFASDFASDF&quot;,IsLast:true&#125;通过MessagePack序列化后应该会是&#123;UserId:&quot;1000&quot;,ConnectionId:&quot;AZDEFASDFASDF&quot;,IsLast:true&#125;,这个跟常用的json基本相同\n</code></pre>\n<p>同时MessagePack还可以定义序列化成数组形式，代码如下</p>\n<pre><code class=\"C#\">    [MessagePackObject]\n    public class OffLineData\n      &#123;\n          /// &lt;summary&gt;\n          /// 用户Id\n          /// &lt;/summary&gt;\n          [Key(0)]\n          public string UserId &#123; set; get; &#125;\n          /// &lt;summary&gt;\n          /// 连接Id\n          /// &lt;/summary&gt;\n          [Key(0)]\n          public string ConnectionId &#123; set; get; &#125;\n          /// &lt;summary&gt;\n          /// 是否该用户的最后一个连接\n          /// &lt;/summary&gt;\n          [Key(0)]\n          public bool IsLast &#123; set; get; &#125;\n      &#125;\n\n    // 比如对象，new OffLineData()&#123;UserId=&quot;1000&quot;,ConnectionId=&quot;AZDEFASDFASDF&quot;,IsLast:true&#125;通过MessagePack序列化后应该会是[&quot;10000&quot;,&quot;AZDEFASDFASDF&quot;,true]\n</code></pre>\n<p>更多MessagePack的内容可以自行结尾的文档，此处不再过多介绍.</p>\n<h2 id=\"为Signalr添加MessagePack支持\"><a href=\"#为Signalr添加MessagePack支持\" class=\"headerlink\" title=\"为Signalr添加MessagePack支持\"></a>为Signalr添加MessagePack支持</h2><ul>\n<li>引入需要的Nuget包<br>Microsoft.AspNetCore.SignalR.Protocols.MessagePack  </li>\n<li>修改之前的ConfigureServices<pre><code class=\"C#\">  // 添加Signalr\n  services.AddSignalR(config =&gt;\n  &#123;\n      if (_webEnv.IsDevelopment())\n      &#123;\n          config.EnableDetailedErrors = true;\n      &#125;\n  &#125;)\n  // 支持MessagePack\n  .AddMessagePackProtocol();\n</code></pre>\n</li>\n<li><p>前端引入messagepack解析库<br>由于MessagePack传输是以二进制形式进行传输，降低了带宽，但是同时也增加到了代码的复杂度，原本直接获取数据就可以用的，现在需要先将二进制数据转换成正常数据，好在官方提供了对应的js库<em>msgpack5</em>、<em>signalr-protocol-msgpack</em><br>可以通过vs的包管理工具或者npm安装，然后拷贝需要的文件到项目的lib文件夹,比如我的结构是</p>\n<pre><code class=\"bash\">  signalr-protocol-msgpack\n  |-msgpack5.js\n  |-msgpack5.min.js\n  |-signalr-protocol-msgpack.js\n  |-signalr-protocol-msgpack.min.js\n</code></pre>\n<p>前端页面引入这两个js(注意顺序:signalr、msgpack5、signalr-protocol-msgpack)  </p>\n</li>\n<li><p>修改js连接对象，支持上MessagePack</p>\n<pre><code class=\"js\">new signalR.HubConnectionBuilder()\n  .configureLogging(signalR.LogLevel.Error) // 前端控制台的日志级别，根据需要配置\n  .withUrl(&#39;http://localhost:50001/notify-hub&#39;) // 连接地址,这个地址是signalr项目的地址\n  .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol()) // 使用Messagepack来解析推送的数据\n  .withAutomaticReconnect([0, 2000, 5000, 10000, 20000]) // 配置重连的时间\n  .build();\n\n  // 重连的时候触发\n  connection.onreconnecting(function (info) &#123;\n      console.info(&#39;----------------------------------signalr-- onreconnecting&#39;, info);\n  &#125;);\n\n  //连接关闭的回调\n  connection.onclose(function (err) &#123;\n      console.info(&#39;--------------------------------signalr-- onclose&#39;, err);\n  &#125;);\n\n  connection.start().then(function (data) &#123;\n      console.log(&#39;已成功连接到signalr服务器&#39;)\n  &#125;).catch(function (error) &#123;\n      console.error(error.toString());\n  &#125;);\n\n</code></pre>\n</li>\n</ul>\n<h2 id=\"尚未解决问题\"><a href=\"#尚未解决问题\" class=\"headerlink\" title=\"尚未解决问题\"></a>尚未解决问题</h2><p>发现通过json.net序列化得到的对象，直接传递给MessagePack序列化会报错，没找着解决方法，直接改成字符串传递，然后在前端解析了，有遇到过的大佬欢迎指点下</p>\n<p>至此，MessagePack介绍算结束了，更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/22/dotnetcore/signalr/02-type-hub/\">.net core 3.0 Signalr - 02 使用强类型的Hub</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/01/dotnetcore/signalr/04-redis/\">.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MessagePack-CSharp</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/neuecc/MessagePack-CSharp\">MessagePack-CSharp</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MessagePack</td>\n<td style=\"text-align:left\"><a href=\"https://msgpack.org/index.html\">MessagePack</a> </td>\n</tr>\n</tbody>\n</table>"},{"title":".net core 3.0 Signalr - 02 使用强类型的Hub","date":"2019-09-22T02:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 02 使用强类型的Hub\n<!-- more -->\n\n## 强类型的优缺点\n- 优点\n强类型的Hub可以避免魔法函数名，相比弱类型更容易维护和发现问题，直接上代码\n- 缺点\n特么的得多些好几行代码\n\n## 代码\n\n### 接口定义\n  ``` C#\n    /// <summary>\n    /// 服务端接口\n    /// </summary>\n    public interface IServerNotifyHub\n    {\n\n    }\n\n    /// <summary>\n    /// 客户端使用的接口\n    /// </summary>\n    public interface IClientNotifyHub\n    {\n        // 这里我们定义一个统一的客户端通知方法\n        Task OnNotify(object data);\n    }\n  ```\n### 实现\n- 对之前的Hub进行修改,暂时就先通过OnNotify给当前所有客户端推送一个信息\n``` C#\n  public class NotifyHub : Hub<IClientNotifyHub>,IServerNotifyHub\n    {\n        public override async Task OnConnectedAsync()\n        {\n            await Clients.All.OnNotify(new { ConnectId = Context.ConnectionId });\n            await base.OnConnectedAsync();\n        }\n    }\n  ```\n  \n## 在api中调用Hub推送\n大部分情况下，是通过客户端某个操作，比如:将任务分配给张三，那么在分配任务的这个api中会调用推送 推送给张三一个通知，xxx分配了一个任务给你，在Controller中注入强类型的Hub，代码如下\n  ``` C#\n  ...\n  private readonly IHubContext<NotifyHub,IClientNotifyHub> _notifyHub;\n  public NotifyController(IHubContext<NotifyHub,IClientNotifyHub> notifyHub)\n  {\n      _notifyHub = notifyHub;\n  }\n  ```\n\n至此，强类型的Hub介绍完毕，更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 01 基础篇](/2019/09/21/dotnetcore/signalr/01-base/) \n|   下一篇  |   [.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容](/2019/09/29/dotnetcore/signalr/03-message-pack) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/02-type-hub.md","raw":"---\ntitle: .net core 3.0 Signalr - 02 使用强类型的Hub\ndate: '2019-09-22 10:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 02 使用强类型的Hub\n<!-- more -->\n\n## 强类型的优缺点\n- 优点\n强类型的Hub可以避免魔法函数名，相比弱类型更容易维护和发现问题，直接上代码\n- 缺点\n特么的得多些好几行代码\n\n## 代码\n\n### 接口定义\n  ``` C#\n    /// <summary>\n    /// 服务端接口\n    /// </summary>\n    public interface IServerNotifyHub\n    {\n\n    }\n\n    /// <summary>\n    /// 客户端使用的接口\n    /// </summary>\n    public interface IClientNotifyHub\n    {\n        // 这里我们定义一个统一的客户端通知方法\n        Task OnNotify(object data);\n    }\n  ```\n### 实现\n- 对之前的Hub进行修改,暂时就先通过OnNotify给当前所有客户端推送一个信息\n``` C#\n  public class NotifyHub : Hub<IClientNotifyHub>,IServerNotifyHub\n    {\n        public override async Task OnConnectedAsync()\n        {\n            await Clients.All.OnNotify(new { ConnectId = Context.ConnectionId });\n            await base.OnConnectedAsync();\n        }\n    }\n  ```\n  \n## 在api中调用Hub推送\n大部分情况下，是通过客户端某个操作，比如:将任务分配给张三，那么在分配任务的这个api中会调用推送 推送给张三一个通知，xxx分配了一个任务给你，在Controller中注入强类型的Hub，代码如下\n  ``` C#\n  ...\n  private readonly IHubContext<NotifyHub,IClientNotifyHub> _notifyHub;\n  public NotifyController(IHubContext<NotifyHub,IClientNotifyHub> notifyHub)\n  {\n      _notifyHub = notifyHub;\n  }\n  ```\n\n至此，强类型的Hub介绍完毕，更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 01 基础篇](/2019/09/21/dotnetcore/signalr/01-base/) \n|   下一篇  |   [.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容](/2019/09/29/dotnetcore/signalr/03-message-pack) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/02-type-hub","published":1,"updated":"2020-02-23T13:45:22.666Z","_id":"ck1dks9pv0005t0scyqsav4me","comments":1,"layout":"post","photos":[],"link":"","content":"<p>.net core 3.0 Signalr - 02 使用强类型的Hub<br><a id=\"more\"></a></p>\n<h2 id=\"强类型的优缺点\"><a href=\"#强类型的优缺点\" class=\"headerlink\" title=\"强类型的优缺点\"></a>强类型的优缺点</h2><ul>\n<li>优点<br>强类型的Hub可以避免魔法函数名，相比弱类型更容易维护和发现问题，直接上代码</li>\n<li>缺点<br>特么的得多些好几行代码</li>\n</ul>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><h3 id=\"接口定义\"><a href=\"#接口定义\" class=\"headerlink\" title=\"接口定义\"></a>接口定义</h3><pre class=\" language-C#\"><code class=\"language-C#\">    /// <summary>\n    /// 服务端接口\n    /// </summary>\n    public interface IServerNotifyHub\n    &#123;\n\n    &#125;\n\n    /// <summary>\n    /// 客户端使用的接口\n    /// </summary>\n    public interface IClientNotifyHub\n    &#123;\n        // 这里我们定义一个统一的客户端通知方法\n        Task OnNotify(object data);\n    &#125;\n</code></pre>\n<h3 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h3><ul>\n<li>对之前的Hub进行修改,暂时就先通过OnNotify给当前所有客户端推送一个信息<pre class=\" language-C#\"><code class=\"language-C#\">public class NotifyHub : Hub<IClientNotifyHub>,IServerNotifyHub\n  &#123;\n      public override async Task OnConnectedAsync()\n      &#123;\n          await Clients.All.OnNotify(new &#123; ConnectId = Context.ConnectionId &#125;);\n          await base.OnConnectedAsync();\n      &#125;\n  &#125;\n</code></pre>\n</li>\n</ul>\n<h2 id=\"在api中调用Hub推送\"><a href=\"#在api中调用Hub推送\" class=\"headerlink\" title=\"在api中调用Hub推送\"></a>在api中调用Hub推送</h2><p>大部分情况下，是通过客户端某个操作，比如:将任务分配给张三，那么在分配任务的这个api中会调用推送 推送给张三一个通知，xxx分配了一个任务给你，在Controller中注入强类型的Hub，代码如下</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">  ...\n  private readonly IHubContext<NotifyHub,IClientNotifyHub> _notifyHub;\n  public NotifyController(IHubContext<NotifyHub,IClientNotifyHub> notifyHub)\n  &#123;\n      _notifyHub = notifyHub;\n  &#125;\n</code></pre>\n<p>至此，强类型的Hub介绍完毕，更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/21/dotnetcore/signalr/01-base/\">.net core 3.0 Signalr - 01 基础篇</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/29/dotnetcore/signalr/03-message-pack\">.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 02 使用强类型的Hub<br>","more":"</p>\n<h2 id=\"强类型的优缺点\"><a href=\"#强类型的优缺点\" class=\"headerlink\" title=\"强类型的优缺点\"></a>强类型的优缺点</h2><ul>\n<li>优点<br>强类型的Hub可以避免魔法函数名，相比弱类型更容易维护和发现问题，直接上代码</li>\n<li>缺点<br>特么的得多些好几行代码</li>\n</ul>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><h3 id=\"接口定义\"><a href=\"#接口定义\" class=\"headerlink\" title=\"接口定义\"></a>接口定义</h3><pre><code class=\"C#\">    /// &lt;summary&gt;\n    /// 服务端接口\n    /// &lt;/summary&gt;\n    public interface IServerNotifyHub\n    &#123;\n\n    &#125;\n\n    /// &lt;summary&gt;\n    /// 客户端使用的接口\n    /// &lt;/summary&gt;\n    public interface IClientNotifyHub\n    &#123;\n        // 这里我们定义一个统一的客户端通知方法\n        Task OnNotify(object data);\n    &#125;\n</code></pre>\n<h3 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h3><ul>\n<li>对之前的Hub进行修改,暂时就先通过OnNotify给当前所有客户端推送一个信息<pre><code class=\"C#\">public class NotifyHub : Hub&lt;IClientNotifyHub&gt;,IServerNotifyHub\n  &#123;\n      public override async Task OnConnectedAsync()\n      &#123;\n          await Clients.All.OnNotify(new &#123; ConnectId = Context.ConnectionId &#125;);\n          await base.OnConnectedAsync();\n      &#125;\n  &#125;\n</code></pre>\n</li>\n</ul>\n<h2 id=\"在api中调用Hub推送\"><a href=\"#在api中调用Hub推送\" class=\"headerlink\" title=\"在api中调用Hub推送\"></a>在api中调用Hub推送</h2><p>大部分情况下，是通过客户端某个操作，比如:将任务分配给张三，那么在分配任务的这个api中会调用推送 推送给张三一个通知，xxx分配了一个任务给你，在Controller中注入强类型的Hub，代码如下</p>\n<pre><code class=\"C#\">  ...\n  private readonly IHubContext&lt;NotifyHub,IClientNotifyHub&gt; _notifyHub;\n  public NotifyController(IHubContext&lt;NotifyHub,IClientNotifyHub&gt; notifyHub)\n  &#123;\n      _notifyHub = notifyHub;\n  &#125;\n</code></pre>\n<p>至此，强类型的Hub介绍完毕，更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/21/dotnetcore/signalr/01-base/\">.net core 3.0 Signalr - 01 基础篇</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/29/dotnetcore/signalr/03-message-pack\">.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>"},{"title":".net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展","date":"2019-10-01T08:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展\n<!-- more -->\n在实际的系统中，可能需要多台机器部署;然而，Signalr的连接信息是跟站点走的，举个例子  \n推送系统部署了A、B两个服务器，张三访问A服务器，李四访问B服务器，当张三通过A服务器向李四推送的时候，A服务器上是找不到李四的连接信息的，自然也就推送不过了，这个时候就需要有一个统一协调的玩意，signalr支持多种，Azure、Redis等，本节以Redis作为底板，介绍如何在Signalr中使用Redis作为底板来支持横向扩展。\n\n## 引入Redis\n- 先引入NuGet包\nMicrosoft.AspNetCore.SignalR.StackExchangeRedis\n- 修改Startup中的ConfigureServices方法\n  ``` C#\n  var appSection = Configuration.GetSection(\"App\");\n  services.Configure<AppSetting>(option => appSection.Bind(option));\n  var appSetting = appSection.Get<AppSetting>();\n\n  // 添加Signalr\n  services.AddSignalR(config =>\n  {\n      if (_webEnv.IsDevelopment())\n      {\n          config.EnableDetailedErrors = true;\n      }\n  })\n  // 支持MessagePack\n  .AddMessagePackProtocol()\n  // 使用redis做底板 支持横向扩展 Scale-out\n  .AddStackExchangeRedis(o =>\n    {\n        o.ConnectionFactory = async writer =>\n        {\n            var config = new ConfigurationOptions\n            {\n                AbortOnConnectFail = false,\n                ChannelPrefix = \"__signalr_\",\n            };\n            config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n            var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n            connection.ConnectionFailed += (_, e) =>\n            {\n                Console.WriteLine(\"Connection to Redis failed.\");\n            };\n\n            if (connection.IsConnected)\n            {\n                Console.WriteLine(\"connected to Redis.\");\n            }\n            else\n            {\n                Console.WriteLine(\"Did not connect to Redis\");\n            }\n\n            return connection;\n        };\n    });\n  ```\n可以自定义Redis相关配置，此处的appSetting为已经定义好的配置实体，包括了，主要配置、CROS配置、Jwt配置、redis配置等详情如下\n  ``` C#\n  /// <summary>\n  /// 对应appsettings中的App节点的配置信息\n  /// </summary>\n  public class AppSetting\n  {\n      public JwtSetting JwtSetting { set;get;}\n      public RedisCache RedisCache { set;get;}\n      public RedisCache SignalrRedisCache { set; get; }\n      public string CORS { set;get;}\n      /// <summary>\n      /// 是否主站点(用于运行清理任务等)\n      /// </summary>\n      public bool MainSite { set;get;}\n  }\n\n  /// <summary>\n  /// JWT设置\n  /// </summary>\n  public class JwtSetting\n  {\n      /// <summary>\n      /// 发行者 表示token是谁颁发的\n      /// </summary>\n      public string Issuer { set; get; }\n      /// <summary>\n      /// 表示哪些客户端可以使用这个token\n      /// </summary>\n      public string Audience { set; get; }\n      /// <summary>\n      /// 加密的Key 必须大于16位\n      /// </summary>\n      public string SecretKey { set; get; }\n  }\n\n  public class RedisCache\n  {\n      public string ConnectionString { set;get;}\n      public int DatabaseId { set; get; }\n  }\n  ```\n对应的配置文件如下\n  ``` json\n  {\n  \"Logging\": {\n    \"LogLevel\": {\n      \"Default\": \"Debug\",\n      \"System\": \"Information\",\n      \"Microsoft\": \"Information\",\n      \"Microsoft.AspNetCore.SignalR\": \"Trace\",\n      \"Microsoft.AspNetCore.Http.Connections\": \"Trace\"\n    }\n  },\n  \"App\": {\n    \"RedisCache\": {\n      \"ConnectionString\": \"127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000\",\n      \"DatabaseId\": 10\n    },\n    \"SignalrRedisCache\": {\n      \"ConnectionString\": \"127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000\",\n      \"DatabaseId\": 10\n    },\n    \"CORS\": \"https://localhost:60000,http://localhost:60001\",\n    \"MainSite\": true,\n    \"JwtSetting\": {\n      \"Issuer\": \"http://localhost:50000\", //颁发者\n      \"Audience\": \"http://localhost:50000\", //使用者\n      \"SecretKey\": \"Wetrial20196666666\" // key 大于16位\n    }\n  }\n}\n```\n首先，将配置文件跟实体对象映射，下次在其他地方使用的时候可以直接通过DI注入，然后通过AddStackExchangeRedis配置使用redis作为底板\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容](/2019/09/29/dotnetcore/signalr/03-message-pack/) \n|   下一篇  |   [.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联](/2019/10/02/dotnetcore/signalr/05-jwt/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/signalr/redis-backplane?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/04-redis.md","raw":"---\ntitle: .net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展\ndate: '2019-10-01 16:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展\n<!-- more -->\n在实际的系统中，可能需要多台机器部署;然而，Signalr的连接信息是跟站点走的，举个例子  \n推送系统部署了A、B两个服务器，张三访问A服务器，李四访问B服务器，当张三通过A服务器向李四推送的时候，A服务器上是找不到李四的连接信息的，自然也就推送不过了，这个时候就需要有一个统一协调的玩意，signalr支持多种，Azure、Redis等，本节以Redis作为底板，介绍如何在Signalr中使用Redis作为底板来支持横向扩展。\n\n## 引入Redis\n- 先引入NuGet包\nMicrosoft.AspNetCore.SignalR.StackExchangeRedis\n- 修改Startup中的ConfigureServices方法\n  ``` C#\n  var appSection = Configuration.GetSection(\"App\");\n  services.Configure<AppSetting>(option => appSection.Bind(option));\n  var appSetting = appSection.Get<AppSetting>();\n\n  // 添加Signalr\n  services.AddSignalR(config =>\n  {\n      if (_webEnv.IsDevelopment())\n      {\n          config.EnableDetailedErrors = true;\n      }\n  })\n  // 支持MessagePack\n  .AddMessagePackProtocol()\n  // 使用redis做底板 支持横向扩展 Scale-out\n  .AddStackExchangeRedis(o =>\n    {\n        o.ConnectionFactory = async writer =>\n        {\n            var config = new ConfigurationOptions\n            {\n                AbortOnConnectFail = false,\n                ChannelPrefix = \"__signalr_\",\n            };\n            config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n            var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n            connection.ConnectionFailed += (_, e) =>\n            {\n                Console.WriteLine(\"Connection to Redis failed.\");\n            };\n\n            if (connection.IsConnected)\n            {\n                Console.WriteLine(\"connected to Redis.\");\n            }\n            else\n            {\n                Console.WriteLine(\"Did not connect to Redis\");\n            }\n\n            return connection;\n        };\n    });\n  ```\n可以自定义Redis相关配置，此处的appSetting为已经定义好的配置实体，包括了，主要配置、CROS配置、Jwt配置、redis配置等详情如下\n  ``` C#\n  /// <summary>\n  /// 对应appsettings中的App节点的配置信息\n  /// </summary>\n  public class AppSetting\n  {\n      public JwtSetting JwtSetting { set;get;}\n      public RedisCache RedisCache { set;get;}\n      public RedisCache SignalrRedisCache { set; get; }\n      public string CORS { set;get;}\n      /// <summary>\n      /// 是否主站点(用于运行清理任务等)\n      /// </summary>\n      public bool MainSite { set;get;}\n  }\n\n  /// <summary>\n  /// JWT设置\n  /// </summary>\n  public class JwtSetting\n  {\n      /// <summary>\n      /// 发行者 表示token是谁颁发的\n      /// </summary>\n      public string Issuer { set; get; }\n      /// <summary>\n      /// 表示哪些客户端可以使用这个token\n      /// </summary>\n      public string Audience { set; get; }\n      /// <summary>\n      /// 加密的Key 必须大于16位\n      /// </summary>\n      public string SecretKey { set; get; }\n  }\n\n  public class RedisCache\n  {\n      public string ConnectionString { set;get;}\n      public int DatabaseId { set; get; }\n  }\n  ```\n对应的配置文件如下\n  ``` json\n  {\n  \"Logging\": {\n    \"LogLevel\": {\n      \"Default\": \"Debug\",\n      \"System\": \"Information\",\n      \"Microsoft\": \"Information\",\n      \"Microsoft.AspNetCore.SignalR\": \"Trace\",\n      \"Microsoft.AspNetCore.Http.Connections\": \"Trace\"\n    }\n  },\n  \"App\": {\n    \"RedisCache\": {\n      \"ConnectionString\": \"127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000\",\n      \"DatabaseId\": 10\n    },\n    \"SignalrRedisCache\": {\n      \"ConnectionString\": \"127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000\",\n      \"DatabaseId\": 10\n    },\n    \"CORS\": \"https://localhost:60000,http://localhost:60001\",\n    \"MainSite\": true,\n    \"JwtSetting\": {\n      \"Issuer\": \"http://localhost:50000\", //颁发者\n      \"Audience\": \"http://localhost:50000\", //使用者\n      \"SecretKey\": \"Wetrial20196666666\" // key 大于16位\n    }\n  }\n}\n```\n首先，将配置文件跟实体对象映射，下次在其他地方使用的时候可以直接通过DI注入，然后通过AddStackExchangeRedis配置使用redis作为底板\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容](/2019/09/29/dotnetcore/signalr/03-message-pack/) \n|   下一篇  |   [.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联](/2019/10/02/dotnetcore/signalr/05-jwt/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/signalr/redis-backplane?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/04-redis","published":1,"updated":"2020-02-23T13:45:22.668Z","_id":"ck1dks9px0008t0sc2ddn9qk2","comments":1,"layout":"post","photos":[],"link":"","content":"<p>.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展<br><a id=\"more\"></a><br>在实际的系统中，可能需要多台机器部署;然而，Signalr的连接信息是跟站点走的，举个例子<br>推送系统部署了A、B两个服务器，张三访问A服务器，李四访问B服务器，当张三通过A服务器向李四推送的时候，A服务器上是找不到李四的连接信息的，自然也就推送不过了，这个时候就需要有一个统一协调的玩意，signalr支持多种，Azure、Redis等，本节以Redis作为底板，介绍如何在Signalr中使用Redis作为底板来支持横向扩展。</p>\n<h2 id=\"引入Redis\"><a href=\"#引入Redis\" class=\"headerlink\" title=\"引入Redis\"></a>引入Redis</h2><ul>\n<li>先引入NuGet包<br>Microsoft.AspNetCore.SignalR.StackExchangeRedis</li>\n<li><p>修改Startup中的ConfigureServices方法</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">var appSection = Configuration.GetSection(\"App\");\nservices.Configure<AppSetting>(option => appSection.Bind(option));\nvar appSetting = appSection.Get<AppSetting>();\n\n// 添加Signalr\nservices.AddSignalR(config =>\n&#123;\n    if (_webEnv.IsDevelopment())\n    &#123;\n        config.EnableDetailedErrors = true;\n    &#125;\n&#125;)\n// 支持MessagePack\n.AddMessagePackProtocol()\n// 使用redis做底板 支持横向扩展 Scale-out\n.AddStackExchangeRedis(o =>\n  &#123;\n      o.ConnectionFactory = async writer =>\n      &#123;\n          var config = new ConfigurationOptions\n          &#123;\n              AbortOnConnectFail = false,\n              ChannelPrefix = \"__signalr_\",\n          &#125;;\n          config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n          var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n          connection.ConnectionFailed += (_, e) =>\n          &#123;\n              Console.WriteLine(\"Connection to Redis failed.\");\n          &#125;;\n\n          if (connection.IsConnected)\n          &#123;\n              Console.WriteLine(\"connected to Redis.\");\n          &#125;\n          else\n          &#123;\n              Console.WriteLine(\"Did not connect to Redis\");\n          &#125;\n\n          return connection;\n      &#125;;\n  &#125;);\n</code></pre>\n<p>可以自定义Redis相关配置，此处的appSetting为已经定义好的配置实体，包括了，主要配置、CROS配置、Jwt配置、redis配置等详情如下</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">/// <summary>\n/// 对应appsettings中的App节点的配置信息\n/// </summary>\npublic class AppSetting\n&#123;\n    public JwtSetting JwtSetting &#123; set;get;&#125;\n    public RedisCache RedisCache &#123; set;get;&#125;\n    public RedisCache SignalrRedisCache &#123; set; get; &#125;\n    public string CORS &#123; set;get;&#125;\n    /// <summary>\n    /// 是否主站点(用于运行清理任务等)\n    /// </summary>\n    public bool MainSite &#123; set;get;&#125;\n&#125;\n\n/// <summary>\n/// JWT设置\n/// </summary>\npublic class JwtSetting\n&#123;\n    /// <summary>\n    /// 发行者 表示token是谁颁发的\n    /// </summary>\n    public string Issuer &#123; set; get; &#125;\n    /// <summary>\n    /// 表示哪些客户端可以使用这个token\n    /// </summary>\n    public string Audience &#123; set; get; &#125;\n    /// <summary>\n    /// 加密的Key 必须大于16位\n    /// </summary>\n    public string SecretKey &#123; set; get; &#125;\n&#125;\n\npublic class RedisCache\n&#123;\n    public string ConnectionString &#123; set;get;&#125;\n    public int DatabaseId &#123; set; get; &#125;\n&#125;\n</code></pre>\n<p>对应的配置文件如下</p>\n<pre class=\" language-json\"><code class=\"language-json\">&amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n<span class=\"token property\">\"Logging\"</span><span class=\"token operator\">:</span> &amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">\"LogLevel\"</span><span class=\"token operator\">:</span> &amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">\"Default\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Debug\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"System\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Information\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Microsoft\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Information\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Microsoft.AspNetCore.SignalR\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Trace\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Microsoft.AspNetCore.Http.Connections\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Trace\"</span>\n  &amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span>\n&amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"App\"</span><span class=\"token operator\">:</span> &amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">\"RedisCache\"</span><span class=\"token operator\">:</span> &amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">\"ConnectionString\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"DatabaseId\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span>\n  &amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"SignalrRedisCache\"</span><span class=\"token operator\">:</span> &amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">\"ConnectionString\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"DatabaseId\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span>\n  &amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"CORS\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://localhost:60000,http://localhost:60001\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"MainSite\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"JwtSetting\"</span><span class=\"token operator\">:</span> &amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">\"Issuer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:50000\"</span><span class=\"token punctuation\">,</span> //颁发者\n    <span class=\"token property\">\"Audience\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:50000\"</span><span class=\"token punctuation\">,</span> //使用者\n    <span class=\"token property\">\"SecretKey\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Wetrial20196666666\"</span> // key 大于<span class=\"token number\">16</span>位\n  &amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span>\n&amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span>\n&amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>首先，将配置文件跟实体对象映射，下次在其他地方使用的时候可以直接通过DI注入，然后通过AddStackExchangeRedis配置使用redis作为底板</p>\n</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/29/dotnetcore/signalr/03-message-pack/\">.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/02/dotnetcore/signalr/05-jwt/\">.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/signalr/redis-backplane?view=aspnetcore-3.0\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展<br>","more":"<br>在实际的系统中，可能需要多台机器部署;然而，Signalr的连接信息是跟站点走的，举个例子<br>推送系统部署了A、B两个服务器，张三访问A服务器，李四访问B服务器，当张三通过A服务器向李四推送的时候，A服务器上是找不到李四的连接信息的，自然也就推送不过了，这个时候就需要有一个统一协调的玩意，signalr支持多种，Azure、Redis等，本节以Redis作为底板，介绍如何在Signalr中使用Redis作为底板来支持横向扩展。</p>\n<h2 id=\"引入Redis\"><a href=\"#引入Redis\" class=\"headerlink\" title=\"引入Redis\"></a>引入Redis</h2><ul>\n<li>先引入NuGet包<br>Microsoft.AspNetCore.SignalR.StackExchangeRedis</li>\n<li><p>修改Startup中的ConfigureServices方法</p>\n<pre><code class=\"C#\">var appSection = Configuration.GetSection(&quot;App&quot;);\nservices.Configure&lt;AppSetting&gt;(option =&gt; appSection.Bind(option));\nvar appSetting = appSection.Get&lt;AppSetting&gt;();\n\n// 添加Signalr\nservices.AddSignalR(config =&gt;\n&#123;\n    if (_webEnv.IsDevelopment())\n    &#123;\n        config.EnableDetailedErrors = true;\n    &#125;\n&#125;)\n// 支持MessagePack\n.AddMessagePackProtocol()\n// 使用redis做底板 支持横向扩展 Scale-out\n.AddStackExchangeRedis(o =&gt;\n  &#123;\n      o.ConnectionFactory = async writer =&gt;\n      &#123;\n          var config = new ConfigurationOptions\n          &#123;\n              AbortOnConnectFail = false,\n              ChannelPrefix = &quot;__signalr_&quot;,\n          &#125;;\n          config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n          var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n          connection.ConnectionFailed += (_, e) =&gt;\n          &#123;\n              Console.WriteLine(&quot;Connection to Redis failed.&quot;);\n          &#125;;\n\n          if (connection.IsConnected)\n          &#123;\n              Console.WriteLine(&quot;connected to Redis.&quot;);\n          &#125;\n          else\n          &#123;\n              Console.WriteLine(&quot;Did not connect to Redis&quot;);\n          &#125;\n\n          return connection;\n      &#125;;\n  &#125;);\n</code></pre>\n<p>可以自定义Redis相关配置，此处的appSetting为已经定义好的配置实体，包括了，主要配置、CROS配置、Jwt配置、redis配置等详情如下</p>\n<pre><code class=\"C#\">/// &lt;summary&gt;\n/// 对应appsettings中的App节点的配置信息\n/// &lt;/summary&gt;\npublic class AppSetting\n&#123;\n    public JwtSetting JwtSetting &#123; set;get;&#125;\n    public RedisCache RedisCache &#123; set;get;&#125;\n    public RedisCache SignalrRedisCache &#123; set; get; &#125;\n    public string CORS &#123; set;get;&#125;\n    /// &lt;summary&gt;\n    /// 是否主站点(用于运行清理任务等)\n    /// &lt;/summary&gt;\n    public bool MainSite &#123; set;get;&#125;\n&#125;\n\n/// &lt;summary&gt;\n/// JWT设置\n/// &lt;/summary&gt;\npublic class JwtSetting\n&#123;\n    /// &lt;summary&gt;\n    /// 发行者 表示token是谁颁发的\n    /// &lt;/summary&gt;\n    public string Issuer &#123; set; get; &#125;\n    /// &lt;summary&gt;\n    /// 表示哪些客户端可以使用这个token\n    /// &lt;/summary&gt;\n    public string Audience &#123; set; get; &#125;\n    /// &lt;summary&gt;\n    /// 加密的Key 必须大于16位\n    /// &lt;/summary&gt;\n    public string SecretKey &#123; set; get; &#125;\n&#125;\n\npublic class RedisCache\n&#123;\n    public string ConnectionString &#123; set;get;&#125;\n    public int DatabaseId &#123; set; get; &#125;\n&#125;\n</code></pre>\n<p>对应的配置文件如下</p>\n<pre><code class=\"json\">&#123;\n&quot;Logging&quot;: &#123;\n  &quot;LogLevel&quot;: &#123;\n    &quot;Default&quot;: &quot;Debug&quot;,\n    &quot;System&quot;: &quot;Information&quot;,\n    &quot;Microsoft&quot;: &quot;Information&quot;,\n    &quot;Microsoft.AspNetCore.SignalR&quot;: &quot;Trace&quot;,\n    &quot;Microsoft.AspNetCore.Http.Connections&quot;: &quot;Trace&quot;\n  &#125;\n&#125;,\n&quot;App&quot;: &#123;\n  &quot;RedisCache&quot;: &#123;\n    &quot;ConnectionString&quot;: &quot;127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000&quot;,\n    &quot;DatabaseId&quot;: 10\n  &#125;,\n  &quot;SignalrRedisCache&quot;: &#123;\n    &quot;ConnectionString&quot;: &quot;127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000&quot;,\n    &quot;DatabaseId&quot;: 10\n  &#125;,\n  &quot;CORS&quot;: &quot;https://localhost:60000,http://localhost:60001&quot;,\n  &quot;MainSite&quot;: true,\n  &quot;JwtSetting&quot;: &#123;\n    &quot;Issuer&quot;: &quot;http://localhost:50000&quot;, //颁发者\n    &quot;Audience&quot;: &quot;http://localhost:50000&quot;, //使用者\n    &quot;SecretKey&quot;: &quot;Wetrial20196666666&quot; // key 大于16位\n  &#125;\n&#125;\n&#125;\n</code></pre>\n<p>首先，将配置文件跟实体对象映射，下次在其他地方使用的时候可以直接通过DI注入，然后通过AddStackExchangeRedis配置使用redis作为底板</p>\n</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/29/dotnetcore/signalr/03-message-pack/\">.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/02/dotnetcore/signalr/05-jwt/\">.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/signalr/redis-backplane?view=aspnetcore-3.0\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>"},{"title":".net core 3.0 Signalr - 06 业务实现-业务分析","date":"2019-10-03T12:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 06 业务实现-业务分析\n<!-- more -->\n\n## 业务需求\n1. 人-项目关系\n一个人可以属于多个项目，一个项目可以有多个人加入，通知的时候，可以通知项目内的所有人，也可以通知部分人或者某个责任人。\n2. 登录互斥\n同一个人不允许登录两次(不同浏览器或者不同电脑登)，后面登录的会将前面登录的人挤下线。\n3. 聊天\n可以私聊、也可以创建群聊、上线通知(多个连接的情况)\n4. 文件下载\n用户在界面上选择了多个文件，然后选择批量打包下载，后端后台线程进行压缩、压缩完成后通过signalr通知该用户(的某个连接,比如当前用户开了多个tab页，应该只能推送给操作的那个tab页)\n\n## 功能设计\n> 名词解释: 业务系统:具体业务功能的系统     推送系统:实际的Signalr系统，跟业务系统分开部署\n1. 将推送单独成一个子系统；支持单独部署，可一台服务器也可以多台，通过redis作为底板来分发到服务器\n2. 推送子系统端自定义管理用户、连接、组，业务系统调用的时候\n3. 推送系统开发一个api，给业务系统直接调用(当然这不是最佳选择，可以通过消息队列，支持重试、优先级等，性能会比http形式好很多)\n业务系统调用推送系统的时候传递参数包括，组、用户、推送数据对象，比如如下代码  \n  ``` C#\n  var send = new Send()\n  {\n      // 推送的组，多个用,隔开\n      GroupId = GroupId,\n      // 关联的UserId 多个用,隔开\n      UserIds= UserIds,\n      // 是否排除用户\n      ExcludeUsers=ExcludeUsers,\n      // 实际推送的对象\n      NotifyObj = new NotifyObj()\n      {\n          Data = Data,\n          NotifyType = NotifyType,\n          OpType= OpType\n      },\n  };\n  ``` \n* 有GroupId\n  * ExcludeUsers=true\n    推送给指定的组中所有用户(排除掉UserIds部分)\n\n  * ExcludeUsers=false\n    推送给组中指定(UserIds中指定的)的这些用户\n\n* 无GroupId\n  * ExcludeUsers=true\n    推送给当前所有连接(排除掉UserIds部分的用户)\n\n  * ExcludeUsers=false\n    推送给指定用户(UserIds中指定的用户)\n\n## 架构设计\n1. 组、用户、连接的关系\n- 用户:[连接Id]\n一个用户用多个连接、以Set形式存redis中\n- 组:[连接Id:用户Id]\n以Redis中的Hash格式存储，以Group为Key，以连接Id为Name，以UserId为值，一个用户在组中可能多个连接(开多个浏览器tab页),这样设计的好处是可以满足以下的几种情况\n  * 给某个人推送\n  从redis中直接根据该用户的UserId查询该用户的所有连接，然后通过连接推送即可\n  * 给某个组推送\n  从redis中根据组名查询出所有的连接Id，通过连接直接推送\n  * 给某个组中的某些人推\n  这个时候不能根据人查连接Id，需要先根据组得到组中的人、连接Id，然后只给组中这些人对应的连接推送\n  * 用户上线的时候\n  在redis中存储一份用户与连接的关系；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id\n  * 用户再开一个浏览器tab页\n  在redis中该用户对应的连接中增加新的连接Id；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id(因为是一连接Id为name的，然而连接Id是不重复的，所以是可以存着同一个组、同一个用户不同连接这种情况的)\n  * 用户退出页面\n  在redis中找到该用户，从redis中删除改用户的找个连接Id，组的情况同样处理\n  * 给某个用户的某个连接Id推送\n  比如:用户点击打包下载，服务器端后台线程进行打包、压缩，完成后推送给指定的连接Id，前端界面再进行处理下载\n\n至此，业务分析完毕，更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联](/2019/10/02/dotnetcore/signalr/05-jwt/) \n|   下一篇  |   [.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接](/2019/10/04/dotnetcore/signalr/07-self-manager/)  \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/06-analysis.md","raw":"---\ntitle: .net core 3.0 Signalr - 06 业务实现-业务分析\ndate: '2019-10-03 20:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 06 业务实现-业务分析\n<!-- more -->\n\n## 业务需求\n1. 人-项目关系\n一个人可以属于多个项目，一个项目可以有多个人加入，通知的时候，可以通知项目内的所有人，也可以通知部分人或者某个责任人。\n2. 登录互斥\n同一个人不允许登录两次(不同浏览器或者不同电脑登)，后面登录的会将前面登录的人挤下线。\n3. 聊天\n可以私聊、也可以创建群聊、上线通知(多个连接的情况)\n4. 文件下载\n用户在界面上选择了多个文件，然后选择批量打包下载，后端后台线程进行压缩、压缩完成后通过signalr通知该用户(的某个连接,比如当前用户开了多个tab页，应该只能推送给操作的那个tab页)\n\n## 功能设计\n> 名词解释: 业务系统:具体业务功能的系统     推送系统:实际的Signalr系统，跟业务系统分开部署\n1. 将推送单独成一个子系统；支持单独部署，可一台服务器也可以多台，通过redis作为底板来分发到服务器\n2. 推送子系统端自定义管理用户、连接、组，业务系统调用的时候\n3. 推送系统开发一个api，给业务系统直接调用(当然这不是最佳选择，可以通过消息队列，支持重试、优先级等，性能会比http形式好很多)\n业务系统调用推送系统的时候传递参数包括，组、用户、推送数据对象，比如如下代码  \n  ``` C#\n  var send = new Send()\n  {\n      // 推送的组，多个用,隔开\n      GroupId = GroupId,\n      // 关联的UserId 多个用,隔开\n      UserIds= UserIds,\n      // 是否排除用户\n      ExcludeUsers=ExcludeUsers,\n      // 实际推送的对象\n      NotifyObj = new NotifyObj()\n      {\n          Data = Data,\n          NotifyType = NotifyType,\n          OpType= OpType\n      },\n  };\n  ``` \n* 有GroupId\n  * ExcludeUsers=true\n    推送给指定的组中所有用户(排除掉UserIds部分)\n\n  * ExcludeUsers=false\n    推送给组中指定(UserIds中指定的)的这些用户\n\n* 无GroupId\n  * ExcludeUsers=true\n    推送给当前所有连接(排除掉UserIds部分的用户)\n\n  * ExcludeUsers=false\n    推送给指定用户(UserIds中指定的用户)\n\n## 架构设计\n1. 组、用户、连接的关系\n- 用户:[连接Id]\n一个用户用多个连接、以Set形式存redis中\n- 组:[连接Id:用户Id]\n以Redis中的Hash格式存储，以Group为Key，以连接Id为Name，以UserId为值，一个用户在组中可能多个连接(开多个浏览器tab页),这样设计的好处是可以满足以下的几种情况\n  * 给某个人推送\n  从redis中直接根据该用户的UserId查询该用户的所有连接，然后通过连接推送即可\n  * 给某个组推送\n  从redis中根据组名查询出所有的连接Id，通过连接直接推送\n  * 给某个组中的某些人推\n  这个时候不能根据人查连接Id，需要先根据组得到组中的人、连接Id，然后只给组中这些人对应的连接推送\n  * 用户上线的时候\n  在redis中存储一份用户与连接的关系；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id\n  * 用户再开一个浏览器tab页\n  在redis中该用户对应的连接中增加新的连接Id；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id(因为是一连接Id为name的，然而连接Id是不重复的，所以是可以存着同一个组、同一个用户不同连接这种情况的)\n  * 用户退出页面\n  在redis中找到该用户，从redis中删除改用户的找个连接Id，组的情况同样处理\n  * 给某个用户的某个连接Id推送\n  比如:用户点击打包下载，服务器端后台线程进行打包、压缩，完成后推送给指定的连接Id，前端界面再进行处理下载\n\n至此，业务分析完毕，更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联](/2019/10/02/dotnetcore/signalr/05-jwt/) \n|   下一篇  |   [.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接](/2019/10/04/dotnetcore/signalr/07-self-manager/)  \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/06-analysis","published":1,"updated":"2019-09-26T10:48:50.920Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck1dks9q0000bt0scaeiw2i4x","content":"<p>.net core 3.0 Signalr - 06 业务实现-业务分析<br><a id=\"more\"></a></p>\n<h2 id=\"业务需求\"><a href=\"#业务需求\" class=\"headerlink\" title=\"业务需求\"></a>业务需求</h2><ol>\n<li>人-项目关系<br>一个人可以属于多个项目，一个项目可以有多个人加入，通知的时候，可以通知项目内的所有人，也可以通知部分人或者某个责任人。</li>\n<li>登录互斥<br>同一个人不允许登录两次(不同浏览器或者不同电脑登)，后面登录的会将前面登录的人挤下线。</li>\n<li>聊天<br>可以私聊、也可以创建群聊、上线通知(多个连接的情况)</li>\n<li>文件下载<br>用户在界面上选择了多个文件，然后选择批量打包下载，后端后台线程进行压缩、压缩完成后通过signalr通知该用户(的某个连接,比如当前用户开了多个tab页，应该只能推送给操作的那个tab页)</li>\n</ol>\n<h2 id=\"功能设计\"><a href=\"#功能设计\" class=\"headerlink\" title=\"功能设计\"></a>功能设计</h2><blockquote>\n<p>名词解释: 业务系统:具体业务功能的系统     推送系统:实际的Signalr系统，跟业务系统分开部署</p>\n<ol>\n<li>将推送单独成一个子系统；支持单独部署，可一台服务器也可以多台，通过redis作为底板来分发到服务器</li>\n<li>推送子系统端自定义管理用户、连接、组，业务系统调用的时候</li>\n<li>推送系统开发一个api，给业务系统直接调用(当然这不是最佳选择，可以通过消息队列，支持重试、优先级等，性能会比http形式好很多)<br>业务系统调用推送系统的时候传递参数包括，组、用户、推送数据对象，比如如下代码  <pre class=\" language-C#\"><code class=\"language-C#\">var send = new Send()\n{\n   // 推送的组，多个用,隔开\n   GroupId = GroupId,\n   // 关联的UserId 多个用,隔开\n   UserIds= UserIds,\n   // 是否排除用户\n   ExcludeUsers=ExcludeUsers,\n   // 实际推送的对象\n   NotifyObj = new NotifyObj()\n   {\n       Data = Data,\n       NotifyType = NotifyType,\n       OpType= OpType\n   },\n};\n</code></pre>\n</li>\n</ol>\n<ul>\n<li>有GroupId<ul>\n<li>ExcludeUsers=true<br>推送给指定的组中所有用户(排除掉UserIds部分)</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<ul>\n<li>ExcludeUsers=false<br>推送给组中指定(UserIds中指定的)的这些用户</li>\n</ul>\n<ul>\n<li><p>无GroupId</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给当前所有连接(排除掉UserIds部分的用户)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给指定用户(UserIds中指定的用户)</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"架构设计\"><a href=\"#架构设计\" class=\"headerlink\" title=\"架构设计\"></a>架构设计</h2><ol>\n<li>组、用户、连接的关系</li>\n</ol>\n<ul>\n<li>用户:[连接Id]<br>一个用户用多个连接、以Set形式存redis中</li>\n<li>组:[连接Id:用户Id]<br>以Redis中的Hash格式存储，以Group为Key，以连接Id为Name，以UserId为值，一个用户在组中可能多个连接(开多个浏览器tab页),这样设计的好处是可以满足以下的几种情况<ul>\n<li>给某个人推送<br>从redis中直接根据该用户的UserId查询该用户的所有连接，然后通过连接推送即可</li>\n<li>给某个组推送<br>从redis中根据组名查询出所有的连接Id，通过连接直接推送</li>\n<li>给某个组中的某些人推<br>这个时候不能根据人查连接Id，需要先根据组得到组中的人、连接Id，然后只给组中这些人对应的连接推送</li>\n<li>用户上线的时候<br>在redis中存储一份用户与连接的关系；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id</li>\n<li>用户再开一个浏览器tab页<br>在redis中该用户对应的连接中增加新的连接Id；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id(因为是一连接Id为name的，然而连接Id是不重复的，所以是可以存着同一个组、同一个用户不同连接这种情况的)</li>\n<li>用户退出页面<br>在redis中找到该用户，从redis中删除改用户的找个连接Id，组的情况同样处理</li>\n<li>给某个用户的某个连接Id推送<br>比如:用户点击打包下载，服务器端后台线程进行打包、压缩，完成后推送给指定的连接Id，前端界面再进行处理下载</li>\n</ul>\n</li>\n</ul>\n<p>至此，业务分析完毕，更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/02/dotnetcore/signalr/05-jwt/\">.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/04/dotnetcore/signalr/07-self-manager/\">.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</a>  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\" target=\"_blank\" rel=\"noopener\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\" target=\"_blank\" rel=\"noopener\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 06 业务实现-业务分析<br>","more":"</p>\n<h2 id=\"业务需求\"><a href=\"#业务需求\" class=\"headerlink\" title=\"业务需求\"></a>业务需求</h2><ol>\n<li>人-项目关系<br>一个人可以属于多个项目，一个项目可以有多个人加入，通知的时候，可以通知项目内的所有人，也可以通知部分人或者某个责任人。</li>\n<li>登录互斥<br>同一个人不允许登录两次(不同浏览器或者不同电脑登)，后面登录的会将前面登录的人挤下线。</li>\n<li>聊天<br>可以私聊、也可以创建群聊、上线通知(多个连接的情况)</li>\n<li>文件下载<br>用户在界面上选择了多个文件，然后选择批量打包下载，后端后台线程进行压缩、压缩完成后通过signalr通知该用户(的某个连接,比如当前用户开了多个tab页，应该只能推送给操作的那个tab页)</li>\n</ol>\n<h2 id=\"功能设计\"><a href=\"#功能设计\" class=\"headerlink\" title=\"功能设计\"></a>功能设计</h2><blockquote>\n<p>名词解释: 业务系统:具体业务功能的系统     推送系统:实际的Signalr系统，跟业务系统分开部署</p>\n<ol>\n<li>将推送单独成一个子系统；支持单独部署，可一台服务器也可以多台，通过redis作为底板来分发到服务器</li>\n<li>推送子系统端自定义管理用户、连接、组，业务系统调用的时候</li>\n<li>推送系统开发一个api，给业务系统直接调用(当然这不是最佳选择，可以通过消息队列，支持重试、优先级等，性能会比http形式好很多)<br>业务系统调用推送系统的时候传递参数包括，组、用户、推送数据对象，比如如下代码  <pre><code class=\"C#\">var send = new Send()\n{\n   // 推送的组，多个用,隔开\n   GroupId = GroupId,\n   // 关联的UserId 多个用,隔开\n   UserIds= UserIds,\n   // 是否排除用户\n   ExcludeUsers=ExcludeUsers,\n   // 实际推送的对象\n   NotifyObj = new NotifyObj()\n   {\n       Data = Data,\n       NotifyType = NotifyType,\n       OpType= OpType\n   },\n};\n</code></pre>\n</li>\n</ol>\n<ul>\n<li>有GroupId<ul>\n<li>ExcludeUsers=true<br>推送给指定的组中所有用户(排除掉UserIds部分)</li>\n</ul>\n</li>\n</ul>\n</blockquote>\n<ul>\n<li>ExcludeUsers=false<br>推送给组中指定(UserIds中指定的)的这些用户</li>\n</ul>\n<ul>\n<li><p>无GroupId</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给当前所有连接(排除掉UserIds部分的用户)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给指定用户(UserIds中指定的用户)</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"架构设计\"><a href=\"#架构设计\" class=\"headerlink\" title=\"架构设计\"></a>架构设计</h2><ol>\n<li>组、用户、连接的关系</li>\n</ol>\n<ul>\n<li>用户:[连接Id]<br>一个用户用多个连接、以Set形式存redis中</li>\n<li>组:[连接Id:用户Id]<br>以Redis中的Hash格式存储，以Group为Key，以连接Id为Name，以UserId为值，一个用户在组中可能多个连接(开多个浏览器tab页),这样设计的好处是可以满足以下的几种情况<ul>\n<li>给某个人推送<br>从redis中直接根据该用户的UserId查询该用户的所有连接，然后通过连接推送即可</li>\n<li>给某个组推送<br>从redis中根据组名查询出所有的连接Id，通过连接直接推送</li>\n<li>给某个组中的某些人推<br>这个时候不能根据人查连接Id，需要先根据组得到组中的人、连接Id，然后只给组中这些人对应的连接推送</li>\n<li>用户上线的时候<br>在redis中存储一份用户与连接的关系；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id</li>\n<li>用户再开一个浏览器tab页<br>在redis中该用户对应的连接中增加新的连接Id；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id(因为是一连接Id为name的，然而连接Id是不重复的，所以是可以存着同一个组、同一个用户不同连接这种情况的)</li>\n<li>用户退出页面<br>在redis中找到该用户，从redis中删除改用户的找个连接Id，组的情况同样处理</li>\n<li>给某个用户的某个连接Id推送<br>比如:用户点击打包下载，服务器端后台线程进行打包、压缩，完成后推送给指定的连接Id，前端界面再进行处理下载</li>\n</ul>\n</li>\n</ul>\n<p>至此，业务分析完毕，更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/02/dotnetcore/signalr/05-jwt/\">.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/04/dotnetcore/signalr/07-self-manager/\">.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</a>  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\" target=\"_blank\" rel=\"noopener\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\" target=\"_blank\" rel=\"noopener\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>"},{"title":".net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联","date":"2019-10-02T10:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联\n<!-- more -->\nSignalr是以Group、Connect为核心来进行推送，比如，给某个组、某个连接来推送，但实际场景中，核心应该是某个组、某个人；然而一个人可以对应多个连接(浏览器多个tab页)；本节就来介绍下自行管理人、组、连接这些关系  \n由于signalr连接的时候不那么方便附带header和cookie(因为推送独立成一个子系统了)，实际实现中采用以url query的形式附带上token，然后服务器端自定义解析token得到用户信息；\n\n## 服务器端实现\n- ConfigureServices中添加服务相关方法，代码如下,完整代码\n  ``` C#\n  public void ConfigureServices(IServiceCollection services)\n  {\n      var appSection = Configuration.GetSection(\"App\");\n      services.Configure<AppSetting>(option => appSection.Bind(option));\n      var appSetting = appSection.Get<AppSetting>();\n\n      services.AddSingleton<SignalrRedisHelper>();\n\n      // services.AddHostedService<ClearBackGroundService>();\n\n      services.AddAuthentication(options =>\n      {\n          options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n          options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n          options.DefaultForbidScheme = JwtBearerDefaults.AuthenticationScheme;\n      })\n      .AddJwtBearer(option =>\n      {\n          option.SecurityTokenValidators.Clear();\n          option.SecurityTokenValidators.Add(new UserTokenValidation()); ;\n\n          option.Events = new JwtBearerEvents()\n          {\n              OnMessageReceived = context =>\n              {\n                  var userId = context.Request.Query[\"userId\"].FirstOrDefault();\n                  if (!string.IsNullOrWhiteSpace(userId))\n                  {\n                      context.Token = userId;\n                  }\n                  return Task.CompletedTask;\n              }\n          };\n      });\n\n      services.AddCors(options => options.AddPolicy(corsPolicy, builder =>\n      {\n          builder\n                .SetIsOriginAllowedToAllowWildcardSubdomains()\n                .WithOrigins(appSetting.CORS.Split(\",\"))\n                .AllowAnyMethod()\n                .AllowCredentials()\n                .AllowAnyHeader()\n                .Build();\n      }));\n\n      services.AddControllers()\n          .AddNewtonsoftJson(options => options.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver())\n          .ConfigureApiBehaviorOptions(options =>\n          {\n              options.InvalidModelStateResponseFactory = context =>\n              {\n                  var result = new BadRequestObjectResult(context.ModelState);\n                  result.ContentTypes.Add(MediaTypeNames.Application.Json);\n                  // result.ContentTypes.Add(MediaTypeNames.Application.Xml);\n\n                  return result;\n              };\n          })\n          .SetCompatibilityVersion(CompatibilityVersion.Version_3_0);\n\n      // 添加Signalr\n      services.AddSignalR(config =>\n      {\n          if (_webEnv.IsDevelopment())\n          {\n              config.EnableDetailedErrors = true;\n          }\n      })\n      // 支持MessagePack\n      .AddMessagePackProtocol()\n      // 使用redis做底板 支持横向扩展 Scale-out\n      .AddStackExchangeRedis(o =>\n        {\n            o.ConnectionFactory = async writer =>\n            {\n                var config = new ConfigurationOptions\n                {\n                    AbortOnConnectFail = false,\n                    // Password = \"changeme\",\n                    ChannelPrefix = \"__signalr_\",\n                };\n                //config.EndPoints.Add(IPAddress.Loopback, 0);\n                //config.SetDefaultPorts();\n                config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n                var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n                connection.ConnectionFailed += (_, e) =>\n                {\n                    Console.WriteLine(\"Connection to Redis failed.\");\n                };\n\n                if (connection.IsConnected)\n                {\n                    Console.WriteLine(\"connected to Redis.\");\n                }\n                else\n                {\n                    Console.WriteLine(\"Did not connect to Redis\");\n                }\n\n                return connection;\n            };\n        });\n  }\n  ```\n其中，SignalrRedisHelper 为redis辅助方法，[详情请参见](https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/SignalrRedisHelper.cs)  \nUserTokenValidation 为自定义token解析方法，[详情请参见](https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/UserTokenValidation.cs),由于历史遗留问题，此处直接使用了userId，建议的做法是传递jwttoken，然后服务器端解析jwt token得到用户信息    \n\n## Hub中跟用户关联\n在Hub中通过Context.User.Identity.Name可以获取到解析的值，通过这种关系来跟用户关联上，当然，也可以自定义修改使用其他信息，比如Email或其他自定义的名称，具体请google\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展](/2019/10/01/dotnetcore/signalr/04-redis/) \n|   下一篇  |   [.net core 3.0 Signalr - 06 业务实现-业务分析](/2019/10/03/dotnetcore/signalr/06-analysis/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/05-jwt.md","raw":"---\ntitle: .net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联\ndate: '2019-10-02 18:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联\n<!-- more -->\nSignalr是以Group、Connect为核心来进行推送，比如，给某个组、某个连接来推送，但实际场景中，核心应该是某个组、某个人；然而一个人可以对应多个连接(浏览器多个tab页)；本节就来介绍下自行管理人、组、连接这些关系  \n由于signalr连接的时候不那么方便附带header和cookie(因为推送独立成一个子系统了)，实际实现中采用以url query的形式附带上token，然后服务器端自定义解析token得到用户信息；\n\n## 服务器端实现\n- ConfigureServices中添加服务相关方法，代码如下,完整代码\n  ``` C#\n  public void ConfigureServices(IServiceCollection services)\n  {\n      var appSection = Configuration.GetSection(\"App\");\n      services.Configure<AppSetting>(option => appSection.Bind(option));\n      var appSetting = appSection.Get<AppSetting>();\n\n      services.AddSingleton<SignalrRedisHelper>();\n\n      // services.AddHostedService<ClearBackGroundService>();\n\n      services.AddAuthentication(options =>\n      {\n          options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n          options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n          options.DefaultForbidScheme = JwtBearerDefaults.AuthenticationScheme;\n      })\n      .AddJwtBearer(option =>\n      {\n          option.SecurityTokenValidators.Clear();\n          option.SecurityTokenValidators.Add(new UserTokenValidation()); ;\n\n          option.Events = new JwtBearerEvents()\n          {\n              OnMessageReceived = context =>\n              {\n                  var userId = context.Request.Query[\"userId\"].FirstOrDefault();\n                  if (!string.IsNullOrWhiteSpace(userId))\n                  {\n                      context.Token = userId;\n                  }\n                  return Task.CompletedTask;\n              }\n          };\n      });\n\n      services.AddCors(options => options.AddPolicy(corsPolicy, builder =>\n      {\n          builder\n                .SetIsOriginAllowedToAllowWildcardSubdomains()\n                .WithOrigins(appSetting.CORS.Split(\",\"))\n                .AllowAnyMethod()\n                .AllowCredentials()\n                .AllowAnyHeader()\n                .Build();\n      }));\n\n      services.AddControllers()\n          .AddNewtonsoftJson(options => options.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver())\n          .ConfigureApiBehaviorOptions(options =>\n          {\n              options.InvalidModelStateResponseFactory = context =>\n              {\n                  var result = new BadRequestObjectResult(context.ModelState);\n                  result.ContentTypes.Add(MediaTypeNames.Application.Json);\n                  // result.ContentTypes.Add(MediaTypeNames.Application.Xml);\n\n                  return result;\n              };\n          })\n          .SetCompatibilityVersion(CompatibilityVersion.Version_3_0);\n\n      // 添加Signalr\n      services.AddSignalR(config =>\n      {\n          if (_webEnv.IsDevelopment())\n          {\n              config.EnableDetailedErrors = true;\n          }\n      })\n      // 支持MessagePack\n      .AddMessagePackProtocol()\n      // 使用redis做底板 支持横向扩展 Scale-out\n      .AddStackExchangeRedis(o =>\n        {\n            o.ConnectionFactory = async writer =>\n            {\n                var config = new ConfigurationOptions\n                {\n                    AbortOnConnectFail = false,\n                    // Password = \"changeme\",\n                    ChannelPrefix = \"__signalr_\",\n                };\n                //config.EndPoints.Add(IPAddress.Loopback, 0);\n                //config.SetDefaultPorts();\n                config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n                var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n                connection.ConnectionFailed += (_, e) =>\n                {\n                    Console.WriteLine(\"Connection to Redis failed.\");\n                };\n\n                if (connection.IsConnected)\n                {\n                    Console.WriteLine(\"connected to Redis.\");\n                }\n                else\n                {\n                    Console.WriteLine(\"Did not connect to Redis\");\n                }\n\n                return connection;\n            };\n        });\n  }\n  ```\n其中，SignalrRedisHelper 为redis辅助方法，[详情请参见](https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/SignalrRedisHelper.cs)  \nUserTokenValidation 为自定义token解析方法，[详情请参见](https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/UserTokenValidation.cs),由于历史遗留问题，此处直接使用了userId，建议的做法是传递jwttoken，然后服务器端解析jwt token得到用户信息    \n\n## Hub中跟用户关联\n在Hub中通过Context.User.Identity.Name可以获取到解析的值，通过这种关系来跟用户关联上，当然，也可以自定义修改使用其他信息，比如Email或其他自定义的名称，具体请google\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展](/2019/10/01/dotnetcore/signalr/04-redis/) \n|   下一篇  |   [.net core 3.0 Signalr - 06 业务实现-业务分析](/2019/10/03/dotnetcore/signalr/06-analysis/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/05-jwt","published":1,"updated":"2019-09-24T12:20:29.557Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck1dks9q3000et0scqydpd54e","content":"<p>.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联<br><a id=\"more\"></a><br>Signalr是以Group、Connect为核心来进行推送，比如，给某个组、某个连接来推送，但实际场景中，核心应该是某个组、某个人；然而一个人可以对应多个连接(浏览器多个tab页)；本节就来介绍下自行管理人、组、连接这些关系<br>由于signalr连接的时候不那么方便附带header和cookie(因为推送独立成一个子系统了)，实际实现中采用以url query的形式附带上token，然后服务器端自定义解析token得到用户信息；</p>\n<h2 id=\"服务器端实现\"><a href=\"#服务器端实现\" class=\"headerlink\" title=\"服务器端实现\"></a>服务器端实现</h2><ul>\n<li><p>ConfigureServices中添加服务相关方法，代码如下,完整代码</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">public void ConfigureServices(IServiceCollection services)\n{\n    var appSection = Configuration.GetSection(\"App\");\n    services.Configure<AppSetting>(option => appSection.Bind(option));\n    var appSetting = appSection.Get<AppSetting>();\n\n    services.AddSingleton<SignalrRedisHelper>();\n\n    // services.AddHostedService<ClearBackGroundService>();\n\n    services.AddAuthentication(options =>\n    {\n        options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n        options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n        options.DefaultForbidScheme = JwtBearerDefaults.AuthenticationScheme;\n    })\n    .AddJwtBearer(option =>\n    {\n        option.SecurityTokenValidators.Clear();\n        option.SecurityTokenValidators.Add(new UserTokenValidation()); ;\n\n        option.Events = new JwtBearerEvents()\n        {\n            OnMessageReceived = context =>\n            {\n                var userId = context.Request.Query[\"userId\"].FirstOrDefault();\n                if (!string.IsNullOrWhiteSpace(userId))\n                {\n                    context.Token = userId;\n                }\n                return Task.CompletedTask;\n            }\n        };\n    });\n\n    services.AddCors(options => options.AddPolicy(corsPolicy, builder =>\n    {\n        builder\n              .SetIsOriginAllowedToAllowWildcardSubdomains()\n              .WithOrigins(appSetting.CORS.Split(\",\"))\n              .AllowAnyMethod()\n              .AllowCredentials()\n              .AllowAnyHeader()\n              .Build();\n    }));\n\n    services.AddControllers()\n        .AddNewtonsoftJson(options => options.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver())\n        .ConfigureApiBehaviorOptions(options =>\n        {\n            options.InvalidModelStateResponseFactory = context =>\n            {\n                var result = new BadRequestObjectResult(context.ModelState);\n                result.ContentTypes.Add(MediaTypeNames.Application.Json);\n                // result.ContentTypes.Add(MediaTypeNames.Application.Xml);\n\n                return result;\n            };\n        })\n        .SetCompatibilityVersion(CompatibilityVersion.Version_3_0);\n\n    // 添加Signalr\n    services.AddSignalR(config =>\n    {\n        if (_webEnv.IsDevelopment())\n        {\n            config.EnableDetailedErrors = true;\n        }\n    })\n    // 支持MessagePack\n    .AddMessagePackProtocol()\n    // 使用redis做底板 支持横向扩展 Scale-out\n    .AddStackExchangeRedis(o =>\n      {\n          o.ConnectionFactory = async writer =>\n          {\n              var config = new ConfigurationOptions\n              {\n                  AbortOnConnectFail = false,\n                  // Password = \"changeme\",\n                  ChannelPrefix = \"__signalr_\",\n              };\n              //config.EndPoints.Add(IPAddress.Loopback, 0);\n              //config.SetDefaultPorts();\n              config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n              var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n              connection.ConnectionFailed += (_, e) =>\n              {\n                  Console.WriteLine(\"Connection to Redis failed.\");\n              };\n\n              if (connection.IsConnected)\n              {\n                  Console.WriteLine(\"connected to Redis.\");\n              }\n              else\n              {\n                  Console.WriteLine(\"Did not connect to Redis\");\n              }\n\n              return connection;\n          };\n      });\n}\n</code></pre>\n<p>其中，SignalrRedisHelper 为redis辅助方法，<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/SignalrRedisHelper.cs\" target=\"_blank\" rel=\"noopener\">详情请参见</a><br>UserTokenValidation 为自定义token解析方法，<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/UserTokenValidation.cs\" target=\"_blank\" rel=\"noopener\">详情请参见</a>,由于历史遗留问题，此处直接使用了userId，建议的做法是传递jwttoken，然后服务器端解析jwt token得到用户信息    </p>\n</li>\n</ul>\n<h2 id=\"Hub中跟用户关联\"><a href=\"#Hub中跟用户关联\" class=\"headerlink\" title=\"Hub中跟用户关联\"></a>Hub中跟用户关联</h2><p>在Hub中通过Context.User.Identity.Name可以获取到解析的值，通过这种关系来跟用户关联上，当然，也可以自定义修改使用其他信息，比如Email或其他自定义的名称，具体请google</p>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/01/dotnetcore/signalr/04-redis/\">.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/03/dotnetcore/signalr/06-analysis/\">.net core 3.0 Signalr - 06 业务实现-业务分析</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\" target=\"_blank\" rel=\"noopener\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\" target=\"_blank\" rel=\"noopener\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联<br>","more":"<br>Signalr是以Group、Connect为核心来进行推送，比如，给某个组、某个连接来推送，但实际场景中，核心应该是某个组、某个人；然而一个人可以对应多个连接(浏览器多个tab页)；本节就来介绍下自行管理人、组、连接这些关系<br>由于signalr连接的时候不那么方便附带header和cookie(因为推送独立成一个子系统了)，实际实现中采用以url query的形式附带上token，然后服务器端自定义解析token得到用户信息；</p>\n<h2 id=\"服务器端实现\"><a href=\"#服务器端实现\" class=\"headerlink\" title=\"服务器端实现\"></a>服务器端实现</h2><ul>\n<li><p>ConfigureServices中添加服务相关方法，代码如下,完整代码</p>\n<pre><code class=\"C#\">public void ConfigureServices(IServiceCollection services)\n{\n    var appSection = Configuration.GetSection(&quot;App&quot;);\n    services.Configure&lt;AppSetting&gt;(option =&gt; appSection.Bind(option));\n    var appSetting = appSection.Get&lt;AppSetting&gt;();\n\n    services.AddSingleton&lt;SignalrRedisHelper&gt;();\n\n    // services.AddHostedService&lt;ClearBackGroundService&gt;();\n\n    services.AddAuthentication(options =&gt;\n    {\n        options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n        options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n        options.DefaultForbidScheme = JwtBearerDefaults.AuthenticationScheme;\n    })\n    .AddJwtBearer(option =&gt;\n    {\n        option.SecurityTokenValidators.Clear();\n        option.SecurityTokenValidators.Add(new UserTokenValidation()); ;\n\n        option.Events = new JwtBearerEvents()\n        {\n            OnMessageReceived = context =&gt;\n            {\n                var userId = context.Request.Query[&quot;userId&quot;].FirstOrDefault();\n                if (!string.IsNullOrWhiteSpace(userId))\n                {\n                    context.Token = userId;\n                }\n                return Task.CompletedTask;\n            }\n        };\n    });\n\n    services.AddCors(options =&gt; options.AddPolicy(corsPolicy, builder =&gt;\n    {\n        builder\n              .SetIsOriginAllowedToAllowWildcardSubdomains()\n              .WithOrigins(appSetting.CORS.Split(&quot;,&quot;))\n              .AllowAnyMethod()\n              .AllowCredentials()\n              .AllowAnyHeader()\n              .Build();\n    }));\n\n    services.AddControllers()\n        .AddNewtonsoftJson(options =&gt; options.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver())\n        .ConfigureApiBehaviorOptions(options =&gt;\n        {\n            options.InvalidModelStateResponseFactory = context =&gt;\n            {\n                var result = new BadRequestObjectResult(context.ModelState);\n                result.ContentTypes.Add(MediaTypeNames.Application.Json);\n                // result.ContentTypes.Add(MediaTypeNames.Application.Xml);\n\n                return result;\n            };\n        })\n        .SetCompatibilityVersion(CompatibilityVersion.Version_3_0);\n\n    // 添加Signalr\n    services.AddSignalR(config =&gt;\n    {\n        if (_webEnv.IsDevelopment())\n        {\n            config.EnableDetailedErrors = true;\n        }\n    })\n    // 支持MessagePack\n    .AddMessagePackProtocol()\n    // 使用redis做底板 支持横向扩展 Scale-out\n    .AddStackExchangeRedis(o =&gt;\n      {\n          o.ConnectionFactory = async writer =&gt;\n          {\n              var config = new ConfigurationOptions\n              {\n                  AbortOnConnectFail = false,\n                  // Password = &quot;changeme&quot;,\n                  ChannelPrefix = &quot;__signalr_&quot;,\n              };\n              //config.EndPoints.Add(IPAddress.Loopback, 0);\n              //config.SetDefaultPorts();\n              config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n              var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n              connection.ConnectionFailed += (_, e) =&gt;\n              {\n                  Console.WriteLine(&quot;Connection to Redis failed.&quot;);\n              };\n\n              if (connection.IsConnected)\n              {\n                  Console.WriteLine(&quot;connected to Redis.&quot;);\n              }\n              else\n              {\n                  Console.WriteLine(&quot;Did not connect to Redis&quot;);\n              }\n\n              return connection;\n          };\n      });\n}\n</code></pre>\n<p>其中，SignalrRedisHelper 为redis辅助方法，<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/SignalrRedisHelper.cs\" target=\"_blank\" rel=\"noopener\">详情请参见</a><br>UserTokenValidation 为自定义token解析方法，<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/UserTokenValidation.cs\" target=\"_blank\" rel=\"noopener\">详情请参见</a>,由于历史遗留问题，此处直接使用了userId，建议的做法是传递jwttoken，然后服务器端解析jwt token得到用户信息    </p>\n</li>\n</ul>\n<h2 id=\"Hub中跟用户关联\"><a href=\"#Hub中跟用户关联\" class=\"headerlink\" title=\"Hub中跟用户关联\"></a>Hub中跟用户关联</h2><p>在Hub中通过Context.User.Identity.Name可以获取到解析的值，通过这种关系来跟用户关联上，当然，也可以自定义修改使用其他信息，比如Email或其他自定义的名称，具体请google</p>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/01/dotnetcore/signalr/04-redis/\">.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/03/dotnetcore/signalr/06-analysis/\">.net core 3.0 Signalr - 06 业务实现-业务分析</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\" target=\"_blank\" rel=\"noopener\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\" target=\"_blank\" rel=\"noopener\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>"},{"title":".net core 3.0 Signalr - 09 待改进&交流","date":"2019-10-05T12:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 09 待改进&交流\n<!-- more -->\n\n## 个人心得\n写博客真的比写代码累，膜拜那些坚持写博客的大佬！  \n有时候零散的片段比较多，没写之前感觉有千千万万要写的东西，实际写的时候发现， 好像这个没啥说的，然后就帖了个图，或者一笔带过了\n\n## 待改进&交流\n- 使用消息队列替换目前的api调用形式，同时消息队列支持定义推送优先级\n- 使用polly来重试失败的调用\n- 将连接中传递的userId改成token\n- 多个客户端同时关闭，IsLast不准确\n- 服务器端需要有定时任务去清除redis中的无效数据(看造化)\n- 连接的监控\n- 连接的并发数量测试\n\n\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |  [.net core 3.0 Signalr - 08 业务实现-客户端demo](/2019/10/05/dotnetcore/signalr/08-clientdemo/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/09-todo.md","raw":"---\ntitle: .net core 3.0 Signalr - 09 待改进&交流\ndate: '2019-10-05 20:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 09 待改进&交流\n<!-- more -->\n\n## 个人心得\n写博客真的比写代码累，膜拜那些坚持写博客的大佬！  \n有时候零散的片段比较多，没写之前感觉有千千万万要写的东西，实际写的时候发现， 好像这个没啥说的，然后就帖了个图，或者一笔带过了\n\n## 待改进&交流\n- 使用消息队列替换目前的api调用形式，同时消息队列支持定义推送优先级\n- 使用polly来重试失败的调用\n- 将连接中传递的userId改成token\n- 多个客户端同时关闭，IsLast不准确\n- 服务器端需要有定时任务去清除redis中的无效数据(看造化)\n- 连接的监控\n- 连接的并发数量测试\n\n\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |  [.net core 3.0 Signalr - 08 业务实现-客户端demo](/2019/10/05/dotnetcore/signalr/08-clientdemo/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/09-todo","published":1,"updated":"2020-02-23T13:45:22.674Z","_id":"ck1dks9qc000lt0sck5yuikwm","comments":1,"layout":"post","photos":[],"link":"","content":"<p>.net core 3.0 Signalr - 09 待改进&amp;交流<br><a id=\"more\"></a></p>\n<h2 id=\"个人心得\"><a href=\"#个人心得\" class=\"headerlink\" title=\"个人心得\"></a>个人心得</h2><p>写博客真的比写代码累，膜拜那些坚持写博客的大佬！<br>有时候零散的片段比较多，没写之前感觉有千千万万要写的东西，实际写的时候发现， 好像这个没啥说的，然后就帖了个图，或者一笔带过了</p>\n<h2 id=\"待改进-amp-交流\"><a href=\"#待改进-amp-交流\" class=\"headerlink\" title=\"待改进&amp;交流\"></a>待改进&amp;交流</h2><ul>\n<li>使用消息队列替换目前的api调用形式，同时消息队列支持定义推送优先级</li>\n<li>使用polly来重试失败的调用</li>\n<li>将连接中传递的userId改成token</li>\n<li>多个客户端同时关闭，IsLast不准确</li>\n<li>服务器端需要有定时任务去清除redis中的无效数据(看造化)</li>\n<li>连接的监控</li>\n<li>连接的并发数量测试</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/05/dotnetcore/signalr/08-clientdemo/\">.net core 3.0 Signalr - 08 业务实现-客户端demo</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 09 待改进&amp;交流<br>","more":"</p>\n<h2 id=\"个人心得\"><a href=\"#个人心得\" class=\"headerlink\" title=\"个人心得\"></a>个人心得</h2><p>写博客真的比写代码累，膜拜那些坚持写博客的大佬！<br>有时候零散的片段比较多，没写之前感觉有千千万万要写的东西，实际写的时候发现， 好像这个没啥说的，然后就帖了个图，或者一笔带过了</p>\n<h2 id=\"待改进-amp-交流\"><a href=\"#待改进-amp-交流\" class=\"headerlink\" title=\"待改进&amp;交流\"></a>待改进&amp;交流</h2><ul>\n<li>使用消息队列替换目前的api调用形式，同时消息队列支持定义推送优先级</li>\n<li>使用polly来重试失败的调用</li>\n<li>将连接中传递的userId改成token</li>\n<li>多个客户端同时关闭，IsLast不准确</li>\n<li>服务器端需要有定时任务去清除redis中的无效数据(看造化)</li>\n<li>连接的监控</li>\n<li>连接的并发数量测试</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/05/dotnetcore/signalr/08-clientdemo/\">.net core 3.0 Signalr - 08 业务实现-客户端demo</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>"},{"title":".net core 3.0 Signalr - 08 业务实现-客户端demo","date":"2019-10-05T12:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 08 业务实现-客户端demo\n<!-- more -->\n由于signalr作为一个单独的推送系统，跟业务系统是分离开的，所以此处模拟一个业务系统，新建一个.net core app项目\n\n## 模拟实现一个登录功能  \n我们的登录很简单，当进入系统，如果检测到用户未登录则跳转到登录页面，用户只需要输入用户名点击登录即算登录成功  \n- 配置ConfigServices方法 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L41-L47)\n  ``` C#\n  services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme)\n  .AddCookie(CookieAuthenticationDefaults.AuthenticationScheme, cookieOption =>\n  {\n      cookieOption.LoginPath = \"/Account/Login\";\n      cookieOption.AccessDeniedPath = \"/Account/Login\";\n  });\n  ```\n- 配置Config方法，配置认证、授权的请求管道 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L73-L74)\n  ``` C#\n  app.UseRouting();\n  app.UseAuthentication();\n  app.UseAuthorization();\n  ```\n- 接收登录的post请求，写cookie，跳转 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Controllers/AccountController.cs#L33-L59)\n\n## 前端页面实现\n首先在Layout页面引入需要的js文件(vue、signalr、msgpack5、signalr-protocol-msgpack)   [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Shared/_Layout.cshtml#L78-L81)  \n\n### 封装signalr连接相关js\nsignalr客户端js的操作就是，创建连接、监听推送,封装后端js如下   [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/wwwroot/js/initSignalr.js)  \n``` js\n/**\n * 初始化连接\n * @param {object} option 参数\n * @param {string} option.url 连接的url地址\n * @param {string} option.loggingLevel 日志级别,默认为 Error\n * @param {number} option.delay 延迟连接 默认为3000毫秒\n * @param {function} option.onStarted 启动时触发\n * @param {function} option.onLine 启动时触发\n * @param {function} option.offLine 启动时触发\n * @returns {object} 连接的实例\n */\nfunction initSignalr(option) {\n    var config = Object.assign(true, {\n        loggingLevel: signalR.LogLevel.Error,\n        delay: 3000,\n        url: ''\n    }, option);\n\n    var connection = new signalR.HubConnectionBuilder()\n        .configureLogging(config.loggingLevel)\n        .withUrl(config.url, {\n            accessTokenFactory: option.accessTokenFactory\n        })\n        .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol())\n        .withAutomaticReconnect([0, 2000, 5000, 10000, 20000])\n        .build();\n\n    connection.onreconnecting(function (info) {\n        console.info('----------------------------------signalr-- onreconnecting', info);\n    });\n\n    connection.onclose(function (err) {\n        console.info('--------------------------------signalr-- onclose', err);\n    });\n\n    connection.on('OnNotify', config.onNotify);\n\n    connection.on('OnLine', config.onLine);\n\n    connection.on('OffLine', config.offLine);\n\n    setTimeout(function () {\n        connection.start().then(function (data) {\n            option.onStarted && option.onStarted(data);\n        }).catch(function (error) {\n            console.error(error.toString());\n        });\n    }, option.delay);\n\n    return connection;\n}\n```\n\n### 调用封装的js初始化连接 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L183)  \n- 然后在Home/Index.cshtml中引入上面的js  \n- 在页面加载完后，调用初始化(案例中使用了vue)  \n在进入页面后会弹窗让用户输入加入的组，可以不输入也可以多个 \n  ``` js\n  function initConnect() {\n    $(\"#collectionUserInfo\").modal({\n        keyboard: false,\n        show: true,\n        backdrop: 'static'\n    })\n\n    $('#collectionUserInfo').on('hidden.bs.modal', function () {\n        var groups = $(\"#groups\").val()||'';\n        connect=initSignalr({\n            delay: 0,\n            url:`${notifyUrl}notify-hub?userId=${vm.userInfo.userName}&group=${groups}`,\n            loggingLevel: signalR.LogLevel.Error,\n            onNotify: dealNotify,\n            onLine: function (data) {\n                if (data.IsFirst) {\n                    getOnlineUsers();\n                }\n                getOnlineGroups();\n                vm.logs.push(`新连接上线：${JSON.stringify(data)}`);\n            },\n            offLine: function (data) {\n                if (data.IsLast) {\n                    getOnlineUsers();\n                }\n                getOnlineGroups();\n                vm.logs.push(`连接下线：${JSON.stringify(data)}`);\n            },\n            onStarted: function () {\n                getOnlineUsers();\n                getOnlineGroups();\n                vm.$set(vm.userInfo, 'connectionId', connect.connectionId);\n                vm.$set(vm.userInfo, 'groups', groups);\n                vm.logs.push('连接成功');\n            }\n        });\n    })\n    }\n  ```\nonNotify方法，如果仔细的话会看到里面的onNotify方法，所有的推送最终都会调用到该方法来进行分发。[查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L200)   \noffLine，当有客户端下线的时候会触发，data里面包含有用户Id、连接Id、是否该用户的最后一个连接,可根据需要使用[查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L201-L207)   \nonLine,当用户连接的时候会触发，data里面包含有用户Id、连接Id、是否该用户的第一个连接(用于用户上线后的逻辑处理)，可根据需要使用  [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L208-L214)   \nonStarted，当成功连接后触发，可用于做一些连接后的业务逻辑处理，可根据需要使用 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L215-L221)  \n\n### 获取当前用户信息、在线列表 \n在用户连接成功后，获取当前在线用户、用户组、当前用户信息,并设置到vue的data中 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L216-L217)  \n\n### 模拟一个任务分配\n在项目中心中，点击\"模拟推送待办\"按钮，将会向当前用户所在组中推送一条代码消息，可以登录不同账号、开多个tab页体验 \n点击事件代码位置 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L132-L141) \n``` js\nassignTaskToUser: function () {\n    var that = this;\n    $.ajax({\n        type: 'POST',\n        url: '/api/ServerProxy/AssignTaskToUser',\n        data: {\n            groups:that.userInfo.groups\n        }\n    })\n},\n```\n对应的推送解析代码 \n> 首先当有推送过来的时候，会首先进到onNotify方法，然后根据不同类型在分配到不同的js方法中  \n[查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L268-L279)   \n效果图  \n![20190927212304.png](http://qiniu.xxgtalk.cn/blog/images/20190927212304.png)\n\n### 模拟发送消息\n消息发送，可以选定组、人进行消息发送  \n[发送端代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L145-L157)  \n[解析端](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L281-L290)\n\n### 登录互斥\n登录互斥是指，当一个账号在A电脑登录，然后再在B电脑登录，最后的登录会排斥掉开始的登录，即，将A上的挤下线  \n首先用谷歌浏览器登录，输入用户名：xiexingen，然后连接  \n接着使用360急速浏览器登录，输入用户名:xiexingen 这个时候会发现谷歌浏览器中的登录已经退出，如图\n![20190927213637.png](http://qiniu.xxgtalk.cn/blog/images/20190927213637.png)\n> 必要条件: 不同浏览器、同一用户,比如:同一个浏览器，不同tab就不算(能共用cookie)\n\n### 文件下载(指定连接推送)\n文件下载的场景，用户在操作页面上选择了上千个文件，然后点击打包下载，这个时候可能需要很久时间才反应回来，那么这段时间如果让用户一直等待显然不妥，所以，当用户点击打包下载的时候，后端启用一个后台线程去打包、压缩，然后立即返回；用户可以继续操作，当服务器端打包好后推送给用户端，用户点击下载即可。\n此处分两种情况  \n1. 单连接推送\n用户开了多个tab页，在其中一个上下载文件，如果后端推送的时候，直接给该用户推，显然不妥；正确的做法一个是只给操作的那个tab页推，这就需要，调用服务器端业务api的时候，需要把当前tab页对应的连接id发送到服务器端，服务器端处理完业务后，调用推送服务器，告诉推送服务器只推我给你的这个连接的客户端，这样就能指定连接推送。\n2. 单用户排除某个连接的其他连接推送  \n这种情况比较少见，告诉推送服务器，给这个用户，除了某个连接外的其他所有连接推送\n\n模拟操作  \n点击第一个图中的\"打包下载文件\" 按钮，当前页面会受到文件下载的推送  \n在点击图二中的\"推送当前用户其他页面更新操作\"按钮，会发现出了当前tab页外，其他tab也都收到了推送消息，如下图\n![20190927214530.png](http://qiniu.xxgtalk.cn/blog/images/20190927214530.png)\n\n至此，signalr相关文章算是到此结束了，下一篇谈谈个人的一点心得以及里面存着的一些问题。\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |  [.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接](/2019/10/04/dotnetcore/signalr/07-self-manager/) \n|   下一篇  |   [.net core 3.0 Signalr - 09 待改进&交流](/2019/10/05/dotnetcore/signalr/09-todo/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/08-clientdemo.md","raw":"---\ntitle: .net core 3.0 Signalr - 08 业务实现-客户端demo\ndate: '2019-10-05 20:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 08 业务实现-客户端demo\n<!-- more -->\n由于signalr作为一个单独的推送系统，跟业务系统是分离开的，所以此处模拟一个业务系统，新建一个.net core app项目\n\n## 模拟实现一个登录功能  \n我们的登录很简单，当进入系统，如果检测到用户未登录则跳转到登录页面，用户只需要输入用户名点击登录即算登录成功  \n- 配置ConfigServices方法 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L41-L47)\n  ``` C#\n  services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme)\n  .AddCookie(CookieAuthenticationDefaults.AuthenticationScheme, cookieOption =>\n  {\n      cookieOption.LoginPath = \"/Account/Login\";\n      cookieOption.AccessDeniedPath = \"/Account/Login\";\n  });\n  ```\n- 配置Config方法，配置认证、授权的请求管道 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L73-L74)\n  ``` C#\n  app.UseRouting();\n  app.UseAuthentication();\n  app.UseAuthorization();\n  ```\n- 接收登录的post请求，写cookie，跳转 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Controllers/AccountController.cs#L33-L59)\n\n## 前端页面实现\n首先在Layout页面引入需要的js文件(vue、signalr、msgpack5、signalr-protocol-msgpack)   [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Shared/_Layout.cshtml#L78-L81)  \n\n### 封装signalr连接相关js\nsignalr客户端js的操作就是，创建连接、监听推送,封装后端js如下   [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/wwwroot/js/initSignalr.js)  \n``` js\n/**\n * 初始化连接\n * @param {object} option 参数\n * @param {string} option.url 连接的url地址\n * @param {string} option.loggingLevel 日志级别,默认为 Error\n * @param {number} option.delay 延迟连接 默认为3000毫秒\n * @param {function} option.onStarted 启动时触发\n * @param {function} option.onLine 启动时触发\n * @param {function} option.offLine 启动时触发\n * @returns {object} 连接的实例\n */\nfunction initSignalr(option) {\n    var config = Object.assign(true, {\n        loggingLevel: signalR.LogLevel.Error,\n        delay: 3000,\n        url: ''\n    }, option);\n\n    var connection = new signalR.HubConnectionBuilder()\n        .configureLogging(config.loggingLevel)\n        .withUrl(config.url, {\n            accessTokenFactory: option.accessTokenFactory\n        })\n        .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol())\n        .withAutomaticReconnect([0, 2000, 5000, 10000, 20000])\n        .build();\n\n    connection.onreconnecting(function (info) {\n        console.info('----------------------------------signalr-- onreconnecting', info);\n    });\n\n    connection.onclose(function (err) {\n        console.info('--------------------------------signalr-- onclose', err);\n    });\n\n    connection.on('OnNotify', config.onNotify);\n\n    connection.on('OnLine', config.onLine);\n\n    connection.on('OffLine', config.offLine);\n\n    setTimeout(function () {\n        connection.start().then(function (data) {\n            option.onStarted && option.onStarted(data);\n        }).catch(function (error) {\n            console.error(error.toString());\n        });\n    }, option.delay);\n\n    return connection;\n}\n```\n\n### 调用封装的js初始化连接 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L183)  \n- 然后在Home/Index.cshtml中引入上面的js  \n- 在页面加载完后，调用初始化(案例中使用了vue)  \n在进入页面后会弹窗让用户输入加入的组，可以不输入也可以多个 \n  ``` js\n  function initConnect() {\n    $(\"#collectionUserInfo\").modal({\n        keyboard: false,\n        show: true,\n        backdrop: 'static'\n    })\n\n    $('#collectionUserInfo').on('hidden.bs.modal', function () {\n        var groups = $(\"#groups\").val()||'';\n        connect=initSignalr({\n            delay: 0,\n            url:`${notifyUrl}notify-hub?userId=${vm.userInfo.userName}&group=${groups}`,\n            loggingLevel: signalR.LogLevel.Error,\n            onNotify: dealNotify,\n            onLine: function (data) {\n                if (data.IsFirst) {\n                    getOnlineUsers();\n                }\n                getOnlineGroups();\n                vm.logs.push(`新连接上线：${JSON.stringify(data)}`);\n            },\n            offLine: function (data) {\n                if (data.IsLast) {\n                    getOnlineUsers();\n                }\n                getOnlineGroups();\n                vm.logs.push(`连接下线：${JSON.stringify(data)}`);\n            },\n            onStarted: function () {\n                getOnlineUsers();\n                getOnlineGroups();\n                vm.$set(vm.userInfo, 'connectionId', connect.connectionId);\n                vm.$set(vm.userInfo, 'groups', groups);\n                vm.logs.push('连接成功');\n            }\n        });\n    })\n    }\n  ```\nonNotify方法，如果仔细的话会看到里面的onNotify方法，所有的推送最终都会调用到该方法来进行分发。[查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L200)   \noffLine，当有客户端下线的时候会触发，data里面包含有用户Id、连接Id、是否该用户的最后一个连接,可根据需要使用[查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L201-L207)   \nonLine,当用户连接的时候会触发，data里面包含有用户Id、连接Id、是否该用户的第一个连接(用于用户上线后的逻辑处理)，可根据需要使用  [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L208-L214)   \nonStarted，当成功连接后触发，可用于做一些连接后的业务逻辑处理，可根据需要使用 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L215-L221)  \n\n### 获取当前用户信息、在线列表 \n在用户连接成功后，获取当前在线用户、用户组、当前用户信息,并设置到vue的data中 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L216-L217)  \n\n### 模拟一个任务分配\n在项目中心中，点击\"模拟推送待办\"按钮，将会向当前用户所在组中推送一条代码消息，可以登录不同账号、开多个tab页体验 \n点击事件代码位置 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L132-L141) \n``` js\nassignTaskToUser: function () {\n    var that = this;\n    $.ajax({\n        type: 'POST',\n        url: '/api/ServerProxy/AssignTaskToUser',\n        data: {\n            groups:that.userInfo.groups\n        }\n    })\n},\n```\n对应的推送解析代码 \n> 首先当有推送过来的时候，会首先进到onNotify方法，然后根据不同类型在分配到不同的js方法中  \n[查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L268-L279)   \n效果图  \n![20190927212304.png](http://qiniu.xxgtalk.cn/blog/images/20190927212304.png)\n\n### 模拟发送消息\n消息发送，可以选定组、人进行消息发送  \n[发送端代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L145-L157)  \n[解析端](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L281-L290)\n\n### 登录互斥\n登录互斥是指，当一个账号在A电脑登录，然后再在B电脑登录，最后的登录会排斥掉开始的登录，即，将A上的挤下线  \n首先用谷歌浏览器登录，输入用户名：xiexingen，然后连接  \n接着使用360急速浏览器登录，输入用户名:xiexingen 这个时候会发现谷歌浏览器中的登录已经退出，如图\n![20190927213637.png](http://qiniu.xxgtalk.cn/blog/images/20190927213637.png)\n> 必要条件: 不同浏览器、同一用户,比如:同一个浏览器，不同tab就不算(能共用cookie)\n\n### 文件下载(指定连接推送)\n文件下载的场景，用户在操作页面上选择了上千个文件，然后点击打包下载，这个时候可能需要很久时间才反应回来，那么这段时间如果让用户一直等待显然不妥，所以，当用户点击打包下载的时候，后端启用一个后台线程去打包、压缩，然后立即返回；用户可以继续操作，当服务器端打包好后推送给用户端，用户点击下载即可。\n此处分两种情况  \n1. 单连接推送\n用户开了多个tab页，在其中一个上下载文件，如果后端推送的时候，直接给该用户推，显然不妥；正确的做法一个是只给操作的那个tab页推，这就需要，调用服务器端业务api的时候，需要把当前tab页对应的连接id发送到服务器端，服务器端处理完业务后，调用推送服务器，告诉推送服务器只推我给你的这个连接的客户端，这样就能指定连接推送。\n2. 单用户排除某个连接的其他连接推送  \n这种情况比较少见，告诉推送服务器，给这个用户，除了某个连接外的其他所有连接推送\n\n模拟操作  \n点击第一个图中的\"打包下载文件\" 按钮，当前页面会受到文件下载的推送  \n在点击图二中的\"推送当前用户其他页面更新操作\"按钮，会发现出了当前tab页外，其他tab也都收到了推送消息，如下图\n![20190927214530.png](http://qiniu.xxgtalk.cn/blog/images/20190927214530.png)\n\n至此，signalr相关文章算是到此结束了，下一篇谈谈个人的一点心得以及里面存着的一些问题。\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |  [.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接](/2019/10/04/dotnetcore/signalr/07-self-manager/) \n|   下一篇  |   [.net core 3.0 Signalr - 09 待改进&交流](/2019/10/05/dotnetcore/signalr/09-todo/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/08-clientdemo","published":1,"updated":"2019-09-27T14:15:45.399Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck1dks9qg000ot0scnpoa3ifv","content":"<p>.net core 3.0 Signalr - 08 业务实现-客户端demo<br><a id=\"more\"></a><br>由于signalr作为一个单独的推送系统，跟业务系统是分离开的，所以此处模拟一个业务系统，新建一个.net core app项目</p>\n<h2 id=\"模拟实现一个登录功能\"><a href=\"#模拟实现一个登录功能\" class=\"headerlink\" title=\"模拟实现一个登录功能\"></a>模拟实现一个登录功能</h2><p>我们的登录很简单，当进入系统，如果检测到用户未登录则跳转到登录页面，用户只需要输入用户名点击登录即算登录成功  </p>\n<ul>\n<li>配置ConfigServices方法 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L41-L47\" target=\"_blank\" rel=\"noopener\">查看代码</a><pre class=\" language-C#\"><code class=\"language-C#\">services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme)\n.AddCookie(CookieAuthenticationDefaults.AuthenticationScheme, cookieOption =>\n{\n    cookieOption.LoginPath = \"/Account/Login\";\n    cookieOption.AccessDeniedPath = \"/Account/Login\";\n});\n</code></pre>\n</li>\n<li>配置Config方法，配置认证、授权的请求管道 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L73-L74\" target=\"_blank\" rel=\"noopener\">查看代码</a><pre class=\" language-C#\"><code class=\"language-C#\">app.UseRouting();\napp.UseAuthentication();\napp.UseAuthorization();\n</code></pre>\n</li>\n<li>接收登录的post请求，写cookie，跳转 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Controllers/AccountController.cs#L33-L59\" target=\"_blank\" rel=\"noopener\">查看代码</a></li>\n</ul>\n<h2 id=\"前端页面实现\"><a href=\"#前端页面实现\" class=\"headerlink\" title=\"前端页面实现\"></a>前端页面实现</h2><p>首先在Layout页面引入需要的js文件(vue、signalr、msgpack5、signalr-protocol-msgpack)   <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Shared/_Layout.cshtml#L78-L81\" target=\"_blank\" rel=\"noopener\">查看代码</a>  </p>\n<h3 id=\"封装signalr连接相关js\"><a href=\"#封装signalr连接相关js\" class=\"headerlink\" title=\"封装signalr连接相关js\"></a>封装signalr连接相关js</h3><p>signalr客户端js的操作就是，创建连接、监听推送,封装后端js如下   <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/wwwroot/js/initSignalr.js\" target=\"_blank\" rel=\"noopener\">查看代码</a>  </p>\n<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token comment\" spellcheck=\"true\">/**\n * 初始化连接\n * @param {object} option 参数\n * @param {string} option.url 连接的url地址\n * @param {string} option.loggingLevel 日志级别,默认为 Error\n * @param {number} option.delay 延迟连接 默认为3000毫秒\n * @param {function} option.onStarted 启动时触发\n * @param {function} option.onLine 启动时触发\n * @param {function} option.offLine 启动时触发\n * @returns {object} 连接的实例\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">initSignalr</span><span class=\"token punctuation\">(</span>option<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> config <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        loggingLevel<span class=\"token punctuation\">:</span> signalR<span class=\"token punctuation\">.</span>LogLevel<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">,</span>\n        delay<span class=\"token punctuation\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n        url<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> option<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">var</span> connection <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">signalR<span class=\"token punctuation\">.</span>HubConnectionBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">configureLogging</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>loggingLevel<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">withUrl</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            accessTokenFactory<span class=\"token punctuation\">:</span> option<span class=\"token punctuation\">.</span>accessTokenFactory\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">withHubProtocol</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">signalR<span class=\"token punctuation\">.</span>protocols<span class=\"token punctuation\">.</span>msgpack<span class=\"token punctuation\">.</span>MessagePackHubProtocol</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">withAutomaticReconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">onreconnecting</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'----------------------------------signalr-- onreconnecting'</span><span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">onclose</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--------------------------------signalr-- onclose'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'OnNotify'</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">.</span>onNotify<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'OnLine'</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">.</span>onLine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'OffLine'</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">.</span>offLine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        connection<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            option<span class=\"token punctuation\">.</span>onStarted <span class=\"token operator\">&amp;&amp;</span> option<span class=\"token punctuation\">.</span><span class=\"token function\">onStarted</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> option<span class=\"token punctuation\">.</span>delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> connection<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 id=\"调用封装的js初始化连接-查看代码\"><a href=\"#调用封装的js初始化连接-查看代码\" class=\"headerlink\" title=\"调用封装的js初始化连接 查看代码\"></a>调用封装的js初始化连接 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L183\" target=\"_blank\" rel=\"noopener\">查看代码</a></h3><ul>\n<li>然后在Home/Index.cshtml中引入上面的js  </li>\n<li><p>在页面加载完后，调用初始化(案例中使用了vue)<br>在进入页面后会弹窗让用户输入加入的组，可以不输入也可以多个 </p>\n<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">initConnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#collectionUserInfo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">modal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      keyboard<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      show<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      backdrop<span class=\"token punctuation\">:</span> <span class=\"token string\">'static'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#collectionUserInfo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hidden.bs.modal'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> groups <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#groups\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span><span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n      connect<span class=\"token operator\">=</span><span class=\"token function\">initSignalr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          delay<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n          url<span class=\"token punctuation\">:</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>notifyUrl<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">notify-hub?userId=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>vm<span class=\"token punctuation\">.</span>userInfo<span class=\"token punctuation\">.</span>userName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&amp;group=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>groups<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">,</span>\n          loggingLevel<span class=\"token punctuation\">:</span> signalR<span class=\"token punctuation\">.</span>LogLevel<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">,</span>\n          onNotify<span class=\"token punctuation\">:</span> dealNotify<span class=\"token punctuation\">,</span>\n          onLine<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>IsFirst<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token function\">getOnlineUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span>\n              <span class=\"token function\">getOnlineGroups</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              vm<span class=\"token punctuation\">.</span>logs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`新连接上线：</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>JSON<span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          offLine<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>IsLast<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token function\">getOnlineUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span>\n              <span class=\"token function\">getOnlineGroups</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              vm<span class=\"token punctuation\">.</span>logs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`连接下线：</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>JSON<span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          onStarted<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">getOnlineUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token function\">getOnlineGroups</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              vm<span class=\"token punctuation\">.</span>$<span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">.</span>userInfo<span class=\"token punctuation\">,</span> <span class=\"token string\">'connectionId'</span><span class=\"token punctuation\">,</span> connect<span class=\"token punctuation\">.</span>connectionId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              vm<span class=\"token punctuation\">.</span>$<span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">.</span>userInfo<span class=\"token punctuation\">,</span> <span class=\"token string\">'groups'</span><span class=\"token punctuation\">,</span> groups<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              vm<span class=\"token punctuation\">.</span>logs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'连接成功'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n</code></pre>\n<p>onNotify方法，如果仔细的话会看到里面的onNotify方法，所有的推送最终都会调用到该方法来进行分发。<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L200\" target=\"_blank\" rel=\"noopener\">查看代码</a><br>offLine，当有客户端下线的时候会触发，data里面包含有用户Id、连接Id、是否该用户的最后一个连接,可根据需要使用<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L201-L207\" target=\"_blank\" rel=\"noopener\">查看代码</a><br>onLine,当用户连接的时候会触发，data里面包含有用户Id、连接Id、是否该用户的第一个连接(用于用户上线后的逻辑处理)，可根据需要使用  <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L208-L214\" target=\"_blank\" rel=\"noopener\">查看代码</a><br>onStarted，当成功连接后触发，可用于做一些连接后的业务逻辑处理，可根据需要使用 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L215-L221\" target=\"_blank\" rel=\"noopener\">查看代码</a>  </p>\n</li>\n</ul>\n<h3 id=\"获取当前用户信息、在线列表\"><a href=\"#获取当前用户信息、在线列表\" class=\"headerlink\" title=\"获取当前用户信息、在线列表\"></a>获取当前用户信息、在线列表</h3><p>在用户连接成功后，获取当前在线用户、用户组、当前用户信息,并设置到vue的data中 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L216-L217\" target=\"_blank\" rel=\"noopener\">查看代码</a>  </p>\n<h3 id=\"模拟一个任务分配\"><a href=\"#模拟一个任务分配\" class=\"headerlink\" title=\"模拟一个任务分配\"></a>模拟一个任务分配</h3><p>在项目中心中，点击”模拟推送待办”按钮，将会向当前用户所在组中推送一条代码消息，可以登录不同账号、开多个tab页体验<br>点击事件代码位置 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L132-L141\" target=\"_blank\" rel=\"noopener\">查看代码</a> </p>\n<pre class=\" language-js\"><code class=\"language-js\">assignTaskToUser<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> that <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    $<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        type<span class=\"token punctuation\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n        url<span class=\"token punctuation\">:</span> <span class=\"token string\">'/api/ServerProxy/AssignTaskToUser'</span><span class=\"token punctuation\">,</span>\n        data<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            groups<span class=\"token punctuation\">:</span>that<span class=\"token punctuation\">.</span>userInfo<span class=\"token punctuation\">.</span>groups\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</code></pre>\n<p>对应的推送解析代码 </p>\n<blockquote>\n<p>首先当有推送过来的时候，会首先进到onNotify方法，然后根据不同类型在分配到不同的js方法中<br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L268-L279\" target=\"_blank\" rel=\"noopener\">查看代码</a><br>效果图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190927212304.png\" alt=\"20190927212304.png\"></p>\n</blockquote>\n<h3 id=\"模拟发送消息\"><a href=\"#模拟发送消息\" class=\"headerlink\" title=\"模拟发送消息\"></a>模拟发送消息</h3><p>消息发送，可以选定组、人进行消息发送<br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L145-L157\" target=\"_blank\" rel=\"noopener\">发送端代码</a><br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L281-L290\" target=\"_blank\" rel=\"noopener\">解析端</a></p>\n<h3 id=\"登录互斥\"><a href=\"#登录互斥\" class=\"headerlink\" title=\"登录互斥\"></a>登录互斥</h3><p>登录互斥是指，当一个账号在A电脑登录，然后再在B电脑登录，最后的登录会排斥掉开始的登录，即，将A上的挤下线<br>首先用谷歌浏览器登录，输入用户名：xiexingen，然后连接<br>接着使用360急速浏览器登录，输入用户名:xiexingen 这个时候会发现谷歌浏览器中的登录已经退出，如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190927213637.png\" alt=\"20190927213637.png\"></p>\n<blockquote>\n<p>必要条件: 不同浏览器、同一用户,比如:同一个浏览器，不同tab就不算(能共用cookie)</p>\n</blockquote>\n<h3 id=\"文件下载-指定连接推送\"><a href=\"#文件下载-指定连接推送\" class=\"headerlink\" title=\"文件下载(指定连接推送)\"></a>文件下载(指定连接推送)</h3><p>文件下载的场景，用户在操作页面上选择了上千个文件，然后点击打包下载，这个时候可能需要很久时间才反应回来，那么这段时间如果让用户一直等待显然不妥，所以，当用户点击打包下载的时候，后端启用一个后台线程去打包、压缩，然后立即返回；用户可以继续操作，当服务器端打包好后推送给用户端，用户点击下载即可。<br>此处分两种情况  </p>\n<ol>\n<li>单连接推送<br>用户开了多个tab页，在其中一个上下载文件，如果后端推送的时候，直接给该用户推，显然不妥；正确的做法一个是只给操作的那个tab页推，这就需要，调用服务器端业务api的时候，需要把当前tab页对应的连接id发送到服务器端，服务器端处理完业务后，调用推送服务器，告诉推送服务器只推我给你的这个连接的客户端，这样就能指定连接推送。</li>\n<li>单用户排除某个连接的其他连接推送<br>这种情况比较少见，告诉推送服务器，给这个用户，除了某个连接外的其他所有连接推送</li>\n</ol>\n<p>模拟操作<br>点击第一个图中的”打包下载文件” 按钮，当前页面会受到文件下载的推送<br>在点击图二中的”推送当前用户其他页面更新操作”按钮，会发现出了当前tab页外，其他tab也都收到了推送消息，如下图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190927214530.png\" alt=\"20190927214530.png\"></p>\n<p>至此，signalr相关文章算是到此结束了，下一篇谈谈个人的一点心得以及里面存着的一些问题。</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/04/dotnetcore/signalr/07-self-manager/\">.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/05/dotnetcore/signalr/09-todo/\">.net core 3.0 Signalr - 09 待改进&amp;交流</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\" target=\"_blank\" rel=\"noopener\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\" target=\"_blank\" rel=\"noopener\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 08 业务实现-客户端demo<br>","more":"<br>由于signalr作为一个单独的推送系统，跟业务系统是分离开的，所以此处模拟一个业务系统，新建一个.net core app项目</p>\n<h2 id=\"模拟实现一个登录功能\"><a href=\"#模拟实现一个登录功能\" class=\"headerlink\" title=\"模拟实现一个登录功能\"></a>模拟实现一个登录功能</h2><p>我们的登录很简单，当进入系统，如果检测到用户未登录则跳转到登录页面，用户只需要输入用户名点击登录即算登录成功  </p>\n<ul>\n<li>配置ConfigServices方法 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L41-L47\" target=\"_blank\" rel=\"noopener\">查看代码</a><pre><code class=\"C#\">services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme)\n.AddCookie(CookieAuthenticationDefaults.AuthenticationScheme, cookieOption =&gt;\n{\n    cookieOption.LoginPath = &quot;/Account/Login&quot;;\n    cookieOption.AccessDeniedPath = &quot;/Account/Login&quot;;\n});\n</code></pre>\n</li>\n<li>配置Config方法，配置认证、授权的请求管道 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L73-L74\" target=\"_blank\" rel=\"noopener\">查看代码</a><pre><code class=\"C#\">app.UseRouting();\napp.UseAuthentication();\napp.UseAuthorization();\n</code></pre>\n</li>\n<li>接收登录的post请求，写cookie，跳转 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Controllers/AccountController.cs#L33-L59\" target=\"_blank\" rel=\"noopener\">查看代码</a></li>\n</ul>\n<h2 id=\"前端页面实现\"><a href=\"#前端页面实现\" class=\"headerlink\" title=\"前端页面实现\"></a>前端页面实现</h2><p>首先在Layout页面引入需要的js文件(vue、signalr、msgpack5、signalr-protocol-msgpack)   <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Shared/_Layout.cshtml#L78-L81\" target=\"_blank\" rel=\"noopener\">查看代码</a>  </p>\n<h3 id=\"封装signalr连接相关js\"><a href=\"#封装signalr连接相关js\" class=\"headerlink\" title=\"封装signalr连接相关js\"></a>封装signalr连接相关js</h3><p>signalr客户端js的操作就是，创建连接、监听推送,封装后端js如下   <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/wwwroot/js/initSignalr.js\" target=\"_blank\" rel=\"noopener\">查看代码</a>  </p>\n<pre><code class=\"js\">/**\n * 初始化连接\n * @param {object} option 参数\n * @param {string} option.url 连接的url地址\n * @param {string} option.loggingLevel 日志级别,默认为 Error\n * @param {number} option.delay 延迟连接 默认为3000毫秒\n * @param {function} option.onStarted 启动时触发\n * @param {function} option.onLine 启动时触发\n * @param {function} option.offLine 启动时触发\n * @returns {object} 连接的实例\n */\nfunction initSignalr(option) {\n    var config = Object.assign(true, {\n        loggingLevel: signalR.LogLevel.Error,\n        delay: 3000,\n        url: &#39;&#39;\n    }, option);\n\n    var connection = new signalR.HubConnectionBuilder()\n        .configureLogging(config.loggingLevel)\n        .withUrl(config.url, {\n            accessTokenFactory: option.accessTokenFactory\n        })\n        .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol())\n        .withAutomaticReconnect([0, 2000, 5000, 10000, 20000])\n        .build();\n\n    connection.onreconnecting(function (info) {\n        console.info(&#39;----------------------------------signalr-- onreconnecting&#39;, info);\n    });\n\n    connection.onclose(function (err) {\n        console.info(&#39;--------------------------------signalr-- onclose&#39;, err);\n    });\n\n    connection.on(&#39;OnNotify&#39;, config.onNotify);\n\n    connection.on(&#39;OnLine&#39;, config.onLine);\n\n    connection.on(&#39;OffLine&#39;, config.offLine);\n\n    setTimeout(function () {\n        connection.start().then(function (data) {\n            option.onStarted &amp;&amp; option.onStarted(data);\n        }).catch(function (error) {\n            console.error(error.toString());\n        });\n    }, option.delay);\n\n    return connection;\n}\n</code></pre>\n<h3 id=\"调用封装的js初始化连接-查看代码\"><a href=\"#调用封装的js初始化连接-查看代码\" class=\"headerlink\" title=\"调用封装的js初始化连接 查看代码\"></a>调用封装的js初始化连接 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L183\" target=\"_blank\" rel=\"noopener\">查看代码</a></h3><ul>\n<li>然后在Home/Index.cshtml中引入上面的js  </li>\n<li><p>在页面加载完后，调用初始化(案例中使用了vue)<br>在进入页面后会弹窗让用户输入加入的组，可以不输入也可以多个 </p>\n<pre><code class=\"js\">function initConnect() {\n  $(&quot;#collectionUserInfo&quot;).modal({\n      keyboard: false,\n      show: true,\n      backdrop: &#39;static&#39;\n  })\n\n  $(&#39;#collectionUserInfo&#39;).on(&#39;hidden.bs.modal&#39;, function () {\n      var groups = $(&quot;#groups&quot;).val()||&#39;&#39;;\n      connect=initSignalr({\n          delay: 0,\n          url:`${notifyUrl}notify-hub?userId=${vm.userInfo.userName}&amp;group=${groups}`,\n          loggingLevel: signalR.LogLevel.Error,\n          onNotify: dealNotify,\n          onLine: function (data) {\n              if (data.IsFirst) {\n                  getOnlineUsers();\n              }\n              getOnlineGroups();\n              vm.logs.push(`新连接上线：${JSON.stringify(data)}`);\n          },\n          offLine: function (data) {\n              if (data.IsLast) {\n                  getOnlineUsers();\n              }\n              getOnlineGroups();\n              vm.logs.push(`连接下线：${JSON.stringify(data)}`);\n          },\n          onStarted: function () {\n              getOnlineUsers();\n              getOnlineGroups();\n              vm.$set(vm.userInfo, &#39;connectionId&#39;, connect.connectionId);\n              vm.$set(vm.userInfo, &#39;groups&#39;, groups);\n              vm.logs.push(&#39;连接成功&#39;);\n          }\n      });\n  })\n  }\n</code></pre>\n<p>onNotify方法，如果仔细的话会看到里面的onNotify方法，所有的推送最终都会调用到该方法来进行分发。<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L200\" target=\"_blank\" rel=\"noopener\">查看代码</a><br>offLine，当有客户端下线的时候会触发，data里面包含有用户Id、连接Id、是否该用户的最后一个连接,可根据需要使用<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L201-L207\" target=\"_blank\" rel=\"noopener\">查看代码</a><br>onLine,当用户连接的时候会触发，data里面包含有用户Id、连接Id、是否该用户的第一个连接(用于用户上线后的逻辑处理)，可根据需要使用  <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L208-L214\" target=\"_blank\" rel=\"noopener\">查看代码</a><br>onStarted，当成功连接后触发，可用于做一些连接后的业务逻辑处理，可根据需要使用 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L215-L221\" target=\"_blank\" rel=\"noopener\">查看代码</a>  </p>\n</li>\n</ul>\n<h3 id=\"获取当前用户信息、在线列表\"><a href=\"#获取当前用户信息、在线列表\" class=\"headerlink\" title=\"获取当前用户信息、在线列表\"></a>获取当前用户信息、在线列表</h3><p>在用户连接成功后，获取当前在线用户、用户组、当前用户信息,并设置到vue的data中 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L216-L217\" target=\"_blank\" rel=\"noopener\">查看代码</a>  </p>\n<h3 id=\"模拟一个任务分配\"><a href=\"#模拟一个任务分配\" class=\"headerlink\" title=\"模拟一个任务分配\"></a>模拟一个任务分配</h3><p>在项目中心中，点击”模拟推送待办”按钮，将会向当前用户所在组中推送一条代码消息，可以登录不同账号、开多个tab页体验<br>点击事件代码位置 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L132-L141\" target=\"_blank\" rel=\"noopener\">查看代码</a> </p>\n<pre><code class=\"js\">assignTaskToUser: function () {\n    var that = this;\n    $.ajax({\n        type: &#39;POST&#39;,\n        url: &#39;/api/ServerProxy/AssignTaskToUser&#39;,\n        data: {\n            groups:that.userInfo.groups\n        }\n    })\n},\n</code></pre>\n<p>对应的推送解析代码 </p>\n<blockquote>\n<p>首先当有推送过来的时候，会首先进到onNotify方法，然后根据不同类型在分配到不同的js方法中<br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L268-L279\" target=\"_blank\" rel=\"noopener\">查看代码</a><br>效果图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190927212304.png\" alt=\"20190927212304.png\"></p>\n</blockquote>\n<h3 id=\"模拟发送消息\"><a href=\"#模拟发送消息\" class=\"headerlink\" title=\"模拟发送消息\"></a>模拟发送消息</h3><p>消息发送，可以选定组、人进行消息发送<br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L145-L157\" target=\"_blank\" rel=\"noopener\">发送端代码</a><br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L281-L290\" target=\"_blank\" rel=\"noopener\">解析端</a></p>\n<h3 id=\"登录互斥\"><a href=\"#登录互斥\" class=\"headerlink\" title=\"登录互斥\"></a>登录互斥</h3><p>登录互斥是指，当一个账号在A电脑登录，然后再在B电脑登录，最后的登录会排斥掉开始的登录，即，将A上的挤下线<br>首先用谷歌浏览器登录，输入用户名：xiexingen，然后连接<br>接着使用360急速浏览器登录，输入用户名:xiexingen 这个时候会发现谷歌浏览器中的登录已经退出，如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190927213637.png\" alt=\"20190927213637.png\"></p>\n<blockquote>\n<p>必要条件: 不同浏览器、同一用户,比如:同一个浏览器，不同tab就不算(能共用cookie)</p>\n</blockquote>\n<h3 id=\"文件下载-指定连接推送\"><a href=\"#文件下载-指定连接推送\" class=\"headerlink\" title=\"文件下载(指定连接推送)\"></a>文件下载(指定连接推送)</h3><p>文件下载的场景，用户在操作页面上选择了上千个文件，然后点击打包下载，这个时候可能需要很久时间才反应回来，那么这段时间如果让用户一直等待显然不妥，所以，当用户点击打包下载的时候，后端启用一个后台线程去打包、压缩，然后立即返回；用户可以继续操作，当服务器端打包好后推送给用户端，用户点击下载即可。<br>此处分两种情况  </p>\n<ol>\n<li>单连接推送<br>用户开了多个tab页，在其中一个上下载文件，如果后端推送的时候，直接给该用户推，显然不妥；正确的做法一个是只给操作的那个tab页推，这就需要，调用服务器端业务api的时候，需要把当前tab页对应的连接id发送到服务器端，服务器端处理完业务后，调用推送服务器，告诉推送服务器只推我给你的这个连接的客户端，这样就能指定连接推送。</li>\n<li>单用户排除某个连接的其他连接推送<br>这种情况比较少见，告诉推送服务器，给这个用户，除了某个连接外的其他所有连接推送</li>\n</ol>\n<p>模拟操作<br>点击第一个图中的”打包下载文件” 按钮，当前页面会受到文件下载的推送<br>在点击图二中的”推送当前用户其他页面更新操作”按钮，会发现出了当前tab页外，其他tab也都收到了推送消息，如下图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190927214530.png\" alt=\"20190927214530.png\"></p>\n<p>至此，signalr相关文章算是到此结束了，下一篇谈谈个人的一点心得以及里面存着的一些问题。</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/04/dotnetcore/signalr/07-self-manager/\">.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/05/dotnetcore/signalr/09-todo/\">.net core 3.0 Signalr - 09 待改进&amp;交流</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\" target=\"_blank\" rel=\"noopener\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\" target=\"_blank\" rel=\"noopener\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>"},{"title":".net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接","date":"2019-10-04T12:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接\n<!-- more -->\n## Hub的管理\n- 重写OnConnectedAsync\n从连接信息中获取UserId、Groups,ConnectId，并实现这三者的关系，存放于redis中\n[代码请查看](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Server/Hubs/NotifyHub.cs)\n  ``` C#\n  using CTS.Signalr.Server.Cores;\n  using CTS.Signalr.Server.Dtos;\n  using Microsoft.AspNetCore.Authorization;\n  using Microsoft.AspNetCore.SignalR;\n  using Microsoft.Extensions.Logging;\n  using System;\n  using System.Linq;\n  using System.Threading.Tasks;\n\n  namespace CTS.Signalr.Server.Hubs\n  {\n      /// <summary>\n      /// 服务端接口\n      /// </summary>\n      public interface IServerNotifyHub\n      {\n\n      }\n\n      /// <summary>\n      /// 客户端使用的接口\n      /// </summary>\n      public interface IClientNotifyHub\n      {\n          Task OnNotify(object data);\n\n          Task OnLine(object data);\n\n          Task OffLine(object data);\n      }\n\n\n      [Authorize]\n      public class NotifyHub : Hub<IClientNotifyHub>,IServerNotifyHub\n      {\n          private readonly SignalrRedisHelper _signalrRedisHelper;\n          private readonly ILogger _logger;\n\n          public NotifyHub(SignalrRedisHelper signalrRedisHelper, ILogger<NotifyHub> logger)\n          {\n              _signalrRedisHelper = signalrRedisHelper;\n              _logger = logger;\n          }\n\n          public override async Task OnConnectedAsync()\n          {\n              //await Clients.All.OnNotify(new { UserId= Context.User.Identity.Name, Name=Context.User.Identity.Name, ConnectId = Context.ConnectionId });\n              var userId= Context.User.Identity.Name;\n              var groups=Context.GetHttpContext().Request.Query[\"group\"].FirstOrDefault();\n              _logger.LogDebug($\"OnConnectedAsync----userId:{userId},groups:{groups},connectionId:{ Context.ConnectionId}\");\n              if (!string.IsNullOrWhiteSpace(userId))\n              {\n                  await _signalrRedisHelper.AddConnectForUserAsync(userId, Context.ConnectionId);\n                  await JoinToGroup(userId, Context.ConnectionId, groups?.Split(','));\n                  await DealOnLineNotify(userId, Context.ConnectionId);\n              }\n              await base.OnConnectedAsync();\n          }\n\n          public override async Task OnDisconnectedAsync(Exception exception)\n          {\n              var userId = Context.User.Identity.Name;\n              var groups = Context.GetHttpContext().Request.Query[\"group\"].FirstOrDefault();\n              _logger.LogDebug($\"OnDisconnectedAsync----userId:{userId},groups:{groups},connectionId:{ Context.ConnectionId}\");\n              if (!string.IsNullOrWhiteSpace(userId))\n              {\n                  await _signalrRedisHelper.RemoveConnectForUserAsync(userId, Context.ConnectionId);\n                  await DealOffLineNotify(userId,Context.ConnectionId);\n              }\n              await LeaveFromGroup(Context.ConnectionId, groups?.Split(','));\n              await base.OnDisconnectedAsync(exception);\n          }\n\n          /// <summary>\n          /// 加入组\n          /// </summary>\n          /// <param name=\"groupName\"></param>\n          /// <returns></returns>\n          private async Task JoinToGroup(string userId,string connectionId,params string[] groups)\n          {\n              if (!string.IsNullOrWhiteSpace(userId)&& groups!=null&&groups.Length>0)\n              {\n                  foreach (var group in groups)\n                  {\n                      await Groups.AddToGroupAsync(connectionId, group);\n                      await _signalrRedisHelper.AddUserForGroupAsync(group, connectionId, userId);\n\n                      // await Clients.Group(group).OnJoinGroup(new { ConnectId = connectionId, UserId = userId, GroupName = group });\n                  }\n              }\n          }\n\n          /// <summary>\n          /// 从组中移除\n          /// </summary>\n          /// <param name=\"groupName\"></param>\n          /// <returns></returns>\n          private async Task LeaveFromGroup(string connectionId,params string[] groups)\n          {\n              if (groups != null && groups.Length > 0)\n              {\n                  foreach (var group in groups)\n                  {\n                      await Groups.RemoveFromGroupAsync(connectionId, group);\n                      await _signalrRedisHelper.RemoveConnectFromGroupAsync(group,connectionId);\n                      // await Clients.Group(group).OnLeaveGroup(new { ConnectId = connectionId, GroupName = group });\n                  }\n              }\n          }\n\n          /// <summary>\n          /// 处理上线通知(只有用户第一个连接才通知)\n          /// </summary>\n          /// <param name=\"userId\"></param>\n          /// <param name=\"connectionId\"></param>\n          /// <returns></returns>\n          private async Task DealOnLineNotify(string userId,string connectionId) \n          {\n              var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n              await Clients.All.OnLine(new OnLineData()\n              {\n                  UserId = userId,\n                  ConnectionId = connectionId,\n                  IsFirst = userConnectCount == 1\n              });\n          }\n\n          /// <summary>\n          /// 处理下线通知(只有当用户一个连接都没了 才算下线)\n          /// </summary>\n          /// <param name=\"userId\"></param>\n          /// <param name=\"connectionId\"></param>\n          /// <returns></returns>\n          private async Task DealOffLineNotify(string userId,string connectionId)\n          {\n              var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n              await Clients.All.OffLine(new OffLineData()\n              {\n                  UserId = userId,\n                  ConnectionId = connectionId,\n                  IsLast = userConnectCount == 0\n              });\n          }\n      }\n  }\n\n  ```\n\n## 提供给业务系统调用的API\n- [POST] api/notify/post \napplication/json形式 提交，数据格式如下\n  ``` json\n  {\n    GroupIds:'', // [可空] 组id集合，多个用,隔开\n    UserIds:'',// [可空] 用户id集合，多个用,隔开\n    ExcludeUsers:boolean, // 是否排除用户列表中的用户\n    NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n  }\n  ```\n  * 有GroupIds\n    * ExcludeUsers=true\n      推送给指定的组中所有用户(排除掉UserIds部分)\n\n    * ExcludeUsers=false\n      推送给组中指定(UserIds中指定的)的这些用户\n\n  * 无GroupIds\n    * ExcludeUsers=true\n      推送给当前所有连接(排除掉UserIds部分的用户)\n\n    * ExcludeUsers=false\n      推送给指定用户(UserIds中指定的用户)\n\n- [POST] api/notify/postConnects  \napplication/json提交，数据格式如下\n  ``` json\n  {\n    Connects:'', // 连接Id集合，多个用，隔开\n    NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n  }\n  ```\n  * 有UserId\n    * ExcludeConnectId=true\n      给改用户除指定的ConnectId外的所有连接端推送\n    * ExcludeConnectId=false\n      跟没指定UserId一致\n  * 无UserId\n    给指定连接Id推送\n\n- [GET] api/users  \n获取在线用户Id列表\n\n- [GET] api/groups \n获取在线组列表\n\n\n## 增加日志记录\n为了方便分析和定位问题，使用log4net来作为日志记录器。\n- nuget 安装log4net\nnuget 搜索 log4net，安装\n- Config中配置  \n在Config中注入ILoggerFactory，然后使用添加Log4Net,代码如下所示\n``` C#\npublic void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)\n{\n    if (env.IsDevelopment())\n    {\n        app.UseDeveloperExceptionPage();\n    }\n    app.UseHsts();\n\n    loggerFactory.AddLog4Net();\n    ...\n}\n```\n- 添加log4net配置文件  \n更多配置请自行查找log4net官方配置文档\n``` xml\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<!--LOG4日志级别 \n    0：TRACE；记录一些对程序员调试问题有帮助的信息, 其中可能包含一些敏感信息, 所以应该避免在生产环境中启用Trace日志。\n    1：DEBUG；记录一些在开发和调试阶段有用的短时变量(Short-term usefulness), 所以除非为了临时排除生产环境的故障，开发人员应该尽量避免在生产环境中启用Debug日志。\n    2：INFO；信息日志，记录应用程序的一些流程, 例如，记录当前api请求的url，请求参数等。\n    3：WARN；警告日志；记录应用程序中发生的不正常或者未预期的事件信息。这些信息中可能包含错误消息或者错误产生的条件, 例如, 文件未找到，用户不存在。\n    4：ERROR；错误日志；记录应用程序中某个操作产生的错误和异常信息，如对空值进行操作等。\n    5：FATAL；毁灭性错误；记录一些需要立刻修复的问题。例如数据丢失，磁盘空间不足。\ntrace<debug<info<warn<error<fatal -->\n<log4net>\n  <appender name=\"ErrorRollingFileAppender\" type=\"log4net.Appender.RollingFileAppender\">\n    <file value=\"AppData\\\\logs\\\\\" />\n    <appendToFile value=\"true\" />\n    <rollingStyle value=\"Date\"/>\n    <datePattern value=\"yyyy-MM-dd-'error.log'\"/>\n    <maxSizeRollBackups value=\"100\" />\n    <staticLogFileName value=\"false\" />\n    <encoding value=\"utf-8\" />\n    <layout type=\"log4net.Layout.PatternLayout\">\n      <conversionPattern value=\"%-5level %date [%-5.5thread] %-40.40logger - %message%newline\" />\n    </layout>\n    <filter type=\"log4net.Filter.LevelRangeFilter\">\n      <levelMin value=\"ERROR\" />\n      <levelMax value=\"FATAL\" />\n    </filter>\n  </appender>\n\n  <root>\n    <level value=\"All\" />\n    <appender-ref ref=\"ErrorRollingFileAppender\" />\n  </root>\n</log4net>\n```\n至此，log4net配置完毕\n\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |  [.net core 3.0 Signalr - 06 业务实现-业务分析](/2019/10/03/dotnetcore/signalr/06-analysis/) \n|   下一篇  |   [.net core 3.0 Signalr - 08 业务实现-客户端demo](/2019/10/05/dotnetcore/signalr/08-clientdemo/)  \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/07-self-manager.md","raw":"---\ntitle: .net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接\ndate: '2019-10-04 20:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接\n<!-- more -->\n## Hub的管理\n- 重写OnConnectedAsync\n从连接信息中获取UserId、Groups,ConnectId，并实现这三者的关系，存放于redis中\n[代码请查看](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Server/Hubs/NotifyHub.cs)\n  ``` C#\n  using CTS.Signalr.Server.Cores;\n  using CTS.Signalr.Server.Dtos;\n  using Microsoft.AspNetCore.Authorization;\n  using Microsoft.AspNetCore.SignalR;\n  using Microsoft.Extensions.Logging;\n  using System;\n  using System.Linq;\n  using System.Threading.Tasks;\n\n  namespace CTS.Signalr.Server.Hubs\n  {\n      /// <summary>\n      /// 服务端接口\n      /// </summary>\n      public interface IServerNotifyHub\n      {\n\n      }\n\n      /// <summary>\n      /// 客户端使用的接口\n      /// </summary>\n      public interface IClientNotifyHub\n      {\n          Task OnNotify(object data);\n\n          Task OnLine(object data);\n\n          Task OffLine(object data);\n      }\n\n\n      [Authorize]\n      public class NotifyHub : Hub<IClientNotifyHub>,IServerNotifyHub\n      {\n          private readonly SignalrRedisHelper _signalrRedisHelper;\n          private readonly ILogger _logger;\n\n          public NotifyHub(SignalrRedisHelper signalrRedisHelper, ILogger<NotifyHub> logger)\n          {\n              _signalrRedisHelper = signalrRedisHelper;\n              _logger = logger;\n          }\n\n          public override async Task OnConnectedAsync()\n          {\n              //await Clients.All.OnNotify(new { UserId= Context.User.Identity.Name, Name=Context.User.Identity.Name, ConnectId = Context.ConnectionId });\n              var userId= Context.User.Identity.Name;\n              var groups=Context.GetHttpContext().Request.Query[\"group\"].FirstOrDefault();\n              _logger.LogDebug($\"OnConnectedAsync----userId:{userId},groups:{groups},connectionId:{ Context.ConnectionId}\");\n              if (!string.IsNullOrWhiteSpace(userId))\n              {\n                  await _signalrRedisHelper.AddConnectForUserAsync(userId, Context.ConnectionId);\n                  await JoinToGroup(userId, Context.ConnectionId, groups?.Split(','));\n                  await DealOnLineNotify(userId, Context.ConnectionId);\n              }\n              await base.OnConnectedAsync();\n          }\n\n          public override async Task OnDisconnectedAsync(Exception exception)\n          {\n              var userId = Context.User.Identity.Name;\n              var groups = Context.GetHttpContext().Request.Query[\"group\"].FirstOrDefault();\n              _logger.LogDebug($\"OnDisconnectedAsync----userId:{userId},groups:{groups},connectionId:{ Context.ConnectionId}\");\n              if (!string.IsNullOrWhiteSpace(userId))\n              {\n                  await _signalrRedisHelper.RemoveConnectForUserAsync(userId, Context.ConnectionId);\n                  await DealOffLineNotify(userId,Context.ConnectionId);\n              }\n              await LeaveFromGroup(Context.ConnectionId, groups?.Split(','));\n              await base.OnDisconnectedAsync(exception);\n          }\n\n          /// <summary>\n          /// 加入组\n          /// </summary>\n          /// <param name=\"groupName\"></param>\n          /// <returns></returns>\n          private async Task JoinToGroup(string userId,string connectionId,params string[] groups)\n          {\n              if (!string.IsNullOrWhiteSpace(userId)&& groups!=null&&groups.Length>0)\n              {\n                  foreach (var group in groups)\n                  {\n                      await Groups.AddToGroupAsync(connectionId, group);\n                      await _signalrRedisHelper.AddUserForGroupAsync(group, connectionId, userId);\n\n                      // await Clients.Group(group).OnJoinGroup(new { ConnectId = connectionId, UserId = userId, GroupName = group });\n                  }\n              }\n          }\n\n          /// <summary>\n          /// 从组中移除\n          /// </summary>\n          /// <param name=\"groupName\"></param>\n          /// <returns></returns>\n          private async Task LeaveFromGroup(string connectionId,params string[] groups)\n          {\n              if (groups != null && groups.Length > 0)\n              {\n                  foreach (var group in groups)\n                  {\n                      await Groups.RemoveFromGroupAsync(connectionId, group);\n                      await _signalrRedisHelper.RemoveConnectFromGroupAsync(group,connectionId);\n                      // await Clients.Group(group).OnLeaveGroup(new { ConnectId = connectionId, GroupName = group });\n                  }\n              }\n          }\n\n          /// <summary>\n          /// 处理上线通知(只有用户第一个连接才通知)\n          /// </summary>\n          /// <param name=\"userId\"></param>\n          /// <param name=\"connectionId\"></param>\n          /// <returns></returns>\n          private async Task DealOnLineNotify(string userId,string connectionId) \n          {\n              var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n              await Clients.All.OnLine(new OnLineData()\n              {\n                  UserId = userId,\n                  ConnectionId = connectionId,\n                  IsFirst = userConnectCount == 1\n              });\n          }\n\n          /// <summary>\n          /// 处理下线通知(只有当用户一个连接都没了 才算下线)\n          /// </summary>\n          /// <param name=\"userId\"></param>\n          /// <param name=\"connectionId\"></param>\n          /// <returns></returns>\n          private async Task DealOffLineNotify(string userId,string connectionId)\n          {\n              var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n              await Clients.All.OffLine(new OffLineData()\n              {\n                  UserId = userId,\n                  ConnectionId = connectionId,\n                  IsLast = userConnectCount == 0\n              });\n          }\n      }\n  }\n\n  ```\n\n## 提供给业务系统调用的API\n- [POST] api/notify/post \napplication/json形式 提交，数据格式如下\n  ``` json\n  {\n    GroupIds:'', // [可空] 组id集合，多个用,隔开\n    UserIds:'',// [可空] 用户id集合，多个用,隔开\n    ExcludeUsers:boolean, // 是否排除用户列表中的用户\n    NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n  }\n  ```\n  * 有GroupIds\n    * ExcludeUsers=true\n      推送给指定的组中所有用户(排除掉UserIds部分)\n\n    * ExcludeUsers=false\n      推送给组中指定(UserIds中指定的)的这些用户\n\n  * 无GroupIds\n    * ExcludeUsers=true\n      推送给当前所有连接(排除掉UserIds部分的用户)\n\n    * ExcludeUsers=false\n      推送给指定用户(UserIds中指定的用户)\n\n- [POST] api/notify/postConnects  \napplication/json提交，数据格式如下\n  ``` json\n  {\n    Connects:'', // 连接Id集合，多个用，隔开\n    NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n  }\n  ```\n  * 有UserId\n    * ExcludeConnectId=true\n      给改用户除指定的ConnectId外的所有连接端推送\n    * ExcludeConnectId=false\n      跟没指定UserId一致\n  * 无UserId\n    给指定连接Id推送\n\n- [GET] api/users  \n获取在线用户Id列表\n\n- [GET] api/groups \n获取在线组列表\n\n\n## 增加日志记录\n为了方便分析和定位问题，使用log4net来作为日志记录器。\n- nuget 安装log4net\nnuget 搜索 log4net，安装\n- Config中配置  \n在Config中注入ILoggerFactory，然后使用添加Log4Net,代码如下所示\n``` C#\npublic void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)\n{\n    if (env.IsDevelopment())\n    {\n        app.UseDeveloperExceptionPage();\n    }\n    app.UseHsts();\n\n    loggerFactory.AddLog4Net();\n    ...\n}\n```\n- 添加log4net配置文件  \n更多配置请自行查找log4net官方配置文档\n``` xml\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<!--LOG4日志级别 \n    0：TRACE；记录一些对程序员调试问题有帮助的信息, 其中可能包含一些敏感信息, 所以应该避免在生产环境中启用Trace日志。\n    1：DEBUG；记录一些在开发和调试阶段有用的短时变量(Short-term usefulness), 所以除非为了临时排除生产环境的故障，开发人员应该尽量避免在生产环境中启用Debug日志。\n    2：INFO；信息日志，记录应用程序的一些流程, 例如，记录当前api请求的url，请求参数等。\n    3：WARN；警告日志；记录应用程序中发生的不正常或者未预期的事件信息。这些信息中可能包含错误消息或者错误产生的条件, 例如, 文件未找到，用户不存在。\n    4：ERROR；错误日志；记录应用程序中某个操作产生的错误和异常信息，如对空值进行操作等。\n    5：FATAL；毁灭性错误；记录一些需要立刻修复的问题。例如数据丢失，磁盘空间不足。\ntrace<debug<info<warn<error<fatal -->\n<log4net>\n  <appender name=\"ErrorRollingFileAppender\" type=\"log4net.Appender.RollingFileAppender\">\n    <file value=\"AppData\\\\logs\\\\\" />\n    <appendToFile value=\"true\" />\n    <rollingStyle value=\"Date\"/>\n    <datePattern value=\"yyyy-MM-dd-'error.log'\"/>\n    <maxSizeRollBackups value=\"100\" />\n    <staticLogFileName value=\"false\" />\n    <encoding value=\"utf-8\" />\n    <layout type=\"log4net.Layout.PatternLayout\">\n      <conversionPattern value=\"%-5level %date [%-5.5thread] %-40.40logger - %message%newline\" />\n    </layout>\n    <filter type=\"log4net.Filter.LevelRangeFilter\">\n      <levelMin value=\"ERROR\" />\n      <levelMax value=\"FATAL\" />\n    </filter>\n  </appender>\n\n  <root>\n    <level value=\"All\" />\n    <appender-ref ref=\"ErrorRollingFileAppender\" />\n  </root>\n</log4net>\n```\n至此，log4net配置完毕\n\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |  [.net core 3.0 Signalr - 06 业务实现-业务分析](/2019/10/03/dotnetcore/signalr/06-analysis/) \n|   下一篇  |   [.net core 3.0 Signalr - 08 业务实现-客户端demo](/2019/10/05/dotnetcore/signalr/08-clientdemo/)  \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/07-self-manager","published":1,"updated":"2019-09-27T14:24:24.792Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck1dks9ql000rt0scb5fp6050","content":"<p>.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接<br><a id=\"more\"></a></p>\n<h2 id=\"Hub的管理\"><a href=\"#Hub的管理\" class=\"headerlink\" title=\"Hub的管理\"></a>Hub的管理</h2><ul>\n<li><p>重写OnConnectedAsync<br>从连接信息中获取UserId、Groups,ConnectId，并实现这三者的关系，存放于redis中<br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Server/Hubs/NotifyHub.cs\" target=\"_blank\" rel=\"noopener\">代码请查看</a><br><code>`</code> C#<br>using CTS.Signalr.Server.Cores;<br>using CTS.Signalr.Server.Dtos;<br>using Microsoft.AspNetCore.Authorization;<br>using Microsoft.AspNetCore.SignalR;<br>using Microsoft.Extensions.Logging;<br>using System;<br>using System.Linq;<br>using System.Threading.Tasks;</p>\n<p>namespace CTS.Signalr.Server.Hubs<br>{</p>\n<pre><code>/// &lt;summary&gt;\n/// 服务端接口\n/// &lt;/summary&gt;\npublic interface IServerNotifyHub\n{\n\n}\n\n/// &lt;summary&gt;\n/// 客户端使用的接口\n/// &lt;/summary&gt;\npublic interface IClientNotifyHub\n{\n    Task OnNotify(object data);\n\n    Task OnLine(object data);\n\n    Task OffLine(object data);\n}\n</code></pre></li>\n</ul>\n<pre><code>  [Authorize]\n  public class NotifyHub : Hub&lt;IClientNotifyHub&gt;,IServerNotifyHub\n  {\n      private readonly SignalrRedisHelper _signalrRedisHelper;\n      private readonly ILogger _logger;\n\n      public NotifyHub(SignalrRedisHelper signalrRedisHelper, ILogger&lt;NotifyHub&gt; logger)\n      {\n          _signalrRedisHelper = signalrRedisHelper;\n          _logger = logger;\n      }\n\n      public override async Task OnConnectedAsync()\n      {\n          //await Clients.All.OnNotify(new { UserId= Context.User.Identity.Name, Name=Context.User.Identity.Name, ConnectId = Context.ConnectionId });\n          var userId= Context.User.Identity.Name;\n          var groups=Context.GetHttpContext().Request.Query[&quot;group&quot;].FirstOrDefault();\n          _logger.LogDebug($&quot;OnConnectedAsync----userId:{userId},groups:{groups},connectionId:{ Context.ConnectionId}&quot;);\n          if (!string.IsNullOrWhiteSpace(userId))\n          {\n              await _signalrRedisHelper.AddConnectForUserAsync(userId, Context.ConnectionId);\n              await JoinToGroup(userId, Context.ConnectionId, groups?.Split(&#39;,&#39;));\n              await DealOnLineNotify(userId, Context.ConnectionId);\n          }\n          await base.OnConnectedAsync();\n      }\n\n      public override async Task OnDisconnectedAsync(Exception exception)\n      {\n          var userId = Context.User.Identity.Name;\n          var groups = Context.GetHttpContext().Request.Query[&quot;group&quot;].FirstOrDefault();\n          _logger.LogDebug($&quot;OnDisconnectedAsync----userId:{userId},groups:{groups},connectionId:{ Context.ConnectionId}&quot;);\n          if (!string.IsNullOrWhiteSpace(userId))\n          {\n              await _signalrRedisHelper.RemoveConnectForUserAsync(userId, Context.ConnectionId);\n              await DealOffLineNotify(userId,Context.ConnectionId);\n          }\n          await LeaveFromGroup(Context.ConnectionId, groups?.Split(&#39;,&#39;));\n          await base.OnDisconnectedAsync(exception);\n      }\n\n      /// &lt;summary&gt;\n      /// 加入组\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;groupName&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task JoinToGroup(string userId,string connectionId,params string[] groups)\n      {\n          if (!string.IsNullOrWhiteSpace(userId)&amp;&amp; groups!=null&amp;&amp;groups.Length&gt;0)\n          {\n              foreach (var group in groups)\n              {\n                  await Groups.AddToGroupAsync(connectionId, group);\n                  await _signalrRedisHelper.AddUserForGroupAsync(group, connectionId, userId);\n\n                  // await Clients.Group(group).OnJoinGroup(new { ConnectId = connectionId, UserId = userId, GroupName = group });\n              }\n          }\n      }\n\n      /// &lt;summary&gt;\n      /// 从组中移除\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;groupName&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task LeaveFromGroup(string connectionId,params string[] groups)\n      {\n          if (groups != null &amp;&amp; groups.Length &gt; 0)\n          {\n              foreach (var group in groups)\n              {\n                  await Groups.RemoveFromGroupAsync(connectionId, group);\n                  await _signalrRedisHelper.RemoveConnectFromGroupAsync(group,connectionId);\n                  // await Clients.Group(group).OnLeaveGroup(new { ConnectId = connectionId, GroupName = group });\n              }\n          }\n      }\n\n      /// &lt;summary&gt;\n      /// 处理上线通知(只有用户第一个连接才通知)\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;userId&quot;&gt;&lt;/param&gt;\n      /// &lt;param name=&quot;connectionId&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task DealOnLineNotify(string userId,string connectionId) \n      {\n          var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n          await Clients.All.OnLine(new OnLineData()\n          {\n              UserId = userId,\n              ConnectionId = connectionId,\n              IsFirst = userConnectCount == 1\n          });\n      }\n\n      /// &lt;summary&gt;\n      /// 处理下线通知(只有当用户一个连接都没了 才算下线)\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;userId&quot;&gt;&lt;/param&gt;\n      /// &lt;param name=&quot;connectionId&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task DealOffLineNotify(string userId,string connectionId)\n      {\n          var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n          await Clients.All.OffLine(new OffLineData()\n          {\n              UserId = userId,\n              ConnectionId = connectionId,\n              IsLast = userConnectCount == 0\n          });\n      }\n  }\n</code></pre><p>  }</p>\n<pre><code>\n## 提供给业务系统调用的API\n- [POST] api/notify/post \napplication/json形式 提交，数据格式如下\n  ``` json\n  {\n    GroupIds:&#39;&#39;, // [可空] 组id集合，多个用,隔开\n    UserIds:&#39;&#39;,// [可空] 用户id集合，多个用,隔开\n    ExcludeUsers:boolean, // 是否排除用户列表中的用户\n    NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n  }\n</code></pre><ul>\n<li><p>有GroupIds</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给指定的组中所有用户(排除掉UserIds部分)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给组中指定(UserIds中指定的)的这些用户</p>\n</li>\n</ul>\n</li>\n<li><p>无GroupIds</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给当前所有连接(排除掉UserIds部分的用户)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给指定用户(UserIds中指定的用户)</p>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>[POST] api/notify/postConnects<br>application/json提交，数据格式如下</p>\n<pre class=\" language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  Connects<span class=\"token operator\">:</span>''<span class=\"token punctuation\">,</span> // 连接Id集合，多个用，隔开\n  NotifyObj<span class=\"token operator\">:</span>Object // 通知的对象，任意类型(总大小不要超过36k<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<ul>\n<li>有UserId<ul>\n<li>ExcludeConnectId=true<br>给改用户除指定的ConnectId外的所有连接端推送</li>\n<li>ExcludeConnectId=false<br>跟没指定UserId一致</li>\n</ul>\n</li>\n<li>无UserId<br>给指定连接Id推送</li>\n</ul>\n</li>\n<li><p>[GET] api/users<br>获取在线用户Id列表</p>\n</li>\n<li><p>[GET] api/groups<br>获取在线组列表</p>\n</li>\n</ul>\n<h2 id=\"增加日志记录\"><a href=\"#增加日志记录\" class=\"headerlink\" title=\"增加日志记录\"></a>增加日志记录</h2><p>为了方便分析和定位问题，使用log4net来作为日志记录器。</p>\n<ul>\n<li>nuget 安装log4net<br>nuget 搜索 log4net，安装</li>\n<li><p>Config中配置<br>在Config中注入ILoggerFactory，然后使用添加Log4Net,代码如下所示</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)\n{\n  if (env.IsDevelopment())\n  {\n      app.UseDeveloperExceptionPage();\n  }\n  app.UseHsts();\n\n  loggerFactory.AddLog4Net();\n  ...\n}\n</code></pre>\n</li>\n<li><p>添加log4net配置文件<br>更多配置请自行查找log4net官方配置文档</p>\n<pre class=\" language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?></span>\n<span class=\"token comment\" spellcheck=\"true\">&lt;!--LOG4日志级别 \n  0：TRACE；记录一些对程序员调试问题有帮助的信息, 其中可能包含一些敏感信息, 所以应该避免在生产环境中启用Trace日志。\n  1：DEBUG；记录一些在开发和调试阶段有用的短时变量(Short-term usefulness), 所以除非为了临时排除生产环境的故障，开发人员应该尽量避免在生产环境中启用Debug日志。\n  2：INFO；信息日志，记录应用程序的一些流程, 例如，记录当前api请求的url，请求参数等。\n  3：WARN；警告日志；记录应用程序中发生的不正常或者未预期的事件信息。这些信息中可能包含错误消息或者错误产生的条件, 例如, 文件未找到，用户不存在。\n  4：ERROR；错误日志；记录应用程序中某个操作产生的错误和异常信息，如对空值进行操作等。\n  5：FATAL；毁灭性错误；记录一些需要立刻修复的问题。例如数据丢失，磁盘空间不足。\ntrace&lt;debug&lt;info&lt;warn&lt;error&lt;fatal --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>log4net</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ErrorRollingFileAppender<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>log4net.Appender.RollingFileAppender<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>file</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>AppData\\\\logs\\\\<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appendToFile</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rollingStyle</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Date<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>datePattern</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>yyyy-MM-dd-<span class=\"token punctuation\">'</span>error.log<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maxSizeRollBackups</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>staticLogFileName</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>layout</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>log4net.Layout.PatternLayout<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>conversionPattern</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>%-5level %date [%-5.5thread] %-40.40logger - %message%newline<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>layout</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>filter</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>log4net.Filter.LevelRangeFilter<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>levelMin</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ERROR<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>levelMax</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>FATAL<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>filter</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>appender</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>root</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>level</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>All<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender-ref</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ErrorRollingFileAppender<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>root</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>log4net</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n<p>至此，log4net配置完毕</p>\n</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/03/dotnetcore/signalr/06-analysis/\">.net core 3.0 Signalr - 06 业务实现-业务分析</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/05/dotnetcore/signalr/08-clientdemo/\">.net core 3.0 Signalr - 08 业务实现-客户端demo</a>  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\" target=\"_blank\" rel=\"noopener\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\" target=\"_blank\" rel=\"noopener\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接<br>","more":"</p>\n<h2 id=\"Hub的管理\"><a href=\"#Hub的管理\" class=\"headerlink\" title=\"Hub的管理\"></a>Hub的管理</h2><ul>\n<li><p>重写OnConnectedAsync<br>从连接信息中获取UserId、Groups,ConnectId，并实现这三者的关系，存放于redis中<br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Server/Hubs/NotifyHub.cs\" target=\"_blank\" rel=\"noopener\">代码请查看</a><br><code>`</code> C#<br>using CTS.Signalr.Server.Cores;<br>using CTS.Signalr.Server.Dtos;<br>using Microsoft.AspNetCore.Authorization;<br>using Microsoft.AspNetCore.SignalR;<br>using Microsoft.Extensions.Logging;<br>using System;<br>using System.Linq;<br>using System.Threading.Tasks;</p>\n<p>namespace CTS.Signalr.Server.Hubs<br>{</p>\n<pre><code>/// &lt;summary&gt;\n/// 服务端接口\n/// &lt;/summary&gt;\npublic interface IServerNotifyHub\n{\n\n}\n\n/// &lt;summary&gt;\n/// 客户端使用的接口\n/// &lt;/summary&gt;\npublic interface IClientNotifyHub\n{\n    Task OnNotify(object data);\n\n    Task OnLine(object data);\n\n    Task OffLine(object data);\n}\n</code></pre></li>\n</ul>\n<pre><code>  [Authorize]\n  public class NotifyHub : Hub&lt;IClientNotifyHub&gt;,IServerNotifyHub\n  {\n      private readonly SignalrRedisHelper _signalrRedisHelper;\n      private readonly ILogger _logger;\n\n      public NotifyHub(SignalrRedisHelper signalrRedisHelper, ILogger&lt;NotifyHub&gt; logger)\n      {\n          _signalrRedisHelper = signalrRedisHelper;\n          _logger = logger;\n      }\n\n      public override async Task OnConnectedAsync()\n      {\n          //await Clients.All.OnNotify(new { UserId= Context.User.Identity.Name, Name=Context.User.Identity.Name, ConnectId = Context.ConnectionId });\n          var userId= Context.User.Identity.Name;\n          var groups=Context.GetHttpContext().Request.Query[&quot;group&quot;].FirstOrDefault();\n          _logger.LogDebug($&quot;OnConnectedAsync----userId:{userId},groups:{groups},connectionId:{ Context.ConnectionId}&quot;);\n          if (!string.IsNullOrWhiteSpace(userId))\n          {\n              await _signalrRedisHelper.AddConnectForUserAsync(userId, Context.ConnectionId);\n              await JoinToGroup(userId, Context.ConnectionId, groups?.Split(&#39;,&#39;));\n              await DealOnLineNotify(userId, Context.ConnectionId);\n          }\n          await base.OnConnectedAsync();\n      }\n\n      public override async Task OnDisconnectedAsync(Exception exception)\n      {\n          var userId = Context.User.Identity.Name;\n          var groups = Context.GetHttpContext().Request.Query[&quot;group&quot;].FirstOrDefault();\n          _logger.LogDebug($&quot;OnDisconnectedAsync----userId:{userId},groups:{groups},connectionId:{ Context.ConnectionId}&quot;);\n          if (!string.IsNullOrWhiteSpace(userId))\n          {\n              await _signalrRedisHelper.RemoveConnectForUserAsync(userId, Context.ConnectionId);\n              await DealOffLineNotify(userId,Context.ConnectionId);\n          }\n          await LeaveFromGroup(Context.ConnectionId, groups?.Split(&#39;,&#39;));\n          await base.OnDisconnectedAsync(exception);\n      }\n\n      /// &lt;summary&gt;\n      /// 加入组\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;groupName&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task JoinToGroup(string userId,string connectionId,params string[] groups)\n      {\n          if (!string.IsNullOrWhiteSpace(userId)&amp;&amp; groups!=null&amp;&amp;groups.Length&gt;0)\n          {\n              foreach (var group in groups)\n              {\n                  await Groups.AddToGroupAsync(connectionId, group);\n                  await _signalrRedisHelper.AddUserForGroupAsync(group, connectionId, userId);\n\n                  // await Clients.Group(group).OnJoinGroup(new { ConnectId = connectionId, UserId = userId, GroupName = group });\n              }\n          }\n      }\n\n      /// &lt;summary&gt;\n      /// 从组中移除\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;groupName&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task LeaveFromGroup(string connectionId,params string[] groups)\n      {\n          if (groups != null &amp;&amp; groups.Length &gt; 0)\n          {\n              foreach (var group in groups)\n              {\n                  await Groups.RemoveFromGroupAsync(connectionId, group);\n                  await _signalrRedisHelper.RemoveConnectFromGroupAsync(group,connectionId);\n                  // await Clients.Group(group).OnLeaveGroup(new { ConnectId = connectionId, GroupName = group });\n              }\n          }\n      }\n\n      /// &lt;summary&gt;\n      /// 处理上线通知(只有用户第一个连接才通知)\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;userId&quot;&gt;&lt;/param&gt;\n      /// &lt;param name=&quot;connectionId&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task DealOnLineNotify(string userId,string connectionId) \n      {\n          var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n          await Clients.All.OnLine(new OnLineData()\n          {\n              UserId = userId,\n              ConnectionId = connectionId,\n              IsFirst = userConnectCount == 1\n          });\n      }\n\n      /// &lt;summary&gt;\n      /// 处理下线通知(只有当用户一个连接都没了 才算下线)\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;userId&quot;&gt;&lt;/param&gt;\n      /// &lt;param name=&quot;connectionId&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task DealOffLineNotify(string userId,string connectionId)\n      {\n          var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n          await Clients.All.OffLine(new OffLineData()\n          {\n              UserId = userId,\n              ConnectionId = connectionId,\n              IsLast = userConnectCount == 0\n          });\n      }\n  }\n</code></pre><p>  }</p>\n<pre><code>\n## 提供给业务系统调用的API\n- [POST] api/notify/post \napplication/json形式 提交，数据格式如下\n  ``` json\n  {\n    GroupIds:&#39;&#39;, // [可空] 组id集合，多个用,隔开\n    UserIds:&#39;&#39;,// [可空] 用户id集合，多个用,隔开\n    ExcludeUsers:boolean, // 是否排除用户列表中的用户\n    NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n  }\n</code></pre><ul>\n<li><p>有GroupIds</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给指定的组中所有用户(排除掉UserIds部分)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给组中指定(UserIds中指定的)的这些用户</p>\n</li>\n</ul>\n</li>\n<li><p>无GroupIds</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给当前所有连接(排除掉UserIds部分的用户)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给指定用户(UserIds中指定的用户)</p>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>[POST] api/notify/postConnects<br>application/json提交，数据格式如下</p>\n<pre><code class=\"json\">{\n  Connects:&#39;&#39;, // 连接Id集合，多个用，隔开\n  NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n}\n</code></pre>\n<ul>\n<li>有UserId<ul>\n<li>ExcludeConnectId=true<br>给改用户除指定的ConnectId外的所有连接端推送</li>\n<li>ExcludeConnectId=false<br>跟没指定UserId一致</li>\n</ul>\n</li>\n<li>无UserId<br>给指定连接Id推送</li>\n</ul>\n</li>\n<li><p>[GET] api/users<br>获取在线用户Id列表</p>\n</li>\n<li><p>[GET] api/groups<br>获取在线组列表</p>\n</li>\n</ul>\n<h2 id=\"增加日志记录\"><a href=\"#增加日志记录\" class=\"headerlink\" title=\"增加日志记录\"></a>增加日志记录</h2><p>为了方便分析和定位问题，使用log4net来作为日志记录器。</p>\n<ul>\n<li>nuget 安装log4net<br>nuget 搜索 log4net，安装</li>\n<li><p>Config中配置<br>在Config中注入ILoggerFactory，然后使用添加Log4Net,代码如下所示</p>\n<pre><code class=\"C#\">public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)\n{\n  if (env.IsDevelopment())\n  {\n      app.UseDeveloperExceptionPage();\n  }\n  app.UseHsts();\n\n  loggerFactory.AddLog4Net();\n  ...\n}\n</code></pre>\n</li>\n<li><p>添加log4net配置文件<br>更多配置请自行查找log4net官方配置文档</p>\n<pre><code class=\"xml\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;\n&lt;!--LOG4日志级别 \n  0：TRACE；记录一些对程序员调试问题有帮助的信息, 其中可能包含一些敏感信息, 所以应该避免在生产环境中启用Trace日志。\n  1：DEBUG；记录一些在开发和调试阶段有用的短时变量(Short-term usefulness), 所以除非为了临时排除生产环境的故障，开发人员应该尽量避免在生产环境中启用Debug日志。\n  2：INFO；信息日志，记录应用程序的一些流程, 例如，记录当前api请求的url，请求参数等。\n  3：WARN；警告日志；记录应用程序中发生的不正常或者未预期的事件信息。这些信息中可能包含错误消息或者错误产生的条件, 例如, 文件未找到，用户不存在。\n  4：ERROR；错误日志；记录应用程序中某个操作产生的错误和异常信息，如对空值进行操作等。\n  5：FATAL；毁灭性错误；记录一些需要立刻修复的问题。例如数据丢失，磁盘空间不足。\ntrace&lt;debug&lt;info&lt;warn&lt;error&lt;fatal --&gt;\n&lt;log4net&gt;\n&lt;appender name=&quot;ErrorRollingFileAppender&quot; type=&quot;log4net.Appender.RollingFileAppender&quot;&gt;\n  &lt;file value=&quot;AppData\\\\logs\\\\&quot; /&gt;\n  &lt;appendToFile value=&quot;true&quot; /&gt;\n  &lt;rollingStyle value=&quot;Date&quot;/&gt;\n  &lt;datePattern value=&quot;yyyy-MM-dd-&#39;error.log&#39;&quot;/&gt;\n  &lt;maxSizeRollBackups value=&quot;100&quot; /&gt;\n  &lt;staticLogFileName value=&quot;false&quot; /&gt;\n  &lt;encoding value=&quot;utf-8&quot; /&gt;\n  &lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;\n    &lt;conversionPattern value=&quot;%-5level %date [%-5.5thread] %-40.40logger - %message%newline&quot; /&gt;\n  &lt;/layout&gt;\n  &lt;filter type=&quot;log4net.Filter.LevelRangeFilter&quot;&gt;\n    &lt;levelMin value=&quot;ERROR&quot; /&gt;\n    &lt;levelMax value=&quot;FATAL&quot; /&gt;\n  &lt;/filter&gt;\n&lt;/appender&gt;\n\n&lt;root&gt;\n  &lt;level value=&quot;All&quot; /&gt;\n  &lt;appender-ref ref=&quot;ErrorRollingFileAppender&quot; /&gt;\n&lt;/root&gt;\n&lt;/log4net&gt;\n</code></pre>\n<p>至此，log4net配置完毕</p>\n</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th style=\"text-align:left\">标题</th>\n<th style=\"text-align:left\">内容 </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">索引</td>\n<td style=\"text-align:left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">上一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/03/dotnetcore/signalr/06-analysis/\">.net core 3.0 Signalr - 06 业务实现-业务分析</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">下一篇</td>\n<td style=\"text-align:left\"><a href=\"/2019/10/05/dotnetcore/signalr/08-clientdemo/\">.net core 3.0 Signalr - 08 业务实现-客户端demo</a>  </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">源码地址</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\" target=\"_blank\" rel=\"noopener\">源码</a> </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">官方文档</td>\n<td style=\"text-align:left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\" target=\"_blank\" rel=\"noopener\">官方文档</a> </td>\n</tr>\n</tbody>\n</table>"},{"title":"Dockerfile解析","abbrlink":25682,"date":"2018-05-30T01:15:09.000Z","_content":"\nDockerfile解说\n<!-- more -->\n\n| 关键字 | 说明 | 例子\n| :--- | :--- | :---\n|FROM | 以此为基础来构建 | FROM debian:buster-slim\n|MAINTAINER | 镜像维护着的项目和邮箱地址 | MAINTAINER The CentOS Project <xxxx@centos.org>\n| RUN | 容器构建时运行的命令  | \n| EXPOSE | 当前容器对外暴露的端口  | \n| WORKDIR | 指定容器创建后，终端默认进来的工作目录  | \n| ENV | 用来在构建镜像过程中设置环境变量 | \n| ADD | 将宿主机目录下的文件拷贝到镜像且ADD命令会自动处理URL和解压tar压缩包 | ADD c48-docker.tar.xz /\n| COPY | 跟ADD类似，但是不会解压 | copy src desc、copy [\"src\",\"desc\"]\n| VOLUME | 容器数据卷，用于数据保存和持久化工作 | VOLUME [\"/xxg-data1\",\"/xxg-data2\"]\n| CMD | 指定一个容器启动时要运行的命令，Dockerfile中可以有多个CMD指令，***但只有最后一个生效***，CMD会被docker run之后的参数替换 | CMD /bin/bash \n| ENTRYPOINT | 指定一个容器启动时要运行的命令，和CMD一样，都是指定容器启动程序及参数 | ENTRYPOINT netcore.dll\n| ONBUILD |  当构建一个被继承的Dockerfile时运行命令，父镜像在被子继承后父镜像的onbuild被触发 | \n\n\n``` Dockerfile\n# 案例一  构建一个自己的centos系统\n\nFROM centos\n\nENV mypath /tmp\nWORKDIR $mypath\n\nRUN yum -y install vim\nRUN yum -y install net-tools\n\nEXPORT 80\n\nCMD /bin/bash \n```\n\n\n","source":"_posts/docker/02docker-dockerfile.md","raw":"---\ntitle: Dockerfile解析\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 25682\ndate: 2018-05-30 09:15:09\n---\n\nDockerfile解说\n<!-- more -->\n\n| 关键字 | 说明 | 例子\n| :--- | :--- | :---\n|FROM | 以此为基础来构建 | FROM debian:buster-slim\n|MAINTAINER | 镜像维护着的项目和邮箱地址 | MAINTAINER The CentOS Project <xxxx@centos.org>\n| RUN | 容器构建时运行的命令  | \n| EXPOSE | 当前容器对外暴露的端口  | \n| WORKDIR | 指定容器创建后，终端默认进来的工作目录  | \n| ENV | 用来在构建镜像过程中设置环境变量 | \n| ADD | 将宿主机目录下的文件拷贝到镜像且ADD命令会自动处理URL和解压tar压缩包 | ADD c48-docker.tar.xz /\n| COPY | 跟ADD类似，但是不会解压 | copy src desc、copy [\"src\",\"desc\"]\n| VOLUME | 容器数据卷，用于数据保存和持久化工作 | VOLUME [\"/xxg-data1\",\"/xxg-data2\"]\n| CMD | 指定一个容器启动时要运行的命令，Dockerfile中可以有多个CMD指令，***但只有最后一个生效***，CMD会被docker run之后的参数替换 | CMD /bin/bash \n| ENTRYPOINT | 指定一个容器启动时要运行的命令，和CMD一样，都是指定容器启动程序及参数 | ENTRYPOINT netcore.dll\n| ONBUILD |  当构建一个被继承的Dockerfile时运行命令，父镜像在被子继承后父镜像的onbuild被触发 | \n\n\n``` Dockerfile\n# 案例一  构建一个自己的centos系统\n\nFROM centos\n\nENV mypath /tmp\nWORKDIR $mypath\n\nRUN yum -y install vim\nRUN yum -y install net-tools\n\nEXPORT 80\n\nCMD /bin/bash \n```\n\n\n","slug":"docker/02docker-dockerfile","published":1,"updated":"2020-12-25T13:02:18.686Z","_id":"ckj4abdnr0000r0sc1z252kgf","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Dockerfile解说<br><a id=\"more\"></a></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">关键字</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">例子</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">FROM</td>\n<td style=\"text-align:left\">以此为基础来构建</td>\n<td style=\"text-align:left\">FROM debian:buster-slim</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MAINTAINER</td>\n<td style=\"text-align:left\">镜像维护着的项目和邮箱地址</td>\n<td style=\"text-align:left\">MAINTAINER The CentOS Project <a href=\"mailto:&#x78;&#x78;&#x78;&#x78;&#64;&#99;&#101;&#x6e;&#x74;&#111;&#115;&#46;&#x6f;&#114;&#x67;\">&#x78;&#x78;&#x78;&#x78;&#64;&#99;&#101;&#x6e;&#x74;&#111;&#115;&#46;&#x6f;&#114;&#x67;</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">RUN</td>\n<td style=\"text-align:left\">容器构建时运行的命令</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXPOSE</td>\n<td style=\"text-align:left\">当前容器对外暴露的端口</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">WORKDIR</td>\n<td style=\"text-align:left\">指定容器创建后，终端默认进来的工作目录</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ENV</td>\n<td style=\"text-align:left\">用来在构建镜像过程中设置环境变量</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ADD</td>\n<td style=\"text-align:left\">将宿主机目录下的文件拷贝到镜像且ADD命令会自动处理URL和解压tar压缩包</td>\n<td style=\"text-align:left\">ADD c48-docker.tar.xz /</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">COPY</td>\n<td style=\"text-align:left\">跟ADD类似，但是不会解压</td>\n<td style=\"text-align:left\">copy src desc、copy [“src”,”desc”]</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">VOLUME</td>\n<td style=\"text-align:left\">容器数据卷，用于数据保存和持久化工作</td>\n<td style=\"text-align:left\">VOLUME [“/xxg-data1”,”/xxg-data2”]</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CMD</td>\n<td style=\"text-align:left\">指定一个容器启动时要运行的命令，Dockerfile中可以有多个CMD指令，<strong><em>但只有最后一个生效</em></strong>，CMD会被docker run之后的参数替换</td>\n<td style=\"text-align:left\">CMD /bin/bash </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ENTRYPOINT</td>\n<td style=\"text-align:left\">指定一个容器启动时要运行的命令，和CMD一样，都是指定容器启动程序及参数</td>\n<td style=\"text-align:left\">ENTRYPOINT netcore.dll</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ONBUILD</td>\n<td style=\"text-align:left\">当构建一个被继承的Dockerfile时运行命令，父镜像在被子继承后父镜像的onbuild被触发</td>\n</tr>\n</tbody>\n</table>\n<pre class=\" language-Dockerfile\"><code class=\"language-Dockerfile\"># 案例一  构建一个自己的centos系统\n\nFROM centos\n\nENV mypath /tmp\nWORKDIR $mypath\n\nRUN yum -y install vim\nRUN yum -y install net-tools\n\nEXPORT 80\n\nCMD /bin/bash \n</code></pre>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Dockerfile解说<br>","more":"</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">关键字</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">例子</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">FROM</td>\n<td style=\"text-align:left\">以此为基础来构建</td>\n<td style=\"text-align:left\">FROM debian:buster-slim</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MAINTAINER</td>\n<td style=\"text-align:left\">镜像维护着的项目和邮箱地址</td>\n<td style=\"text-align:left\">MAINTAINER The CentOS Project <a href=\"mailto:&#x78;&#x78;&#x78;&#x78;&#64;&#99;&#101;&#x6e;&#x74;&#111;&#115;&#46;&#x6f;&#114;&#x67;\">&#x78;&#x78;&#x78;&#x78;&#64;&#99;&#101;&#x6e;&#x74;&#111;&#115;&#46;&#x6f;&#114;&#x67;</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">RUN</td>\n<td style=\"text-align:left\">容器构建时运行的命令</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXPOSE</td>\n<td style=\"text-align:left\">当前容器对外暴露的端口</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">WORKDIR</td>\n<td style=\"text-align:left\">指定容器创建后，终端默认进来的工作目录</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ENV</td>\n<td style=\"text-align:left\">用来在构建镜像过程中设置环境变量</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ADD</td>\n<td style=\"text-align:left\">将宿主机目录下的文件拷贝到镜像且ADD命令会自动处理URL和解压tar压缩包</td>\n<td style=\"text-align:left\">ADD c48-docker.tar.xz /</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">COPY</td>\n<td style=\"text-align:left\">跟ADD类似，但是不会解压</td>\n<td style=\"text-align:left\">copy src desc、copy [“src”,”desc”]</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">VOLUME</td>\n<td style=\"text-align:left\">容器数据卷，用于数据保存和持久化工作</td>\n<td style=\"text-align:left\">VOLUME [“/xxg-data1”,”/xxg-data2”]</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CMD</td>\n<td style=\"text-align:left\">指定一个容器启动时要运行的命令，Dockerfile中可以有多个CMD指令，<strong><em>但只有最后一个生效</em></strong>，CMD会被docker run之后的参数替换</td>\n<td style=\"text-align:left\">CMD /bin/bash </td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ENTRYPOINT</td>\n<td style=\"text-align:left\">指定一个容器启动时要运行的命令，和CMD一样，都是指定容器启动程序及参数</td>\n<td style=\"text-align:left\">ENTRYPOINT netcore.dll</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ONBUILD</td>\n<td style=\"text-align:left\">当构建一个被继承的Dockerfile时运行命令，父镜像在被子继承后父镜像的onbuild被触发</td>\n</tr>\n</tbody>\n</table>\n<pre><code class=\"Dockerfile\"># 案例一  构建一个自己的centos系统\n\nFROM centos\n\nENV mypath /tmp\nWORKDIR $mypath\n\nRUN yum -y install vim\nRUN yum -y install net-tools\n\nEXPORT 80\n\nCMD /bin/bash \n</code></pre>"},{"title":"Nginx开篇","abbrlink":14221,"date":"2019-11-30T01:10:10.000Z","_content":"\nDocker基础开篇\n<!-- more -->\n\n## centos 7安装nginx\n- 更新yum\n``` bash\nyum -y update  \n```\n\n- 通过yum安装\n``` bash\nyum install epel-release\nyum install nginx \n```\n- 配置nginx自动启动\n``` bash\nsystemctl start nginx\nsystemctl enable nginx\nsystemctl status nginx\n```\n\n- 配置防火墙\n``` bash\nfirewall-cmd --zone=public --permanent --add-service=http\nfirewall-cmd --zone=public --permanent --add-service=https\nfirewall-cmd --reload\n``` bash\n\n## nginx 配置文件\n- worker_processer\n配置支持的并发数量\n\n- events\n``` bash\n配置网络连接数量\nevents:{\n    worker_connections:1024 \n}\n```\n\n- http\n\n\n## 反向代理\n``` bash\n# 基础案例\nserver {\n    listen 80;\n    server_name test.xxgtalk.cn;\n\n    # listen [::]:80 ipv6only=on;\n    # root /var/www/mywebsite2;\n    # index index.html index.htm;\n\n    location / {\n        proxy_pass http://localhost:9001;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n    # error_page 404 /404.html;\n    # error_page 500 502 503 504 /50x.html;\n    # location = /50x.html {\n    #     root /var/www/mywebsite1;\n    # }\n} \n\n```\n\n## 负载均衡\n``` bash\n# 负载均衡案例\nupstream myserver {\n server 192.168.20.23:8080;\n server 192.168.20.23:8081;\n}\nserver {\n    listen 80;\n    server_name test.xxgtalk.cn;\n\n    # listen [::]:80 ipv6only=on;\n    # root /var/www/mywebsite2;\n    # index index.html index.htm;\n\n    location / {\n        proxy_pass http://myserver;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n    # error_page 404 /404.html;\n    # error_page 500 502 503 504 /50x.html;\n    # location = /50x.html {\n    #     root /var/www/mywebsite1;\n    # }\n} \n```\n\n## 动静分离(跟基础类似)\n\n## 高可用\n![20191130225646.png](http://qiniu.xxgtalk.cn/blog/images/20191130225646.png)\n1. 需要在轮胎服务器安装nginx\n2. 需要再两台服务器上安装keepalived\n``` bash\nyum install keepalived -y\n\n## 修改每台机器上的keepalived配置文件\n\n## 检测是否安装成功\nrpm -q -q keepalived\n## 目录位置\n/etc/keepalived\n```\n","source":"_posts/nginx/01-introduct.md","raw":"---\ntitle: Nginx开篇\ncategories:\n  - Nginx\ntags:\n  - Nginx\nabbrlink: 14221\ndate: 2019-11-30 09:10:10\n---\n\nDocker基础开篇\n<!-- more -->\n\n## centos 7安装nginx\n- 更新yum\n``` bash\nyum -y update  \n```\n\n- 通过yum安装\n``` bash\nyum install epel-release\nyum install nginx \n```\n- 配置nginx自动启动\n``` bash\nsystemctl start nginx\nsystemctl enable nginx\nsystemctl status nginx\n```\n\n- 配置防火墙\n``` bash\nfirewall-cmd --zone=public --permanent --add-service=http\nfirewall-cmd --zone=public --permanent --add-service=https\nfirewall-cmd --reload\n``` bash\n\n## nginx 配置文件\n- worker_processer\n配置支持的并发数量\n\n- events\n``` bash\n配置网络连接数量\nevents:{\n    worker_connections:1024 \n}\n```\n\n- http\n\n\n## 反向代理\n``` bash\n# 基础案例\nserver {\n    listen 80;\n    server_name test.xxgtalk.cn;\n\n    # listen [::]:80 ipv6only=on;\n    # root /var/www/mywebsite2;\n    # index index.html index.htm;\n\n    location / {\n        proxy_pass http://localhost:9001;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n    # error_page 404 /404.html;\n    # error_page 500 502 503 504 /50x.html;\n    # location = /50x.html {\n    #     root /var/www/mywebsite1;\n    # }\n} \n\n```\n\n## 负载均衡\n``` bash\n# 负载均衡案例\nupstream myserver {\n server 192.168.20.23:8080;\n server 192.168.20.23:8081;\n}\nserver {\n    listen 80;\n    server_name test.xxgtalk.cn;\n\n    # listen [::]:80 ipv6only=on;\n    # root /var/www/mywebsite2;\n    # index index.html index.htm;\n\n    location / {\n        proxy_pass http://myserver;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n    # error_page 404 /404.html;\n    # error_page 500 502 503 504 /50x.html;\n    # location = /50x.html {\n    #     root /var/www/mywebsite1;\n    # }\n} \n```\n\n## 动静分离(跟基础类似)\n\n## 高可用\n![20191130225646.png](http://qiniu.xxgtalk.cn/blog/images/20191130225646.png)\n1. 需要在轮胎服务器安装nginx\n2. 需要再两台服务器上安装keepalived\n``` bash\nyum install keepalived -y\n\n## 修改每台机器上的keepalived配置文件\n\n## 检测是否安装成功\nrpm -q -q keepalived\n## 目录位置\n/etc/keepalived\n```\n","slug":"nginx/01-introduct","published":1,"updated":"2020-12-25T13:02:18.694Z","_id":"ckj4abdo10003r0sc4qqpej9f","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Docker基础开篇<br><a id=\"more\"></a></p>\n<h2 id=\"centos-7安装nginx\"><a href=\"#centos-7安装nginx\" class=\"headerlink\" title=\"centos 7安装nginx\"></a>centos 7安装nginx</h2><ul>\n<li><p>更新yum</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">yum -y update  \n</code></pre>\n</li>\n<li><p>通过yum安装</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> epel-release\nyum <span class=\"token function\">install</span> nginx \n</code></pre>\n</li>\n<li><p>配置nginx自动启动</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">systemctl start nginx\nsystemctl <span class=\"token function\">enable</span> nginx\nsystemctl status nginx\n</code></pre>\n</li>\n<li><p>配置防火墙<br><code>bash\nfirewall-cmd --zone=public --permanent --add-service=http\nfirewall-cmd --zone=public --permanent --add-service=https\nfirewall-cmd --reload</code> bash</p>\n</li>\n</ul>\n<h2 id=\"nginx-配置文件\"><a href=\"#nginx-配置文件\" class=\"headerlink\" title=\"nginx 配置文件\"></a>nginx 配置文件</h2><ul>\n<li><p>worker_processer<br>配置支持的并发数量</p>\n</li>\n<li><p>events</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">配置网络连接数量\nevents:<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;</span>\n  worker_connections:1024 \n<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#125;</span>\n</code></pre>\n</li>\n<li><p>http</p>\n</li>\n</ul>\n<h2 id=\"反向代理\"><a href=\"#反向代理\" class=\"headerlink\" title=\"反向代理\"></a>反向代理</h2><pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token comment\" spellcheck=\"true\"># 基础案例</span>\nserver <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;</span>\n    listen 80<span class=\"token punctuation\">;</span>\n    server_name test.xxgtalk.cn<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\" spellcheck=\"true\"># listen [::]:80 ipv6only=on;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># root /var/www/mywebsite2;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># index index.html index.htm;</span>\n\n    location / <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;</span>\n        proxy_pass http://localhost:9001<span class=\"token punctuation\">;</span>\n        proxy_http_version 1.1<span class=\"token punctuation\">;</span>\n        proxy_set_header Upgrade <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n        proxy_set_header Connection <span class=\"token string\">'upgrade'</span><span class=\"token punctuation\">;</span>\n        proxy_set_header Host <span class=\"token variable\">$host</span><span class=\"token punctuation\">;</span>\n        proxy_cache_bypass <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#125;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># error_page 404 /404.html;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># error_page 500 502 503 504 /50x.html;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># location = /50x.html &amp;#123;</span>\n    <span class=\"token comment\" spellcheck=\"true\">#     root /var/www/mywebsite1;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># &amp;#125;</span>\n<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#125; </span>\n\n</code></pre>\n<h2 id=\"负载均衡\"><a href=\"#负载均衡\" class=\"headerlink\" title=\"负载均衡\"></a>负载均衡</h2><pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token comment\" spellcheck=\"true\"># 负载均衡案例</span>\nupstream myserver <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;</span>\n server 192.168.20.23:8080<span class=\"token punctuation\">;</span>\n server 192.168.20.23:8081<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#125;</span>\nserver <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;</span>\n    listen 80<span class=\"token punctuation\">;</span>\n    server_name test.xxgtalk.cn<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\" spellcheck=\"true\"># listen [::]:80 ipv6only=on;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># root /var/www/mywebsite2;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># index index.html index.htm;</span>\n\n    location / <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;</span>\n        proxy_pass http://myserver<span class=\"token punctuation\">;</span>\n        proxy_http_version 1.1<span class=\"token punctuation\">;</span>\n        proxy_set_header Upgrade <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n        proxy_set_header Connection <span class=\"token string\">'upgrade'</span><span class=\"token punctuation\">;</span>\n        proxy_set_header Host <span class=\"token variable\">$host</span><span class=\"token punctuation\">;</span>\n        proxy_cache_bypass <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#125;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># error_page 404 /404.html;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># error_page 500 502 503 504 /50x.html;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># location = /50x.html &amp;#123;</span>\n    <span class=\"token comment\" spellcheck=\"true\">#     root /var/www/mywebsite1;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># &amp;#125;</span>\n<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#125; </span>\n</code></pre>\n<h2 id=\"动静分离-跟基础类似\"><a href=\"#动静分离-跟基础类似\" class=\"headerlink\" title=\"动静分离(跟基础类似)\"></a>动静分离(跟基础类似)</h2><h2 id=\"高可用\"><a href=\"#高可用\" class=\"headerlink\" title=\"高可用\"></a>高可用</h2><p><img src=\"http://qiniu.xxgtalk.cn/blog/images/20191130225646.png\" alt=\"20191130225646.png\"></p>\n<ol>\n<li>需要在轮胎服务器安装nginx</li>\n<li>需要再两台服务器上安装keepalived<br><code>`</code> bash<br>yum install keepalived -y</li>\n</ol>\n<h2 id=\"修改每台机器上的keepalived配置文件\"><a href=\"#修改每台机器上的keepalived配置文件\" class=\"headerlink\" title=\"修改每台机器上的keepalived配置文件\"></a>修改每台机器上的keepalived配置文件</h2><h2 id=\"检测是否安装成功\"><a href=\"#检测是否安装成功\" class=\"headerlink\" title=\"检测是否安装成功\"></a>检测是否安装成功</h2><p>rpm -q -q keepalived</p>\n<h2 id=\"目录位置\"><a href=\"#目录位置\" class=\"headerlink\" title=\"目录位置\"></a>目录位置</h2><p>/etc/keepalived<br><code>`</code></p>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Docker基础开篇<br>","more":"</p>\n<h2 id=\"centos-7安装nginx\"><a href=\"#centos-7安装nginx\" class=\"headerlink\" title=\"centos 7安装nginx\"></a>centos 7安装nginx</h2><ul>\n<li><p>更新yum</p>\n<pre><code class=\"bash\">yum -y update  \n</code></pre>\n</li>\n<li><p>通过yum安装</p>\n<pre><code class=\"bash\">yum install epel-release\nyum install nginx \n</code></pre>\n</li>\n<li><p>配置nginx自动启动</p>\n<pre><code class=\"bash\">systemctl start nginx\nsystemctl enable nginx\nsystemctl status nginx\n</code></pre>\n</li>\n<li><p>配置防火墙<br><code>bash\nfirewall-cmd --zone=public --permanent --add-service=http\nfirewall-cmd --zone=public --permanent --add-service=https\nfirewall-cmd --reload</code> bash</p>\n</li>\n</ul>\n<h2 id=\"nginx-配置文件\"><a href=\"#nginx-配置文件\" class=\"headerlink\" title=\"nginx 配置文件\"></a>nginx 配置文件</h2><ul>\n<li><p>worker_processer<br>配置支持的并发数量</p>\n</li>\n<li><p>events</p>\n<pre><code class=\"bash\">配置网络连接数量\nevents:&#123;\n  worker_connections:1024 \n&#125;\n</code></pre>\n</li>\n<li><p>http</p>\n</li>\n</ul>\n<h2 id=\"反向代理\"><a href=\"#反向代理\" class=\"headerlink\" title=\"反向代理\"></a>反向代理</h2><pre><code class=\"bash\"># 基础案例\nserver &#123;\n    listen 80;\n    server_name test.xxgtalk.cn;\n\n    # listen [::]:80 ipv6only=on;\n    # root /var/www/mywebsite2;\n    # index index.html index.htm;\n\n    location / &#123;\n        proxy_pass http://localhost:9001;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection &#39;upgrade&#39;;\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    &#125;\n    # error_page 404 /404.html;\n    # error_page 500 502 503 504 /50x.html;\n    # location = /50x.html &#123;\n    #     root /var/www/mywebsite1;\n    # &#125;\n&#125; \n\n</code></pre>\n<h2 id=\"负载均衡\"><a href=\"#负载均衡\" class=\"headerlink\" title=\"负载均衡\"></a>负载均衡</h2><pre><code class=\"bash\"># 负载均衡案例\nupstream myserver &#123;\n server 192.168.20.23:8080;\n server 192.168.20.23:8081;\n&#125;\nserver &#123;\n    listen 80;\n    server_name test.xxgtalk.cn;\n\n    # listen [::]:80 ipv6only=on;\n    # root /var/www/mywebsite2;\n    # index index.html index.htm;\n\n    location / &#123;\n        proxy_pass http://myserver;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection &#39;upgrade&#39;;\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    &#125;\n    # error_page 404 /404.html;\n    # error_page 500 502 503 504 /50x.html;\n    # location = /50x.html &#123;\n    #     root /var/www/mywebsite1;\n    # &#125;\n&#125; \n</code></pre>\n<h2 id=\"动静分离-跟基础类似\"><a href=\"#动静分离-跟基础类似\" class=\"headerlink\" title=\"动静分离(跟基础类似)\"></a>动静分离(跟基础类似)</h2><h2 id=\"高可用\"><a href=\"#高可用\" class=\"headerlink\" title=\"高可用\"></a>高可用</h2><p><img src=\"http://qiniu.xxgtalk.cn/blog/images/20191130225646.png\" alt=\"20191130225646.png\"></p>\n<ol>\n<li>需要在轮胎服务器安装nginx</li>\n<li>需要再两台服务器上安装keepalived<br><code>`</code> bash<br>yum install keepalived -y</li>\n</ol>\n<h2 id=\"修改每台机器上的keepalived配置文件\"><a href=\"#修改每台机器上的keepalived配置文件\" class=\"headerlink\" title=\"修改每台机器上的keepalived配置文件\"></a>修改每台机器上的keepalived配置文件</h2><h2 id=\"检测是否安装成功\"><a href=\"#检测是否安装成功\" class=\"headerlink\" title=\"检测是否安装成功\"></a>检测是否安装成功</h2><p>rpm -q -q keepalived</p>\n<h2 id=\"目录位置\"><a href=\"#目录位置\" class=\"headerlink\" title=\"目录位置\"></a>目录位置</h2><p>/etc/keepalived<br><code>`</code></p>"},{"title":"利用ngrok来做内网穿透","abbrlink":44373,"date":"2018-12-17T11:10:12.000Z","_content":"\n我有很多自己的个人代码是跑在家里的服务器中的.一般来说都是自动化的处理我的一些生活问题,与数据收集等相关活动. 所以一般没有客户端访问家里服务器的需求. 但是很多时候脑子突发奇想.有一些小点子,一些小的bug或者小的优化,代码修改完成之后,有一个部署到需求. 因为家里服务器没有一个稳定的外网IP的,外网不能直接连接服务器. 所以我们需要 内网穿透.\n<!-- more -->\n\n\n\n### 用法\n1. 首先你需要去官网注册一个账号\n2. 下载ngrok,并且解压到一个你喜欢的目录下面\n3. 去官网复制你的授权码\n4. 授权ngrok\n``` bash\nngrok authtoken 授权码\n```\n### http\n``` bash\nngrok http 8080\n```\n\n### tcp\n``` bash\nngrok tcp 22\n```\n\n![20191217094149.png](http://qiniu.xxgtalk.cn/blog/images/20191217094149.png)\n\n最终你会得到,一个外网可以访问的地址. 用这个地址就可以直接访问到你\b本机的端口了.  \n\n当我们拥有这样一个公网地址之后,我们就可以ssh来控制家里的机器 或者使用github的webhook来做一切你想要做的事情.","source":"_posts/tools/ngrok.md","raw":"---\ntitle: 利用ngrok来做内网穿透\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 44373\ndate: 2018-12-17 19:10:12\n---\n\n我有很多自己的个人代码是跑在家里的服务器中的.一般来说都是自动化的处理我的一些生活问题,与数据收集等相关活动. 所以一般没有客户端访问家里服务器的需求. 但是很多时候脑子突发奇想.有一些小点子,一些小的bug或者小的优化,代码修改完成之后,有一个部署到需求. 因为家里服务器没有一个稳定的外网IP的,外网不能直接连接服务器. 所以我们需要 内网穿透.\n<!-- more -->\n\n\n\n### 用法\n1. 首先你需要去官网注册一个账号\n2. 下载ngrok,并且解压到一个你喜欢的目录下面\n3. 去官网复制你的授权码\n4. 授权ngrok\n``` bash\nngrok authtoken 授权码\n```\n### http\n``` bash\nngrok http 8080\n```\n\n### tcp\n``` bash\nngrok tcp 22\n```\n\n![20191217094149.png](http://qiniu.xxgtalk.cn/blog/images/20191217094149.png)\n\n最终你会得到,一个外网可以访问的地址. 用这个地址就可以直接访问到你\b本机的端口了.  \n\n当我们拥有这样一个公网地址之后,我们就可以ssh来控制家里的机器 或者使用github的webhook来做一切你想要做的事情.","slug":"tools/ngrok","published":1,"updated":"2020-12-25T13:02:18.711Z","_id":"ckj4abdof0006r0sc8z0p2uzv","comments":1,"layout":"post","photos":[],"link":"","content":"<p>我有很多自己的个人代码是跑在家里的服务器中的.一般来说都是自动化的处理我的一些生活问题,与数据收集等相关活动. 所以一般没有客户端访问家里服务器的需求. 但是很多时候脑子突发奇想.有一些小点子,一些小的bug或者小的优化,代码修改完成之后,有一个部署到需求. 因为家里服务器没有一个稳定的外网IP的,外网不能直接连接服务器. 所以我们需要 内网穿透.<br><a id=\"more\"></a></p>\n<h3 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h3><ol>\n<li>首先你需要去官网注册一个账号</li>\n<li>下载ngrok,并且解压到一个你喜欢的目录下面</li>\n<li>去官网复制你的授权码</li>\n<li>授权ngrok<pre class=\" language-bash\"><code class=\"language-bash\">ngrok authtoken 授权码\n</code></pre>\n<h3 id=\"http\"><a href=\"#http\" class=\"headerlink\" title=\"http\"></a>http</h3><pre class=\" language-bash\"><code class=\"language-bash\">ngrok http 8080\n</code></pre>\n</li>\n</ol>\n<h3 id=\"tcp\"><a href=\"#tcp\" class=\"headerlink\" title=\"tcp\"></a>tcp</h3><pre class=\" language-bash\"><code class=\"language-bash\">ngrok tcp 22\n</code></pre>\n<p><img src=\"http://qiniu.xxgtalk.cn/blog/images/20191217094149.png\" alt=\"20191217094149.png\"></p>\n<p>最终你会得到,一个外网可以访问的地址. 用这个地址就可以直接访问到你\b本机的端口了.  </p>\n<p>当我们拥有这样一个公网地址之后,我们就可以ssh来控制家里的机器 或者使用github的webhook来做一切你想要做的事情.</p>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>我有很多自己的个人代码是跑在家里的服务器中的.一般来说都是自动化的处理我的一些生活问题,与数据收集等相关活动. 所以一般没有客户端访问家里服务器的需求. 但是很多时候脑子突发奇想.有一些小点子,一些小的bug或者小的优化,代码修改完成之后,有一个部署到需求. 因为家里服务器没有一个稳定的外网IP的,外网不能直接连接服务器. 所以我们需要 内网穿透.<br>","more":"</p>\n<h3 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h3><ol>\n<li>首先你需要去官网注册一个账号</li>\n<li>下载ngrok,并且解压到一个你喜欢的目录下面</li>\n<li>去官网复制你的授权码</li>\n<li>授权ngrok<pre><code class=\"bash\">ngrok authtoken 授权码\n</code></pre>\n<h3 id=\"http\"><a href=\"#http\" class=\"headerlink\" title=\"http\"></a>http</h3><pre><code class=\"bash\">ngrok http 8080\n</code></pre>\n</li>\n</ol>\n<h3 id=\"tcp\"><a href=\"#tcp\" class=\"headerlink\" title=\"tcp\"></a>tcp</h3><pre><code class=\"bash\">ngrok tcp 22\n</code></pre>\n<p><img src=\"http://qiniu.xxgtalk.cn/blog/images/20191217094149.png\" alt=\"20191217094149.png\"></p>\n<p>最终你会得到,一个外网可以访问的地址. 用这个地址就可以直接访问到你\b本机的端口了.  </p>\n<p>当我们拥有这样一个公网地址之后,我们就可以ssh来控制家里的机器 或者使用github的webhook来做一切你想要做的事情.</p>"},{"title":"redis-config常用点介绍","abbrlink":43898,"date":"2018-12-03T01:10:10.000Z","_content":"\nredis-config常用点介绍\n<!-- more -->\n\n> 参考文档:http://redisdoc.com/\n\n1. 是否以守护进程方式运行，redis默认不是守护进程方式运行，可以修改该配置项来使用守护进程方式运行\ndaemonizo:yes\n\n2. pidfile 指定守护进程方式的写入文件\n当redis以守护进程方式运行时，redis默认会吧pid写入/var/run/redis.pid文件，可以通过pidfile指定 pidfile /var/run/redis.pid\n\n3. 指定redis端口 \n配置文件里面找port，默认是6379 \n\n4. bind 绑定的主机ip\n``` bash\nbind 127.0.0.1\n```\n\n5. timeout\n超时时间,默认为0 表示关闭该功能\n\n6. loglevel \n``` bash\n设置日志级别 debug verbose notice warning  \nsyslog-enabled:是否将日志输出到系统日志syslog里头    \nsyslog-indent: 指定syslog里的日志标志\nsyslog-facility： 指定syslog设备，值可以是USER或者LOCAL0-LOCAL7\n```\n\n7. 日志记录方式，默认为标志输出，如果配置redis为守护进程方式运行，而这里又配置日志记录方式为标准输出，则日志将会发送给/dev/nulll\nlogfile stdout\n\n8. databases 数据库数量\n``` bash\ndatabases 16\n```\n\n9. 指定多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件适配\n``` bash\nsave <seconds> <changes>\n# redis 默认配置文件提供了三个条件\n# save 900 1 # 900秒内有一个更改\n# save 300 10 # 300秒内有10个更改\n# save 60 10000 # 60秒内有10000个更改\n```\n\n10. 指定存储至本地数据库时是否压缩数据，默认为yes，redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，单会大致数据库文件变得巨大\n``` bash\nrdbcompression yes\n```\n\n11. 指定本地数据库文件名，默认为dump.rdb\n``` bash\ndbfilename dump.rdb\n```\n\n12. 指定本地数据库存放目录\n``` bash\ndir ./\n```\n\n13. 设置当本机为slav服务是，设置master服务的ip地址及端口，在redis启动时，他会自动从master进行数据同步\n``` bash\nslaveof <masterip> <masterport>\n```\n\n14. 当master服务设置了密码保护时，slav服务连接master的密码\n``` bash\nmasterauth <master-password>\n```\n\n15. 设置redis连接密码，如果设置了密码，客户端在连接的时候需要通过 auth <password> 提供密码，默认为关闭\n``` bash\nrequirepass Abcd1234\n```\n\n16. 设置同一时间最大客户端连接数，默认无限制，redis可以同时打开的客户端连接数为redis经常可以打开的最大文件描述符数，如果设置maxclients 0,表示不作限值。当客户端连接数达到限制时，redis会关闭新的连接并向客户端返回 max number of clients reached错误信息\n``` bash\nmaxclients 128\n```\n\n17. 指定redis最大内存限制，redis在启动时会把数据加载到内存中，达到最大内存后，redis会尝试清除已到期或即将到期的key，当次方法处理后，仍然达到最大内存设置，将无法进行写入操作，但仍可以读，redis新的vm机制，会把key存放内存，value存放在swap区\n``` bash\nmaxmemory <bytes>\n```\n\n18. 指定是否每次更新操作后进行日志记录，redis在默认情况下是异步吧数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失，因为redis本身同步数据文件是按上面save条件来同步的，所有的数据会在一段时间内只存在于内存中。默认为 no\n``` bash\nappendonly no\n```\n\n19. 指定更新日志文件名，默认为appendonly.aof\n``` bash\nappendfilename  appendonly.aof\n```\n\n20. 指定更新日志条件，共有3个可选值\nno: 表示等操作系统镜像数据缓存同步到磁盘(块)\nalways: 表示每次更新操作后手动调用fsync()将数据写到磁盘(慢，安全)\neverysec:表示每秒同步一次(折中，默认值)\n``` bash\nappendfsync everysec\n```\n\n21. 指定是否启用虚拟内存机制，默认为no，简单的介绍下，VM机制将数据分页存放，有redis将访问量较少的页即冷水机swap到磁盘上，访问多的页由磁盘自动换出到内存中\n``` bash\nvm-enabled no\n```\n\n22. 虚拟内存文件路径，默认值为/temp/redis.swap，不可多个redis实例共享\n``` bash\nvm-swap-file /tmp/redis.swap\n```\n\n23. 将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多小，所有索引数据都是内存存储的(redis的所有数据就是keys)，也就是说 当vm-max-memory设置为0的时候，其实就是所有的value都存在于磁盘。默认值为0\n``` bash\nvm-max-memory 0\n```\n\n24. redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但是一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的，建议如果存储很多小对象，page大小最好设置为32或者64bytes；如果存储很大对象，可以使用更大的page，如果不确定，就是用默认值\n``` bash\nvm-max-size 32\n```\n\n25. 设置swap文件中的page数量，由于页表(一种表示页面空闲或使用bitmap)是放在内存中的，在磁盘上每8个pages将消耗1bytes内存。\n``` bash\nvm-pages 1342177289\n```\n\n26. 设置访问swap文件的线程数，最好不要超过机器的核数，如果设置为0，那么对所有swap文件的操作都是串行的，可能会造成比较长的延迟，美容是4\n``` bash\nvm-max-thread:4\n```\n\n27. 设置在想客户端应答时，是否吧较小的包合并为一个包发送，默认为开启\n``` bash\nglueoutputbuf yes\n```\n\n28. 指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法\n``` bash\n# hash-max-zipmap-entries 64\n# has-max-zipmap-value 512\n```\n\n29. 指定是否激活重置哈希，默认为开启\n``` bash\nactiverehashing yes\n```\n\n30. 指定包含其他的配置文件，可以在同一主机上多个redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件\n``` bash\ninclude /path/to/local.conf\n```\n\n\n##  SNAPSHOTTING快照\n\n## REPLICATION复制\n\n## SECURITY安全\n\n- requirepass节点  \nconfig get requirepass   \nconfig set requirepass [v]\n\n\n## LIMITS限值\n\n- maxclients :最大连接数\n\n- maxmemory :最大内存\n\n- maxmemory-policy : 默认为noeviction\nvolatile-lru: 使用LRU算法移除key，只对设置了过期时间的键\n\nallkeys-lru:使用LRU算法移除key\n\nvolatile-random:在过期集合中随机移除，值对设置了过期时间的键有效\n\nallkeys-random: 随机移除key\n\nvolatile-ttl: 移除那些TTL值最小的key，也就是最近要过期的key\n\nnoeviction: 永不过期，不进行移除，针对写操作，直返回错误信息\n\n\n- maxmemory-samples\n\n\n## APPEND ONLY MODE追加\n","source":"_posts/redis/01-config.md","raw":"---\ntitle: redis-config常用点介绍\ncategories:\n  - redis\ntags:\n  - redis\nabbrlink: 43898\ndate: 2018-12-03 09:10:10\n---\n\nredis-config常用点介绍\n<!-- more -->\n\n> 参考文档:http://redisdoc.com/\n\n1. 是否以守护进程方式运行，redis默认不是守护进程方式运行，可以修改该配置项来使用守护进程方式运行\ndaemonizo:yes\n\n2. pidfile 指定守护进程方式的写入文件\n当redis以守护进程方式运行时，redis默认会吧pid写入/var/run/redis.pid文件，可以通过pidfile指定 pidfile /var/run/redis.pid\n\n3. 指定redis端口 \n配置文件里面找port，默认是6379 \n\n4. bind 绑定的主机ip\n``` bash\nbind 127.0.0.1\n```\n\n5. timeout\n超时时间,默认为0 表示关闭该功能\n\n6. loglevel \n``` bash\n设置日志级别 debug verbose notice warning  \nsyslog-enabled:是否将日志输出到系统日志syslog里头    \nsyslog-indent: 指定syslog里的日志标志\nsyslog-facility： 指定syslog设备，值可以是USER或者LOCAL0-LOCAL7\n```\n\n7. 日志记录方式，默认为标志输出，如果配置redis为守护进程方式运行，而这里又配置日志记录方式为标准输出，则日志将会发送给/dev/nulll\nlogfile stdout\n\n8. databases 数据库数量\n``` bash\ndatabases 16\n```\n\n9. 指定多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件适配\n``` bash\nsave <seconds> <changes>\n# redis 默认配置文件提供了三个条件\n# save 900 1 # 900秒内有一个更改\n# save 300 10 # 300秒内有10个更改\n# save 60 10000 # 60秒内有10000个更改\n```\n\n10. 指定存储至本地数据库时是否压缩数据，默认为yes，redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，单会大致数据库文件变得巨大\n``` bash\nrdbcompression yes\n```\n\n11. 指定本地数据库文件名，默认为dump.rdb\n``` bash\ndbfilename dump.rdb\n```\n\n12. 指定本地数据库存放目录\n``` bash\ndir ./\n```\n\n13. 设置当本机为slav服务是，设置master服务的ip地址及端口，在redis启动时，他会自动从master进行数据同步\n``` bash\nslaveof <masterip> <masterport>\n```\n\n14. 当master服务设置了密码保护时，slav服务连接master的密码\n``` bash\nmasterauth <master-password>\n```\n\n15. 设置redis连接密码，如果设置了密码，客户端在连接的时候需要通过 auth <password> 提供密码，默认为关闭\n``` bash\nrequirepass Abcd1234\n```\n\n16. 设置同一时间最大客户端连接数，默认无限制，redis可以同时打开的客户端连接数为redis经常可以打开的最大文件描述符数，如果设置maxclients 0,表示不作限值。当客户端连接数达到限制时，redis会关闭新的连接并向客户端返回 max number of clients reached错误信息\n``` bash\nmaxclients 128\n```\n\n17. 指定redis最大内存限制，redis在启动时会把数据加载到内存中，达到最大内存后，redis会尝试清除已到期或即将到期的key，当次方法处理后，仍然达到最大内存设置，将无法进行写入操作，但仍可以读，redis新的vm机制，会把key存放内存，value存放在swap区\n``` bash\nmaxmemory <bytes>\n```\n\n18. 指定是否每次更新操作后进行日志记录，redis在默认情况下是异步吧数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失，因为redis本身同步数据文件是按上面save条件来同步的，所有的数据会在一段时间内只存在于内存中。默认为 no\n``` bash\nappendonly no\n```\n\n19. 指定更新日志文件名，默认为appendonly.aof\n``` bash\nappendfilename  appendonly.aof\n```\n\n20. 指定更新日志条件，共有3个可选值\nno: 表示等操作系统镜像数据缓存同步到磁盘(块)\nalways: 表示每次更新操作后手动调用fsync()将数据写到磁盘(慢，安全)\neverysec:表示每秒同步一次(折中，默认值)\n``` bash\nappendfsync everysec\n```\n\n21. 指定是否启用虚拟内存机制，默认为no，简单的介绍下，VM机制将数据分页存放，有redis将访问量较少的页即冷水机swap到磁盘上，访问多的页由磁盘自动换出到内存中\n``` bash\nvm-enabled no\n```\n\n22. 虚拟内存文件路径，默认值为/temp/redis.swap，不可多个redis实例共享\n``` bash\nvm-swap-file /tmp/redis.swap\n```\n\n23. 将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多小，所有索引数据都是内存存储的(redis的所有数据就是keys)，也就是说 当vm-max-memory设置为0的时候，其实就是所有的value都存在于磁盘。默认值为0\n``` bash\nvm-max-memory 0\n```\n\n24. redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但是一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的，建议如果存储很多小对象，page大小最好设置为32或者64bytes；如果存储很大对象，可以使用更大的page，如果不确定，就是用默认值\n``` bash\nvm-max-size 32\n```\n\n25. 设置swap文件中的page数量，由于页表(一种表示页面空闲或使用bitmap)是放在内存中的，在磁盘上每8个pages将消耗1bytes内存。\n``` bash\nvm-pages 1342177289\n```\n\n26. 设置访问swap文件的线程数，最好不要超过机器的核数，如果设置为0，那么对所有swap文件的操作都是串行的，可能会造成比较长的延迟，美容是4\n``` bash\nvm-max-thread:4\n```\n\n27. 设置在想客户端应答时，是否吧较小的包合并为一个包发送，默认为开启\n``` bash\nglueoutputbuf yes\n```\n\n28. 指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法\n``` bash\n# hash-max-zipmap-entries 64\n# has-max-zipmap-value 512\n```\n\n29. 指定是否激活重置哈希，默认为开启\n``` bash\nactiverehashing yes\n```\n\n30. 指定包含其他的配置文件，可以在同一主机上多个redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件\n``` bash\ninclude /path/to/local.conf\n```\n\n\n##  SNAPSHOTTING快照\n\n## REPLICATION复制\n\n## SECURITY安全\n\n- requirepass节点  \nconfig get requirepass   \nconfig set requirepass [v]\n\n\n## LIMITS限值\n\n- maxclients :最大连接数\n\n- maxmemory :最大内存\n\n- maxmemory-policy : 默认为noeviction\nvolatile-lru: 使用LRU算法移除key，只对设置了过期时间的键\n\nallkeys-lru:使用LRU算法移除key\n\nvolatile-random:在过期集合中随机移除，值对设置了过期时间的键有效\n\nallkeys-random: 随机移除key\n\nvolatile-ttl: 移除那些TTL值最小的key，也就是最近要过期的key\n\nnoeviction: 永不过期，不进行移除，针对写操作，直返回错误信息\n\n\n- maxmemory-samples\n\n\n## APPEND ONLY MODE追加\n","slug":"redis/01-config","published":1,"updated":"2020-12-25T13:02:18.728Z","_id":"ckj4abdoi0008r0sc25xe044v","comments":1,"layout":"post","photos":[],"link":"","content":"<p>redis-config常用点介绍<br><a id=\"more\"></a></p>\n<blockquote>\n<p>参考文档:<a href=\"http://redisdoc.com/\">http://redisdoc.com/</a></p>\n</blockquote>\n<ol>\n<li><p>是否以守护进程方式运行，redis默认不是守护进程方式运行，可以修改该配置项来使用守护进程方式运行<br>daemonizo:yes</p>\n</li>\n<li><p>pidfile 指定守护进程方式的写入文件<br>当redis以守护进程方式运行时，redis默认会吧pid写入/var/run/redis.pid文件，可以通过pidfile指定 pidfile /var/run/redis.pid</p>\n</li>\n<li><p>指定redis端口<br>配置文件里面找port，默认是6379 </p>\n</li>\n<li><p>bind 绑定的主机ip</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">bind 127.0.0.1\n</code></pre>\n</li>\n<li><p>timeout<br>超时时间,默认为0 表示关闭该功能</p>\n</li>\n<li><p>loglevel </p>\n<pre class=\" language-bash\"><code class=\"language-bash\">设置日志级别 debug verbose notice warning  \nsyslog-enabled:是否将日志输出到系统日志syslog里头    \nsyslog-indent: 指定syslog里的日志标志\nsyslog-facility： 指定syslog设备，值可以是USER或者LOCAL0-LOCAL7\n</code></pre>\n</li>\n<li><p>日志记录方式，默认为标志输出，如果配置redis为守护进程方式运行，而这里又配置日志记录方式为标准输出，则日志将会发送给/dev/nulll<br>logfile stdout</p>\n</li>\n<li><p>databases 数据库数量</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">databases 16\n</code></pre>\n</li>\n<li><p>指定多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件适配</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">save <span class=\"token operator\">&lt;</span>seconds<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>changes<span class=\"token operator\">></span>\n<span class=\"token comment\" spellcheck=\"true\"># redis 默认配置文件提供了三个条件</span>\n<span class=\"token comment\" spellcheck=\"true\"># save 900 1 # 900秒内有一个更改</span>\n<span class=\"token comment\" spellcheck=\"true\"># save 300 10 # 300秒内有10个更改</span>\n<span class=\"token comment\" spellcheck=\"true\"># save 60 10000 # 60秒内有10000个更改</span>\n</code></pre>\n</li>\n<li><p>指定存储至本地数据库时是否压缩数据，默认为yes，redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，单会大致数据库文件变得巨大</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">rdbcompression <span class=\"token function\">yes</span>\n</code></pre>\n</li>\n<li><p>指定本地数据库文件名，默认为dump.rdb</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">dbfilename dump.rdb\n</code></pre>\n</li>\n<li><p>指定本地数据库存放目录</p>\n<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token function\">dir</span> ./\n</code></pre>\n</li>\n<li><p>设置当本机为slav服务是，设置master服务的ip地址及端口，在redis启动时，他会自动从master进行数据同步</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">slaveof <span class=\"token operator\">&lt;</span>masterip<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>masterport<span class=\"token operator\">></span>\n</code></pre>\n</li>\n<li><p>当master服务设置了密码保护时，slav服务连接master的密码</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">masterauth <span class=\"token operator\">&lt;</span>master-password<span class=\"token operator\">></span>\n</code></pre>\n</li>\n<li><p>设置redis连接密码，如果设置了密码，客户端在连接的时候需要通过 auth <password> 提供密码，默认为关闭</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">requirepass Abcd1234\n</code></pre>\n</li>\n<li><p>设置同一时间最大客户端连接数，默认无限制，redis可以同时打开的客户端连接数为redis经常可以打开的最大文件描述符数，如果设置maxclients 0,表示不作限值。当客户端连接数达到限制时，redis会关闭新的连接并向客户端返回 max number of clients reached错误信息</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">maxclients 128\n</code></pre>\n</li>\n<li><p>指定redis最大内存限制，redis在启动时会把数据加载到内存中，达到最大内存后，redis会尝试清除已到期或即将到期的key，当次方法处理后，仍然达到最大内存设置，将无法进行写入操作，但仍可以读，redis新的vm机制，会把key存放内存，value存放在swap区</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">maxmemory <span class=\"token operator\">&lt;</span>bytes<span class=\"token operator\">></span>\n</code></pre>\n</li>\n<li><p>指定是否每次更新操作后进行日志记录，redis在默认情况下是异步吧数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失，因为redis本身同步数据文件是按上面save条件来同步的，所有的数据会在一段时间内只存在于内存中。默认为 no</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">appendonly no\n</code></pre>\n</li>\n<li><p>指定更新日志文件名，默认为appendonly.aof</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">appendfilename  appendonly.aof\n</code></pre>\n</li>\n<li><p>指定更新日志条件，共有3个可选值<br>no: 表示等操作系统镜像数据缓存同步到磁盘(块)<br>always: 表示每次更新操作后手动调用fsync()将数据写到磁盘(慢，安全)<br>everysec:表示每秒同步一次(折中，默认值)</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">appendfsync everysec\n</code></pre>\n</li>\n<li><p>指定是否启用虚拟内存机制，默认为no，简单的介绍下，VM机制将数据分页存放，有redis将访问量较少的页即冷水机swap到磁盘上，访问多的页由磁盘自动换出到内存中</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">vm-enabled no\n</code></pre>\n</li>\n<li><p>虚拟内存文件路径，默认值为/temp/redis.swap，不可多个redis实例共享</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">vm-swap-file /tmp/redis.swap\n</code></pre>\n</li>\n<li><p>将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多小，所有索引数据都是内存存储的(redis的所有数据就是keys)，也就是说 当vm-max-memory设置为0的时候，其实就是所有的value都存在于磁盘。默认值为0</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">vm-max-memory 0\n</code></pre>\n</li>\n<li><p>redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但是一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的，建议如果存储很多小对象，page大小最好设置为32或者64bytes；如果存储很大对象，可以使用更大的page，如果不确定，就是用默认值</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">vm-max-size 32\n</code></pre>\n</li>\n<li><p>设置swap文件中的page数量，由于页表(一种表示页面空闲或使用bitmap)是放在内存中的，在磁盘上每8个pages将消耗1bytes内存。</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">vm-pages 1342177289\n</code></pre>\n</li>\n<li><p>设置访问swap文件的线程数，最好不要超过机器的核数，如果设置为0，那么对所有swap文件的操作都是串行的，可能会造成比较长的延迟，美容是4</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">vm-max-thread:4\n</code></pre>\n</li>\n<li><p>设置在想客户端应答时，是否吧较小的包合并为一个包发送，默认为开启</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">glueoutputbuf <span class=\"token function\">yes</span>\n</code></pre>\n</li>\n<li><p>指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法</p>\n<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token comment\" spellcheck=\"true\"># hash-max-zipmap-entries 64</span>\n<span class=\"token comment\" spellcheck=\"true\"># has-max-zipmap-value 512</span>\n</code></pre>\n</li>\n<li><p>指定是否激活重置哈希，默认为开启</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">activerehashing <span class=\"token function\">yes</span>\n</code></pre>\n</li>\n<li><p>指定包含其他的配置文件，可以在同一主机上多个redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">include /path/to/local.conf\n</code></pre>\n</li>\n</ol>\n<h2 id=\"SNAPSHOTTING快照\"><a href=\"#SNAPSHOTTING快照\" class=\"headerlink\" title=\"SNAPSHOTTING快照\"></a>SNAPSHOTTING快照</h2><h2 id=\"REPLICATION复制\"><a href=\"#REPLICATION复制\" class=\"headerlink\" title=\"REPLICATION复制\"></a>REPLICATION复制</h2><h2 id=\"SECURITY安全\"><a href=\"#SECURITY安全\" class=\"headerlink\" title=\"SECURITY安全\"></a>SECURITY安全</h2><ul>\n<li>requirepass节点<br>config get requirepass<br>config set requirepass [v]</li>\n</ul>\n<h2 id=\"LIMITS限值\"><a href=\"#LIMITS限值\" class=\"headerlink\" title=\"LIMITS限值\"></a>LIMITS限值</h2><ul>\n<li><p>maxclients :最大连接数</p>\n</li>\n<li><p>maxmemory :最大内存</p>\n</li>\n<li><p>maxmemory-policy : 默认为noeviction<br>volatile-lru: 使用LRU算法移除key，只对设置了过期时间的键</p>\n</li>\n</ul>\n<p>allkeys-lru:使用LRU算法移除key</p>\n<p>volatile-random:在过期集合中随机移除，值对设置了过期时间的键有效</p>\n<p>allkeys-random: 随机移除key</p>\n<p>volatile-ttl: 移除那些TTL值最小的key，也就是最近要过期的key</p>\n<p>noeviction: 永不过期，不进行移除，针对写操作，直返回错误信息</p>\n<ul>\n<li>maxmemory-samples</li>\n</ul>\n<h2 id=\"APPEND-ONLY-MODE追加\"><a href=\"#APPEND-ONLY-MODE追加\" class=\"headerlink\" title=\"APPEND ONLY MODE追加\"></a>APPEND ONLY MODE追加</h2>","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>redis-config常用点介绍<br>","more":"</p>\n<blockquote>\n<p>参考文档:<a href=\"http://redisdoc.com/\">http://redisdoc.com/</a></p>\n</blockquote>\n<ol>\n<li><p>是否以守护进程方式运行，redis默认不是守护进程方式运行，可以修改该配置项来使用守护进程方式运行<br>daemonizo:yes</p>\n</li>\n<li><p>pidfile 指定守护进程方式的写入文件<br>当redis以守护进程方式运行时，redis默认会吧pid写入/var/run/redis.pid文件，可以通过pidfile指定 pidfile /var/run/redis.pid</p>\n</li>\n<li><p>指定redis端口<br>配置文件里面找port，默认是6379 </p>\n</li>\n<li><p>bind 绑定的主机ip</p>\n<pre><code class=\"bash\">bind 127.0.0.1\n</code></pre>\n</li>\n<li><p>timeout<br>超时时间,默认为0 表示关闭该功能</p>\n</li>\n<li><p>loglevel </p>\n<pre><code class=\"bash\">设置日志级别 debug verbose notice warning  \nsyslog-enabled:是否将日志输出到系统日志syslog里头    \nsyslog-indent: 指定syslog里的日志标志\nsyslog-facility： 指定syslog设备，值可以是USER或者LOCAL0-LOCAL7\n</code></pre>\n</li>\n<li><p>日志记录方式，默认为标志输出，如果配置redis为守护进程方式运行，而这里又配置日志记录方式为标准输出，则日志将会发送给/dev/nulll<br>logfile stdout</p>\n</li>\n<li><p>databases 数据库数量</p>\n<pre><code class=\"bash\">databases 16\n</code></pre>\n</li>\n<li><p>指定多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件适配</p>\n<pre><code class=\"bash\">save &lt;seconds&gt; &lt;changes&gt;\n# redis 默认配置文件提供了三个条件\n# save 900 1 # 900秒内有一个更改\n# save 300 10 # 300秒内有10个更改\n# save 60 10000 # 60秒内有10000个更改\n</code></pre>\n</li>\n<li><p>指定存储至本地数据库时是否压缩数据，默认为yes，redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，单会大致数据库文件变得巨大</p>\n<pre><code class=\"bash\">rdbcompression yes\n</code></pre>\n</li>\n<li><p>指定本地数据库文件名，默认为dump.rdb</p>\n<pre><code class=\"bash\">dbfilename dump.rdb\n</code></pre>\n</li>\n<li><p>指定本地数据库存放目录</p>\n<pre><code class=\"bash\">dir ./\n</code></pre>\n</li>\n<li><p>设置当本机为slav服务是，设置master服务的ip地址及端口，在redis启动时，他会自动从master进行数据同步</p>\n<pre><code class=\"bash\">slaveof &lt;masterip&gt; &lt;masterport&gt;\n</code></pre>\n</li>\n<li><p>当master服务设置了密码保护时，slav服务连接master的密码</p>\n<pre><code class=\"bash\">masterauth &lt;master-password&gt;\n</code></pre>\n</li>\n<li><p>设置redis连接密码，如果设置了密码，客户端在连接的时候需要通过 auth <password> 提供密码，默认为关闭</p>\n<pre><code class=\"bash\">requirepass Abcd1234\n</code></pre>\n</li>\n<li><p>设置同一时间最大客户端连接数，默认无限制，redis可以同时打开的客户端连接数为redis经常可以打开的最大文件描述符数，如果设置maxclients 0,表示不作限值。当客户端连接数达到限制时，redis会关闭新的连接并向客户端返回 max number of clients reached错误信息</p>\n<pre><code class=\"bash\">maxclients 128\n</code></pre>\n</li>\n<li><p>指定redis最大内存限制，redis在启动时会把数据加载到内存中，达到最大内存后，redis会尝试清除已到期或即将到期的key，当次方法处理后，仍然达到最大内存设置，将无法进行写入操作，但仍可以读，redis新的vm机制，会把key存放内存，value存放在swap区</p>\n<pre><code class=\"bash\">maxmemory &lt;bytes&gt;\n</code></pre>\n</li>\n<li><p>指定是否每次更新操作后进行日志记录，redis在默认情况下是异步吧数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失，因为redis本身同步数据文件是按上面save条件来同步的，所有的数据会在一段时间内只存在于内存中。默认为 no</p>\n<pre><code class=\"bash\">appendonly no\n</code></pre>\n</li>\n<li><p>指定更新日志文件名，默认为appendonly.aof</p>\n<pre><code class=\"bash\">appendfilename  appendonly.aof\n</code></pre>\n</li>\n<li><p>指定更新日志条件，共有3个可选值<br>no: 表示等操作系统镜像数据缓存同步到磁盘(块)<br>always: 表示每次更新操作后手动调用fsync()将数据写到磁盘(慢，安全)<br>everysec:表示每秒同步一次(折中，默认值)</p>\n<pre><code class=\"bash\">appendfsync everysec\n</code></pre>\n</li>\n<li><p>指定是否启用虚拟内存机制，默认为no，简单的介绍下，VM机制将数据分页存放，有redis将访问量较少的页即冷水机swap到磁盘上，访问多的页由磁盘自动换出到内存中</p>\n<pre><code class=\"bash\">vm-enabled no\n</code></pre>\n</li>\n<li><p>虚拟内存文件路径，默认值为/temp/redis.swap，不可多个redis实例共享</p>\n<pre><code class=\"bash\">vm-swap-file /tmp/redis.swap\n</code></pre>\n</li>\n<li><p>将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多小，所有索引数据都是内存存储的(redis的所有数据就是keys)，也就是说 当vm-max-memory设置为0的时候，其实就是所有的value都存在于磁盘。默认值为0</p>\n<pre><code class=\"bash\">vm-max-memory 0\n</code></pre>\n</li>\n<li><p>redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但是一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的，建议如果存储很多小对象，page大小最好设置为32或者64bytes；如果存储很大对象，可以使用更大的page，如果不确定，就是用默认值</p>\n<pre><code class=\"bash\">vm-max-size 32\n</code></pre>\n</li>\n<li><p>设置swap文件中的page数量，由于页表(一种表示页面空闲或使用bitmap)是放在内存中的，在磁盘上每8个pages将消耗1bytes内存。</p>\n<pre><code class=\"bash\">vm-pages 1342177289\n</code></pre>\n</li>\n<li><p>设置访问swap文件的线程数，最好不要超过机器的核数，如果设置为0，那么对所有swap文件的操作都是串行的，可能会造成比较长的延迟，美容是4</p>\n<pre><code class=\"bash\">vm-max-thread:4\n</code></pre>\n</li>\n<li><p>设置在想客户端应答时，是否吧较小的包合并为一个包发送，默认为开启</p>\n<pre><code class=\"bash\">glueoutputbuf yes\n</code></pre>\n</li>\n<li><p>指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法</p>\n<pre><code class=\"bash\"># hash-max-zipmap-entries 64\n# has-max-zipmap-value 512\n</code></pre>\n</li>\n<li><p>指定是否激活重置哈希，默认为开启</p>\n<pre><code class=\"bash\">activerehashing yes\n</code></pre>\n</li>\n<li><p>指定包含其他的配置文件，可以在同一主机上多个redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件</p>\n<pre><code class=\"bash\">include /path/to/local.conf\n</code></pre>\n</li>\n</ol>\n<h2 id=\"SNAPSHOTTING快照\"><a href=\"#SNAPSHOTTING快照\" class=\"headerlink\" title=\"SNAPSHOTTING快照\"></a>SNAPSHOTTING快照</h2><h2 id=\"REPLICATION复制\"><a href=\"#REPLICATION复制\" class=\"headerlink\" title=\"REPLICATION复制\"></a>REPLICATION复制</h2><h2 id=\"SECURITY安全\"><a href=\"#SECURITY安全\" class=\"headerlink\" title=\"SECURITY安全\"></a>SECURITY安全</h2><ul>\n<li>requirepass节点<br>config get requirepass<br>config set requirepass [v]</li>\n</ul>\n<h2 id=\"LIMITS限值\"><a href=\"#LIMITS限值\" class=\"headerlink\" title=\"LIMITS限值\"></a>LIMITS限值</h2><ul>\n<li><p>maxclients :最大连接数</p>\n</li>\n<li><p>maxmemory :最大内存</p>\n</li>\n<li><p>maxmemory-policy : 默认为noeviction<br>volatile-lru: 使用LRU算法移除key，只对设置了过期时间的键</p>\n</li>\n</ul>\n<p>allkeys-lru:使用LRU算法移除key</p>\n<p>volatile-random:在过期集合中随机移除，值对设置了过期时间的键有效</p>\n<p>allkeys-random: 随机移除key</p>\n<p>volatile-ttl: 移除那些TTL值最小的key，也就是最近要过期的key</p>\n<p>noeviction: 永不过期，不进行移除，针对写操作，直返回错误信息</p>\n<ul>\n<li>maxmemory-samples</li>\n</ul>\n<h2 id=\"APPEND-ONLY-MODE追加\"><a href=\"#APPEND-ONLY-MODE追加\" class=\"headerlink\" title=\"APPEND ONLY MODE追加\"></a>APPEND ONLY MODE追加</h2>"},{"title":"redis-cli基础","abbrlink":21149,"date":"2018-12-02T01:10:10.000Z","_content":"\nredis-cli基础\n<!-- more -->\n\n- 参考文档:http://redisdoc.com/\n\n\n| 命令 | 说明 | 参数说明 | 案例\n| :--- | :--- | :--- | :--- \n|redis-cli -h [host] -p [port] -a [password]| 通过redis-cli连接redis | host:地址<br>port:端口号,默认为6379<br> password:密码 | redis-cli -h localhost -p 7379 -a test\n| ping | 测试是否通 | 如果返回pong，表示通了 | \n| FLUSHALL | 清空所有db |  | \n| FLUSHDB | 清空当前db |  | \n| select [index] | 切换到第几个db | index：从0开始的db下标 | select 0\n| DBSIZE | 显示当前db中的key个数  |  | \n| keys [pattern] | 显示当前db中的所有key | pattern：匹配符(如：？) |  keys *\n| get [key] | 查询指定key的值 | key:键名  |  get name\n| del [key] | 删除指定key的值 | key:键名  |  del name\n| EXISTS [key] | 判断是否存在指定的key  | key:键名 |  EXISTS name\n| move [key] [db] | 移动指定的key到指定的db |key:键名<br> db:db下标  | \n| ttl [key] | 查看过期时间  | key:键名,返回值(-1:永不过期 -2:已过期，会移除) |  ttl name\n| EXPIRE [key] [time] | 设置带过期时间的键值 | key:键名<br>time:过期时间(秒)<br>| EXPIRE name 10\n| type [key]| 查看指定key的数据类型 | key:键名| \n\n# String\n- append [key]:追加   \n\n- STRLEN [key]:字符串长度\n\n- INCR [key]:数值增加 \n\n- INCRBY [key] v:数值增加v\n\n- DECR [key] :数值减少\n\n- DECRBY [key] v:数值减少v\n\n- GETRANGE [key] [start] [end]:字符串截取\n\n- SETRANGE [key] [start] [end]:字符串截取\n\n- setnx [key] [v]: 如果不存在才设置\n\n- msetnx [key] [...v] : 设置多个\n\n# List\n- LPUSH [key] [...v] :依次往左边插入多个\n\n- RPUSH [key] [...v] :依次往右边插入多个\n\n- LRANGE [key] [start] [end] :列出多个\n\n- lpop [key] :删除第一个\n\n- rpop [key] :删除第一个\n\n- LINDEX [key] [index] :查看指定下标的值\n\n- LLEN [key] :查看list长度\n\n- LREM [key] [count] [v]:删除指定列表中指定的count个v\n\n- LTRIM [key] [start] [end]: 从start开始删除到end为止\n\n- rpoplpush [source] [destination]: 移除source的最后一项 并插入到destination的第一项\n\n- lset [key] [index] [value] : 用value替换指定下标的值\n\n- linsert [key] [before/after] [value1] [value2]: 在value1前/后插入value2\n\n# Set\n- SMEMBERS [key] :查看set中数据集合\n\n- sadd [key] [...v]:添加多个值，去重复的\n\n- scard [key] :查看元素中的数量\n\n- SREM [key] [v] :删除指定集合中的指定的值\n\n- srandmember [key] [count]: 随机生成count个整数\n\n- spop [key]:随机删除一个\n\n- smove [key1] [key2] [v] :将set集合key1中的v移到key2中\n\n- sdiff [key1] [key2]: 查询key1中有，key2中没有的\n\n- sinter [key1] [key2]: 查询两个中都有的\n\n- sunion [key1] [key2]：查询两个的去重后的合并集合\n\n# Hash => K/V模式不变，V是一个键值对\n\n- hget [key] [vKey]:查询key中v的值\n\n- hmget [key] [...vKey]: 一次查询多个\n\n- hset [key] [vKey] [value]：设置key中v的值为value,例:hset user id 1\n\n- hmset [key] [...[vKey] [value]]: 一次设置多个，例:hmset user name xxg age 28 id\n\n- HGETALL [key] :查询key中所有的键值对，得到数组['属性','值']形式\n\n- hdel [key] [...vKey] :删除多个指定的vKey\n\n- hlen [key] :查询指定key中的数量\n\n- hexists [key] [vKey]:判断key里面是否存在某个值的key\n\n- HKEYS [key] : 查看指定key中所有的值的key\n\n- hvals [key] : 查看指定key中所有的值\n\n- HINCRYBY/HINCRYBYFLOAT [key] [vKey] [v] :给指定key增加指定的整数/小数\n\n- hsetnx [key] [vKey] [value]：设置值，如果不存在\n\n# Zset \n\n卧槽，实在不想写了，参考: http://redisdoc.com/sorted_set/index.html","source":"_posts/redis/02-cmd.md","raw":"---\ntitle: redis-cli基础\ncategories:\n  - redis\ntags:\n  - redis\nabbrlink: 21149\ndate: 2018-12-02 09:10:10\n---\n\nredis-cli基础\n<!-- more -->\n\n- 参考文档:http://redisdoc.com/\n\n\n| 命令 | 说明 | 参数说明 | 案例\n| :--- | :--- | :--- | :--- \n|redis-cli -h [host] -p [port] -a [password]| 通过redis-cli连接redis | host:地址<br>port:端口号,默认为6379<br> password:密码 | redis-cli -h localhost -p 7379 -a test\n| ping | 测试是否通 | 如果返回pong，表示通了 | \n| FLUSHALL | 清空所有db |  | \n| FLUSHDB | 清空当前db |  | \n| select [index] | 切换到第几个db | index：从0开始的db下标 | select 0\n| DBSIZE | 显示当前db中的key个数  |  | \n| keys [pattern] | 显示当前db中的所有key | pattern：匹配符(如：？) |  keys *\n| get [key] | 查询指定key的值 | key:键名  |  get name\n| del [key] | 删除指定key的值 | key:键名  |  del name\n| EXISTS [key] | 判断是否存在指定的key  | key:键名 |  EXISTS name\n| move [key] [db] | 移动指定的key到指定的db |key:键名<br> db:db下标  | \n| ttl [key] | 查看过期时间  | key:键名,返回值(-1:永不过期 -2:已过期，会移除) |  ttl name\n| EXPIRE [key] [time] | 设置带过期时间的键值 | key:键名<br>time:过期时间(秒)<br>| EXPIRE name 10\n| type [key]| 查看指定key的数据类型 | key:键名| \n\n# String\n- append [key]:追加   \n\n- STRLEN [key]:字符串长度\n\n- INCR [key]:数值增加 \n\n- INCRBY [key] v:数值增加v\n\n- DECR [key] :数值减少\n\n- DECRBY [key] v:数值减少v\n\n- GETRANGE [key] [start] [end]:字符串截取\n\n- SETRANGE [key] [start] [end]:字符串截取\n\n- setnx [key] [v]: 如果不存在才设置\n\n- msetnx [key] [...v] : 设置多个\n\n# List\n- LPUSH [key] [...v] :依次往左边插入多个\n\n- RPUSH [key] [...v] :依次往右边插入多个\n\n- LRANGE [key] [start] [end] :列出多个\n\n- lpop [key] :删除第一个\n\n- rpop [key] :删除第一个\n\n- LINDEX [key] [index] :查看指定下标的值\n\n- LLEN [key] :查看list长度\n\n- LREM [key] [count] [v]:删除指定列表中指定的count个v\n\n- LTRIM [key] [start] [end]: 从start开始删除到end为止\n\n- rpoplpush [source] [destination]: 移除source的最后一项 并插入到destination的第一项\n\n- lset [key] [index] [value] : 用value替换指定下标的值\n\n- linsert [key] [before/after] [value1] [value2]: 在value1前/后插入value2\n\n# Set\n- SMEMBERS [key] :查看set中数据集合\n\n- sadd [key] [...v]:添加多个值，去重复的\n\n- scard [key] :查看元素中的数量\n\n- SREM [key] [v] :删除指定集合中的指定的值\n\n- srandmember [key] [count]: 随机生成count个整数\n\n- spop [key]:随机删除一个\n\n- smove [key1] [key2] [v] :将set集合key1中的v移到key2中\n\n- sdiff [key1] [key2]: 查询key1中有，key2中没有的\n\n- sinter [key1] [key2]: 查询两个中都有的\n\n- sunion [key1] [key2]：查询两个的去重后的合并集合\n\n# Hash => K/V模式不变，V是一个键值对\n\n- hget [key] [vKey]:查询key中v的值\n\n- hmget [key] [...vKey]: 一次查询多个\n\n- hset [key] [vKey] [value]：设置key中v的值为value,例:hset user id 1\n\n- hmset [key] [...[vKey] [value]]: 一次设置多个，例:hmset user name xxg age 28 id\n\n- HGETALL [key] :查询key中所有的键值对，得到数组['属性','值']形式\n\n- hdel [key] [...vKey] :删除多个指定的vKey\n\n- hlen [key] :查询指定key中的数量\n\n- hexists [key] [vKey]:判断key里面是否存在某个值的key\n\n- HKEYS [key] : 查看指定key中所有的值的key\n\n- hvals [key] : 查看指定key中所有的值\n\n- HINCRYBY/HINCRYBYFLOAT [key] [vKey] [v] :给指定key增加指定的整数/小数\n\n- hsetnx [key] [vKey] [value]：设置值，如果不存在\n\n# Zset \n\n卧槽，实在不想写了，参考: http://redisdoc.com/sorted_set/index.html","slug":"redis/02-cmd","published":1,"updated":"2020-12-25T13:02:18.747Z","_id":"ckj4abdoj000ar0sc3zxzh6dh","comments":1,"layout":"post","photos":[],"link":"","content":"<p>redis-cli基础<br><a id=\"more\"></a></p>\n<ul>\n<li>参考文档:<a href=\"http://redisdoc.com/\">http://redisdoc.com/</a></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">参数说明</th>\n<th style=\"text-align:left\">案例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">redis-cli -h [host] -p [port] -a [password]</td>\n<td style=\"text-align:left\">通过redis-cli连接redis</td>\n<td style=\"text-align:left\">host:地址<br>port:端口号,默认为6379<br> password:密码</td>\n<td style=\"text-align:left\">redis-cli -h localhost -p 7379 -a test</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ping</td>\n<td style=\"text-align:left\">测试是否通</td>\n<td style=\"text-align:left\">如果返回pong，表示通了</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">FLUSHALL</td>\n<td style=\"text-align:left\">清空所有db</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">FLUSHDB</td>\n<td style=\"text-align:left\">清空当前db</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">select [index]</td>\n<td style=\"text-align:left\">切换到第几个db</td>\n<td style=\"text-align:left\">index：从0开始的db下标</td>\n<td style=\"text-align:left\">select 0</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">DBSIZE</td>\n<td style=\"text-align:left\">显示当前db中的key个数</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">keys [pattern]</td>\n<td style=\"text-align:left\">显示当前db中的所有key</td>\n<td style=\"text-align:left\">pattern：匹配符(如：？)</td>\n<td style=\"text-align:left\">keys *</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">get [key]</td>\n<td style=\"text-align:left\">查询指定key的值</td>\n<td style=\"text-align:left\">key:键名</td>\n<td style=\"text-align:left\">get name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">del [key]</td>\n<td style=\"text-align:left\">删除指定key的值</td>\n<td style=\"text-align:left\">key:键名</td>\n<td style=\"text-align:left\">del name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXISTS [key]</td>\n<td style=\"text-align:left\">判断是否存在指定的key</td>\n<td style=\"text-align:left\">key:键名</td>\n<td style=\"text-align:left\">EXISTS name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">move [key] [db]</td>\n<td style=\"text-align:left\">移动指定的key到指定的db</td>\n<td style=\"text-align:left\">key:键名<br> db:db下标</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ttl [key]</td>\n<td style=\"text-align:left\">查看过期时间</td>\n<td style=\"text-align:left\">key:键名,返回值(-1:永不过期 -2:已过期，会移除)</td>\n<td style=\"text-align:left\">ttl name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXPIRE [key] [time]</td>\n<td style=\"text-align:left\">设置带过期时间的键值</td>\n<td style=\"text-align:left\">key:键名<br>time:过期时间(秒)<br></td>\n<td style=\"text-align:left\">EXPIRE name 10</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">type [key]</td>\n<td style=\"text-align:left\">查看指定key的数据类型</td>\n<td style=\"text-align:left\">key:键名</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h1><ul>\n<li><p>append [key]:追加   </p>\n</li>\n<li><p>STRLEN [key]:字符串长度</p>\n</li>\n<li><p>INCR [key]:数值增加 </p>\n</li>\n<li><p>INCRBY [key] v:数值增加v</p>\n</li>\n<li><p>DECR [key] :数值减少</p>\n</li>\n<li><p>DECRBY [key] v:数值减少v</p>\n</li>\n<li><p>GETRANGE [key] [start] [end]:字符串截取</p>\n</li>\n<li><p>SETRANGE [key] [start] [end]:字符串截取</p>\n</li>\n<li><p>setnx [key] [v]: 如果不存在才设置</p>\n</li>\n<li><p>msetnx [key] […v] : 设置多个</p>\n</li>\n</ul>\n<h1 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h1><ul>\n<li><p>LPUSH [key] […v] :依次往左边插入多个</p>\n</li>\n<li><p>RPUSH [key] […v] :依次往右边插入多个</p>\n</li>\n<li><p>LRANGE [key] [start] [end] :列出多个</p>\n</li>\n<li><p>lpop [key] :删除第一个</p>\n</li>\n<li><p>rpop [key] :删除第一个</p>\n</li>\n<li><p>LINDEX [key] [index] :查看指定下标的值</p>\n</li>\n<li><p>LLEN [key] :查看list长度</p>\n</li>\n<li><p>LREM [key] [count] [v]:删除指定列表中指定的count个v</p>\n</li>\n<li><p>LTRIM [key] [start] [end]: 从start开始删除到end为止</p>\n</li>\n<li><p>rpoplpush [source] [destination]: 移除source的最后一项 并插入到destination的第一项</p>\n</li>\n<li><p>lset [key] [index] [value] : 用value替换指定下标的值</p>\n</li>\n<li><p>linsert [key] [before/after] [value1] [value2]: 在value1前/后插入value2</p>\n</li>\n</ul>\n<h1 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h1><ul>\n<li><p>SMEMBERS [key] :查看set中数据集合</p>\n</li>\n<li><p>sadd [key] […v]:添加多个值，去重复的</p>\n</li>\n<li><p>scard [key] :查看元素中的数量</p>\n</li>\n<li><p>SREM [key] [v] :删除指定集合中的指定的值</p>\n</li>\n<li><p>srandmember [key] [count]: 随机生成count个整数</p>\n</li>\n<li><p>spop [key]:随机删除一个</p>\n</li>\n<li><p>smove [key1] [key2] [v] :将set集合key1中的v移到key2中</p>\n</li>\n<li><p>sdiff [key1] [key2]: 查询key1中有，key2中没有的</p>\n</li>\n<li><p>sinter [key1] [key2]: 查询两个中都有的</p>\n</li>\n<li><p>sunion [key1] [key2]：查询两个的去重后的合并集合</p>\n</li>\n</ul>\n<h1 id=\"Hash-gt-K-V模式不变，V是一个键值对\"><a href=\"#Hash-gt-K-V模式不变，V是一个键值对\" class=\"headerlink\" title=\"Hash =&gt; K/V模式不变，V是一个键值对\"></a>Hash =&gt; K/V模式不变，V是一个键值对</h1><ul>\n<li><p>hget [key] [vKey]:查询key中v的值</p>\n</li>\n<li><p>hmget [key] […vKey]: 一次查询多个</p>\n</li>\n<li><p>hset [key] [vKey] [value]：设置key中v的值为value,例:hset user id 1</p>\n</li>\n<li><p>hmset [key] […[vKey] [value]]: 一次设置多个，例:hmset user name xxg age 28 id</p>\n</li>\n<li><p>HGETALL [key] :查询key中所有的键值对，得到数组[‘属性’,’值’]形式</p>\n</li>\n<li><p>hdel [key] […vKey] :删除多个指定的vKey</p>\n</li>\n<li><p>hlen [key] :查询指定key中的数量</p>\n</li>\n<li><p>hexists [key] [vKey]:判断key里面是否存在某个值的key</p>\n</li>\n<li><p>HKEYS [key] : 查看指定key中所有的值的key</p>\n</li>\n<li><p>hvals [key] : 查看指定key中所有的值</p>\n</li>\n<li><p>HINCRYBY/HINCRYBYFLOAT [key] [vKey] [v] :给指定key增加指定的整数/小数</p>\n</li>\n<li><p>hsetnx [key] [vKey] [value]：设置值，如果不存在</p>\n</li>\n</ul>\n<h1 id=\"Zset\"><a href=\"#Zset\" class=\"headerlink\" title=\"Zset\"></a>Zset</h1><p>卧槽，实在不想写了，参考: <a href=\"http://redisdoc.com/sorted_set/index.html\">http://redisdoc.com/sorted_set/index.html</a></p>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>redis-cli基础<br>","more":"</p>\n<ul>\n<li>参考文档:<a href=\"http://redisdoc.com/\">http://redisdoc.com/</a></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">命令</th>\n<th style=\"text-align:left\">说明</th>\n<th style=\"text-align:left\">参数说明</th>\n<th style=\"text-align:left\">案例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">redis-cli -h [host] -p [port] -a [password]</td>\n<td style=\"text-align:left\">通过redis-cli连接redis</td>\n<td style=\"text-align:left\">host:地址<br>port:端口号,默认为6379<br> password:密码</td>\n<td style=\"text-align:left\">redis-cli -h localhost -p 7379 -a test</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ping</td>\n<td style=\"text-align:left\">测试是否通</td>\n<td style=\"text-align:left\">如果返回pong，表示通了</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">FLUSHALL</td>\n<td style=\"text-align:left\">清空所有db</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">FLUSHDB</td>\n<td style=\"text-align:left\">清空当前db</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">select [index]</td>\n<td style=\"text-align:left\">切换到第几个db</td>\n<td style=\"text-align:left\">index：从0开始的db下标</td>\n<td style=\"text-align:left\">select 0</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">DBSIZE</td>\n<td style=\"text-align:left\">显示当前db中的key个数</td>\n<td style=\"text-align:left\"></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">keys [pattern]</td>\n<td style=\"text-align:left\">显示当前db中的所有key</td>\n<td style=\"text-align:left\">pattern：匹配符(如：？)</td>\n<td style=\"text-align:left\">keys *</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">get [key]</td>\n<td style=\"text-align:left\">查询指定key的值</td>\n<td style=\"text-align:left\">key:键名</td>\n<td style=\"text-align:left\">get name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">del [key]</td>\n<td style=\"text-align:left\">删除指定key的值</td>\n<td style=\"text-align:left\">key:键名</td>\n<td style=\"text-align:left\">del name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXISTS [key]</td>\n<td style=\"text-align:left\">判断是否存在指定的key</td>\n<td style=\"text-align:left\">key:键名</td>\n<td style=\"text-align:left\">EXISTS name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">move [key] [db]</td>\n<td style=\"text-align:left\">移动指定的key到指定的db</td>\n<td style=\"text-align:left\">key:键名<br> db:db下标</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ttl [key]</td>\n<td style=\"text-align:left\">查看过期时间</td>\n<td style=\"text-align:left\">key:键名,返回值(-1:永不过期 -2:已过期，会移除)</td>\n<td style=\"text-align:left\">ttl name</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXPIRE [key] [time]</td>\n<td style=\"text-align:left\">设置带过期时间的键值</td>\n<td style=\"text-align:left\">key:键名<br>time:过期时间(秒)<br></td>\n<td style=\"text-align:left\">EXPIRE name 10</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">type [key]</td>\n<td style=\"text-align:left\">查看指定key的数据类型</td>\n<td style=\"text-align:left\">key:键名</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h1><ul>\n<li><p>append [key]:追加   </p>\n</li>\n<li><p>STRLEN [key]:字符串长度</p>\n</li>\n<li><p>INCR [key]:数值增加 </p>\n</li>\n<li><p>INCRBY [key] v:数值增加v</p>\n</li>\n<li><p>DECR [key] :数值减少</p>\n</li>\n<li><p>DECRBY [key] v:数值减少v</p>\n</li>\n<li><p>GETRANGE [key] [start] [end]:字符串截取</p>\n</li>\n<li><p>SETRANGE [key] [start] [end]:字符串截取</p>\n</li>\n<li><p>setnx [key] [v]: 如果不存在才设置</p>\n</li>\n<li><p>msetnx [key] […v] : 设置多个</p>\n</li>\n</ul>\n<h1 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h1><ul>\n<li><p>LPUSH [key] […v] :依次往左边插入多个</p>\n</li>\n<li><p>RPUSH [key] […v] :依次往右边插入多个</p>\n</li>\n<li><p>LRANGE [key] [start] [end] :列出多个</p>\n</li>\n<li><p>lpop [key] :删除第一个</p>\n</li>\n<li><p>rpop [key] :删除第一个</p>\n</li>\n<li><p>LINDEX [key] [index] :查看指定下标的值</p>\n</li>\n<li><p>LLEN [key] :查看list长度</p>\n</li>\n<li><p>LREM [key] [count] [v]:删除指定列表中指定的count个v</p>\n</li>\n<li><p>LTRIM [key] [start] [end]: 从start开始删除到end为止</p>\n</li>\n<li><p>rpoplpush [source] [destination]: 移除source的最后一项 并插入到destination的第一项</p>\n</li>\n<li><p>lset [key] [index] [value] : 用value替换指定下标的值</p>\n</li>\n<li><p>linsert [key] [before/after] [value1] [value2]: 在value1前/后插入value2</p>\n</li>\n</ul>\n<h1 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h1><ul>\n<li><p>SMEMBERS [key] :查看set中数据集合</p>\n</li>\n<li><p>sadd [key] […v]:添加多个值，去重复的</p>\n</li>\n<li><p>scard [key] :查看元素中的数量</p>\n</li>\n<li><p>SREM [key] [v] :删除指定集合中的指定的值</p>\n</li>\n<li><p>srandmember [key] [count]: 随机生成count个整数</p>\n</li>\n<li><p>spop [key]:随机删除一个</p>\n</li>\n<li><p>smove [key1] [key2] [v] :将set集合key1中的v移到key2中</p>\n</li>\n<li><p>sdiff [key1] [key2]: 查询key1中有，key2中没有的</p>\n</li>\n<li><p>sinter [key1] [key2]: 查询两个中都有的</p>\n</li>\n<li><p>sunion [key1] [key2]：查询两个的去重后的合并集合</p>\n</li>\n</ul>\n<h1 id=\"Hash-gt-K-V模式不变，V是一个键值对\"><a href=\"#Hash-gt-K-V模式不变，V是一个键值对\" class=\"headerlink\" title=\"Hash =&gt; K/V模式不变，V是一个键值对\"></a>Hash =&gt; K/V模式不变，V是一个键值对</h1><ul>\n<li><p>hget [key] [vKey]:查询key中v的值</p>\n</li>\n<li><p>hmget [key] […vKey]: 一次查询多个</p>\n</li>\n<li><p>hset [key] [vKey] [value]：设置key中v的值为value,例:hset user id 1</p>\n</li>\n<li><p>hmset [key] […[vKey] [value]]: 一次设置多个，例:hmset user name xxg age 28 id</p>\n</li>\n<li><p>HGETALL [key] :查询key中所有的键值对，得到数组[‘属性’,’值’]形式</p>\n</li>\n<li><p>hdel [key] […vKey] :删除多个指定的vKey</p>\n</li>\n<li><p>hlen [key] :查询指定key中的数量</p>\n</li>\n<li><p>hexists [key] [vKey]:判断key里面是否存在某个值的key</p>\n</li>\n<li><p>HKEYS [key] : 查看指定key中所有的值的key</p>\n</li>\n<li><p>hvals [key] : 查看指定key中所有的值</p>\n</li>\n<li><p>HINCRYBY/HINCRYBYFLOAT [key] [vKey] [v] :给指定key增加指定的整数/小数</p>\n</li>\n<li><p>hsetnx [key] [vKey] [value]：设置值，如果不存在</p>\n</li>\n</ul>\n<h1 id=\"Zset\"><a href=\"#Zset\" class=\"headerlink\" title=\"Zset\"></a>Zset</h1><p>卧槽，实在不想写了，参考: <a href=\"http://redisdoc.com/sorted_set/index.html\">http://redisdoc.com/sorted_set/index.html</a></p>"}],"PostAsset":[],"PostCategory":[{"post_id":"cjocck1nd000970uka1cs7m2g","category_id":"cjocck1n8000670uktb5o76n4","_id":"cjocck1nn000h70uk2uyg6io0"},{"post_id":"cjocck1n4000470uk6nko1z50","category_id":"cjocck1n8000670uktb5o76n4","_id":"cjocck1ns000m70ukt6s8mgnb"},{"post_id":"cjocck1nf000a70ukx1b1ta8t","category_id":"cjocck1n8000670uktb5o76n4","_id":"cjocck1nv000p70uk5u64bf7p"},{"post_id":"cjocck1nj000e70uksgk3ugn6","category_id":"cjocck1n8000670uktb5o76n4","_id":"cjocck1nx000s70uk524mqps1"},{"post_id":"cjocck1n6000570uknw7d3nuj","category_id":"cjocck1n8000670uktb5o76n4","_id":"cjocck1o0000v70uk8s0g37rt"},{"post_id":"cjocck1nm000g70uky6f7pjkn","category_id":"cjocck1n8000670uktb5o76n4","_id":"cjocck1o2000y70uk3tlp8lg1"},{"post_id":"cjocck1nq000l70uk3q3fqbjo","category_id":"cjocck1n8000670uktb5o76n4","_id":"cjocck1o4001170uk6lc3vgn3"},{"post_id":"cjocck1nc000870ukidbf7q3o","category_id":"cjocck1n8000670uktb5o76n4","_id":"cjocck1o7001470uk2wogs9uf"},{"post_id":"cjocck1nt000o70ukgwuw0cja","category_id":"cjocck1n8000670uktb5o76n4","_id":"cjocck1oa001970ukfr9n1tfc"},{"post_id":"cjocck1nw000r70uk7xhv6gz5","category_id":"cjocck1n8000670uktb5o76n4","_id":"cjocck1oc001c70uk75cmcy0o"},{"post_id":"cjocck1nz000u70ukzemi9xg3","category_id":"cjocck1n8000670uktb5o76n4","_id":"cjocck1of001g70uksbkhy7nq"},{"post_id":"cjocck1o1000x70ukqhig6vj9","category_id":"cjocck1n8000670uktb5o76n4","_id":"cjocck1oi001j70uka9s3h8pt"},{"post_id":"cjocck1ob001b70uk1c86xp13","category_id":"cjocck1o7001570uk2pakmha1","_id":"cjocck1om001o70uky8x3ecu7"},{"post_id":"cjocck1o3001070ukwfx2pmpw","category_id":"cjocck1o7001570uk2pakmha1","_id":"cjocck1op001r70uksn9jg9f1"},{"post_id":"cjocck1od001d70uk98qrd0oz","category_id":"cjocck1o7001570uk2pakmha1","_id":"cjocck1or001t70uke45ek98i"},{"post_id":"cjocck1oh001i70ukoq7vhg86","category_id":"cjocck1o7001570uk2pakmha1","_id":"cjocck1os001v70uklv8ykmug"},{"post_id":"cjocck1o6001370uk3ry6jyv0","category_id":"cjocck1o7001570uk2pakmha1","_id":"cjocck1ot001x70ukiodtuxkw"},{"post_id":"cjocck1oj001l70ukm7iktnso","category_id":"cjocck1o7001570uk2pakmha1","_id":"cjocck1ou001z70ukw0g1jrt3"},{"post_id":"cjocck1on001q70uk6685vwo8","category_id":"cjocck1o7001570uk2pakmha1","_id":"cjocck1ow002170uk9717pv8h"},{"post_id":"cjocck1o9001870ukjtdyyan2","category_id":"cjocck1o7001570uk2pakmha1","_id":"cjocck1ow002270uk9h94oezw"},{"post_id":"cjocck1p6002370ukj33v8wn1","category_id":"cjocck1o7001570uk2pakmha1","_id":"cjocck1p9002570ukre6obpmn"},{"post_id":"cjocck1pp002b70uko6q1msox","category_id":"cjocck1pl002870ukqh7ru366","_id":"cjocck1pw002h70uk9odv2tfj"},{"post_id":"cjocck1pi002670uk81qd3bzp","category_id":"cjocck1pl002870ukqh7ru366","_id":"cjocck1q0002l70ukwkzrvgbf"},{"post_id":"cjocck1pq002c70uk5b6uk5aa","category_id":"cjocck1pl002870ukqh7ru366","_id":"cjocck1q1002o70ukzrf84our"},{"post_id":"cjocck1pt002f70ukfgcamsr3","category_id":"cjocck1pl002870ukqh7ru366","_id":"cjocck1q5002s70ukvjvnm6qg"},{"post_id":"cjocck1pk002770uk4fpnowgo","category_id":"cjocck1pl002870ukqh7ru366","_id":"cjocck1q7002v70uk3y9lakcn"},{"post_id":"cjocck1pv002g70ukqh5fh14e","category_id":"cjocck1pl002870ukqh7ru366","_id":"cjocck1qa002z70ukzpp9kh6b"},{"post_id":"cjocck1py002k70ukt7qaypz0","category_id":"cjocck1pl002870ukqh7ru366","_id":"cjocck1qd003270uk52g5k87f"},{"post_id":"cjocck1pm002a70ukuq2xu0k1","category_id":"cjocck1pl002870ukqh7ru366","_id":"cjocck1qe003470uk7r2k8790"},{"post_id":"cjocck1q0002n70ukb1jwtedk","category_id":"cjocck1pl002870ukqh7ru366","_id":"cjocck1qg003770ukp00u5me6"},{"post_id":"cjocck1q4002r70uk5cfr2son","category_id":"cjocck1pl002870ukqh7ru366","_id":"cjocck1qh003970ukokffsu44"},{"post_id":"cjocck1q6002u70uk3smsk6ry","category_id":"cjocck1qb003070uk5m1dk9x9","_id":"cjocck1qi003b70ukfdp0ym0v"},{"post_id":"cjocck1q9002y70ukerbldtmo","category_id":"cjocck1qf003670ukxvahvvy6","_id":"cjocck1qk003e70uk267hdji4"},{"post_id":"cjocck1r2003u70ukjwof918l","category_id":"cjocck1qf003670ukxvahvvy6","_id":"cjocck1r6003w70ukxyglzs9o"},{"post_id":"cjtawhtg80000d0uknf81oms7","category_id":"cjocck1o7001570uk2pakmha1","_id":"cjtawiuy20002d0uk67biflai"},{"post_id":"cjvx3v8ho0000ykv854cq1kcc","category_id":"cjocck1o7001570uk2pakmha1","_id":"cjvx3v8hx0002ykv8c9cr8zhg"},{"post_id":"cjvx3v8jb0003ykv8z1w8reu9","category_id":"cjocck1qf003670ukxvahvvy6","_id":"cjvx3v8je0006ykv8m6jgekub"},{"post_id":"cjvz6b6900000ugukc4ebw27x","category_id":"cjocck1qf003670ukxvahvvy6","_id":"cjvz6b69t0003ugukth51fq3d"},{"post_id":"ck0sx0lpo000084scsueua6ej","category_id":"ck0sx0lq0000284scxdchfswh","_id":"ck0sx0lqg000784scgpxxn75g"},{"post_id":"ck0sx0lpx000184scjriitqc0","category_id":"ck0sx0lqd000484scp127wnjj","_id":"ck0sx0lqh000984sc4msegde6"},{"post_id":"ck1dks9pp0000t0scx3a9530h","category_id":"cjocck1pl002870ukqh7ru366","_id":"ck1dks9pw0006t0scbh6rx2dy"},{"post_id":"ck1dks9ps0001t0sc3eh7pcey","category_id":"cjocck1pl002870ukqh7ru366","_id":"ck1dks9py0009t0sct42x4mmf"},{"post_id":"ck1dks9pt0003t0scjye5uc6u","category_id":"cjocck1pl002870ukqh7ru366","_id":"ck1dks9q1000ct0scw2aod591"},{"post_id":"ck1dks9pv0005t0scyqsav4me","category_id":"cjocck1pl002870ukqh7ru366","_id":"ck1dks9q4000ft0scgszcn2u0"},{"post_id":"ck1dks9px0008t0sc2ddn9qk2","category_id":"cjocck1pl002870ukqh7ru366","_id":"ck1dks9q7000ht0scw1q6sfv5"},{"post_id":"ck1dks9q0000bt0scaeiw2i4x","category_id":"cjocck1pl002870ukqh7ru366","_id":"ck1dks9q8000jt0sccapzvvkw"},{"post_id":"ck1dks9q3000et0scqydpd54e","category_id":"cjocck1pl002870ukqh7ru366","_id":"ck1dks9q9000kt0scv168muxr"},{"post_id":"ck1dks9qc000lt0sck5yuikwm","category_id":"cjocck1pl002870ukqh7ru366","_id":"ck1dks9qe000nt0scj4uow33p"},{"post_id":"ck1dks9qg000ot0scnpoa3ifv","category_id":"cjocck1pl002870ukqh7ru366","_id":"ck1dks9qi000qt0scdpy7ig74"},{"post_id":"ck1dks9ql000rt0scb5fp6050","category_id":"cjocck1pl002870ukqh7ru366","_id":"ck1dks9qo000tt0scn5if1fvl"},{"post_id":"ckj4abdnr0000r0sc1z252kgf","category_id":"cjocck1n8000670uktb5o76n4","_id":"ckj4abdnx0002r0scgw3z7r4w"},{"post_id":"ckj4abdof0006r0sc8z0p2uzv","category_id":"cjocck1o7001570uk2pakmha1","_id":"ckj4abdok000br0sc0cjfbtfu"},{"post_id":"ckj4abdo10003r0sc4qqpej9f","category_id":"ckj4abdo30004r0scemnn9the","_id":"ckj4abdom000er0sc3lnrfirl"},{"post_id":"ckj4abdoi0008r0sc25xe044v","category_id":"ckj4abdok000cr0sc1twt2ojg","_id":"ckj4abdot000ir0scf2xyhrji"},{"post_id":"ckj4abdoj000ar0sc3zxzh6dh","category_id":"ckj4abdok000cr0sc1twt2ojg","_id":"ckj4abdow000kr0sc1xnrcaai"},{"post_id":"cjtav8xzn0000jguk0nkm2371","category_id":"cjocck1qf003670ukxvahvvy6","_id":"ckj4c2jpp0002jcscfianete9"}],"PostTag":[{"post_id":"cjocck1nd000970uka1cs7m2g","tag_id":"cjocck1nb000770ukxemb3ng6","_id":"cjocck1nj000d70ukjjc1ec86"},{"post_id":"cjocck1n4000470uk6nko1z50","tag_id":"cjocck1nb000770ukxemb3ng6","_id":"cjocck1nl000f70uk88e2xsm9"},{"post_id":"cjocck1nf000a70ukx1b1ta8t","tag_id":"cjocck1nb000770ukxemb3ng6","_id":"cjocck1np000k70uk5pypktqk"},{"post_id":"cjocck1nj000e70uksgk3ugn6","tag_id":"cjocck1nb000770ukxemb3ng6","_id":"cjocck1nt000n70ukbee219ax"},{"post_id":"cjocck1n6000570uknw7d3nuj","tag_id":"cjocck1nb000770ukxemb3ng6","_id":"cjocck1nw000q70uk7729uxz2"},{"post_id":"cjocck1nq000l70uk3q3fqbjo","tag_id":"cjocck1nb000770ukxemb3ng6","_id":"cjocck1ny000t70uk8ujztj5t"},{"post_id":"cjocck1nc000870ukidbf7q3o","tag_id":"cjocck1nb000770ukxemb3ng6","_id":"cjocck1o0000w70uk0p0800kj"},{"post_id":"cjocck1nt000o70ukgwuw0cja","tag_id":"cjocck1nb000770ukxemb3ng6","_id":"cjocck1o3000z70ukmd25q2a0"},{"post_id":"cjocck1nw000r70uk7xhv6gz5","tag_id":"cjocck1nb000770ukxemb3ng6","_id":"cjocck1o5001270ukfvlc10qt"},{"post_id":"cjocck1nz000u70ukzemi9xg3","tag_id":"cjocck1nb000770ukxemb3ng6","_id":"cjocck1o9001770uk3sj39c8i"},{"post_id":"cjocck1o1000x70ukqhig6vj9","tag_id":"cjocck1nb000770ukxemb3ng6","_id":"cjocck1ob001a70uk9a0hc4zj"},{"post_id":"cjocck1ob001b70uk1c86xp13","tag_id":"cjocck1o8001670uk2gfbwnds","_id":"cjocck1og001h70ukdnifvnle"},{"post_id":"cjocck1o3001070ukwfx2pmpw","tag_id":"cjocck1o8001670uk2gfbwnds","_id":"cjocck1oj001k70uknfh3fu4w"},{"post_id":"cjocck1od001d70uk98qrd0oz","tag_id":"cjocck1o8001670uk2gfbwnds","_id":"cjocck1on001p70uk00ylcgyh"},{"post_id":"cjocck1oh001i70ukoq7vhg86","tag_id":"cjocck1o8001670uk2gfbwnds","_id":"cjocck1oq001s70uk9yqsvdhb"},{"post_id":"cjocck1o6001370uk3ry6jyv0","tag_id":"cjocck1o8001670uk2gfbwnds","_id":"cjocck1os001u70ukwyr41voy"},{"post_id":"cjocck1oj001l70ukm7iktnso","tag_id":"cjocck1o8001670uk2gfbwnds","_id":"cjocck1ot001w70uk4dfzjzzm"},{"post_id":"cjocck1on001q70uk6685vwo8","tag_id":"cjocck1o8001670uk2gfbwnds","_id":"cjocck1ou001y70uklxb0248f"},{"post_id":"cjocck1o9001870ukjtdyyan2","tag_id":"cjocck1o8001670uk2gfbwnds","_id":"cjocck1ov002070uki4ul4ewq"},{"post_id":"cjocck1p6002370ukj33v8wn1","tag_id":"cjocck1o8001670uk2gfbwnds","_id":"cjocck1p8002470ukx34ba9ri"},{"post_id":"cjocck1pi002670uk81qd3bzp","tag_id":"cjocck1pm002970uko1z5j9q8","_id":"cjocck1q0002m70uk1g8btxgc"},{"post_id":"cjocck1pi002670uk81qd3bzp","tag_id":"cjocck1ps002e70ukic318wf9","_id":"cjocck1q2002p70ukpzmceujd"},{"post_id":"cjocck1pk002770uk4fpnowgo","tag_id":"cjocck1px002j70uky547comu","_id":"cjocck1q5002t70uk2f4b1hf6"},{"post_id":"cjocck1q4002r70uk5cfr2son","tag_id":"cjocck1px002j70uky547comu","_id":"cjocck1q8002x70uk1ugd6no7"},{"post_id":"cjocck1pm002a70ukuq2xu0k1","tag_id":"cjocck1px002j70uky547comu","_id":"cjocck1qd003170ukrhhiu5xz"},{"post_id":"cjocck1pp002b70uko6q1msox","tag_id":"cjocck1px002j70uky547comu","_id":"cjocck1qe003570ukbcxpr885"},{"post_id":"cjocck1pq002c70uk5b6uk5aa","tag_id":"cjocck1px002j70uky547comu","_id":"cjocck1qi003a70ukpjp1gqvt"},{"post_id":"cjocck1pt002f70ukfgcamsr3","tag_id":"cjocck1px002j70uky547comu","_id":"cjocck1qk003d70ukb8lfkn5w"},{"post_id":"cjocck1pv002g70ukqh5fh14e","tag_id":"cjocck1px002j70uky547comu","_id":"cjocck1qm003h70uke328nfzr"},{"post_id":"cjocck1pv002g70ukqh5fh14e","tag_id":"cjocck1ql003f70ukrd6ywv4r","_id":"cjocck1qn003i70uk1garwnkm"},{"post_id":"cjocck1py002k70ukt7qaypz0","tag_id":"cjocck1px002j70uky547comu","_id":"cjocck1qo003k70uk2hxyz23j"},{"post_id":"cjocck1py002k70ukt7qaypz0","tag_id":"cjocck1ql003f70ukrd6ywv4r","_id":"cjocck1qp003l70ukek2uixub"},{"post_id":"cjocck1q0002n70ukb1jwtedk","tag_id":"cjocck1px002j70uky547comu","_id":"cjocck1qq003n70ukoq5jmw5a"},{"post_id":"cjocck1q0002n70ukb1jwtedk","tag_id":"cjocck1ql003f70ukrd6ywv4r","_id":"cjocck1qr003o70ukykjk63ny"},{"post_id":"cjocck1q6002u70uk3smsk6ry","tag_id":"cjocck1qp003m70uktxhncese","_id":"cjocck1qt003q70ukvokznfdz"},{"post_id":"cjocck1q9002y70ukerbldtmo","tag_id":"cjocck1qr003p70uks3coc7rc","_id":"cjocck1qu003s70uk5h3xngj7"},{"post_id":"cjocck1q9002y70ukerbldtmo","tag_id":"cjocck1qu003r70ukf8ktcw76","_id":"cjocck1qu003t70ukc5ill7qr"},{"post_id":"cjocck1r2003u70ukjwof918l","tag_id":"cjocck1qr003p70uks3coc7rc","_id":"cjocck1r7003x70uk3sx80xq5"},{"post_id":"cjocck1r2003u70ukjwof918l","tag_id":"cjocck1qu003r70ukf8ktcw76","_id":"cjocck1r8003y70ukck68317d"},{"post_id":"cjocck1r2003u70ukjwof918l","tag_id":"cjocck1r5003v70ukm542b2t4","_id":"cjocck1r9003z70ukado7sqja"},{"post_id":"cjtawhtg80000d0uknf81oms7","tag_id":"cjocck1o8001670uk2gfbwnds","_id":"cjtawiuy10001d0ukanbaebv3"},{"post_id":"cjvx3v8ho0000ykv854cq1kcc","tag_id":"cjocck1o8001670uk2gfbwnds","_id":"cjvx3v8hv0001ykv8dv75yv90"},{"post_id":"cjvx3v8jb0003ykv8z1w8reu9","tag_id":"cjocck1qr003p70uks3coc7rc","_id":"cjvx3v8jd0004ykv807xsd9uq"},{"post_id":"cjvx3v8jb0003ykv8z1w8reu9","tag_id":"cjocck1qu003r70ukf8ktcw76","_id":"cjvx3v8je0005ykv80twh7nse"},{"post_id":"cjvz6b6900000ugukc4ebw27x","tag_id":"cjocck1qr003p70uks3coc7rc","_id":"cjvz6b69s0001uguk37k62ol0"},{"post_id":"cjvz6b6900000ugukc4ebw27x","tag_id":"cjocck1qu003r70ukf8ktcw76","_id":"cjvz6b69s0002ugukvmahdgqf"},{"post_id":"ck0sx0lpo000084scsueua6ej","tag_id":"ck0sx0lq7000384scftvcqbjr","_id":"ck0sx0lqf000684scs77uft4m"},{"post_id":"ck0sx0lpx000184scjriitqc0","tag_id":"ck0sx0lqe000584sc3sq3gosa","_id":"ck0sx0lqh000884scakvtyof6"},{"post_id":"ck1dks9pp0000t0scx3a9530h","tag_id":"ck0sx0lqz000c84scnq1o48ku","_id":"ck1dks9pt0002t0sc84oa1em8"},{"post_id":"ck1dks9ps0001t0sc3eh7pcey","tag_id":"ck0sx0lqz000c84scnq1o48ku","_id":"ck1dks9pv0004t0scnzu5m70y"},{"post_id":"ck1dks9pt0003t0scjye5uc6u","tag_id":"ck0sx0lqz000c84scnq1o48ku","_id":"ck1dks9px0007t0sciwcchus1"},{"post_id":"ck1dks9pv0005t0scyqsav4me","tag_id":"ck0sx0lqz000c84scnq1o48ku","_id":"ck1dks9pz000at0scunxbjosw"},{"post_id":"ck1dks9px0008t0sc2ddn9qk2","tag_id":"ck0sx0lqz000c84scnq1o48ku","_id":"ck1dks9q2000dt0sck4t18ftd"},{"post_id":"ck1dks9q0000bt0scaeiw2i4x","tag_id":"ck0sx0lqz000c84scnq1o48ku","_id":"ck1dks9q5000gt0sccolkk8bo"},{"post_id":"ck1dks9q3000et0scqydpd54e","tag_id":"ck0sx0lqz000c84scnq1o48ku","_id":"ck1dks9q7000it0sc5zd3l9ml"},{"post_id":"ck1dks9qc000lt0sck5yuikwm","tag_id":"ck0sx0lqz000c84scnq1o48ku","_id":"ck1dks9qe000mt0scue92knqf"},{"post_id":"ck1dks9qg000ot0scnpoa3ifv","tag_id":"ck0sx0lqz000c84scnq1o48ku","_id":"ck1dks9qi000pt0sc7bfehaz9"},{"post_id":"ck1dks9ql000rt0scb5fp6050","tag_id":"ck0sx0lqz000c84scnq1o48ku","_id":"ck1dks9qn000st0sccc7godg4"},{"post_id":"ckj4abdnr0000r0sc1z252kgf","tag_id":"cjocck1nb000770ukxemb3ng6","_id":"ckj4abdnv0001r0scdvx38cjr"},{"post_id":"ckj4abdof0006r0sc8z0p2uzv","tag_id":"cjocck1o8001670uk2gfbwnds","_id":"ckj4abdoi0007r0sc3lvihuxz"},{"post_id":"ckj4abdo10003r0sc4qqpej9f","tag_id":"ckj4abdof0005r0sc57rt6onu","_id":"ckj4abdoj0009r0sc96lz3p9i"},{"post_id":"ckj4abdoi0008r0sc25xe044v","tag_id":"ckj4abdol000dr0sc64th8rlp","_id":"ckj4abdor000hr0sc5qej5rf1"},{"post_id":"ckj4abdoj000ar0sc3zxzh6dh","tag_id":"ckj4abdol000dr0sc64th8rlp","_id":"ckj4abdou000jr0scfv1ae849"},{"post_id":"cjtav8xzn0000jguk0nkm2371","tag_id":"cjocck1qr003p70uks3coc7rc","_id":"ckj4c2jpp0000jcsca67lh01y"},{"post_id":"cjtav8xzn0000jguk0nkm2371","tag_id":"cjocck1qu003r70ukf8ktcw76","_id":"ckj4c2jpp0001jcsc0esi8zcy"},{"post_id":"cjvx3v8jb0003ykv8z1w8reu9","tag_id":"cjocck1r5003v70ukm542b2t4","_id":"ckj4c2y570003jcsc5kzy2kjj"}],"Tag":[{"name":"Docker","_id":"cjocck1nb000770ukxemb3ng6"},{"name":"工具","_id":"cjocck1o8001670uk2gfbwnds"},{"name":"Consul","_id":"cjocck1pm002970uko1z5j9q8"},{"name":".NetCore微服务","_id":"cjocck1ps002e70ukic318wf9"},{"name":".NetCore","_id":"cjocck1px002j70uky547comu"},{"name":"IdentityServer4","_id":"cjocck1ql003f70ukrd6ywv4r"},{"name":"前端-其他","_id":"cjocck1qp003m70uktxhncese"},{"name":"前端","_id":"cjocck1qr003p70uks3coc7rc"},{"name":"React","_id":"cjocck1qu003r70ukf8ktcw76"},{"name":"umi","_id":"cjocck1r5003v70ukm542b2t4"},{"name":"其他","_id":"ck0sx0lq7000384scftvcqbjr"},{"name":"Flutter","_id":"ck0sx0lqe000584sc3sq3gosa"},{"name":"Signalr","_id":"ck0sx0lqz000c84scnq1o48ku"},{"name":"Nginx","_id":"ckj4abdof0005r0sc57rt6onu"},{"name":"redis","_id":"ckj4abdol000dr0sc64th8rlp"}]}}