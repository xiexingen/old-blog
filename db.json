{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"source/images/alipay.jpg","path":"images/alipay.jpg","modified":1,"renderable":0},{"_id":"source/images/avatar.jpg","path":"images/avatar.jpg","modified":1,"renderable":0},{"_id":"source/images/brand.jpg","path":"images/brand.jpg","modified":1,"renderable":0},{"_id":"source/images/star-full.svg","path":"images/star-full.svg","modified":1,"renderable":0},{"_id":"source/images/star-half.svg","path":"images/star-half.svg","modified":1,"renderable":0},{"_id":"source/images/staroff.svg","path":"images/staroff.svg","modified":1,"renderable":0},{"_id":"source/images/wechat.jpg","path":"images/wechat.jpg","modified":1,"renderable":0},{"_id":"source/images/wxpub.jpg","path":"images/wxpub.jpg","modified":1,"renderable":0},{"_id":"themes/hexo-theme-matery/source/favicon.png","path":"favicon.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/css/gitment.css","path":"css/gitment.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/css/matery.css","path":"css/matery.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/css/my-gitalk.css","path":"css/my-gitalk.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/css/my.css","path":"css/my.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/js/matery.js","path":"js/matery.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/js/search.js","path":"js/search.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/avatar.jpg","path":"medias/avatar.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/cover.jpg","path":"medias/cover.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/logo.png","path":"medias/logo.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/animate/animate.min.css","path":"libs/animate/animate.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/aos/aos.css","path":"libs/aos/aos.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/aos/aos.js","path":"libs/aos/aos.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/aplayer/APlayer.min.css","path":"libs/aplayer/APlayer.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/aplayer/APlayer.min.js","path":"libs/aplayer/APlayer.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/cryptojs/crypto-js.min.js","path":"libs/cryptojs/crypto-js.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/dplayer/DPlayer.min.css","path":"libs/dplayer/DPlayer.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/dplayer/DPlayer.min.js","path":"libs/dplayer/DPlayer.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/echarts/echarts.min.js","path":"libs/echarts/echarts.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/gitalk/gitalk.css","path":"libs/gitalk/gitalk.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/gitalk/gitalk.min.js","path":"libs/gitalk/gitalk.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/gitment/gitment.js","path":"libs/gitment/gitment.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/gitment/gitment-default.css","path":"libs/gitment/gitment-default.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/jqcloud/jqcloud-1.0.4.min.js","path":"libs/jqcloud/jqcloud-1.0.4.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/jqcloud/jqcloud.css","path":"libs/jqcloud/jqcloud.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/jquery/jquery-2.2.0.min.js","path":"libs/jquery/jquery-2.2.0.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/masonry/masonry.pkgd.min.js","path":"libs/masonry/masonry.pkgd.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/materialize/materialize.min.css","path":"libs/materialize/materialize.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/materialize/materialize.min.js","path":"libs/materialize/materialize.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/others/busuanzi.pure.mini.js","path":"libs/others/busuanzi.pure.mini.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/others/clicklove.js","path":"libs/others/clicklove.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/scrollprogress/scrollProgress.min.js","path":"libs/scrollprogress/scrollProgress.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/tocbot/tocbot.css","path":"libs/tocbot/tocbot.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/tocbot/tocbot.min.js","path":"libs/tocbot/tocbot.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/valine/Valine.min.js","path":"libs/valine/Valine.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/valine/av-min.js","path":"libs/valine/av-min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/0.jpg","path":"medias/banner/0.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/1.jpg","path":"medias/banner/1.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/2.jpg","path":"medias/banner/2.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/4.jpg","path":"medias/banner/4.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/3.jpg","path":"medias/banner/3.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/5.jpg","path":"medias/banner/5.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/6.jpg","path":"medias/banner/6.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/0.jpg","path":"medias/featureimages/0.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/1.jpg","path":"medias/featureimages/1.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/10.jpg","path":"medias/featureimages/10.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/11.jpg","path":"medias/featureimages/11.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/12.jpg","path":"medias/featureimages/12.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/13.jpg","path":"medias/featureimages/13.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/14.jpg","path":"medias/featureimages/14.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/15.jpg","path":"medias/featureimages/15.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/16.jpg","path":"medias/featureimages/16.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/17.jpg","path":"medias/featureimages/17.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/18.jpg","path":"medias/featureimages/18.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/19.jpg","path":"medias/featureimages/19.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/2.jpg","path":"medias/featureimages/2.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/20.jpg","path":"medias/featureimages/20.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/21.jpg","path":"medias/featureimages/21.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/22.jpg","path":"medias/featureimages/22.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/23.jpg","path":"medias/featureimages/23.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/3.jpg","path":"medias/featureimages/3.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/4.jpg","path":"medias/featureimages/4.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/5.jpg","path":"medias/featureimages/5.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/6.jpg","path":"medias/featureimages/6.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/8.jpg","path":"medias/featureimages/8.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/7.jpg","path":"medias/featureimages/7.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/9.jpg","path":"medias/featureimages/9.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/reward/alipay.jpg","path":"medias/reward/alipay.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/reward/wechat.png","path":"medias/reward/wechat.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/css/font-awesome.min.css","path":"libs/awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.eot","path":"libs/awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.svg","path":"libs/awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/FontAwesome.otf","path":"libs/awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.ttf","path":"libs/awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.woff","path":"libs/awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.woff2","path":"libs/awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/css/lightgallery.min.css","path":"libs/lightGallery/css/lightgallery.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/loading.gif","path":"libs/lightGallery/img/loading.gif","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/video-play.png","path":"libs/lightGallery/img/video-play.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/vimeo-play.png","path":"libs/lightGallery/img/vimeo-play.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/youtube-play.png","path":"libs/lightGallery/img/youtube-play.png","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.eot","path":"libs/lightGallery/fonts/lg.eot","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.svg","path":"libs/lightGallery/fonts/lg.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.ttf","path":"libs/lightGallery/fonts/lg.ttf","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.woff","path":"libs/lightGallery/fonts/lg.woff","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/js/lightgallery-all.min.js","path":"libs/lightGallery/js/lightgallery-all.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/css/share.min.css","path":"libs/share/css/share.min.css","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.eot","path":"libs/share/fonts/iconfont.eot","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.svg","path":"libs/share/fonts/iconfont.svg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.woff","path":"libs/share/fonts/iconfont.woff","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.ttf","path":"libs/share/fonts/iconfont.ttf","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/js/jquery.share.min.js","path":"libs/share/js/jquery.share.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/libs/share/js/social-share.min.js","path":"libs/share/js/social-share.min.js","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/0.jpg","path":"medias/banner/bak/0.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/1.jpg","path":"medias/banner/bak/1.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/2.jpg","path":"medias/banner/bak/2.jpg","modified":1,"renderable":1},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/3.jpg","path":"medias/banner/bak/3.jpg","modified":1,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"2c1bf3430c03b1d6fa3217cea984245e7cfe33ff","modified":1609116928046},{"_id":"source/_data/friends.json","hash":"386cb45e4eacd0b4ba3e046392e85e7e171c32c1","modified":1609116928047},{"_id":"source/about/index.md","hash":"2cea4ad5a1efc40ea87a17ff1d7ffc749a481c6c","modified":1609116928079},{"_id":"source/_posts/helleword.md","hash":"f1e1d275446f193441776b0643e05e17ce36e5b6","modified":1609116928069},{"_id":"source/categories/index.md","hash":"194fb6e088a5560ee865887cc233d85c5baaa9fb","modified":1609116928080},{"_id":"source/friends/index.md","hash":"47954a9b751e3cc1f5b0b19f3df07c6d60a1b845","modified":1609116928080},{"_id":"source/images/alipay.jpg","hash":"cdb9f9d7255bed621a45066195f22ee4207ca6bf","modified":1609116928081},{"_id":"source/images/brand.jpg","hash":"842b140847c226fc3de12429186032d9539d2d4b","modified":1609116928083},{"_id":"source/images/star-full.svg","hash":"16282bdcb4c5e4471e5b99378f998debe0768d15","modified":1609116928083},{"_id":"source/images/star-half.svg","hash":"e221bcafc495b10db4c571ae075bbad81cc0d03b","modified":1609116928084},{"_id":"source/images/staroff.svg","hash":"586522f635b4c9525bb5e9f09ffe614bf4254358","modified":1609116928084},{"_id":"source/images/wechat.jpg","hash":"2230249e5653d9314e5af89a391395a2bd63c563","modified":1609116928085},{"_id":"source/images/wxpub.jpg","hash":"f69214ebaf9cbfe31f73fd2840390d49eb205baf","modified":1609116928085},{"_id":"source/tags/index.md","hash":"c957661d4f92256f6ca7a66c545f94fdcc43f08b","modified":1609116928086},{"_id":"source/_posts/docker/00command.md","hash":"1e88d8af89e0abfe504f19c90dd50f09298d54d4","modified":1609116928048},{"_id":"source/_posts/docker/01docker-config.md","hash":"567f7918a7091e51ed418a22dc1a5d1a117e5a01","modified":1609116928049},{"_id":"source/_posts/docker/02docker-dockerfile.md","hash":"2be5ccce1c2a779f91a0070fe55c475aa5ad6d52","modified":1609116928049},{"_id":"source/_posts/docker/03docker-mongodb.md","hash":"ea94e5a478d4d444b66c361d4681fbf388f37c7e","modified":1609116928049},{"_id":"source/_posts/docker/04docker-mssqlserver.md","hash":"64a12c643635354908540efa41169d1a9490a317","modified":1609116928050},{"_id":"source/_posts/docker/04docker_install_mysql.md","hash":"1865a6153f9b3d9c789e7a02c37a56fc5121fffd","modified":1609116928050},{"_id":"source/_posts/docker/05docker-webapi-mysql.md","hash":"268c8f2249a7f5c63bedbc51ebf5ab42885c03b6","modified":1609116928051},{"_id":"source/_posts/docker/06docker-compose.md","hash":"72c98182cdb88a539719396781ccfa6cddb47e14","modified":1609116928051},{"_id":"source/_posts/docker/07gitlab.md","hash":"9ee59bc220c74efdc3c01b1623d81f09698ba160","modified":1609116928052},{"_id":"source/_posts/docker/07gitlab01-runner.md","hash":"71f6db56ed2bcd2f74439e448a848cf1d5e805c3","modified":1609116928052},{"_id":"source/_posts/docker/10docker-jenkins-gogs-cicd.md","hash":"a507fa763a8a39e611b7f91a6b16b81688399426","modified":1609116928052},{"_id":"source/_posts/docker/11docker-redis.md","hash":"0ed995ae0897fb6de6492eecd0fa843b5713e454","modified":1609116928053},{"_id":"source/_posts/docker/12docker-rabbitmq.md","hash":"348cc61ac000f0dae761167653bb66533b7df4d6","modified":1609116928053},{"_id":"source/_posts/flutter/01-environment.md","hash":"9707f73bf50d68123b567e72e6b2cd6b52ce7ea9","modified":1609116928065},{"_id":"source/_posts/nginx/01-introduct.md","hash":"45a771bc45cb99c6a7307af79af1a062280fe170","modified":1609116928070},{"_id":"source/_posts/other/blog_image_lib.md","hash":"dd452a1c25d9b3cf725f7efb3ddcff4655752576","modified":1609116928071},{"_id":"source/_posts/redis/01-config.md","hash":"33291a85999d9232d17c20a00a70ae894f123206","modified":1609116928072},{"_id":"source/_posts/redis/02-cmd.md","hash":"2438778885da7d16db22f6bd8b02ee17af133c75","modified":1609116928072},{"_id":"source/_posts/tools/articleCollections.md","hash":"0ef32038e44de16e1836928d2d612202df7b33b1","modified":1609116928073},{"_id":"source/_posts/tools/cer.md","hash":"8b8c4e1998e7cdafb2183ddd9c7985867745297c","modified":1609116928074},{"_id":"source/_posts/tools/collections.md","hash":"9f2503814c98d023b0f940165cdc4381ed0df8d5","modified":1609116928074},{"_id":"source/_posts/tools/develop.md","hash":"a82faec82ea154b32fea1d8028134c09776ae967","modified":1609116928075},{"_id":"source/_posts/tools/git.md","hash":"7c3eabbd116d7b15bd3859a182f3e39a64ff74f8","modified":1609116928075},{"_id":"source/_posts/tools/gitcommit.md","hash":"12e10ad7274f4b9d50101bca621b66479477b488","modified":1609117136911},{"_id":"source/_posts/tools/nginx.md","hash":"711cc48130d8a02e22f2b2f8e1d3400ca1738eb3","modified":1609116928075},{"_id":"source/_posts/tools/ngrok.md","hash":"d29ef515164eac47f55c0e24101acb51e384db6b","modified":1609116928076},{"_id":"source/_posts/tools/npm.md","hash":"ff29e63af9ae467c4f1666e225c467e490932e52","modified":1609116928076},{"_id":"source/_posts/tools/nuget.md","hash":"61c920da43cffbb6c44b2c405511b9921ec7a0cf","modified":1609116928077},{"_id":"source/_posts/tools/office.md","hash":"94b045a28f96adb23f4e309b8736ba9152cac50c","modified":1609116928077},{"_id":"source/_posts/tools/travis.md","hash":"9b47cd5b6d5828d6b6dfb5c4f3dcfac213186ae0","modified":1609116928078},{"_id":"source/_posts/tools/windows.md","hash":"c3166cd3b86e5b06bf13a0946137eab3039f9ba6","modified":1609116928078},{"_id":"source/_posts/dotnetcore/consul/docker中安装Consul.md","hash":"81baedb5aeda97cf6a0b95a9d0ada469163a08c1","modified":1609116928054},{"_id":"source/_posts/dotnetcore/core/02cookie-base-authorization.md","hash":"ddba6a4e57662a4e36af12fc64d4982196d6134f","modified":1609116928055},{"_id":"source/_posts/dotnetcore/core/01dotnetcore-centos-install.md","hash":"28a8d60c585ff0cf3f55a9d9943b9b1dee7fc6a0","modified":1609116928055},{"_id":"source/_posts/dotnetcore/core/03jwt-authorization.md","hash":"6f2f671410427f06799488826243d5ce68e5a98d","modified":1609116928056},{"_id":"source/_posts/dotnetcore/core/efcore.md","hash":"7defba4ad88bcae2476c40cff857882612e891a6","modified":1609116928057},{"_id":"source/_posts/dotnetcore/core/collections.md","hash":"e5bcc8e2d711795238d827819cbdb3d8e3c11456","modified":1609116928056},{"_id":"source/_posts/dotnetcore/core/remark.md","hash":"9b4b18091452fb2d5027b6f26fd4460ccfca279d","modified":1609116928057},{"_id":"source/_posts/dotnetcore/identityserver4/01client-credentials.md","hash":"e7fb27c502ecba202751a977b9ecf1777f217553","modified":1609116928058},{"_id":"source/_posts/dotnetcore/identityserver4/article.md","hash":"c08bedb25c62674826dd071273dcfee246d8fc4c","modified":1609116928059},{"_id":"source/_posts/dotnetcore/identityserver4/02passport.md","hash":"3a7411cb322769af92bc7c9601e67339c0ea7bf2","modified":1609116928059},{"_id":"source/_posts/dotnetcore/signalr/00-introduct.md","hash":"86d6e6af5b12f4cb3fb5340f24d9062c4dee4304","modified":1609204435968},{"_id":"source/_posts/dotnetcore/signalr/01-base.md","hash":"18b3f40cbcec21079dd1b44f538b359f21bc3db5","modified":1609204149623},{"_id":"source/_posts/dotnetcore/signalr/02-type-hub.md","hash":"b3625c81945f0cf35606727900feba4f4a1ef8b4","modified":1609204149596},{"_id":"source/_posts/dotnetcore/signalr/03-message-pack.md","hash":"f40660086f4097b186289ec3b6ecb31f7d444b6c","modified":1609204149596},{"_id":"source/_posts/dotnetcore/signalr/04-redis.md","hash":"ca0f7d4777c5c837c7cf001f51fb8a00a9c78c58","modified":1609204149566},{"_id":"source/_posts/dotnetcore/signalr/05-jwt.md","hash":"cfb9049e226d62aeece07c5f1267a350645f7343","modified":1609204149587},{"_id":"source/_posts/dotnetcore/signalr/07-self-manager.md","hash":"41ffccf93148d77139329ad4dc03b399fe4563ec","modified":1609204149535},{"_id":"source/_posts/dotnetcore/signalr/06-analysis.md","hash":"3fe320b05b28d4aab817624c4aefeacb52ea27a4","modified":1609204149535},{"_id":"source/_posts/dotnetcore/signalr/08-clientdemo.md","hash":"d75c88e815d7d9ecb66f0276742b648e709dab24","modified":1609204149535},{"_id":"source/_posts/dotnetcore/signalr/09-todo.md","hash":"b96b8069d7ecc888ea85dfa636533c5d4290b32e","modified":1609204149535},{"_id":"source/_posts/front/other/VSCodeDebug.md","hash":"4d181e9f4ba0df19c22c1914dc8facfe3841e2a2","modified":1609116928067},{"_id":"source/_posts/front/react/collection.md","hash":"54b5280e060f3fa8b3e068be38dd092a355f82fe","modified":1609116928067},{"_id":"source/_posts/front/react/components.md","hash":"423dc5bba7296b7c3b14922299e57c6c2df9103a","modified":1609116928068},{"_id":"source/_posts/front/react/umi-library-self.md","hash":"f9feb62861c0bdb6b672ac20ac2b9ba049c3f3a8","modified":1609116928069},{"_id":"source/_posts/front/react/diy-component-pagedquery.md","hash":"d4e72371cf8ee3a29d5761e3b82ff3584901fe48","modified":1609116928068},{"_id":"source/_posts/front/react/umi-split-chunks.md","hash":"54d2bae93a002d46b2ee0c54187353999be644c8","modified":1609116928069},{"_id":"source/images/avatar.jpg","hash":"ed00a3f408ff50d499c27a58041c0b99ccae0022","modified":1609116928082},{"_id":"themes/hexo-theme-matery/.gitignore","hash":"eaa3d84cb77d92a21b111fd1e37f53edc1ff9de0","modified":1609116928092},{"_id":"themes/hexo-theme-matery/README.md","hash":"6bb9bbe1c6ea691e58f250de21bb729e956313ad","modified":1609116928094},{"_id":"themes/hexo-theme-matery/LICENSE","hash":"b314c7ebb7d599944981908b7f3ed33a30e78f3a","modified":1609116928093},{"_id":"themes/hexo-theme-matery/_config.yml","hash":"55e7bf247b2d5c90ca2359f965a420e20e0be27f","modified":1609116928095},{"_id":"themes/hexo-theme-matery/README_CN.md","hash":"a94324950e0299bcfcbc106cf2ca65c93e1fe843","modified":1609116928094},{"_id":"themes/hexo-theme-matery/languages/default.yml","hash":"53950d4a931c7beaf368a7be8d3e010ebeabedd5","modified":1609116928096},{"_id":"themes/hexo-theme-matery/languages/zh-CN.yml","hash":"d8df0fcfa465bc5977cbd04ff9b4b560378d16ff","modified":1609116928096},{"_id":"themes/hexo-theme-matery/layout/about.ejs","hash":"0a8942e2fa070d7d08ef0779267e1e05ff8e3065","modified":1609116928117},{"_id":"themes/hexo-theme-matery/layout/archive.ejs","hash":"410d85c8a8dbf8f66ce0c201eabeb107c1087544","modified":1609116928117},{"_id":"themes/hexo-theme-matery/layout/categories.ejs","hash":"c431e772d0f7700592228bbd9502793bdc28a893","modified":1609116928118},{"_id":"themes/hexo-theme-matery/layout/category.ejs","hash":"c3651f9a24dfd38323508ae6ab2232bddacee718","modified":1609116928119},{"_id":"themes/hexo-theme-matery/layout/friends.ejs","hash":"6758845f243de140bfd8cd1c2c962d967f9f09ff","modified":1609116928119},{"_id":"themes/hexo-theme-matery/layout/index.ejs","hash":"a8a8e1aca0d016b6da3c76b250f7f416f00384c3","modified":1609116928120},{"_id":"themes/hexo-theme-matery/layout/layout.ejs","hash":"f99d28f7c3382caf4321641f2d79582aac0b0c90","modified":1609116928121},{"_id":"themes/hexo-theme-matery/layout/post.ejs","hash":"9ecae79690293cacdccc172118f1fe481705b1f2","modified":1609116928121},{"_id":"themes/hexo-theme-matery/layout/tag.ejs","hash":"ac3837ecb32926e4c51c7c57cd0778242a4af7eb","modified":1609116928121},{"_id":"themes/hexo-theme-matery/layout/tags.ejs","hash":"851c0ee599e91e7b1d657673859e8b6ff79cf50b","modified":1609116928122},{"_id":"themes/hexo-theme-matery/source/favicon.png","hash":"20674c497b75fc889194b47fd18ecea12303d8ec","modified":1609116928126},{"_id":"themes/hexo-theme-matery/layout/_partial/back-top.ejs","hash":"cb99dc352397ec5d0765794d7b8884972e61973b","modified":1609116928097},{"_id":"themes/hexo-theme-matery/layout/_partial/bg-cover-content.ejs","hash":"c7274a65468e31cd654033f939b2fcf0c810aba2","modified":1609116928098},{"_id":"themes/hexo-theme-matery/layout/_partial/bg-cover.ejs","hash":"d5a7b9bb96e04c0a3485dd873748f19c50a6a04f","modified":1609116928098},{"_id":"themes/hexo-theme-matery/layout/_partial/disqus.ejs","hash":"42dda8e67f7f09d148347887e52f18aea546df26","modified":1609116928099},{"_id":"themes/hexo-theme-matery/layout/_partial/footer.ejs","hash":"a9ed456242c84a0a34d60a1b92889dd1b31efc37","modified":1609116928099},{"_id":"themes/hexo-theme-matery/layout/_partial/gitalk.ejs","hash":"4c658c0e2a6c666667199d1402aab4bcf9236b89","modified":1609116928100},{"_id":"themes/hexo-theme-matery/layout/_partial/github-link.ejs","hash":"fd4034bca2eb3987dcf113e6477260bee97eb1e7","modified":1609116928100},{"_id":"themes/hexo-theme-matery/layout/_partial/gitment.ejs","hash":"d8c40dbc8106b5bc53ceb727ad968c1d8f234261","modified":1609116928101},{"_id":"themes/hexo-theme-matery/layout/_partial/google-analytics.ejs","hash":"890c8f04c1f4905dfceb3ea9fd6efdd040d79c01","modified":1609116928101},{"_id":"themes/hexo-theme-matery/layout/_partial/head.ejs","hash":"6e51f083e032ea02ea4d07966d2d1cdf27915edf","modified":1609116928102},{"_id":"themes/hexo-theme-matery/layout/_partial/header.ejs","hash":"821e1af65990521c9e0288178d8e5b18c73a9cab","modified":1609116928102},{"_id":"themes/hexo-theme-matery/layout/_partial/index-cover.ejs","hash":"dded138c6cf821147b576658fd836d2f8900acfb","modified":1609116928103},{"_id":"themes/hexo-theme-matery/layout/_partial/livere.ejs","hash":"42728561c09589f79b698eb059ab4def53ed3642","modified":1609116928103},{"_id":"themes/hexo-theme-matery/layout/_partial/mobile-nav.ejs","hash":"8e4f8158a65843f7b4e5cde81c634ed181ee0667","modified":1609116928104},{"_id":"themes/hexo-theme-matery/layout/_partial/navigation.ejs","hash":"33c882dc2575739df042297f0ffa80d89ac10cd0","modified":1609116928104},{"_id":"themes/hexo-theme-matery/layout/_partial/paging.ejs","hash":"dfdeea9c59d157acb851d4bf44bf95f81787523c","modified":1609116928105},{"_id":"themes/hexo-theme-matery/layout/_partial/post-cover.ejs","hash":"ae8a8db3f0d630e92cf70cfcb3a9afb026b1395a","modified":1609116928105},{"_id":"themes/hexo-theme-matery/layout/_partial/post-detail-toc.ejs","hash":"82cb8090cde663fa7ad67418a802997b3057e957","modified":1609116928105},{"_id":"themes/hexo-theme-matery/layout/_partial/post-detail.ejs","hash":"ea1efc7c7a34b7798d832d8753fa39510afc4108","modified":1609116928106},{"_id":"themes/hexo-theme-matery/layout/_partial/post-statis.ejs","hash":"3b42900247d5ea4ea5b68e2be44420a0d54785ad","modified":1609116928106},{"_id":"themes/hexo-theme-matery/layout/_partial/prev-next.ejs","hash":"d0435697981030e5191436e24dd281fef915b062","modified":1609116928107},{"_id":"themes/hexo-theme-matery/layout/_partial/reprint-statement.ejs","hash":"f85a222ec3f9bc27eb7978015e63a16514b38791","modified":1609116928107},{"_id":"themes/hexo-theme-matery/layout/_partial/reward.ejs","hash":"73624d9db81e87ff0c12310bb873fbd0b5221021","modified":1609116928108},{"_id":"themes/hexo-theme-matery/layout/_partial/search.ejs","hash":"e859fe6e0259e0c123cb7ceda6e4cac836318ffc","modified":1609116928108},{"_id":"themes/hexo-theme-matery/layout/_partial/share.ejs","hash":"0f2e1e27d21492cf228e786daead985b1e1dcea4","modified":1609116928109},{"_id":"themes/hexo-theme-matery/layout/_partial/social-link.ejs","hash":"951810257f3dfafcc5156005daa0b65dd24a6296","modified":1609116928109},{"_id":"themes/hexo-theme-matery/layout/_partial/valine.ejs","hash":"8671cff27aef7298b2518dd57fe0671959f21701","modified":1609116928110},{"_id":"themes/hexo-theme-matery/layout/_partial/weixin.ejs","hash":"00295338694f0174f30f68bf45ce2d23c64bf2ba","modified":1609116928110},{"_id":"themes/hexo-theme-matery/layout/_widget/category-cloud.ejs","hash":"b2b22d4fc4e46b051f67216c391f629f4ff552b5","modified":1609116928111},{"_id":"themes/hexo-theme-matery/layout/_widget/category-radar.ejs","hash":"5284712d84bbaa4f0d88026ac3ec5a8c13e00056","modified":1609116928111},{"_id":"themes/hexo-theme-matery/layout/_widget/dream.ejs","hash":"2af85ddef6e61a44cbe10e8f6272a8324681ee3f","modified":1609116928112},{"_id":"themes/hexo-theme-matery/layout/_widget/music.ejs","hash":"fc50cb4bbc1f4d0e4c9f5941f1c3c74bea742db7","modified":1609116928112},{"_id":"themes/hexo-theme-matery/layout/_widget/my-gallery.ejs","hash":"9ea672db65f1e5b8fad1ffafb1614f25adc97e63","modified":1609116928113},{"_id":"themes/hexo-theme-matery/layout/_widget/my-projects.ejs","hash":"785cb588a31215876f6737213054ba0e8552fff0","modified":1609116928113},{"_id":"themes/hexo-theme-matery/layout/_widget/my-skills.ejs","hash":"599a49af8ce843878253dd95f07a06b00c269f47","modified":1609116928114},{"_id":"themes/hexo-theme-matery/layout/_widget/post-calendar.ejs","hash":"4608af6151f0e32f668c89f09343748340021478","modified":1609116928114},{"_id":"themes/hexo-theme-matery/layout/_widget/post-charts.ejs","hash":"0aaf0a111b9aa07ff37f6286eeac5506283f47f8","modified":1609116928115},{"_id":"themes/hexo-theme-matery/layout/_widget/recommend.ejs","hash":"42a88f242d9a446dc4c648575f7c05483d2d99a0","modified":1609116928115},{"_id":"themes/hexo-theme-matery/layout/_widget/tag-cloud.ejs","hash":"6310903eb0e434d6f9a59ca669aab7fae38d4797","modified":1609116928115},{"_id":"themes/hexo-theme-matery/layout/_widget/tag-wordcloud.ejs","hash":"34b625b27b2b7fe6f47c62a07c4f0a664ad06f32","modified":1609116928116},{"_id":"themes/hexo-theme-matery/layout/_widget/video.ejs","hash":"05f5e2acace5730cdf7bed650375ad88f6b5d1b7","modified":1609116928116},{"_id":"themes/hexo-theme-matery/source/css/gitment.css","hash":"d5ef623065d1fbc897119f7b70ccf7563e329917","modified":1609116928123},{"_id":"themes/hexo-theme-matery/source/css/matery.css","hash":"7c800a7914b096dd4fca06cbdd21327a92bdde85","modified":1609116928124},{"_id":"themes/hexo-theme-matery/source/css/my-gitalk.css","hash":"4e3e855767ac5a48b13af1d6a42df13d8975e03f","modified":1609116928125},{"_id":"themes/hexo-theme-matery/source/css/my.css","hash":"b1327af277d269bda7561d4d6124953f0f233a6e","modified":1609116928125},{"_id":"themes/hexo-theme-matery/source/js/matery.js","hash":"208b7806caa943c115aa0825c9c72a0781404775","modified":1609116928127},{"_id":"themes/hexo-theme-matery/source/js/search.js","hash":"77ecae23dd3edd8ad962c5b12954652bb2f7a1b6","modified":1609116928127},{"_id":"themes/hexo-theme-matery/source/medias/avatar.jpg","hash":"b7f8ca0c682f95d93f002c845aafbcb508ec2b0f","modified":1609116928191},{"_id":"themes/hexo-theme-matery/source/medias/logo.png","hash":"4050259723bd418648ec40028a8020364e57a6a3","modified":1609116928235},{"_id":"themes/hexo-theme-matery/source/libs/animate/animate.min.css","hash":"5dfcbcee866e9dc564916416281885f3e320871e","modified":1609116928129},{"_id":"themes/hexo-theme-matery/source/libs/aos/aos.css","hash":"ded9739f803d114c9168d3351fded72b3b478b4c","modified":1609116928130},{"_id":"themes/hexo-theme-matery/source/libs/aos/aos.js","hash":"5a8e6d07ffa55642418ab3fd4b263aa08284b77a","modified":1609116928130},{"_id":"themes/hexo-theme-matery/source/libs/aplayer/APlayer.min.css","hash":"7f4f8913f2d46ade2def5134e2cc8684a4b87939","modified":1609116928131},{"_id":"themes/hexo-theme-matery/source/libs/aplayer/APlayer.min.js","hash":"70c0c4a9bf698747b7c058c21287ad617355e5dd","modified":1609116928132},{"_id":"themes/hexo-theme-matery/source/libs/cryptojs/crypto-js.min.js","hash":"33810b2b757fc4327bc1d3b83bb5e0d3dc1fec5b","modified":1609116928149},{"_id":"themes/hexo-theme-matery/source/libs/dplayer/DPlayer.min.css","hash":"5d52d3b34fceb9d7e11f1beaf7ed380b4249dec4","modified":1609116928150},{"_id":"themes/hexo-theme-matery/source/libs/gitalk/gitalk.css","hash":"021898a16279ac2ffe75af4f902fab2a0a39f11a","modified":1609116928159},{"_id":"themes/hexo-theme-matery/source/libs/gitment/gitment-default.css","hash":"a0625d8b432af8bdc820f8768d36cde439e7257c","modified":1609116928162},{"_id":"themes/hexo-theme-matery/source/libs/jqcloud/jqcloud-1.0.4.min.js","hash":"26849509f196a2d21bbfd15696e5d5153163b8f1","modified":1609116928163},{"_id":"themes/hexo-theme-matery/source/libs/jqcloud/jqcloud.css","hash":"4e6538c8312aeeab845d361c37a8c1a0931241f0","modified":1609116928164},{"_id":"themes/hexo-theme-matery/source/libs/masonry/masonry.pkgd.min.js","hash":"f81cd7bfcf7aa2d043bd3e6077df42656fc44b82","modified":1609116928174},{"_id":"themes/hexo-theme-matery/source/libs/others/busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1609116928178},{"_id":"themes/hexo-theme-matery/source/libs/others/clicklove.js","hash":"6a39b8c683ba5dcd92f70c6ab45d1cfac3213e8e","modified":1609116928178},{"_id":"themes/hexo-theme-matery/source/libs/scrollprogress/scrollProgress.min.js","hash":"777ffe5d07e85a14fbe97d846f45ffc0087251cc","modified":1609116928179},{"_id":"themes/hexo-theme-matery/source/libs/tocbot/tocbot.css","hash":"f646f2bb75bcd1eb65b2788ac7bf15d4fd243ce9","modified":1609116928187},{"_id":"themes/hexo-theme-matery/source/libs/tocbot/tocbot.min.js","hash":"5ec27317f0270b8cf6b884c6f12025700b9a565c","modified":1609116928187},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/13.jpg","hash":"66706dfde7d910182c2f1dbadd0e9e917630b8dd","modified":1609116928218},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/15.jpg","hash":"5cf9fc64d5d74ab6ba69bb8bff580fdc22ba32d0","modified":1609116928220},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/16.jpg","hash":"9cac6b80b0cc8959fc8aabfbd1adcab79ebebfc9","modified":1609116928221},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/2.jpg","hash":"16f1d89cdba4dce935ac0f12599e0fcfda543a93","modified":1609116928224},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/21.jpg","hash":"d70b088850c3565e5b5bb9eb8fe4abe688c964cf","modified":1609116928226},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/22.jpg","hash":"bf5b59d193e5ca089a7fff034c222bfa2c4dc41f","modified":1609116928227},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/23.jpg","hash":"ed5ac9f616d3b99af5188a10b1761884c37e93e5","modified":1609116928228},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/5.jpg","hash":"c3c1f36a1b1886037db604f151f335cd4599e970","modified":1609116928231},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/8.jpg","hash":"5a46ca4ab4c4ab2101a2af77a31a8878bccc483c","modified":1609116928234},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/7.jpg","hash":"a0246a4a560438938489cdd154e35f172b3f31b0","modified":1609116928233},{"_id":"themes/hexo-theme-matery/source/medias/reward/alipay.jpg","hash":"1abc719b95d1b26f1f898e6b0a9b7609146e332f","modified":1609116928237},{"_id":"themes/hexo-theme-matery/source/medias/reward/wechat.png","hash":"fe93385aa92fe328e01c8221a80b039be9e4e140","modified":1609116928237},{"_id":"themes/hexo-theme-matery/source/libs/awesome/css/font-awesome.min.css","hash":"88af80502c44cd52ca81ffe7dc7276b7eccb06cf","modified":1609116928134},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/css/lightgallery.min.css","hash":"1b7227237f9785c66062a4811508916518e4132c","modified":1609116928167},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/loading.gif","hash":"15a76af2739482d8de7354abc6d8dc4fca8d145e","modified":1609116928170},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/video-play.png","hash":"fbfdbe06aebf7d0c00da175a4810cf888d128f11","modified":1609116928171},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/vimeo-play.png","hash":"1142b47de219dddfba2e712cd3189dec0c8b7bee","modified":1609116928171},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/img/youtube-play.png","hash":"39150b45ec5fc03155b7ebeaa44f1829281788e2","modified":1609116928172},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1609116928168},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.svg","hash":"3480f00d284c812d623ed16a9e0ead3fb964c72e","modified":1609116928168},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1609116928169},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1609116928169},{"_id":"themes/hexo-theme-matery/source/libs/lightGallery/js/lightgallery-all.min.js","hash":"f8cd48e1fff82ecd54a7ce3e69de8dba7c92d113","modified":1609116928173},{"_id":"themes/hexo-theme-matery/source/libs/share/css/share.min.css","hash":"7126de5cec8371e580b7b1f22512da0985cc39e5","modified":1609116928181},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.eot","hash":"00ff749c8e202401190cc98d56087cdda716abe4","modified":1609116928182},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.svg","hash":"337b4f156f6d8f4beb32c32a3db46fef361cff74","modified":1609116928182},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.woff","hash":"2e3fce1dcfbd6e2114e7bfbeaf72d3c62e15a1bd","modified":1609116928184},{"_id":"themes/hexo-theme-matery/source/libs/share/fonts/iconfont.ttf","hash":"afd898f59d363887418669520b24d175f966a083","modified":1609116928183},{"_id":"themes/hexo-theme-matery/source/libs/share/js/jquery.share.min.js","hash":"16ce82901ca0e302cf47a35fb10f59009a5e7eb9","modified":1609116928185},{"_id":"themes/hexo-theme-matery/source/libs/share/js/social-share.min.js","hash":"4df722bafde2c5d8faaace0d1f894798385a8793","modified":1609116928186},{"_id":"themes/hexo-theme-matery/source/libs/dplayer/DPlayer.min.js","hash":"82276be41d2001e820020a219b90ad5b026302d1","modified":1609116928151},{"_id":"themes/hexo-theme-matery/source/libs/gitment/gitment.js","hash":"5a13983930b019450e4fe01a407c64b3dd316be4","modified":1609116928163},{"_id":"themes/hexo-theme-matery/source/libs/jquery/jquery-2.2.0.min.js","hash":"7a551393b8360731104fdef1af36a6f3638f5855","modified":1609116928165},{"_id":"themes/hexo-theme-matery/source/libs/valine/Valine.min.js","hash":"6979c760beb550b681a06a8f11688f2d1591a70e","modified":1609116928189},{"_id":"themes/hexo-theme-matery/source/medias/banner/0.jpg","hash":"2e996db3390503bbec1661df9d52452d0ddfce15","modified":1609116928193},{"_id":"themes/hexo-theme-matery/source/medias/banner/1.jpg","hash":"f824ffc3b798c9989e469717d4f2c1cd19c5f44f","modified":1609116928194},{"_id":"themes/hexo-theme-matery/source/medias/banner/3.jpg","hash":"63f7d7c10b50e6a69afa849c25e34734497a0016","modified":1609116928198},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/0.jpg","hash":"2066cdda98ad0035071cd4aa7bd696eb078c0b6d","modified":1609116928213},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/1.jpg","hash":"d16e28bd23ea3a63643826dde5eea6b7a9bdda5d","modified":1609116928215},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/10.jpg","hash":"838e704942de076c60894d14e5f280e2724b6f68","modified":1609116928215},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/11.jpg","hash":"9ed45f95b83626e3d91d6c405eb8bfe6fcb9736a","modified":1609116928216},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/12.jpg","hash":"047be4239dd7e0be83243ee6b49a392a61f16b9a","modified":1609116928217},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/14.jpg","hash":"8aeb816faca2d5eaea4cce9e881d6ff87b8c7cf1","modified":1609116928219},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/17.jpg","hash":"f168ca5b046d10a878a7b0bcfab540e2c4428887","modified":1609116928222},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/18.jpg","hash":"ae23fdfaa59bc57b7ed49e90c5d59e4b68e1eea5","modified":1609116928223},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/19.jpg","hash":"57bc7c804b78b5cceb4eb1f9e51b734b75151b71","modified":1609116928224},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/20.jpg","hash":"8271c4a327632b566ea62f546c083d08a0528e72","modified":1609116928226},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/3.jpg","hash":"5e879652e032f02961a331b598a50b60ebe80a39","modified":1609116928229},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/4.jpg","hash":"4eea5bdb5724ef1ed65790e481eda0d2fb176bf0","modified":1609116928230},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/6.jpg","hash":"c63ff64bdd5f6c82da8804c7248fc519d23eaf0b","modified":1609116928232},{"_id":"themes/hexo-theme-matery/source/medias/featureimages/9.jpg","hash":"815c84778b721e3606c2bd7c099c7de7c53251ba","modified":1609116928235},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1609116928146},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1609116928148},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/0.jpg","hash":"1f2ec55fe7825475fde2601573bb622f0bf2acba","modified":1609116928206},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/2.jpg","hash":"8d3c8391ff161eec70f66d69e5545a9468cc52ef","modified":1609116928209},{"_id":"themes/hexo-theme-matery/source/medias/cover.jpg","hash":"d4957ff7cc5e88555cd840f2956ab0561e6f1ccf","modified":1609116928212},{"_id":"themes/hexo-theme-matery/source/libs/gitalk/gitalk.min.js","hash":"9d5dd7e092c8eaf6266e2498cff72e6c98790a05","modified":1609116928161},{"_id":"themes/hexo-theme-matery/source/libs/materialize/materialize.min.css","hash":"80ae4aa0dba3634dd9bf59586d541d2dd8d8191c","modified":1609116928175},{"_id":"themes/hexo-theme-matery/source/libs/materialize/materialize.min.js","hash":"c843f0dc497314574c608ca28cc742bb041786d5","modified":1609116928177},{"_id":"themes/hexo-theme-matery/source/libs/valine/av-min.js","hash":"04c6b2782ce4610c429563110f6a20a47432fc4c","modified":1609116928190},{"_id":"themes/hexo-theme-matery/source/medias/banner/2.jpg","hash":"0af0c00dacb39391c7a49a1f21af2dd94ef3d0cd","modified":1609116928197},{"_id":"themes/hexo-theme-matery/source/medias/banner/5.jpg","hash":"4a08deec1dd5b4f1490e8fc23adfb75a0f88b0c4","modified":1609116928202},{"_id":"themes/hexo-theme-matery/source/medias/banner/6.jpg","hash":"62e9586a8cec91a160f147c424a3d1d1aea360f9","modified":1609116928204},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1609116928136},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/1.jpg","hash":"c3d5ab183b39a7140941b8375e29498f9d24f343","modified":1609116928207},{"_id":"themes/hexo-theme-matery/source/medias/banner/bak/3.jpg","hash":"d4957ff7cc5e88555cd840f2956ab0561e6f1ccf","modified":1609116928211},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1609116928139},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1609116928145},{"_id":"themes/hexo-theme-matery/source/medias/banner/4.jpg","hash":"56850c3139cbd72a0eff0c35d8fac32c9c66dd6a","modified":1609116928200},{"_id":"themes/hexo-theme-matery/source/libs/awesome/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1609116928143},{"_id":"themes/hexo-theme-matery/source/libs/echarts/echarts.min.js","hash":"8789b5e4daf0029a6c88f238f10e54d01c4fce82","modified":1609116928158}],"Category":[{"name":"Docker","_id":"ckj9at6u50006d8v8gbxw6eac"},{"name":"Flutter","_id":"ckj9at6uy0019d8v82l2zeaxy"},{"name":"Nginx","_id":"ckj9at6v3001id8v8hnc91xex"},{"name":"其他","_id":"ckj9at6vd001qd8v8h64v46a4"},{"name":"redis","_id":"ckj9at6vh001wd8v8b444gjyw"},{"name":"工具","_id":"ckj9at6vp0027d8v8ab7lhqy4"},{"name":".NetCore","_id":"ckj9at6wt003yd8v8dq083k7a"},{"name":"React","_id":"ckj9at6y3005zd8v8284c24qu"},{"name":"前端-其他","_id":"ckj9at6y50064d8v8bgef8grs"}],"Data":[{"_id":"friends","data":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}],"Page":[{"title":"关于我","date":"2018-08-14T13:44:14.000Z","comments":0,"reward":false,"about":false,"_content":"\n##### 个人信息\n姓名: ***谢新根***  \n昵称: 程序有Bug ```（英名:XXG）```  \n地址：目前浪迹于大长沙  \nQQ: 1002275364  \n自我描述: 爱代码爱生活  \n##### 技术星级 \n| 技术点 | 星级 |\n|:-------|:-----:|\n|.NET、.NETCore、js、SqlServer|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-half\"></span>|\n|Dapper、EF、PetaPoco|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span>|\n|Signalr、ABP、DDD、Redis、RabbitMQ、IdentityServer|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|CAP、Consul、Ocelot、微服务、Polly、OChars、微信公众号、微信小程序|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|React、Antd、Vue、ElementUI、TypeScript、Webpack、umi、dva、taro|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|Docker、CICD、GitLab、Linux|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|第三方支付、第三方登录、快递接口、短信接口、web快递单打印、条码打印、导出excel,word,pdf等常用第三的东西|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|puppeteer、electronjs、egg、谷歌浏览器插件等一些好玩的|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n##### 做过的系统\n- [临床试验平台](http://www.wetrial.com)\n- 跨境电商物流系统  \n- 外贸ERP     \n- 其他(懒得写了)\n\n##### 个人链接\n- [个人博客](http://blog.xxgtalk.cn)、[之前的博客](http://www.cnblogs.com/xiexingen)\n- [个人Github](http://www.github.com/xiexingen)、[公司Github](http://www.github.com/wetrial)\n- [demo](http://jui-sample.xxgtalk.cn) --(服务器比较弱)\n- [其他](https://www.cnblogs.com/xiexingen/p/4553354.html)","source":"about/index.md","raw":"---\ntitle: 关于我\ndate: 2018-08-14 21:44:14\ncomments: false\nreward: false\nabout: false\n---\n\n##### 个人信息\n姓名: ***谢新根***  \n昵称: 程序有Bug ```（英名:XXG）```  \n地址：目前浪迹于大长沙  \nQQ: 1002275364  \n自我描述: 爱代码爱生活  \n##### 技术星级 \n| 技术点 | 星级 |\n|:-------|:-----:|\n|.NET、.NETCore、js、SqlServer|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-half\"></span>|\n|Dapper、EF、PetaPoco|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span>|\n|Signalr、ABP、DDD、Redis、RabbitMQ、IdentityServer|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|CAP、Consul、Ocelot、微服务、Polly、OChars、微信公众号、微信小程序|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|React、Antd、Vue、ElementUI、TypeScript、Webpack、umi、dva、taro|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|Docker、CICD、GitLab、Linux|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|第三方支付、第三方登录、快递接口、短信接口、web快递单打印、条码打印、导出excel,word,pdf等常用第三的东西|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n|puppeteer、electronjs、egg、谷歌浏览器插件等一些好玩的|<span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span>|\n##### 做过的系统\n- [临床试验平台](http://www.wetrial.com)\n- 跨境电商物流系统  \n- 外贸ERP     \n- 其他(懒得写了)\n\n##### 个人链接\n- [个人博客](http://blog.xxgtalk.cn)、[之前的博客](http://www.cnblogs.com/xiexingen)\n- [个人Github](http://www.github.com/xiexingen)、[公司Github](http://www.github.com/wetrial)\n- [demo](http://jui-sample.xxgtalk.cn) --(服务器比较弱)\n- [其他](https://www.cnblogs.com/xiexingen/p/4553354.html)","updated":"2020-12-28T00:55:28.079Z","path":"about/index.html","layout":"page","_id":"ckj9at6tp0000d8v8hwlsabd2","content":"<h5 id=\"个人信息\"><a href=\"#个人信息\" class=\"headerlink\" title=\"个人信息\"></a>个人信息</h5><p>姓名: <strong><em>谢新根</em></strong><br>昵称: 程序有Bug <code>（英名:XXG）</code><br>地址：目前浪迹于大长沙<br>QQ: 1002275364<br>自我描述: 爱代码爱生活  </p>\n<h5 id=\"技术星级\"><a href=\"#技术星级\" class=\"headerlink\" title=\"技术星级\"></a>技术星级</h5><table>\n<thead>\n<tr>\n<th align=\"left\">技术点</th>\n<th align=\"center\">星级</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">.NET、.NETCore、js、SqlServer</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-half\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">Dapper、EF、PetaPoco</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">Signalr、ABP、DDD、Redis、RabbitMQ、IdentityServer</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">CAP、Consul、Ocelot、微服务、Polly、OChars、微信公众号、微信小程序</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">React、Antd、Vue、ElementUI、TypeScript、Webpack、umi、dva、taro</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">Docker、CICD、GitLab、Linux</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">第三方支付、第三方登录、快递接口、短信接口、web快递单打印、条码打印、导出excel,word,pdf等常用第三的东西</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">puppeteer、electronjs、egg、谷歌浏览器插件等一些好玩的</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n</tbody></table>\n<h5 id=\"做过的系统\"><a href=\"#做过的系统\" class=\"headerlink\" title=\"做过的系统\"></a>做过的系统</h5><ul>\n<li><a href=\"http://www.wetrial.com/\">临床试验平台</a></li>\n<li>跨境电商物流系统  </li>\n<li>外贸ERP     </li>\n<li>其他(懒得写了)</li>\n</ul>\n<h5 id=\"个人链接\"><a href=\"#个人链接\" class=\"headerlink\" title=\"个人链接\"></a>个人链接</h5><ul>\n<li><a href=\"http://blog.xxgtalk.cn/\">个人博客</a>、<a href=\"http://www.cnblogs.com/xiexingen\">之前的博客</a></li>\n<li><a href=\"http://www.github.com/xiexingen\">个人Github</a>、<a href=\"http://www.github.com/wetrial\">公司Github</a></li>\n<li><a href=\"http://jui-sample.xxgtalk.cn/\">demo</a> –(服务器比较弱)</li>\n<li><a href=\"https://www.cnblogs.com/xiexingen/p/4553354.html\">其他</a></li>\n</ul>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"","more":"<h5 id=\"个人信息\"><a href=\"#个人信息\" class=\"headerlink\" title=\"个人信息\"></a>个人信息</h5><p>姓名: <strong><em>谢新根</em></strong><br>昵称: 程序有Bug <code>（英名:XXG）</code><br>地址：目前浪迹于大长沙<br>QQ: 1002275364<br>自我描述: 爱代码爱生活  </p>\n<h5 id=\"技术星级\"><a href=\"#技术星级\" class=\"headerlink\" title=\"技术星级\"></a>技术星级</h5><table>\n<thead>\n<tr>\n<th align=\"left\">技术点</th>\n<th align=\"center\">星级</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">.NET、.NETCore、js、SqlServer</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-half\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">Dapper、EF、PetaPoco</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">Signalr、ABP、DDD、Redis、RabbitMQ、IdentityServer</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">CAP、Consul、Ocelot、微服务、Polly、OChars、微信公众号、微信小程序</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">React、Antd、Vue、ElementUI、TypeScript、Webpack、umi、dva、taro</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">Docker、CICD、GitLab、Linux</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">第三方支付、第三方登录、快递接口、短信接口、web快递单打印、条码打印、导出excel,word,pdf等常用第三的东西</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n<tr>\n<td align=\"left\">puppeteer、electronjs、egg、谷歌浏览器插件等一些好玩的</td>\n<td align=\"center\"><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span><span class=\"task-star star-full\"></span></span><span class=\"task-star star-off\"></span><span class=\"task-star star-off\"></span></td>\n</tr>\n</tbody></table>\n<h5 id=\"做过的系统\"><a href=\"#做过的系统\" class=\"headerlink\" title=\"做过的系统\"></a>做过的系统</h5><ul>\n<li><a href=\"http://www.wetrial.com/\">临床试验平台</a></li>\n<li>跨境电商物流系统  </li>\n<li>外贸ERP     </li>\n<li>其他(懒得写了)</li>\n</ul>\n<h5 id=\"个人链接\"><a href=\"#个人链接\" class=\"headerlink\" title=\"个人链接\"></a>个人链接</h5><ul>\n<li><a href=\"http://blog.xxgtalk.cn/\">个人博客</a>、<a href=\"http://www.cnblogs.com/xiexingen\">之前的博客</a></li>\n<li><a href=\"http://www.github.com/xiexingen\">个人Github</a>、<a href=\"http://www.github.com/wetrial\">公司Github</a></li>\n<li><a href=\"http://jui-sample.xxgtalk.cn/\">demo</a> –(服务器比较弱)</li>\n<li><a href=\"https://www.cnblogs.com/xiexingen/p/4553354.html\">其他</a></li>\n</ul>\n"},{"title":"所有分类","date":"2018-08-14T13:42:41.000Z","type":"categories","layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: 所有分类\ndate: 2018-08-14 21:42:41\ntype: \"categories\"\nlayout: \"categories\"\n---","updated":"2020-12-28T00:55:28.080Z","path":"categories/index.html","comments":1,"_id":"ckj9at6tz0002d8v81fbi8e8c","content":"","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"","more":""},{"title":"友情链接","date":"2019-05-21T01:16:30.000Z","type":"friends","layout":"friends","_content":"","source":"friends/index.md","raw":"---\ntitle: 友情链接\ndate: 2019-05-21 09:16:30\ntype: \"friends\"\nlayout: \"friends\"\n---\n","updated":"2020-12-28T00:55:28.080Z","path":"friends/index.html","comments":1,"_id":"ckj9at6u20004d8v886hl7835","content":"","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"","more":""},{"title":"所有标签","date":"2018-08-14T01:28:57.000Z","type":"tags","layout":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: 所有标签\ndate: 2018-08-14 09:28:57\ntype: \"tags\"\nlayout: \"tags\"\n---","updated":"2020-12-28T00:55:28.086Z","path":"tags/index.html","comments":1,"_id":"ckj9at6u80008d8v8dnwjh1gv","content":"","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"","more":""}],"Post":[{"title":"开通自己的博客","author":"谢新根","abbrlink":36502,"date":"2016-04-01T00:01:01.000Z","_content":"\n从hexo切换到vuepress又切回hexo啦！！！\n<!-- more -->\n\n::: tip 大家好\n我是谢新根，网名:```程序有Bug``` 性别:男 爱好:代码、生活、自行车、羽毛球 性格:沉稳而不活泼、内敛而不明骚、随和而不暴力、帅气中带点闷骚,好啦好啦 第一天开通自己的博客，到此为止吧\n:::\n","source":"_posts/helleword.md","raw":"---\ntitle: 开通自己的博客\nauthor: 谢新根\nabbrlink: 36502\ndate: 2016-04-01 08:01:01\n---\n\n从hexo切换到vuepress又切回hexo啦！！！\n<!-- more -->\n\n::: tip 大家好\n我是谢新根，网名:```程序有Bug``` 性别:男 爱好:代码、生活、自行车、羽毛球 性格:沉稳而不活泼、内敛而不明骚、随和而不暴力、帅气中带点闷骚,好啦好啦 第一天开通自己的博客，到此为止吧\n:::\n","slug":"helleword","published":1,"updated":"2020-12-29T01:15:00.422Z","_id":"ckj9at6ts0001d8v844mp8w62","comments":1,"layout":"post","photos":[],"link":""},{"title":"Docker常用命令","abbrlink":7569,"date":"2018-05-28T01:10:10.000Z","_content":"\nDocker常用命令\n<!-- more -->\n\n| 命令 | 说明 | 参数\n| :--- | :--- | :---\n|docker --version | 查看当前docker版本 |\n|docker ps    | 查看当前正在运行的容器 |\n|docker images | 查看本地所有镜像 |\n|docker pull [镜像名称]|  拉取一个镜像到本地  |\n|docker run [容器名称]| 运行一个容器  |\n|docker rm [容器名称] | 删除本地使用过的容器  |\n|docker start [Name] | 启动指定容器  |\n|docker stop [Name] | 关闭指定容器  |\n|docker kill [Name] | 强制关闭指定容器  |\n|docker pause [Name]|暂停指定容器 |\n|docker unpause [Name]|恢复指定容器 |\n|docker rmi -f $(docker images -a -q)|  移除所有images  |\n|docker rmi $(docker images -f 'dangling=true' -q)|移除none的images  \n|docker inspect [容器名称] | 查看容器的信息  |\n|docker exec -it [容器名称] bash | 在容器内执行bash 比如执行后可以执行ls查看目录 也可以创建文件等  |\n|docker rm -fv [容器Id] | 停止、删除容器、清除数据  |\n|docker images -f [option] | 过滤查询 | \n|docker logs -f [container-name]| 查看日志\n|docker history [container-name]| 查看镜像的构建历史\n\n* 数据卷\n-v 主机目录:容器目录   \ndocker run -it -v /docker/data:/config [--privileged=true] 表示将宿主机中的/docker目录跟容器中的/config目录做一个映射，如果没有将自动创建  \n> 如果遇到数据卷没权限访问，则在后面增加 --privileged=true即可\n\n* 数据卷容器\n--volumns-form containerId|name  表示容器数据卷从name容器同步  \n> docker run -it --name xxg2 --volumns-from xxg1 nginx\n\nwarning 温馨提示\n* docker run -p 8001:80   &nbsp;&nbsp;--运行 指定端口 8001外部端口  80表示内部端口\n* docker run -d     \t\t&nbsp;&nbsp;--detach 还可以继续操作 不会阻塞\n* docker run --name\t\t&nbsp;&nbsp;--运行的docker镜像的名称\n* docker run -p 8001:80 &nbsp;&nbsp;--name myapi helloapi:latest  \n表示运行docker中名为helloapi的容器 版本为latest docker的端口为80 本机的端口8001 名字为myapi\n* docker ps -a\t\t\t&nbsp;&nbsp;--查看所有容器 不管有没运行\n* 过滤查询  \n docker images --filter \"before=image1\" 查询image1之后的  \n docker images --filter \"since=image3\"  查询image3之前的  \n docker images \"wechat:v1.3.*\"  查询wechat:1.3.x的  \n docker rmi -f $(docker images \"wechat:v1.2.*\" -q) 移除wechat:v1.2.*版本的\n* docker logs查看日志\n docker logs -f gitlab 查看gitlab容器所有日志\n docker logs --tail 20 -f gitlab 查看gitlab最近20条的日志\n docker logs --since 30s -f gitlab 查看gitlab最近30s的日志\n\n* docker inspect 查看日志文件位置  \n``` bash\ndocker inspect --format='{{.LogPath}}' mysql  \n```\n* 清空docker实例的日志内容  \n\n``` bash\n$(docker inspect --format='{{.LogPath}}' <容器ID>)\n```\n\n* 退出 -it  \nexit 或者ctrl+p+q\n:::\n\n\n\n","source":"_posts/docker/00command.md","raw":"---\ntitle: Docker常用命令\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 7569\ndate: 2018-05-28 09:10:10\n---\n\nDocker常用命令\n<!-- more -->\n\n| 命令 | 说明 | 参数\n| :--- | :--- | :---\n|docker --version | 查看当前docker版本 |\n|docker ps    | 查看当前正在运行的容器 |\n|docker images | 查看本地所有镜像 |\n|docker pull [镜像名称]|  拉取一个镜像到本地  |\n|docker run [容器名称]| 运行一个容器  |\n|docker rm [容器名称] | 删除本地使用过的容器  |\n|docker start [Name] | 启动指定容器  |\n|docker stop [Name] | 关闭指定容器  |\n|docker kill [Name] | 强制关闭指定容器  |\n|docker pause [Name]|暂停指定容器 |\n|docker unpause [Name]|恢复指定容器 |\n|docker rmi -f $(docker images -a -q)|  移除所有images  |\n|docker rmi $(docker images -f 'dangling=true' -q)|移除none的images  \n|docker inspect [容器名称] | 查看容器的信息  |\n|docker exec -it [容器名称] bash | 在容器内执行bash 比如执行后可以执行ls查看目录 也可以创建文件等  |\n|docker rm -fv [容器Id] | 停止、删除容器、清除数据  |\n|docker images -f [option] | 过滤查询 | \n|docker logs -f [container-name]| 查看日志\n|docker history [container-name]| 查看镜像的构建历史\n\n* 数据卷\n-v 主机目录:容器目录   \ndocker run -it -v /docker/data:/config [--privileged=true] 表示将宿主机中的/docker目录跟容器中的/config目录做一个映射，如果没有将自动创建  \n> 如果遇到数据卷没权限访问，则在后面增加 --privileged=true即可\n\n* 数据卷容器\n--volumns-form containerId|name  表示容器数据卷从name容器同步  \n> docker run -it --name xxg2 --volumns-from xxg1 nginx\n\nwarning 温馨提示\n* docker run -p 8001:80   &nbsp;&nbsp;--运行 指定端口 8001外部端口  80表示内部端口\n* docker run -d     \t\t&nbsp;&nbsp;--detach 还可以继续操作 不会阻塞\n* docker run --name\t\t&nbsp;&nbsp;--运行的docker镜像的名称\n* docker run -p 8001:80 &nbsp;&nbsp;--name myapi helloapi:latest  \n表示运行docker中名为helloapi的容器 版本为latest docker的端口为80 本机的端口8001 名字为myapi\n* docker ps -a\t\t\t&nbsp;&nbsp;--查看所有容器 不管有没运行\n* 过滤查询  \n docker images --filter \"before=image1\" 查询image1之后的  \n docker images --filter \"since=image3\"  查询image3之前的  \n docker images \"wechat:v1.3.*\"  查询wechat:1.3.x的  \n docker rmi -f $(docker images \"wechat:v1.2.*\" -q) 移除wechat:v1.2.*版本的\n* docker logs查看日志\n docker logs -f gitlab 查看gitlab容器所有日志\n docker logs --tail 20 -f gitlab 查看gitlab最近20条的日志\n docker logs --since 30s -f gitlab 查看gitlab最近30s的日志\n\n* docker inspect 查看日志文件位置  \n``` bash\ndocker inspect --format='{{.LogPath}}' mysql  \n```\n* 清空docker实例的日志内容  \n\n``` bash\n$(docker inspect --format='{{.LogPath}}' <容器ID>)\n```\n\n* 退出 -it  \nexit 或者ctrl+p+q\n:::\n\n\n\n","slug":"docker/00command","published":1,"updated":"2020-12-28T00:55:28.048Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6u00003d8v865t334v9","content":"<p>Docker常用命令</p>\n<a id=\"more\"></a>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\">命令</th>\n<th align=\"left\">说明</th>\n<th align=\"left\">参数</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">docker –version</td>\n<td align=\"left\">查看当前docker版本</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker ps</td>\n<td align=\"left\">查看当前正在运行的容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker images</td>\n<td align=\"left\">查看本地所有镜像</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker pull [镜像名称]</td>\n<td align=\"left\">拉取一个镜像到本地</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker run [容器名称]</td>\n<td align=\"left\">运行一个容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker rm [容器名称]</td>\n<td align=\"left\">删除本地使用过的容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker start [Name]</td>\n<td align=\"left\">启动指定容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker stop [Name]</td>\n<td align=\"left\">关闭指定容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker kill [Name]</td>\n<td align=\"left\">强制关闭指定容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker pause [Name]</td>\n<td align=\"left\">暂停指定容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker unpause [Name]</td>\n<td align=\"left\">恢复指定容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker rmi -f $(docker images -a -q)</td>\n<td align=\"left\">移除所有images</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker rmi $(docker images -f ‘dangling=true’ -q)</td>\n<td align=\"left\">移除none的images</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker inspect [容器名称]</td>\n<td align=\"left\">查看容器的信息</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker exec -it [容器名称] bash</td>\n<td align=\"left\">在容器内执行bash 比如执行后可以执行ls查看目录 也可以创建文件等</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker rm -fv [容器Id]</td>\n<td align=\"left\">停止、删除容器、清除数据</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker images -f [option]</td>\n<td align=\"left\">过滤查询</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker logs -f [container-name]</td>\n<td align=\"left\">查看日志</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker history [container-name]</td>\n<td align=\"left\">查看镜像的构建历史</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<ul>\n<li>数据卷</li>\n</ul>\n<p>-v 主机目录:容器目录<br>docker run -it -v /docker/data:/config [–privileged=true] 表示将宿主机中的/docker目录跟容器中的/config目录做一个映射，如果没有将自动创建  </p>\n<blockquote>\n<p>如果遇到数据卷没权限访问，则在后面增加 –privileged=true即可</p>\n</blockquote>\n<ul>\n<li>数据卷容器</li>\n</ul>\n<p>–volumns-form containerId|name  表示容器数据卷从name容器同步  </p>\n<blockquote>\n<p>docker run -it –name xxg2 –volumns-from xxg1 nginx</p>\n</blockquote>\n<p>warning 温馨提示</p>\n<ul>\n<li><p>docker run -p 8001:80   &nbsp;&nbsp;–运行 指定端口 8001外部端口  80表示内部端口</p>\n</li>\n<li><p>docker run -d             &nbsp;&nbsp;–detach 还可以继续操作 不会阻塞</p>\n</li>\n<li><p>docker run –name        &nbsp;&nbsp;–运行的docker镜像的名称</p>\n</li>\n<li><p>docker run -p 8001:80 &nbsp;&nbsp;–name myapi helloapi:latest<br>表示运行docker中名为helloapi的容器 版本为latest docker的端口为80 本机的端口8001 名字为myapi</p>\n</li>\n<li><p>docker ps -a            &nbsp;&nbsp;–查看所有容器 不管有没运行</p>\n</li>\n<li><p>过滤查询<br>docker images –filter “before=image1” 查询image1之后的<br>docker images –filter “since=image3”  查询image3之前的<br>docker images “wechat:v1.3.<em>“  查询wechat:1.3.x的<br>docker rmi -f $(docker images “wechat:v1.2.</em>“ -q) 移除wechat:v1.2.*版本的</p>\n</li>\n<li><p>docker logs查看日志<br>docker logs -f gitlab 查看gitlab容器所有日志<br>docker logs –tail 20 -f gitlab 查看gitlab最近20条的日志<br>docker logs –since 30s -f gitlab 查看gitlab最近30s的日志</p>\n</li>\n<li><p>docker inspect 查看日志文件位置  </p>\n<pre class=\" language-bash\"><code class=\"language-bash\">docker inspect --format<span class=\"token operator\">=</span><span class=\"token string\">'&amp;#123;&amp;#123;.LogPath&amp;#125;&amp;#125;'</span> mysql  </code></pre>\n</li>\n<li><p>清空docker实例的日志内容  </p>\n</li>\n</ul>\n<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">$(</span>docker inspect --format<span class=\"token operator\">=</span><span class=\"token string\">'&amp;#123;&amp;#123;.LogPath&amp;#125;&amp;#125;'</span> <span class=\"token operator\">&lt;</span>容器ID<span class=\"token operator\">></span><span class=\"token punctuation\">)</span></code></pre>\n<ul>\n<li>退出 -it<br>exit 或者ctrl+p+q<br>:::</li>\n</ul>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Docker常用命令</p>","more":"<table>\n<thead>\n<tr>\n<th align=\"left\">命令</th>\n<th align=\"left\">说明</th>\n<th align=\"left\">参数</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">docker –version</td>\n<td align=\"left\">查看当前docker版本</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker ps</td>\n<td align=\"left\">查看当前正在运行的容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker images</td>\n<td align=\"left\">查看本地所有镜像</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker pull [镜像名称]</td>\n<td align=\"left\">拉取一个镜像到本地</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker run [容器名称]</td>\n<td align=\"left\">运行一个容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker rm [容器名称]</td>\n<td align=\"left\">删除本地使用过的容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker start [Name]</td>\n<td align=\"left\">启动指定容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker stop [Name]</td>\n<td align=\"left\">关闭指定容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker kill [Name]</td>\n<td align=\"left\">强制关闭指定容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker pause [Name]</td>\n<td align=\"left\">暂停指定容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker unpause [Name]</td>\n<td align=\"left\">恢复指定容器</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker rmi -f $(docker images -a -q)</td>\n<td align=\"left\">移除所有images</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker rmi $(docker images -f ‘dangling=true’ -q)</td>\n<td align=\"left\">移除none的images</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker inspect [容器名称]</td>\n<td align=\"left\">查看容器的信息</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker exec -it [容器名称] bash</td>\n<td align=\"left\">在容器内执行bash 比如执行后可以执行ls查看目录 也可以创建文件等</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker rm -fv [容器Id]</td>\n<td align=\"left\">停止、删除容器、清除数据</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker images -f [option]</td>\n<td align=\"left\">过滤查询</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker logs -f [container-name]</td>\n<td align=\"left\">查看日志</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">docker history [container-name]</td>\n<td align=\"left\">查看镜像的构建历史</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<ul>\n<li>数据卷</li>\n</ul>\n<p>-v 主机目录:容器目录<br>docker run -it -v /docker/data:/config [–privileged=true] 表示将宿主机中的/docker目录跟容器中的/config目录做一个映射，如果没有将自动创建  </p>\n<blockquote>\n<p>如果遇到数据卷没权限访问，则在后面增加 –privileged=true即可</p>\n</blockquote>\n<ul>\n<li>数据卷容器</li>\n</ul>\n<p>–volumns-form containerId|name  表示容器数据卷从name容器同步  </p>\n<blockquote>\n<p>docker run -it –name xxg2 –volumns-from xxg1 nginx</p>\n</blockquote>\n<p>warning 温馨提示</p>\n<ul>\n<li><p>docker run -p 8001:80   &nbsp;&nbsp;–运行 指定端口 8001外部端口  80表示内部端口</p>\n</li>\n<li><p>docker run -d             &nbsp;&nbsp;–detach 还可以继续操作 不会阻塞</p>\n</li>\n<li><p>docker run –name        &nbsp;&nbsp;–运行的docker镜像的名称</p>\n</li>\n<li><p>docker run -p 8001:80 &nbsp;&nbsp;–name myapi helloapi:latest<br>表示运行docker中名为helloapi的容器 版本为latest docker的端口为80 本机的端口8001 名字为myapi</p>\n</li>\n<li><p>docker ps -a            &nbsp;&nbsp;–查看所有容器 不管有没运行</p>\n</li>\n<li><p>过滤查询<br>docker images –filter “before=image1” 查询image1之后的<br>docker images –filter “since=image3”  查询image3之前的<br>docker images “wechat:v1.3.<em>“  查询wechat:1.3.x的<br>docker rmi -f $(docker images “wechat:v1.2.</em>“ -q) 移除wechat:v1.2.*版本的</p>\n</li>\n<li><p>docker logs查看日志<br>docker logs -f gitlab 查看gitlab容器所有日志<br>docker logs –tail 20 -f gitlab 查看gitlab最近20条的日志<br>docker logs –since 30s -f gitlab 查看gitlab最近30s的日志</p>\n</li>\n<li><p>docker inspect 查看日志文件位置  </p>\n<pre><code class=\"bash\">docker inspect --format=&#39;&#123;&#123;.LogPath&#125;&#125;&#39; mysql  </code></pre>\n</li>\n<li><p>清空docker实例的日志内容  </p>\n</li>\n</ul>\n<pre><code class=\"bash\">$(docker inspect --format=&#39;&#123;&#123;.LogPath&#125;&#125;&#39; &lt;容器ID&gt;)</code></pre>\n<ul>\n<li>退出 -it<br>exit 或者ctrl+p+q<br>:::</li>\n</ul>"},{"title":"Docker安装及配置加速镜像","abbrlink":20794,"date":"2018-05-30T01:15:08.000Z","_content":"\nDocker安装及配置加速镜像\n<!-- more -->\n\n> 个人阿里云加速镜像个人地址&nbsp; https://noe4mlw6.mirror.aliyuncs.com\n\n***\n##### CentOS 7 (使用yum进行安装)\n如果之前安装过】先卸载依赖  \n  ``` bash\n    sudo yum remove docker \\\n    docker-common \\\n    container-selinux \\\n    docker-selinux \\\n    docker-engine \\\n    docker-engine-selinux\n  ```\n1. 直接安装  \ncurl -sSL https://get.docker.com/ | sh\n2. 启动 并设置开机启动  \n```\nsudo systemctl start docker\nsudo systemctl enable docker\n```\n\n> 配置docker使用国内镜像  \n如何配置镜像加速器  \n您可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器：  \n```\n{\n  \"registry-mirrors\": [\"https://noe4mlw6.mirror.aliyuncs.com\"]\n}\n```\n重启docker  \n```\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n###  安装docker-compose\n1. sudo curl -L https://github.com/docker/compose/releases/download/1.20.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose  \n2. sudo chmod a+x /usr/local/bin/docker-compose \n> 卸载  \nsudo rm /usr/local/bin/docker-compose","source":"_posts/docker/01docker-config.md","raw":"---\ntitle: Docker安装及配置加速镜像\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 20794\ndate: 2018-05-30 09:15:08\n---\n\nDocker安装及配置加速镜像\n<!-- more -->\n\n> 个人阿里云加速镜像个人地址&nbsp; https://noe4mlw6.mirror.aliyuncs.com\n\n***\n##### CentOS 7 (使用yum进行安装)\n如果之前安装过】先卸载依赖  \n  ``` bash\n    sudo yum remove docker \\\n    docker-common \\\n    container-selinux \\\n    docker-selinux \\\n    docker-engine \\\n    docker-engine-selinux\n  ```\n1. 直接安装  \ncurl -sSL https://get.docker.com/ | sh\n2. 启动 并设置开机启动  \n```\nsudo systemctl start docker\nsudo systemctl enable docker\n```\n\n> 配置docker使用国内镜像  \n如何配置镜像加速器  \n您可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器：  \n```\n{\n  \"registry-mirrors\": [\"https://noe4mlw6.mirror.aliyuncs.com\"]\n}\n```\n重启docker  \n```\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n###  安装docker-compose\n1. sudo curl -L https://github.com/docker/compose/releases/download/1.20.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose  \n2. sudo chmod a+x /usr/local/bin/docker-compose \n> 卸载  \nsudo rm /usr/local/bin/docker-compose","slug":"docker/01docker-config","published":1,"updated":"2020-12-29T01:15:00.425Z","_id":"ckj9at6u30005d8v8b2o89o7h","comments":1,"layout":"post","photos":[],"link":""},{"title":"Dockerfile解析","abbrlink":25682,"date":"2018-05-30T01:15:09.000Z","_content":"\nDockerfile解说\n<!-- more -->\n\n| 关键字 | 说明 | 例子\n| :--- | :--- | :---\n|FROM | 以此为基础来构建 | FROM debian:buster-slim\n|MAINTAINER | 镜像维护着的项目和邮箱地址 | MAINTAINER The CentOS Project <xxxx@centos.org>\n| RUN | 容器构建时运行的命令  | \n| EXPOSE | 当前容器对外暴露的端口  | \n| WORKDIR | 指定容器创建后，终端默认进来的工作目录  | \n| ENV | 用来在构建镜像过程中设置环境变量 | \n| ADD | 将宿主机目录下的文件拷贝到镜像且ADD命令会自动处理URL和解压tar压缩包 | ADD c48-docker.tar.xz /\n| COPY | 跟ADD类似，但是不会解压 | copy src desc、copy [\"src\",\"desc\"]\n| VOLUME | 容器数据卷，用于数据保存和持久化工作 | VOLUME [\"/xxg-data1\",\"/xxg-data2\"]\n| CMD | 指定一个容器启动时要运行的命令，Dockerfile中可以有多个CMD指令，***但只有最后一个生效***，CMD会被docker run之后的参数替换 | CMD /bin/bash \n| ENTRYPOINT | 指定一个容器启动时要运行的命令，和CMD一样，都是指定容器启动程序及参数 | ENTRYPOINT netcore.dll\n| ONBUILD |  当构建一个被继承的Dockerfile时运行命令，父镜像在被子继承后父镜像的onbuild被触发 | \n\n\n``` Dockerfile\n# 案例一  构建一个自己的centos系统\n\nFROM centos\n\nENV mypath /tmp\nWORKDIR $mypath\n\nRUN yum -y install vim\nRUN yum -y install net-tools\n\nEXPORT 80\n\nCMD /bin/bash \n```\n\n\n","source":"_posts/docker/02docker-dockerfile.md","raw":"---\ntitle: Dockerfile解析\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 25682\ndate: 2018-05-30 09:15:09\n---\n\nDockerfile解说\n<!-- more -->\n\n| 关键字 | 说明 | 例子\n| :--- | :--- | :---\n|FROM | 以此为基础来构建 | FROM debian:buster-slim\n|MAINTAINER | 镜像维护着的项目和邮箱地址 | MAINTAINER The CentOS Project <xxxx@centos.org>\n| RUN | 容器构建时运行的命令  | \n| EXPOSE | 当前容器对外暴露的端口  | \n| WORKDIR | 指定容器创建后，终端默认进来的工作目录  | \n| ENV | 用来在构建镜像过程中设置环境变量 | \n| ADD | 将宿主机目录下的文件拷贝到镜像且ADD命令会自动处理URL和解压tar压缩包 | ADD c48-docker.tar.xz /\n| COPY | 跟ADD类似，但是不会解压 | copy src desc、copy [\"src\",\"desc\"]\n| VOLUME | 容器数据卷，用于数据保存和持久化工作 | VOLUME [\"/xxg-data1\",\"/xxg-data2\"]\n| CMD | 指定一个容器启动时要运行的命令，Dockerfile中可以有多个CMD指令，***但只有最后一个生效***，CMD会被docker run之后的参数替换 | CMD /bin/bash \n| ENTRYPOINT | 指定一个容器启动时要运行的命令，和CMD一样，都是指定容器启动程序及参数 | ENTRYPOINT netcore.dll\n| ONBUILD |  当构建一个被继承的Dockerfile时运行命令，父镜像在被子继承后父镜像的onbuild被触发 | \n\n\n``` Dockerfile\n# 案例一  构建一个自己的centos系统\n\nFROM centos\n\nENV mypath /tmp\nWORKDIR $mypath\n\nRUN yum -y install vim\nRUN yum -y install net-tools\n\nEXPORT 80\n\nCMD /bin/bash \n```\n\n\n","slug":"docker/02docker-dockerfile","published":1,"updated":"2020-12-28T00:55:28.049Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6u80009d8v831hq2lg5","content":"<p>Dockerfile解说</p>\n<a id=\"more\"></a>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\">关键字</th>\n<th align=\"left\">说明</th>\n<th align=\"left\">例子</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">FROM</td>\n<td align=\"left\">以此为基础来构建</td>\n<td align=\"left\">FROM debian:buster-slim</td>\n</tr>\n<tr>\n<td align=\"left\">MAINTAINER</td>\n<td align=\"left\">镜像维护着的项目和邮箱地址</td>\n<td align=\"left\">MAINTAINER The CentOS Project <a href=\"mailto:&#x78;&#x78;&#x78;&#120;&#64;&#99;&#101;&#110;&#116;&#111;&#x73;&#x2e;&#x6f;&#114;&#x67;\">&#x78;&#x78;&#x78;&#120;&#64;&#99;&#101;&#110;&#116;&#111;&#x73;&#x2e;&#x6f;&#114;&#x67;</a></td>\n</tr>\n<tr>\n<td align=\"left\">RUN</td>\n<td align=\"left\">容器构建时运行的命令</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">EXPOSE</td>\n<td align=\"left\">当前容器对外暴露的端口</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">WORKDIR</td>\n<td align=\"left\">指定容器创建后，终端默认进来的工作目录</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">ENV</td>\n<td align=\"left\">用来在构建镜像过程中设置环境变量</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">ADD</td>\n<td align=\"left\">将宿主机目录下的文件拷贝到镜像且ADD命令会自动处理URL和解压tar压缩包</td>\n<td align=\"left\">ADD c48-docker.tar.xz /</td>\n</tr>\n<tr>\n<td align=\"left\">COPY</td>\n<td align=\"left\">跟ADD类似，但是不会解压</td>\n<td align=\"left\">copy src desc、copy [“src”,”desc”]</td>\n</tr>\n<tr>\n<td align=\"left\">VOLUME</td>\n<td align=\"left\">容器数据卷，用于数据保存和持久化工作</td>\n<td align=\"left\">VOLUME [“/xxg-data1”,”/xxg-data2”]</td>\n</tr>\n<tr>\n<td align=\"left\">CMD</td>\n<td align=\"left\">指定一个容器启动时要运行的命令，Dockerfile中可以有多个CMD指令，**<em>但只有最后一个生效**</em>，CMD会被docker run之后的参数替换</td>\n<td align=\"left\">CMD /bin/bash</td>\n</tr>\n<tr>\n<td align=\"left\">ENTRYPOINT</td>\n<td align=\"left\">指定一个容器启动时要运行的命令，和CMD一样，都是指定容器启动程序及参数</td>\n<td align=\"left\">ENTRYPOINT netcore.dll</td>\n</tr>\n<tr>\n<td align=\"left\">ONBUILD</td>\n<td align=\"left\">当构建一个被继承的Dockerfile时运行命令，父镜像在被子继承后父镜像的onbuild被触发</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<pre class=\" language-Dockerfile\"><code class=\"language-Dockerfile\"># 案例一  构建一个自己的centos系统\n\nFROM centos\n\nENV mypath /tmp\nWORKDIR $mypath\n\nRUN yum -y install vim\nRUN yum -y install net-tools\n\nEXPORT 80\n\nCMD /bin/bash </code></pre>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Dockerfile解说</p>","more":"<table>\n<thead>\n<tr>\n<th align=\"left\">关键字</th>\n<th align=\"left\">说明</th>\n<th align=\"left\">例子</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">FROM</td>\n<td align=\"left\">以此为基础来构建</td>\n<td align=\"left\">FROM debian:buster-slim</td>\n</tr>\n<tr>\n<td align=\"left\">MAINTAINER</td>\n<td align=\"left\">镜像维护着的项目和邮箱地址</td>\n<td align=\"left\">MAINTAINER The CentOS Project <a href=\"mailto:&#x78;&#x78;&#x78;&#120;&#64;&#99;&#101;&#110;&#116;&#111;&#x73;&#x2e;&#x6f;&#114;&#x67;\">&#x78;&#x78;&#x78;&#120;&#64;&#99;&#101;&#110;&#116;&#111;&#x73;&#x2e;&#x6f;&#114;&#x67;</a></td>\n</tr>\n<tr>\n<td align=\"left\">RUN</td>\n<td align=\"left\">容器构建时运行的命令</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">EXPOSE</td>\n<td align=\"left\">当前容器对外暴露的端口</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">WORKDIR</td>\n<td align=\"left\">指定容器创建后，终端默认进来的工作目录</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">ENV</td>\n<td align=\"left\">用来在构建镜像过程中设置环境变量</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">ADD</td>\n<td align=\"left\">将宿主机目录下的文件拷贝到镜像且ADD命令会自动处理URL和解压tar压缩包</td>\n<td align=\"left\">ADD c48-docker.tar.xz /</td>\n</tr>\n<tr>\n<td align=\"left\">COPY</td>\n<td align=\"left\">跟ADD类似，但是不会解压</td>\n<td align=\"left\">copy src desc、copy [“src”,”desc”]</td>\n</tr>\n<tr>\n<td align=\"left\">VOLUME</td>\n<td align=\"left\">容器数据卷，用于数据保存和持久化工作</td>\n<td align=\"left\">VOLUME [“/xxg-data1”,”/xxg-data2”]</td>\n</tr>\n<tr>\n<td align=\"left\">CMD</td>\n<td align=\"left\">指定一个容器启动时要运行的命令，Dockerfile中可以有多个CMD指令，**<em>但只有最后一个生效**</em>，CMD会被docker run之后的参数替换</td>\n<td align=\"left\">CMD /bin/bash</td>\n</tr>\n<tr>\n<td align=\"left\">ENTRYPOINT</td>\n<td align=\"left\">指定一个容器启动时要运行的命令，和CMD一样，都是指定容器启动程序及参数</td>\n<td align=\"left\">ENTRYPOINT netcore.dll</td>\n</tr>\n<tr>\n<td align=\"left\">ONBUILD</td>\n<td align=\"left\">当构建一个被继承的Dockerfile时运行命令，父镜像在被子继承后父镜像的onbuild被触发</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<pre><code class=\"Dockerfile\"># 案例一  构建一个自己的centos系统\n\nFROM centos\n\nENV mypath /tmp\nWORKDIR $mypath\n\nRUN yum -y install vim\nRUN yum -y install net-tools\n\nEXPORT 80\n\nCMD /bin/bash </code></pre>"},{"title":"Docker安装mongodb","abbrlink":30287,"date":"2018-06-01T01:15:10.000Z","_content":"\nDocker安装mongodb\n<!-- more -->\n\n1. 配置好docker的加速镜像[参考02Docker安装及配置]  \n2. docker pull mongo 拉去mongo镜像  \n3. 启动docker实例  \n> 方式一  \ndocker run -d -p 27017:27017 --name mongodb mongo   \n> 方式二 将容器的文件挂在到Host Volume  \n--首先创建文件夹  /docker/mongo/config  以及/docker/mongo/data 用于与docker中mongo实例链接  然后运行命令\n``` bash\ndocker run -d -p 27017:27017 --name mongo01 -v /docker/mongo/config:/data/configdb -v=/docker/mongo/data:/data/db mongo\n```","source":"_posts/docker/03docker-mongodb.md","raw":"---\ntitle: Docker安装mongodb\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 30287\ndate: 2018-06-01 09:15:10\n---\n\nDocker安装mongodb\n<!-- more -->\n\n1. 配置好docker的加速镜像[参考02Docker安装及配置]  \n2. docker pull mongo 拉去mongo镜像  \n3. 启动docker实例  \n> 方式一  \ndocker run -d -p 27017:27017 --name mongodb mongo   \n> 方式二 将容器的文件挂在到Host Volume  \n--首先创建文件夹  /docker/mongo/config  以及/docker/mongo/data 用于与docker中mongo实例链接  然后运行命令\n``` bash\ndocker run -d -p 27017:27017 --name mongo01 -v /docker/mongo/config:/data/configdb -v=/docker/mongo/data:/data/db mongo\n```","slug":"docker/03docker-mongodb","published":1,"updated":"2020-12-29T01:15:00.429Z","_id":"ckj9at6ua000ad8v8h7wb96j2","comments":1,"layout":"post","photos":[],"link":""},{"title":"Docker安装MsSqlserver","abbrlink":58308,"date":"2018-06-02T01:25:10.000Z","_content":"Docker安装MsSqlserver\n<!-- more -->\n> 未成功\n1. 执行命令  \n``` sql\n docker run -e 'ACCEPT_EULA=Y' -e 'MSSQL_SA_PASSWORD=Abcd1234' -v=/docker/mssql:/var/opt/mssql  -p 1433:1433 --name sqlserver  -d microsoft/mssql-server-linux:2017-latest  \n* * * * * * * * * 备注 * * * * * * * * * \n docker run -e 'ACCEPT_EULA=Y'  --是否接受协议\n    -e 'MSSQL_SA_PASSWORD=<YourStrong!Passw0rd>' --设置密码\n    -p 1433:1433    --端口\n    --name sqlserver       --用户\n   -d microsoft/mssql-server-linux:2017-latest --2017latest版本\n```\n","source":"_posts/docker/04docker-mssqlserver.md","raw":"---\ntitle: Docker安装MsSqlserver\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 58308\ndate: 2018-06-02 09:25:10\n---\nDocker安装MsSqlserver\n<!-- more -->\n> 未成功\n1. 执行命令  \n``` sql\n docker run -e 'ACCEPT_EULA=Y' -e 'MSSQL_SA_PASSWORD=Abcd1234' -v=/docker/mssql:/var/opt/mssql  -p 1433:1433 --name sqlserver  -d microsoft/mssql-server-linux:2017-latest  \n* * * * * * * * * 备注 * * * * * * * * * \n docker run -e 'ACCEPT_EULA=Y'  --是否接受协议\n    -e 'MSSQL_SA_PASSWORD=<YourStrong!Passw0rd>' --设置密码\n    -p 1433:1433    --端口\n    --name sqlserver       --用户\n   -d microsoft/mssql-server-linux:2017-latest --2017latest版本\n```\n","slug":"docker/04docker-mssqlserver","published":1,"updated":"2020-12-29T01:15:00.431Z","_id":"ckj9at6ub000bd8v85gct32dr","comments":1,"layout":"post","photos":[],"link":""},{"title":"Docker 安装MySql","abbrlink":63262,"date":"2018-06-02T01:20:10.000Z","_content":"\nDocker 安装MySql\n<!-- more -->\n\n>将docker容器中的实例中的文件跟物理文件链接起来 即使删掉容器 数据还在 再创建容器的时候 任然可以对应上之前的数据  \n#### 一、安装篇\n1. 使用docker-compose安装  \n+ [1.1] 在目录/docker/data/mysql/mysql-init下创建init-user.sql文件 内容如下  \n```\nuse mysql;\nCREATE USER 'sa'@'%' IDENTIFIED BY 'Abcd1234';\nGRANT ALL PRIVILEGES ON *.* TO 'sa'@'%';\n```\n+ [1.2]   \ndocker-compose -f mysql-compose.yml up -d    \n对应的mysql-compose.yml文件\n``` yml\nversion: '2.3'\n\nservices:\n  db:\n    image: mysql/mysql-server\n    container_name: mysql01\n    restart: always\n    command: mysqld --character-set-server=utf8 --collation-server=utf8_general_ci\n    ports:\n      - 3306:3306\n# networks:\n#   - net_mysql\n    environment:\n      MYSQL_ROOT_PASSWORD: Abcd1234\n    volumes:\n      - /docker/data/mysql/mysql-init:/docker-entrypoint-initdb.d\n      - /docker/data/mysql/data:/var/lib/mysql\n# volumes:\n#   mysql-data:\n#     external: true\n# networks:\n#   net_mysql:\n#     external: true\n```\n\n2. mount【推荐使用】  \n```\ndocker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Abcd1234 --name mysql01 --restart always --mount type=bind,src=/docker/mysql/config/my.cnf,dst=/etc/my.cnf --mount type=bind,src=/docker/mysql/data,dst=/var/lib/mysql mysql\n```\n> /docker/mysql/config/my.cnf\t&nbsp;&nbsp;对应物理磁盘位置 需要新建my.cnf 内容如下\n```\n[mysqld]\nuser=root\ncharacter-set-server=utf8\n[client]\ndefault-character-set=utf8\n[mysql]\ndefault-character-set=utf8\n```\n> /etc/my.cnf\t--docker创建mysql后该mysql容器对应的配置文件  \n/docker/mysql/data\t--对应物理磁盘位置 表示docker中数据映射到的物理文件位置  \n/var/lib/mysql mysql/mysql-server &nbsp;&nbsp;对应docker中mysql实例容器的文件位置  \n-e  MYSQL_ROOT_PASSWORD=Abcd1234 &nbsp;设置初始密码  \n1. volume[后期废用]  推荐使用mount形式  \n```\ndocker run -d -p 3306:3306 --name mysql01 -v=/docker/mysql/config/my.cnf:/etc/my.cnf -v=/docker/mysql/data:/var/lib/mysql mysql/mysql-server\n```\n#### 二、使用篇\n>docker 操作mysql  \n1. 连接mysql  \ndocker exec -it mysql01 bash   \nmysql -u root -p [密码] \t--密码可以待mysql容器启动后  \n通过docker logs mysql01 找到生成的随机密码 密码在一段类型：\n![](/images/docker/040101.png)\n2. 设置mysql密码  \nSET PASSWORD FOR 'root'@'localhost' = PASSWORD('Abcd1234');\t--用户名为root 密码为Abcd1234  \n3. 实验一下\t【--exit 退出当前】  \nuse mysql;\t--使用数据库查询  \nselect user,host from user;\t--查询用户信息  \nshow variables like ‘%char%’;\t\t--查看当前使用的字符集  \n在mysql中创建网络用户 这样可以非本机访问  \nmysql> CREATE USER 'sa'@'%' IDENTIFIED BY 'Abcd1234';  \nmysql> GRANT ALL PRIVILEGES ON *.* TO 'sa'@'%';\n>docker run -d -p 3306:3306 -e\"MYSQL_USER=Zarc\" -e\"MYSQL_PASSWORD=pwd123456\" -e\"MYSQL_ROOT_PASSWORD=password123\" -e\"MYSQL_RANDOM_ROOT_PASSWORD=true\" --name mysql01 mysql/mysql-server --character-set-server=utf8 --collation-server=utf8_general_ci     \n备注： : When this is true (which is its default state, unless MYSQL_ROOT_PASSWORD is set or MYSQL_ALLOW_EMPTY_PASSWORD is set to true), a random password for the server's root user is generated when the Docker container is started 当这个MYSQL_RANDOM_ROOT_PASSWORD 为true 时 为root用户设置密码是没有作用的还是会生成随机的密码，设置为false 或者不加这个环境变量  ","source":"_posts/docker/04docker_install_mysql.md","raw":"---\ntitle: Docker 安装MySql\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 63262\ndate: 2018-06-02 09:20:10\n---\n\nDocker 安装MySql\n<!-- more -->\n\n>将docker容器中的实例中的文件跟物理文件链接起来 即使删掉容器 数据还在 再创建容器的时候 任然可以对应上之前的数据  \n#### 一、安装篇\n1. 使用docker-compose安装  \n+ [1.1] 在目录/docker/data/mysql/mysql-init下创建init-user.sql文件 内容如下  \n```\nuse mysql;\nCREATE USER 'sa'@'%' IDENTIFIED BY 'Abcd1234';\nGRANT ALL PRIVILEGES ON *.* TO 'sa'@'%';\n```\n+ [1.2]   \ndocker-compose -f mysql-compose.yml up -d    \n对应的mysql-compose.yml文件\n``` yml\nversion: '2.3'\n\nservices:\n  db:\n    image: mysql/mysql-server\n    container_name: mysql01\n    restart: always\n    command: mysqld --character-set-server=utf8 --collation-server=utf8_general_ci\n    ports:\n      - 3306:3306\n# networks:\n#   - net_mysql\n    environment:\n      MYSQL_ROOT_PASSWORD: Abcd1234\n    volumes:\n      - /docker/data/mysql/mysql-init:/docker-entrypoint-initdb.d\n      - /docker/data/mysql/data:/var/lib/mysql\n# volumes:\n#   mysql-data:\n#     external: true\n# networks:\n#   net_mysql:\n#     external: true\n```\n\n2. mount【推荐使用】  \n```\ndocker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Abcd1234 --name mysql01 --restart always --mount type=bind,src=/docker/mysql/config/my.cnf,dst=/etc/my.cnf --mount type=bind,src=/docker/mysql/data,dst=/var/lib/mysql mysql\n```\n> /docker/mysql/config/my.cnf\t&nbsp;&nbsp;对应物理磁盘位置 需要新建my.cnf 内容如下\n```\n[mysqld]\nuser=root\ncharacter-set-server=utf8\n[client]\ndefault-character-set=utf8\n[mysql]\ndefault-character-set=utf8\n```\n> /etc/my.cnf\t--docker创建mysql后该mysql容器对应的配置文件  \n/docker/mysql/data\t--对应物理磁盘位置 表示docker中数据映射到的物理文件位置  \n/var/lib/mysql mysql/mysql-server &nbsp;&nbsp;对应docker中mysql实例容器的文件位置  \n-e  MYSQL_ROOT_PASSWORD=Abcd1234 &nbsp;设置初始密码  \n1. volume[后期废用]  推荐使用mount形式  \n```\ndocker run -d -p 3306:3306 --name mysql01 -v=/docker/mysql/config/my.cnf:/etc/my.cnf -v=/docker/mysql/data:/var/lib/mysql mysql/mysql-server\n```\n#### 二、使用篇\n>docker 操作mysql  \n1. 连接mysql  \ndocker exec -it mysql01 bash   \nmysql -u root -p [密码] \t--密码可以待mysql容器启动后  \n通过docker logs mysql01 找到生成的随机密码 密码在一段类型：\n![](/images/docker/040101.png)\n2. 设置mysql密码  \nSET PASSWORD FOR 'root'@'localhost' = PASSWORD('Abcd1234');\t--用户名为root 密码为Abcd1234  \n3. 实验一下\t【--exit 退出当前】  \nuse mysql;\t--使用数据库查询  \nselect user,host from user;\t--查询用户信息  \nshow variables like ‘%char%’;\t\t--查看当前使用的字符集  \n在mysql中创建网络用户 这样可以非本机访问  \nmysql> CREATE USER 'sa'@'%' IDENTIFIED BY 'Abcd1234';  \nmysql> GRANT ALL PRIVILEGES ON *.* TO 'sa'@'%';\n>docker run -d -p 3306:3306 -e\"MYSQL_USER=Zarc\" -e\"MYSQL_PASSWORD=pwd123456\" -e\"MYSQL_ROOT_PASSWORD=password123\" -e\"MYSQL_RANDOM_ROOT_PASSWORD=true\" --name mysql01 mysql/mysql-server --character-set-server=utf8 --collation-server=utf8_general_ci     \n备注： : When this is true (which is its default state, unless MYSQL_ROOT_PASSWORD is set or MYSQL_ALLOW_EMPTY_PASSWORD is set to true), a random password for the server's root user is generated when the Docker container is started 当这个MYSQL_RANDOM_ROOT_PASSWORD 为true 时 为root用户设置密码是没有作用的还是会生成随机的密码，设置为false 或者不加这个环境变量  ","slug":"docker/04docker_install_mysql","published":1,"updated":"2020-12-28T00:55:28.050Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6ug000fd8v8b2yt2quq","content":"<p>Docker 安装MySql</p>\n<a id=\"more\"></a>\n\n<blockquote>\n<p>将docker容器中的实例中的文件跟物理文件链接起来 即使删掉容器 数据还在 再创建容器的时候 任然可以对应上之前的数据  </p>\n</blockquote>\n<h4 id=\"一、安装篇\"><a href=\"#一、安装篇\" class=\"headerlink\" title=\"一、安装篇\"></a>一、安装篇</h4><ol>\n<li>使用docker-compose安装  </li>\n</ol>\n<ul>\n<li>[1.1] 在目录/docker/data/mysql/mysql-init下创建init-user.sql文件 内容如下  <pre><code>use mysql;\nCREATE USER &#39;sa&#39;@&#39;%&#39; IDENTIFIED BY &#39;Abcd1234&#39;;\nGRANT ALL PRIVILEGES ON *.* TO &#39;sa&#39;@&#39;%&#39;;</code></pre>\n</li>\n<li>[1.2]<br>docker-compose -f mysql-compose.yml up -d<br>对应的mysql-compose.yml文件<pre class=\" language-yml\"><code class=\"language-yml\">version: '2.3'\n</code></pre>\n</li>\n</ul>\n<p>services:<br>  db:<br>    image: mysql/mysql-server<br>    container_name: mysql01<br>    restart: always<br>    command: mysqld –character-set-server=utf8 –collation-server=utf8_general_ci<br>    ports:<br>      - 3306:3306</p>\n<h1 id=\"networks\"><a href=\"#networks\" class=\"headerlink\" title=\"networks:\"></a>networks:</h1><h1 id=\"net-mysql\"><a href=\"#net-mysql\" class=\"headerlink\" title=\"- net_mysql\"></a>- net_mysql</h1><pre><code>environment:\n  MYSQL_ROOT_PASSWORD: Abcd1234\nvolumes:\n  - /docker/data/mysql/mysql-init:/docker-entrypoint-initdb.d\n  - /docker/data/mysql/data:/var/lib/mysql</code></pre>\n<h1 id=\"volumes\"><a href=\"#volumes\" class=\"headerlink\" title=\"volumes:\"></a>volumes:</h1><h1 id=\"mysql-data\"><a href=\"#mysql-data\" class=\"headerlink\" title=\"mysql-data:\"></a>mysql-data:</h1><h1 id=\"external-true\"><a href=\"#external-true\" class=\"headerlink\" title=\"external: true\"></a>external: true</h1><h1 id=\"networks-1\"><a href=\"#networks-1\" class=\"headerlink\" title=\"networks:\"></a>networks:</h1><h1 id=\"net-mysql-1\"><a href=\"#net-mysql-1\" class=\"headerlink\" title=\"net_mysql:\"></a>net_mysql:</h1><h1 id=\"external-true-1\"><a href=\"#external-true-1\" class=\"headerlink\" title=\"external: true\"></a>external: true</h1><pre><code>\n2. mount【推荐使用】  </code></pre>\n<p>docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Abcd1234 –name mysql01 –restart always –mount type=bind,src=/docker/mysql/config/my.cnf,dst=/etc/my.cnf –mount type=bind,src=/docker/mysql/data,dst=/var/lib/mysql mysql</p>\n<pre><code>&gt; /docker/mysql/config/my.cnf    &amp;nbsp;&amp;nbsp;对应物理磁盘位置 需要新建my.cnf 内容如下</code></pre>\n<p>[mysqld]<br>user=root<br>character-set-server=utf8<br>[client]<br>default-character-set=utf8<br>[mysql]<br>default-character-set=utf8</p>\n<pre><code>&gt; /etc/my.cnf    --docker创建mysql后该mysql容器对应的配置文件  \n/docker/mysql/data    --对应物理磁盘位置 表示docker中数据映射到的物理文件位置  \n/var/lib/mysql mysql/mysql-server &amp;nbsp;&amp;nbsp;对应docker中mysql实例容器的文件位置  \n-e  MYSQL_ROOT_PASSWORD=Abcd1234 &amp;nbsp;设置初始密码  \n1. volume[后期废用]  推荐使用mount形式  </code></pre>\n<p>docker run -d -p 3306:3306 –name mysql01 -v=/docker/mysql/config/my.cnf:/etc/my.cnf -v=/docker/mysql/data:/var/lib/mysql mysql/mysql-server</p>\n<p>```</p>\n<h4 id=\"二、使用篇\"><a href=\"#二、使用篇\" class=\"headerlink\" title=\"二、使用篇\"></a>二、使用篇</h4><blockquote>\n<p>docker 操作mysql  </p>\n</blockquote>\n<ol>\n<li>连接mysql<br>docker exec -it mysql01 bash<br>mysql -u root -p [密码]     –密码可以待mysql容器启动后<br>通过docker logs mysql01 找到生成的随机密码 密码在一段类型：<br><img src=\"/images/docker/040101.png\"></li>\n<li>设置mysql密码<br>SET PASSWORD FOR ‘root’@’localhost’ = PASSWORD(‘Abcd1234’);    –用户名为root 密码为Abcd1234  </li>\n<li>实验一下    【–exit 退出当前】<br>use mysql;    –使用数据库查询<br>select user,host from user;    –查询用户信息<br>show variables like ‘%char%’;        –查看当前使用的字符集<br>在mysql中创建网络用户 这样可以非本机访问<br>mysql&gt; CREATE USER ‘sa’@’%’ IDENTIFIED BY ‘Abcd1234’;<br>mysql&gt; GRANT ALL PRIVILEGES ON <em>.</em> TO ‘sa’@’%’;<blockquote>\n<p>docker run -d -p 3306:3306 -e”MYSQL_USER=Zarc” -e”MYSQL_PASSWORD=pwd123456” -e”MYSQL_ROOT_PASSWORD=password123” -e”MYSQL_RANDOM_ROOT_PASSWORD=true” –name mysql01 mysql/mysql-server –character-set-server=utf8 –collation-server=utf8_general_ci<br>备注： : When this is true (which is its default state, unless MYSQL_ROOT_PASSWORD is set or MYSQL_ALLOW_EMPTY_PASSWORD is set to true), a random password for the server’s root user is generated when the Docker container is started 当这个MYSQL_RANDOM_ROOT_PASSWORD 为true 时 为root用户设置密码是没有作用的还是会生成随机的密码，设置为false 或者不加这个环境变量  </p>\n</blockquote>\n</li>\n</ol>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Docker 安装MySql</p>","more":"<blockquote>\n<p>将docker容器中的实例中的文件跟物理文件链接起来 即使删掉容器 数据还在 再创建容器的时候 任然可以对应上之前的数据  </p>\n</blockquote>\n<h4 id=\"一、安装篇\"><a href=\"#一、安装篇\" class=\"headerlink\" title=\"一、安装篇\"></a>一、安装篇</h4><ol>\n<li>使用docker-compose安装  </li>\n</ol>\n<ul>\n<li>[1.1] 在目录/docker/data/mysql/mysql-init下创建init-user.sql文件 内容如下  <pre><code>use mysql;\nCREATE USER &#39;sa&#39;@&#39;%&#39; IDENTIFIED BY &#39;Abcd1234&#39;;\nGRANT ALL PRIVILEGES ON *.* TO &#39;sa&#39;@&#39;%&#39;;</code></pre>\n</li>\n<li>[1.2]<br>docker-compose -f mysql-compose.yml up -d<br>对应的mysql-compose.yml文件<pre><code class=\"yml\">version: &#39;2.3&#39;\n</code></pre>\n</li>\n</ul>\n<p>services:<br>  db:<br>    image: mysql/mysql-server<br>    container_name: mysql01<br>    restart: always<br>    command: mysqld –character-set-server=utf8 –collation-server=utf8_general_ci<br>    ports:<br>      - 3306:3306</p>\n<h1 id=\"networks\"><a href=\"#networks\" class=\"headerlink\" title=\"networks:\"></a>networks:</h1><h1 id=\"net-mysql\"><a href=\"#net-mysql\" class=\"headerlink\" title=\"- net_mysql\"></a>- net_mysql</h1><pre><code>environment:\n  MYSQL_ROOT_PASSWORD: Abcd1234\nvolumes:\n  - /docker/data/mysql/mysql-init:/docker-entrypoint-initdb.d\n  - /docker/data/mysql/data:/var/lib/mysql</code></pre>\n<h1 id=\"volumes\"><a href=\"#volumes\" class=\"headerlink\" title=\"volumes:\"></a>volumes:</h1><h1 id=\"mysql-data\"><a href=\"#mysql-data\" class=\"headerlink\" title=\"mysql-data:\"></a>mysql-data:</h1><h1 id=\"external-true\"><a href=\"#external-true\" class=\"headerlink\" title=\"external: true\"></a>external: true</h1><h1 id=\"networks-1\"><a href=\"#networks-1\" class=\"headerlink\" title=\"networks:\"></a>networks:</h1><h1 id=\"net-mysql-1\"><a href=\"#net-mysql-1\" class=\"headerlink\" title=\"net_mysql:\"></a>net_mysql:</h1><h1 id=\"external-true-1\"><a href=\"#external-true-1\" class=\"headerlink\" title=\"external: true\"></a>external: true</h1><pre><code>\n2. mount【推荐使用】  </code></pre>\n<p>docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Abcd1234 –name mysql01 –restart always –mount type=bind,src=/docker/mysql/config/my.cnf,dst=/etc/my.cnf –mount type=bind,src=/docker/mysql/data,dst=/var/lib/mysql mysql</p>\n<pre><code>&gt; /docker/mysql/config/my.cnf    &amp;nbsp;&amp;nbsp;对应物理磁盘位置 需要新建my.cnf 内容如下</code></pre>\n<p>[mysqld]<br>user=root<br>character-set-server=utf8<br>[client]<br>default-character-set=utf8<br>[mysql]<br>default-character-set=utf8</p>\n<pre><code>&gt; /etc/my.cnf    --docker创建mysql后该mysql容器对应的配置文件  \n/docker/mysql/data    --对应物理磁盘位置 表示docker中数据映射到的物理文件位置  \n/var/lib/mysql mysql/mysql-server &amp;nbsp;&amp;nbsp;对应docker中mysql实例容器的文件位置  \n-e  MYSQL_ROOT_PASSWORD=Abcd1234 &amp;nbsp;设置初始密码  \n1. volume[后期废用]  推荐使用mount形式  </code></pre>\n<p>docker run -d -p 3306:3306 –name mysql01 -v=/docker/mysql/config/my.cnf:/etc/my.cnf -v=/docker/mysql/data:/var/lib/mysql mysql/mysql-server</p>\n<p>```</p>\n<h4 id=\"二、使用篇\"><a href=\"#二、使用篇\" class=\"headerlink\" title=\"二、使用篇\"></a>二、使用篇</h4><blockquote>\n<p>docker 操作mysql  </p>\n</blockquote>\n<ol>\n<li>连接mysql<br>docker exec -it mysql01 bash<br>mysql -u root -p [密码]     –密码可以待mysql容器启动后<br>通过docker logs mysql01 找到生成的随机密码 密码在一段类型：<br><img src=\"/images/docker/040101.png\"></li>\n<li>设置mysql密码<br>SET PASSWORD FOR ‘root’@’localhost’ = PASSWORD(‘Abcd1234’);    –用户名为root 密码为Abcd1234  </li>\n<li>实验一下    【–exit 退出当前】<br>use mysql;    –使用数据库查询<br>select user,host from user;    –查询用户信息<br>show variables like ‘%char%’;        –查看当前使用的字符集<br>在mysql中创建网络用户 这样可以非本机访问<br>mysql&gt; CREATE USER ‘sa’@’%’ IDENTIFIED BY ‘Abcd1234’;<br>mysql&gt; GRANT ALL PRIVILEGES ON <em>.</em> TO ‘sa’@’%’;<blockquote>\n<p>docker run -d -p 3306:3306 -e”MYSQL_USER=Zarc” -e”MYSQL_PASSWORD=pwd123456” -e”MYSQL_ROOT_PASSWORD=password123” -e”MYSQL_RANDOM_ROOT_PASSWORD=true” –name mysql01 mysql/mysql-server –character-set-server=utf8 –collation-server=utf8_general_ci<br>备注： : When this is true (which is its default state, unless MYSQL_ROOT_PASSWORD is set or MYSQL_ALLOW_EMPTY_PASSWORD is set to true), a random password for the server’s root user is generated when the Docker container is started 当这个MYSQL_RANDOM_ROOT_PASSWORD 为true 时 为root用户设置密码是没有作用的还是会生成随机的密码，设置为false 或者不加这个环境变量  </p>\n</blockquote>\n</li>\n</ol>"},{"title":"Docker制作WebApi&MySql","comments":0,"abbrlink":26541,"date":"2018-06-03T01:30:10.000Z","img":null,"_content":"Docker制作WebApi&MySql 直接上图\n<!-- more -->\n\n![](http://qiniu.xxgtalk.cn/blog/images/docker/050a01.png)\n1. docker文件  \n    ``` docker\n    FROM microsoft/aspnetcore-build as build-env\n    WORKDIR /code\n    COPY *.csproj ./\n    RUN dotnet restore\n\n    COPY . ./\n    RUN dotnet publish -c Release -o out\n\n    FROM microsoft/aspnetcore\n    WORKDIR /app\n    COPY --from=build-env /code/out ./\n\n    EXPOSE 50000\n    ENTRYPOINT [\"dotnet\",\"WebApiDocker.dll\"]\n    ```\n2. 编译docker文件  \n    ``` docker\n    docker build -t  xxg/aspnetcore:1.0 .\n    ```\n3. 使用该镜像启动一个容器  \na. docker run -d -p 5000:80  --name api01 --link mysql01:db xxg/aspnetcore:1.0  \nb. 使用bridge形式  \ndocker network create -d bridge mybridge\t\t//创建一个网络  \ndocker run -d -p 5000:5000 --net mybridge --name api1 xxg/aspnetcore:1.0  \ndocker network connect mysql01  mybridge\t//表示将mysql01跟mybridge网络连接起来  \n    >--link mysql01:db\t\t--表示将mysql01取个别名db并连接到当前容器  \n    >--net mybridge\t\t--表示使用指定网络","source":"_posts/docker/05docker-webapi-mysql.md","raw":"---\ntitle: Docker制作WebApi&MySql\ncategories:\n  - Docker\ntags:\n  - Docker\ncomments: false\nabbrlink: 26541\ndate: 2018-06-03 09:30:10\nimg:\n---\nDocker制作WebApi&MySql 直接上图\n<!-- more -->\n\n![](http://qiniu.xxgtalk.cn/blog/images/docker/050a01.png)\n1. docker文件  \n    ``` docker\n    FROM microsoft/aspnetcore-build as build-env\n    WORKDIR /code\n    COPY *.csproj ./\n    RUN dotnet restore\n\n    COPY . ./\n    RUN dotnet publish -c Release -o out\n\n    FROM microsoft/aspnetcore\n    WORKDIR /app\n    COPY --from=build-env /code/out ./\n\n    EXPOSE 50000\n    ENTRYPOINT [\"dotnet\",\"WebApiDocker.dll\"]\n    ```\n2. 编译docker文件  \n    ``` docker\n    docker build -t  xxg/aspnetcore:1.0 .\n    ```\n3. 使用该镜像启动一个容器  \na. docker run -d -p 5000:80  --name api01 --link mysql01:db xxg/aspnetcore:1.0  \nb. 使用bridge形式  \ndocker network create -d bridge mybridge\t\t//创建一个网络  \ndocker run -d -p 5000:5000 --net mybridge --name api1 xxg/aspnetcore:1.0  \ndocker network connect mysql01  mybridge\t//表示将mysql01跟mybridge网络连接起来  \n    >--link mysql01:db\t\t--表示将mysql01取个别名db并连接到当前容器  \n    >--net mybridge\t\t--表示使用指定网络","slug":"docker/05docker-webapi-mysql","published":1,"updated":"2020-12-29T01:15:00.434Z","_id":"ckj9at6ui000hd8v87a602v32","layout":"post","photos":[],"link":""},{"title":"使用docker-compose","abbrlink":4668,"date":"2018-06-04T02:01:10.000Z","img":null,"_content":"\n使用docker-compose按照webapi&mysql\n<!-- more -->\n\n[接Docker制作WebApi&MySql](./05docker-webapi-mysql.html)\n1. 创建docker-compose.yml文件  \n  ``` docker\n  version '1'\n\n  services:\n    db:\n        image: mysql/mysql-server\n        container_name: 'db'\n        command: mysqld --character-set-server=utf8 --collaction-server=utf8_general_ci\n        restart: always\n        ports:\n          -'3306:3306'\n        environment:\n          MYSQL_ROOT_PASSWORD: Abcd1234\n          MYSQL_USER: sa\n          MYSQL_PASWORD: Abcd1234\n        volumes:\n          - /docker/mysql/db-init:/docker-entrypoint-initdb.d\n    webapi:\n        build: .\n        container_name: 'webapi01'\n        ports:\n          -'5000:80'\n        depends_on:\n          - db\n  ```\n>【注意】  \n由于db需要初始化用户角色 所以在资料卷中指定目录下放入sql 内容  \nGRANT ALL PRIVILEGES ON *.* TO 'sa'@'%' WITH GRANT OPTION;  \n2. 执行命令     \ndocker-compose build  \ndocker up\t//docker down 与docker up相反  \n> [docker-compose文件](http://qiniu.xxgtalk.cn/blog/files/docker/mysql-docker-compose.yml)  ","source":"_posts/docker/06docker-compose.md","raw":"---\ntitle: 使用docker-compose\ncategories:\n  - Docker\nabbrlink: 4668\ndate: 2018-06-04 10:01:10\nimg:\n---\n\n使用docker-compose按照webapi&mysql\n<!-- more -->\n\n[接Docker制作WebApi&MySql](./05docker-webapi-mysql.html)\n1. 创建docker-compose.yml文件  \n  ``` docker\n  version '1'\n\n  services:\n    db:\n        image: mysql/mysql-server\n        container_name: 'db'\n        command: mysqld --character-set-server=utf8 --collaction-server=utf8_general_ci\n        restart: always\n        ports:\n          -'3306:3306'\n        environment:\n          MYSQL_ROOT_PASSWORD: Abcd1234\n          MYSQL_USER: sa\n          MYSQL_PASWORD: Abcd1234\n        volumes:\n          - /docker/mysql/db-init:/docker-entrypoint-initdb.d\n    webapi:\n        build: .\n        container_name: 'webapi01'\n        ports:\n          -'5000:80'\n        depends_on:\n          - db\n  ```\n>【注意】  \n由于db需要初始化用户角色 所以在资料卷中指定目录下放入sql 内容  \nGRANT ALL PRIVILEGES ON *.* TO 'sa'@'%' WITH GRANT OPTION;  \n2. 执行命令     \ndocker-compose build  \ndocker up\t//docker down 与docker up相反  \n> [docker-compose文件](http://qiniu.xxgtalk.cn/blog/files/docker/mysql-docker-compose.yml)  ","slug":"docker/06docker-compose","published":1,"updated":"2020-12-29T01:15:00.435Z","_id":"ckj9at6um000md8v81uj64dh9","comments":1,"layout":"post","photos":[],"link":""},{"title":"Docker安装GitLab","abbrlink":47017,"date":"2018-06-05T02:30:10.000Z","_content":"\nDocker下安装GitLab\n<!-- more -->\n\n> 前置条件 安装好docker  \n1. docker运行gitlab(由于22端口被ssh占用 改用23)  \n* 在/docker/gitlab 目录下分别创建data、config、logs三个文件夹  \n* 执行命令\n  ``` docker\n  sudo docker run --detach --hostname gitlab.xxgtalk.cn --publish 443:443 --publish 8090:80 --publish 23:22 --name gitlab --restart always -v /docker/gitlab/config:/etc/gitlab -v /docker/gitlab/logs:/var/log/gitlab -v /docker/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce\n  * * * * * * 介绍 * * * * * *\n  sudo docker run --detach \\\n  --hostname gitlab.xxgtalk.cn \\\n  --publish 443:443 --publish 8090:80 --publish 23:22 \\ \n  --name gitlab \\\n  --restart always \\\n  -v /docker/gitlab/config:/etc/gitlab \\ 配置文件映射到config文件夹\n  -v /docker/gitlab/logs:/var/log/gitlab \\\n  -v /docker/gitlab/data:/var/opt/gitlab \\\n  gitlab/gitlab-ce\n  ```\n::: warning 注意\n+ 因为配置的ssh端口是23 所以需要修改/docker/gitlab/config/gitlab.rb文件中修改或增加  \ngitlab_rails['gitlab_shell_ssh_port'] = 23\n+ 查看日志  \ndocker logs --follow gitlab  \n:::\n2. docker下安装gitlab runner  \n+ [2.1] 安装gitlab runner\n    ``` docker\n    sudo docker run -d --name gitlab-runner --restart always -v /srv/gitlab-runner/config:/docker/gitlab-runner/config -v /var/run/docker.sock:/docker/gitlab-runner/run/docker.sock gitlab/gitlab-runner:latest\n    * * * * * * 介绍 * * * * * *\n    sudo docker run -d --name gitlab-runner --restart always \\\n    v /srv/gitlab-runner/config:/docker/gitlab-runner/config \\\n    -v /var/run/docker.sock:/docker/gitlab-runner/run/docker.sock \\\n    gitlab/gitlab-runner:latest\n    ```\n+ [2.2] 注册gitlab runner(官方建议跟gitlab不要放在同一个服务器上)【最后没有成功,改用[07Gitlab01-runner](/2018/06/05/docker/07gitlab01-runner/) 】  \n参考地址:https://docs.gitlab.com.cn/runner/register/index.html  \n  * 运行下面命令启动注册程序  \n  sudo docker exec -it gitlab-runner gitlab-ci-multi-runner register\n  * 输入 GitLab 实例 URL  \n  gitlab的域名  \n  * 输入获取到的用于注册 Runner 的 token:  \n  y8R7nLY4x3mdBiZt9AQV  \n  *  输入该 Runner 的描述，稍后也可通过 GitLab's UI 修改:  \n  *  给该 Runner 指派 tags, 稍后也可以在 GitLab's UI 修改:  \n  *  选择 Runner 是否接收未指定 tags 的任务（默认值：false）， 稍后可以在 GitLab's UI 修改： true  \n  *  选择是否为当前项目锁定该 Runner， 之后也可以在 GitLab's UI 修改。 该功能通常用于被指定为某个项目的 Runner （默认值：true）：  \n  *  选择 Runner executor:  \n \t我们使用docker  \n  *  如果你选择 Docker 作为你的 executor，注册程序会让你设置一个默认的镜像， 作用于.gitlab-ci.yml中未指定镜像的项目  \n输入: microsoft/dotnet  \n---\n##### 搭建私有仓库\n1. 在docker中创建文件夹registry 用来存放仓库镜像，然后运行命令  \n  ``` docker\n  docker run -d -v /docker/registry:/var/lib/registry -p 8091:5000 --restart=always --name registry registry\n  ```\n\n##### 使用docker-compose安装\n请查看[docker-compose文件](http://qiniu.xxgtalk.cn/blog/files/docker/gitlab-docker-compose.yml) ","source":"_posts/docker/07gitlab.md","raw":"---\ntitle: Docker安装GitLab\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 47017\ndate: 2018-06-05 10:30:10\n---\n\nDocker下安装GitLab\n<!-- more -->\n\n> 前置条件 安装好docker  \n1. docker运行gitlab(由于22端口被ssh占用 改用23)  \n* 在/docker/gitlab 目录下分别创建data、config、logs三个文件夹  \n* 执行命令\n  ``` docker\n  sudo docker run --detach --hostname gitlab.xxgtalk.cn --publish 443:443 --publish 8090:80 --publish 23:22 --name gitlab --restart always -v /docker/gitlab/config:/etc/gitlab -v /docker/gitlab/logs:/var/log/gitlab -v /docker/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce\n  * * * * * * 介绍 * * * * * *\n  sudo docker run --detach \\\n  --hostname gitlab.xxgtalk.cn \\\n  --publish 443:443 --publish 8090:80 --publish 23:22 \\ \n  --name gitlab \\\n  --restart always \\\n  -v /docker/gitlab/config:/etc/gitlab \\ 配置文件映射到config文件夹\n  -v /docker/gitlab/logs:/var/log/gitlab \\\n  -v /docker/gitlab/data:/var/opt/gitlab \\\n  gitlab/gitlab-ce\n  ```\n::: warning 注意\n+ 因为配置的ssh端口是23 所以需要修改/docker/gitlab/config/gitlab.rb文件中修改或增加  \ngitlab_rails['gitlab_shell_ssh_port'] = 23\n+ 查看日志  \ndocker logs --follow gitlab  \n:::\n2. docker下安装gitlab runner  \n+ [2.1] 安装gitlab runner\n    ``` docker\n    sudo docker run -d --name gitlab-runner --restart always -v /srv/gitlab-runner/config:/docker/gitlab-runner/config -v /var/run/docker.sock:/docker/gitlab-runner/run/docker.sock gitlab/gitlab-runner:latest\n    * * * * * * 介绍 * * * * * *\n    sudo docker run -d --name gitlab-runner --restart always \\\n    v /srv/gitlab-runner/config:/docker/gitlab-runner/config \\\n    -v /var/run/docker.sock:/docker/gitlab-runner/run/docker.sock \\\n    gitlab/gitlab-runner:latest\n    ```\n+ [2.2] 注册gitlab runner(官方建议跟gitlab不要放在同一个服务器上)【最后没有成功,改用[07Gitlab01-runner](/2018/06/05/docker/07gitlab01-runner/) 】  \n参考地址:https://docs.gitlab.com.cn/runner/register/index.html  \n  * 运行下面命令启动注册程序  \n  sudo docker exec -it gitlab-runner gitlab-ci-multi-runner register\n  * 输入 GitLab 实例 URL  \n  gitlab的域名  \n  * 输入获取到的用于注册 Runner 的 token:  \n  y8R7nLY4x3mdBiZt9AQV  \n  *  输入该 Runner 的描述，稍后也可通过 GitLab's UI 修改:  \n  *  给该 Runner 指派 tags, 稍后也可以在 GitLab's UI 修改:  \n  *  选择 Runner 是否接收未指定 tags 的任务（默认值：false）， 稍后可以在 GitLab's UI 修改： true  \n  *  选择是否为当前项目锁定该 Runner， 之后也可以在 GitLab's UI 修改。 该功能通常用于被指定为某个项目的 Runner （默认值：true）：  \n  *  选择 Runner executor:  \n \t我们使用docker  \n  *  如果你选择 Docker 作为你的 executor，注册程序会让你设置一个默认的镜像， 作用于.gitlab-ci.yml中未指定镜像的项目  \n输入: microsoft/dotnet  \n---\n##### 搭建私有仓库\n1. 在docker中创建文件夹registry 用来存放仓库镜像，然后运行命令  \n  ``` docker\n  docker run -d -v /docker/registry:/var/lib/registry -p 8091:5000 --restart=always --name registry registry\n  ```\n\n##### 使用docker-compose安装\n请查看[docker-compose文件](http://qiniu.xxgtalk.cn/blog/files/docker/gitlab-docker-compose.yml) ","slug":"docker/07gitlab","published":1,"updated":"2020-12-28T00:55:28.052Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6uo000pd8v804y310v1","content":"<p>Docker下安装GitLab</p>\n<a id=\"more\"></a>\n\n<blockquote>\n<p>前置条件 安装好docker  </p>\n</blockquote>\n<ol>\n<li>docker运行gitlab(由于22端口被ssh占用 改用23)  </li>\n</ol>\n<ul>\n<li>在/docker/gitlab 目录下分别创建data、config、logs三个文件夹  </li>\n<li>执行命令<pre class=\" language-docker\"><code class=\"language-docker\">sudo docker run <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>detach <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>hostname gitlab.xxgtalk.cn <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>publish 443<span class=\"token punctuation\">:</span>443 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>publish 8090<span class=\"token punctuation\">:</span>80 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>publish 23<span class=\"token punctuation\">:</span>22 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>name gitlab <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>restart always <span class=\"token punctuation\">-</span>v /docker/gitlab/config<span class=\"token punctuation\">:</span>/etc/gitlab <span class=\"token punctuation\">-</span>v /docker/gitlab/logs<span class=\"token punctuation\">:</span>/var/log/gitlab <span class=\"token punctuation\">-</span>v /docker/gitlab/data<span class=\"token punctuation\">:</span>/var/opt/gitlab gitlab/gitlab<span class=\"token punctuation\">-</span>ce\n* * * * * * 介绍 * * * * * *\nsudo docker run <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>detach \\\n<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>hostname gitlab.xxgtalk.cn \\\n<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>publish 443<span class=\"token punctuation\">:</span>443 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>publish 8090<span class=\"token punctuation\">:</span>80 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>publish 23<span class=\"token punctuation\">:</span>22 \\ \n<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>name gitlab \\\n<span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>restart always \\\n<span class=\"token punctuation\">-</span>v /docker/gitlab/config<span class=\"token punctuation\">:</span>/etc/gitlab \\ 配置文件映射到config文件夹\n<span class=\"token punctuation\">-</span>v /docker/gitlab/logs<span class=\"token punctuation\">:</span>/var/log/gitlab \\\n<span class=\"token punctuation\">-</span>v /docker/gitlab/data<span class=\"token punctuation\">:</span>/var/opt/gitlab \\\ngitlab/gitlab<span class=\"token punctuation\">-</span>ce</code></pre>\n::: warning 注意</li>\n</ul>\n<ul>\n<li>因为配置的ssh端口是23 所以需要修改/docker/gitlab/config/gitlab.rb文件中修改或增加<br>gitlab_rails[‘gitlab_shell_ssh_port’] = 23</li>\n<li>查看日志<br>docker logs –follow gitlab<br>:::</li>\n</ul>\n<ol start=\"2\">\n<li>docker下安装gitlab runner  </li>\n</ol>\n<ul>\n<li>[2.1] 安装gitlab runner<pre class=\" language-docker\"><code class=\"language-docker\">sudo docker run <span class=\"token punctuation\">-</span>d <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>name gitlab<span class=\"token punctuation\">-</span>runner <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>restart always <span class=\"token punctuation\">-</span>v /srv/gitlab<span class=\"token punctuation\">-</span>runner/config<span class=\"token punctuation\">:</span>/docker/gitlab<span class=\"token punctuation\">-</span>runner/config <span class=\"token punctuation\">-</span>v /var/run/docker.sock<span class=\"token punctuation\">:</span>/docker/gitlab<span class=\"token punctuation\">-</span>runner/run/docker.sock gitlab/gitlab<span class=\"token punctuation\">-</span>runner<span class=\"token punctuation\">:</span>latest\n* * * * * * 介绍 * * * * * *\nsudo docker run <span class=\"token punctuation\">-</span>d <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>name gitlab<span class=\"token punctuation\">-</span>runner <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>restart always \\\nv /srv/gitlab<span class=\"token punctuation\">-</span>runner/config<span class=\"token punctuation\">:</span>/docker/gitlab<span class=\"token punctuation\">-</span>runner/config \\\n<span class=\"token punctuation\">-</span>v /var/run/docker.sock<span class=\"token punctuation\">:</span>/docker/gitlab<span class=\"token punctuation\">-</span>runner/run/docker.sock \\\ngitlab/gitlab<span class=\"token punctuation\">-</span>runner<span class=\"token punctuation\">:</span>latest</code></pre>\n</li>\n<li>[2.2] 注册gitlab runner(官方建议跟gitlab不要放在同一个服务器上)【最后没有成功,改用<a href=\"/2018/06/05/docker/07gitlab01-runner/\">07Gitlab01-runner</a> 】<br>参考地址:<a href=\"https://docs.gitlab.com.cn/runner/register/index.html\">https://docs.gitlab.com.cn/runner/register/index.html</a>  <ul>\n<li>运行下面命令启动注册程序<br>sudo docker exec -it gitlab-runner gitlab-ci-multi-runner register</li>\n<li>输入 GitLab 实例 URL<br>gitlab的域名  </li>\n<li>输入获取到的用于注册 Runner 的 token:<br>y8R7nLY4x3mdBiZt9AQV  </li>\n<li> 输入该 Runner 的描述，稍后也可通过 GitLab’s UI 修改:  </li>\n<li> 给该 Runner 指派 tags, 稍后也可以在 GitLab’s UI 修改:  </li>\n<li> 选择 Runner 是否接收未指定 tags 的任务（默认值：false）， 稍后可以在 GitLab’s UI 修改： true  </li>\n<li> 选择是否为当前项目锁定该 Runner， 之后也可以在 GitLab’s UI 修改。 该功能通常用于被指定为某个项目的 Runner （默认值：true）：  </li>\n<li>选择 Runner executor:<br> 我们使用docker  </li>\n<li> 如果你选择 Docker 作为你的 executor，注册程序会让你设置一个默认的镜像， 作用于.gitlab-ci.yml中未指定镜像的项目<br>输入: microsoft/dotnet  </li>\n</ul>\n</li>\n</ul>\n<hr>\n<h5 id=\"搭建私有仓库\"><a href=\"#搭建私有仓库\" class=\"headerlink\" title=\"搭建私有仓库\"></a>搭建私有仓库</h5><ol>\n<li>在docker中创建文件夹registry 用来存放仓库镜像，然后运行命令  <pre class=\" language-docker\"><code class=\"language-docker\">docker run <span class=\"token punctuation\">-</span>d <span class=\"token punctuation\">-</span>v /docker/registry<span class=\"token punctuation\">:</span>/var/lib/registry <span class=\"token punctuation\">-</span>p 8091<span class=\"token punctuation\">:</span>5000 <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>restart=always <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>name registry registry</code></pre>\n</li>\n</ol>\n<h5 id=\"使用docker-compose安装\"><a href=\"#使用docker-compose安装\" class=\"headerlink\" title=\"使用docker-compose安装\"></a>使用docker-compose安装</h5><p>请查看<a href=\"http://qiniu.xxgtalk.cn/blog/files/docker/gitlab-docker-compose.yml\">docker-compose文件</a> </p>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Docker下安装GitLab</p>","more":"<blockquote>\n<p>前置条件 安装好docker  </p>\n</blockquote>\n<ol>\n<li>docker运行gitlab(由于22端口被ssh占用 改用23)  </li>\n</ol>\n<ul>\n<li>在/docker/gitlab 目录下分别创建data、config、logs三个文件夹  </li>\n<li>执行命令<pre><code class=\"docker\">sudo docker run --detach --hostname gitlab.xxgtalk.cn --publish 443:443 --publish 8090:80 --publish 23:22 --name gitlab --restart always -v /docker/gitlab/config:/etc/gitlab -v /docker/gitlab/logs:/var/log/gitlab -v /docker/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce\n* * * * * * 介绍 * * * * * *\nsudo docker run --detach \\\n--hostname gitlab.xxgtalk.cn \\\n--publish 443:443 --publish 8090:80 --publish 23:22 \\ \n--name gitlab \\\n--restart always \\\n-v /docker/gitlab/config:/etc/gitlab \\ 配置文件映射到config文件夹\n-v /docker/gitlab/logs:/var/log/gitlab \\\n-v /docker/gitlab/data:/var/opt/gitlab \\\ngitlab/gitlab-ce</code></pre>\n::: warning 注意</li>\n</ul>\n<ul>\n<li>因为配置的ssh端口是23 所以需要修改/docker/gitlab/config/gitlab.rb文件中修改或增加<br>gitlab_rails[‘gitlab_shell_ssh_port’] = 23</li>\n<li>查看日志<br>docker logs –follow gitlab<br>:::</li>\n</ul>\n<ol start=\"2\">\n<li>docker下安装gitlab runner  </li>\n</ol>\n<ul>\n<li>[2.1] 安装gitlab runner<pre><code class=\"docker\">sudo docker run -d --name gitlab-runner --restart always -v /srv/gitlab-runner/config:/docker/gitlab-runner/config -v /var/run/docker.sock:/docker/gitlab-runner/run/docker.sock gitlab/gitlab-runner:latest\n* * * * * * 介绍 * * * * * *\nsudo docker run -d --name gitlab-runner --restart always \\\nv /srv/gitlab-runner/config:/docker/gitlab-runner/config \\\n-v /var/run/docker.sock:/docker/gitlab-runner/run/docker.sock \\\ngitlab/gitlab-runner:latest</code></pre>\n</li>\n<li>[2.2] 注册gitlab runner(官方建议跟gitlab不要放在同一个服务器上)【最后没有成功,改用<a href=\"/2018/06/05/docker/07gitlab01-runner/\">07Gitlab01-runner</a> 】<br>参考地址:<a href=\"https://docs.gitlab.com.cn/runner/register/index.html\">https://docs.gitlab.com.cn/runner/register/index.html</a>  <ul>\n<li>运行下面命令启动注册程序<br>sudo docker exec -it gitlab-runner gitlab-ci-multi-runner register</li>\n<li>输入 GitLab 实例 URL<br>gitlab的域名  </li>\n<li>输入获取到的用于注册 Runner 的 token:<br>y8R7nLY4x3mdBiZt9AQV  </li>\n<li> 输入该 Runner 的描述，稍后也可通过 GitLab’s UI 修改:  </li>\n<li> 给该 Runner 指派 tags, 稍后也可以在 GitLab’s UI 修改:  </li>\n<li> 选择 Runner 是否接收未指定 tags 的任务（默认值：false）， 稍后可以在 GitLab’s UI 修改： true  </li>\n<li> 选择是否为当前项目锁定该 Runner， 之后也可以在 GitLab’s UI 修改。 该功能通常用于被指定为某个项目的 Runner （默认值：true）：  </li>\n<li>选择 Runner executor:<br> 我们使用docker  </li>\n<li> 如果你选择 Docker 作为你的 executor，注册程序会让你设置一个默认的镜像， 作用于.gitlab-ci.yml中未指定镜像的项目<br>输入: microsoft/dotnet  </li>\n</ul>\n</li>\n</ul>\n<hr>\n<h5 id=\"搭建私有仓库\"><a href=\"#搭建私有仓库\" class=\"headerlink\" title=\"搭建私有仓库\"></a>搭建私有仓库</h5><ol>\n<li>在docker中创建文件夹registry 用来存放仓库镜像，然后运行命令  <pre><code class=\"docker\">docker run -d -v /docker/registry:/var/lib/registry -p 8091:5000 --restart=always --name registry registry</code></pre>\n</li>\n</ol>\n<h5 id=\"使用docker-compose安装\"><a href=\"#使用docker-compose安装\" class=\"headerlink\" title=\"使用docker-compose安装\"></a>使用docker-compose安装</h5><p>请查看<a href=\"http://qiniu.xxgtalk.cn/blog/files/docker/gitlab-docker-compose.yml\">docker-compose文件</a> </p>"},{"title":"Centos7.x 安装gitlab-runner","abbrlink":41583,"date":"2018-06-05T02:35:10.000Z","_content":"\nCentos7.x 安装gitlab-runner\n<!-- more -->\n\n> 说明：开始尝试过在docker中安装gitlab-runner注册gitlab-runner啥的都没问题 但是gitlab-ci.yml文件中使用docker的时候提示xxxx daemon文件问题 折腾了好几天没能解决(大概的意思就是在容器内部使用使用docker访问不了外面的啥东西最后放弃了，该用在centos中直接安装gitlab-runner形式)   \n> 参考地址: http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html  \n>【前置条件】 系统安装了docker、docker-compose、git、dotnetcore  \n> docker 这个必须要  \n> git 必须，因为需要通过git获取代码  \n> docker-compose根据情况 因为我的ci中使用了docker-compose所以要  \n> dotnetcore 因为我是微软的铁杆粉丝  \n1. 安装docker、docker-compose[参考01](./01docker-config.html)    \n2. gitlab-runner  \n* 安装命令  \n sudo wget -O /usr/local/bin/gitlab-runner https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64  \n* 给予其权限  \nsudo chmod +x /usr/local/bin/gitlab-runner  \n* 注册  \nsudo gitlab-runner register  \n根据提示输入gitlab地址、token、描述信息、tag、[true|false]、[true|false]、shell    \n* 添加一个用于跑 GitLab Runner 的gitlab-runner用户  \nsudo useradd --comment 'GitLab Runner' --create-home gitlab-runner --shell /bin/bash    \n* 指定 GitLab Runner 执行的用户和工作目录    \nsudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner  \n* 启动gitlab-runner    \nsudo gitlab-runner start  \n* 把 GitLab Runner 服务器中的gitlab-runner账户，添加到docker用户组中  \nsudo usermod -aG docker gitlab-runner  \n* 在 GitLab Runner 服务器中，切换到gitlab-runner用户下，配置 SSH  \n    ```\n    su gitlab-runner\n    ssh-keygen -t rsa -P ''\n    ssh-copy-id root@你的ip地址\n    ```\n3. 安装git  \ncd ~  \nyum -y install git  \n\n","source":"_posts/docker/07gitlab01-runner.md","raw":"---\ntitle: Centos7.x 安装gitlab-runner\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 41583\ndate: 2018-06-05 10:35:10\n---\n\nCentos7.x 安装gitlab-runner\n<!-- more -->\n\n> 说明：开始尝试过在docker中安装gitlab-runner注册gitlab-runner啥的都没问题 但是gitlab-ci.yml文件中使用docker的时候提示xxxx daemon文件问题 折腾了好几天没能解决(大概的意思就是在容器内部使用使用docker访问不了外面的啥东西最后放弃了，该用在centos中直接安装gitlab-runner形式)   \n> 参考地址: http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html  \n>【前置条件】 系统安装了docker、docker-compose、git、dotnetcore  \n> docker 这个必须要  \n> git 必须，因为需要通过git获取代码  \n> docker-compose根据情况 因为我的ci中使用了docker-compose所以要  \n> dotnetcore 因为我是微软的铁杆粉丝  \n1. 安装docker、docker-compose[参考01](./01docker-config.html)    \n2. gitlab-runner  \n* 安装命令  \n sudo wget -O /usr/local/bin/gitlab-runner https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64  \n* 给予其权限  \nsudo chmod +x /usr/local/bin/gitlab-runner  \n* 注册  \nsudo gitlab-runner register  \n根据提示输入gitlab地址、token、描述信息、tag、[true|false]、[true|false]、shell    \n* 添加一个用于跑 GitLab Runner 的gitlab-runner用户  \nsudo useradd --comment 'GitLab Runner' --create-home gitlab-runner --shell /bin/bash    \n* 指定 GitLab Runner 执行的用户和工作目录    \nsudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner  \n* 启动gitlab-runner    \nsudo gitlab-runner start  \n* 把 GitLab Runner 服务器中的gitlab-runner账户，添加到docker用户组中  \nsudo usermod -aG docker gitlab-runner  \n* 在 GitLab Runner 服务器中，切换到gitlab-runner用户下，配置 SSH  \n    ```\n    su gitlab-runner\n    ssh-keygen -t rsa -P ''\n    ssh-copy-id root@你的ip地址\n    ```\n3. 安装git  \ncd ~  \nyum -y install git  \n\n","slug":"docker/07gitlab01-runner","published":1,"updated":"2020-12-28T00:55:28.052Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6up000sd8v88g0g7w0x","content":"<p>Centos7.x 安装gitlab-runner</p>\n<a id=\"more\"></a>\n\n<blockquote>\n<p>说明：开始尝试过在docker中安装gitlab-runner注册gitlab-runner啥的都没问题 但是gitlab-ci.yml文件中使用docker的时候提示xxxx daemon文件问题 折腾了好几天没能解决(大概的意思就是在容器内部使用使用docker访问不了外面的啥东西最后放弃了，该用在centos中直接安装gitlab-runner形式)<br>参考地址: <a href=\"http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html\">http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html</a><br>【前置条件】 系统安装了docker、docker-compose、git、dotnetcore<br>docker 这个必须要<br>git 必须，因为需要通过git获取代码<br>docker-compose根据情况 因为我的ci中使用了docker-compose所以要<br>dotnetcore 因为我是微软的铁杆粉丝  </p>\n</blockquote>\n<ol>\n<li>安装docker、docker-compose<a href=\"./01docker-config.html\">参考01</a>    </li>\n<li>gitlab-runner  </li>\n</ol>\n<ul>\n<li>安装命令<br>sudo wget -O /usr/local/bin/gitlab-runner <a href=\"https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64\">https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64</a>  </li>\n<li>给予其权限<br>sudo chmod +x /usr/local/bin/gitlab-runner  </li>\n<li>注册<br>sudo gitlab-runner register<br>根据提示输入gitlab地址、token、描述信息、tag、[true|false]、[true|false]、shell    </li>\n<li>添加一个用于跑 GitLab Runner 的gitlab-runner用户<br>sudo useradd –comment ‘GitLab Runner’ –create-home gitlab-runner –shell /bin/bash    </li>\n<li>指定 GitLab Runner 执行的用户和工作目录<br>sudo gitlab-runner install –user=gitlab-runner –working-directory=/home/gitlab-runner  </li>\n<li>启动gitlab-runner<br>sudo gitlab-runner start  </li>\n<li>把 GitLab Runner 服务器中的gitlab-runner账户，添加到docker用户组中<br>sudo usermod -aG docker gitlab-runner  </li>\n<li>在 GitLab Runner 服务器中，切换到gitlab-runner用户下，配置 SSH  <pre><code>su gitlab-runner\nssh-keygen -t rsa -P &#39;&#39;\nssh-copy-id root@你的ip地址</code></pre>\n</li>\n</ul>\n<ol start=\"3\">\n<li>安装git<br>cd ~<br>yum -y install git  </li>\n</ol>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Centos7.x 安装gitlab-runner</p>","more":"<blockquote>\n<p>说明：开始尝试过在docker中安装gitlab-runner注册gitlab-runner啥的都没问题 但是gitlab-ci.yml文件中使用docker的时候提示xxxx daemon文件问题 折腾了好几天没能解决(大概的意思就是在容器内部使用使用docker访问不了外面的啥东西最后放弃了，该用在centos中直接安装gitlab-runner形式)<br>参考地址: <a href=\"http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html\">http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html</a><br>【前置条件】 系统安装了docker、docker-compose、git、dotnetcore<br>docker 这个必须要<br>git 必须，因为需要通过git获取代码<br>docker-compose根据情况 因为我的ci中使用了docker-compose所以要<br>dotnetcore 因为我是微软的铁杆粉丝  </p>\n</blockquote>\n<ol>\n<li>安装docker、docker-compose<a href=\"./01docker-config.html\">参考01</a>    </li>\n<li>gitlab-runner  </li>\n</ol>\n<ul>\n<li>安装命令<br>sudo wget -O /usr/local/bin/gitlab-runner <a href=\"https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64\">https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64</a>  </li>\n<li>给予其权限<br>sudo chmod +x /usr/local/bin/gitlab-runner  </li>\n<li>注册<br>sudo gitlab-runner register<br>根据提示输入gitlab地址、token、描述信息、tag、[true|false]、[true|false]、shell    </li>\n<li>添加一个用于跑 GitLab Runner 的gitlab-runner用户<br>sudo useradd –comment ‘GitLab Runner’ –create-home gitlab-runner –shell /bin/bash    </li>\n<li>指定 GitLab Runner 执行的用户和工作目录<br>sudo gitlab-runner install –user=gitlab-runner –working-directory=/home/gitlab-runner  </li>\n<li>启动gitlab-runner<br>sudo gitlab-runner start  </li>\n<li>把 GitLab Runner 服务器中的gitlab-runner账户，添加到docker用户组中<br>sudo usermod -aG docker gitlab-runner  </li>\n<li>在 GitLab Runner 服务器中，切换到gitlab-runner用户下，配置 SSH  <pre><code>su gitlab-runner\nssh-keygen -t rsa -P &#39;&#39;\nssh-copy-id root@你的ip地址</code></pre>\n</li>\n</ul>\n<ol start=\"3\">\n<li>安装git<br>cd ~<br>yum -y install git  </li>\n</ol>"},{"title":"ASP.NET Core + Docker + Jenkins + gogs + CentOS 从零开始搭建持续集成","abbrlink":52714,"date":"2018-06-06T03:01:10.000Z","_content":"\nASP.NET Core + Docker + Jenkins + gogs + CentOS 从零开始搭建持续集成\n<!-- more -->\n \n> 参考地址：https://www.cnblogs.com/stulzq/p/8629165.html    \n> https://www.jianshu.com/p/64e9708c23e7  \n>前置条件 安装了docker、配置了加速镜像(参考01)  \n1. 使用docker安装免费https证书  \n```\n sudo docker run -it --rm --name certbot \\\n    -v \"/etc/letsencrypt:/etc/letsencrypt\" \\\n    -v \"/var/lib/letsencrypt:/var/lib/letsencrypt\" \\\n    certbot/certbot certonly\n```\n按照提示进行操作  \n2. docker安装Gogs (一个gitserver，类似于gitlab)    \n创建文件/docker/gogs  然后运行如下命令  \ndocker run -d --name=gogs -p 23:22 -p 8090:3000 --mount type=bind,src=/docker/gogs,dst=/data --restart always gogs/gogs   \n>参考地址 https://github.com/gogits/gogs/tree/master/docker   \n3. docker 安装jenkins  \n自定义镜像  \n``` yml\nFROM jenkins\nUSER root\n#清除了基础镜像设置的源，切换成腾讯云的jessie源\n#使用非腾讯云环境的需要将 tencentyun 改为 aliyun\nRUN echo '' > /etc/apt/sources.list.d/jessie-backports.list \\\n  && echo \"deb http://mirrors.tencentyun.com/debian jessie main contrib non-free\" > /etc/apt/sources.list \\\n  && echo \"deb http://mirrors.tencentyun.com/debian jessie-updates main contrib non-free\" >> /etc/apt/sources.list \\\n  && echo \"deb http://mirrors.tencentyun.com/debian-security jessie/updates main contrib non-free\" >> /etc/apt/sources.list\n#更新源并安装缺少的包\nRUN apt-get update && apt-get install -y libltdl7 && apt-get update\n\nARG dockerGid=999\n\nRUN echo \"docker:x:${dockerGid}:jenkins\" >> /etc/group \n\n# 安装 docker-compose 因为等下构建环境的需要\nRUN curl -L https://github.com/docker/compose/releases/download/1.20.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose\n\nRUN chmod +x /usr/local/bin/docker-compose\n```\ndocker build -t auto-jenkins .  \n创建目录/docker/jenkins/docker.sock、/docker/jenkins/jenkins_home  \n``` yml\ndocker run --name jenkins -p 8091:8080 -p 50000:50000 \\\n    --mount type=bind,src=/docker/jenkins/docker.sock,dst=/var/run/docker.sock \\\n    --mount type=bind,src=$(which docker),dst=/bin/docker \\\n    --mount type=bind,src=/docker/jenkins/jenkins_home,dst=/var/jenkins_home \\\n    --restart always \\\n    -d auto-jenkins\n```\ndocker run --name jenkins -p 8091:8080 -p 50000:50000 --mount type=bind,src=/docker/jenkins/docker.sock,dst=/var/run/docker.sock  --mount type=bind,src=$(which docker),dst=/bin/docke  --mount type=bind,src=/docker/jenkins/jenkins_home,dst=/var/jenkins_home --restart always -d auto-jenkins  \n\n4. ASP.NET Core 持续集成  \n5. Jenkins配置Gogs webhook插件  \n6. Jenkins持续集成演示  \n","source":"_posts/docker/10docker-jenkins-gogs-cicd.md","raw":"---\ntitle: ASP.NET Core + Docker + Jenkins + gogs + CentOS 从零开始搭建持续集成\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 52714\ndate: 2018-06-06 11:01:10\n---\n\nASP.NET Core + Docker + Jenkins + gogs + CentOS 从零开始搭建持续集成\n<!-- more -->\n \n> 参考地址：https://www.cnblogs.com/stulzq/p/8629165.html    \n> https://www.jianshu.com/p/64e9708c23e7  \n>前置条件 安装了docker、配置了加速镜像(参考01)  \n1. 使用docker安装免费https证书  \n```\n sudo docker run -it --rm --name certbot \\\n    -v \"/etc/letsencrypt:/etc/letsencrypt\" \\\n    -v \"/var/lib/letsencrypt:/var/lib/letsencrypt\" \\\n    certbot/certbot certonly\n```\n按照提示进行操作  \n2. docker安装Gogs (一个gitserver，类似于gitlab)    \n创建文件/docker/gogs  然后运行如下命令  \ndocker run -d --name=gogs -p 23:22 -p 8090:3000 --mount type=bind,src=/docker/gogs,dst=/data --restart always gogs/gogs   \n>参考地址 https://github.com/gogits/gogs/tree/master/docker   \n3. docker 安装jenkins  \n自定义镜像  \n``` yml\nFROM jenkins\nUSER root\n#清除了基础镜像设置的源，切换成腾讯云的jessie源\n#使用非腾讯云环境的需要将 tencentyun 改为 aliyun\nRUN echo '' > /etc/apt/sources.list.d/jessie-backports.list \\\n  && echo \"deb http://mirrors.tencentyun.com/debian jessie main contrib non-free\" > /etc/apt/sources.list \\\n  && echo \"deb http://mirrors.tencentyun.com/debian jessie-updates main contrib non-free\" >> /etc/apt/sources.list \\\n  && echo \"deb http://mirrors.tencentyun.com/debian-security jessie/updates main contrib non-free\" >> /etc/apt/sources.list\n#更新源并安装缺少的包\nRUN apt-get update && apt-get install -y libltdl7 && apt-get update\n\nARG dockerGid=999\n\nRUN echo \"docker:x:${dockerGid}:jenkins\" >> /etc/group \n\n# 安装 docker-compose 因为等下构建环境的需要\nRUN curl -L https://github.com/docker/compose/releases/download/1.20.1/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose\n\nRUN chmod +x /usr/local/bin/docker-compose\n```\ndocker build -t auto-jenkins .  \n创建目录/docker/jenkins/docker.sock、/docker/jenkins/jenkins_home  \n``` yml\ndocker run --name jenkins -p 8091:8080 -p 50000:50000 \\\n    --mount type=bind,src=/docker/jenkins/docker.sock,dst=/var/run/docker.sock \\\n    --mount type=bind,src=$(which docker),dst=/bin/docker \\\n    --mount type=bind,src=/docker/jenkins/jenkins_home,dst=/var/jenkins_home \\\n    --restart always \\\n    -d auto-jenkins\n```\ndocker run --name jenkins -p 8091:8080 -p 50000:50000 --mount type=bind,src=/docker/jenkins/docker.sock,dst=/var/run/docker.sock  --mount type=bind,src=$(which docker),dst=/bin/docke  --mount type=bind,src=/docker/jenkins/jenkins_home,dst=/var/jenkins_home --restart always -d auto-jenkins  \n\n4. ASP.NET Core 持续集成  \n5. Jenkins配置Gogs webhook插件  \n6. Jenkins持续集成演示  \n","slug":"docker/10docker-jenkins-gogs-cicd","published":1,"updated":"2020-12-29T01:15:00.437Z","_id":"ckj9at6ur000vd8v8ducgh22t","comments":1,"layout":"post","photos":[],"link":""},{"title":"Docker安装redis","abbrlink":25795,"date":"2018-06-06T03:15:10.000Z","_content":"\nDocker下安装redis\n<!-- more -->\n\n1. 创建网络  \ndocker network create net_redis\n2. 创建redis配置文件(/docker/redis/config/redis.conf)  \n    ``` bash\n    #redis的databases数量\n    databases 32\n    #redis密码\n    requirepass 123\n    ```\n3. 通过docker-compose安装  \ndocker-compose -f redis-docker-compose.yml up -d  \n[文件链接](http://qiniu.xxgtalk.cn/blog/files/docker/redis-docker-compose.yml)  \n","source":"_posts/docker/11docker-redis.md","raw":"---\ntitle: Docker安装redis\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 25795\ndate: 2018-06-06 11:15:10\n---\n\nDocker下安装redis\n<!-- more -->\n\n1. 创建网络  \ndocker network create net_redis\n2. 创建redis配置文件(/docker/redis/config/redis.conf)  \n    ``` bash\n    #redis的databases数量\n    databases 32\n    #redis密码\n    requirepass 123\n    ```\n3. 通过docker-compose安装  \ndocker-compose -f redis-docker-compose.yml up -d  \n[文件链接](http://qiniu.xxgtalk.cn/blog/files/docker/redis-docker-compose.yml)  \n","slug":"docker/11docker-redis","published":1,"updated":"2020-12-29T01:15:00.439Z","_id":"ckj9at6ut000yd8v85fhl9cwq","comments":1,"layout":"post","photos":[],"link":""},{"title":"Docker安装RabbitMQ","abbrlink":11659,"date":"2018-06-08T03:30:10.000Z","_content":"\nDocker安装RabbitMQ\n<!-- more -->\n\n> 参考地址:https://hub.docker.com/_/rabbitmq/\n- 运行命令   \n    ``` docker\n    docker run -d -p 8092:15672 -p 5672:5672  --restart always --hostname my-rabbit --name rabbit -e RABBITMQ_DEFAULT_USER=xxg -e RABBITMQ_DEFAULT_PASS=Abcd1234  rabbitmq:3-management\n    ```\n> 说明  \n-e RABBITMQ_DEFAULT_USER=xxg    --默认用户名  \n-e RABBITMQ_DEFAULT_PASS=Abcd1234   --默认密码  \nrabbitmq:3-management       --表示使用带插件版本的(可以通过http://host-ip:8092 访问管理控制台)  \n4369/tcp    服务器 需要开放这个端口  \n5671/tcp    服务器 需要开放这个端口  ","source":"_posts/docker/12docker-rabbitmq.md","raw":"---\ntitle: Docker安装RabbitMQ\ncategories:\n  - Docker\ntags:\n  - Docker\nabbrlink: 11659\ndate: 2018-06-08 11:30:10\n---\n\nDocker安装RabbitMQ\n<!-- more -->\n\n> 参考地址:https://hub.docker.com/_/rabbitmq/\n- 运行命令   \n    ``` docker\n    docker run -d -p 8092:15672 -p 5672:5672  --restart always --hostname my-rabbit --name rabbit -e RABBITMQ_DEFAULT_USER=xxg -e RABBITMQ_DEFAULT_PASS=Abcd1234  rabbitmq:3-management\n    ```\n> 说明  \n-e RABBITMQ_DEFAULT_USER=xxg    --默认用户名  \n-e RABBITMQ_DEFAULT_PASS=Abcd1234   --默认密码  \nrabbitmq:3-management       --表示使用带插件版本的(可以通过http://host-ip:8092 访问管理控制台)  \n4369/tcp    服务器 需要开放这个端口  \n5671/tcp    服务器 需要开放这个端口  ","slug":"docker/12docker-rabbitmq","published":1,"updated":"2020-12-29T01:15:00.441Z","_id":"ckj9at6uu0011d8v83k8gh67t","comments":1,"layout":"post","photos":[],"link":""},{"title":"Flutter-01 环境搭建","abbrlink":5925,"date":"2019-09-09T11:40:22.000Z","_content":"\nFlutter-01 环境搭建\n<!-- more -->\n\n文档地址 https://developer.android.google.cn/studio/intro\n\n# Window10环境搭建Flutter开发环境\n\n## 前置条件\n- 磁盘空间足够\n- git 2.x\n\n## 安装\n\n### Android Studio(建议3.0及以上)\n1. 下载\n- https://developer.android.google.com/studio(需要翻墙)\n- https://developer.android.google.cn/studio  \n如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk\n\n2. 为Android Studio安装Flutter和Dart插件\nFile->Settings->Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio\n如图\n![20190909203319.png](http://qiniu.xxgtalk.cn/blog/images/20190909203319.png)\n\n### Flutter SDK\n1. 配置flutter临时镜像(非必须)\n``` bash\n// 增加如下变量到用户环境变量中\nPUB_HOSTED_URL=https://pub.flutter-io.cn  \nFLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址\n```\n\n2. 下载并安装\n- 通过 git 克隆flutter项目代码到本地，比如我的是D:\\Program Files\\Flutter\n不建议放到高级目录，比如C:\\Program Files\n- 然后在Flutter安装目录的flutter文件下找到flutter_console.bat 双击运行  \n\n### 设置环境变量\n1. 系统环境PATH添加 D:\\Program Files\\Flutter\\bin\n2. Android环境变量配置\n- 添加系统环境变量\n``` bash\n// 键和值，其中目录为Android SDK的目录，可以通过android studio菜单File->Settings 然后搜索SDK 可查看SDK的安装目录\nANDROID_HOME:C:\\Users\\xiexingen\\AppData\\Local\\Android\\Sdk\n```\n- 在系统环境变量中的Path中添加%ANDROID_HOME%\\emulator\n- 在系统环境变量中的Path中添加%ANDROID_HOME%\\platform-tools\n- 在系统环境变量中的Path中添加%ANDROID_HOME%\\tools\n\n> 配置完成后，需要重启电脑\n\n### 在Android模拟器上运行Flutter\n* 机器上需要启用VM acceleration\n* 启动android studio 菜单 Tools->AVD Manager 并选择 `Create Virtual Device`\n* 选择一个设备 然后点 Next\n* 为要模拟的Android版本选择一个或多个系统镜像，然后选择Next(建议使用x86)\n* 在Emulated Performance下，选择 Hardware-GLES 2.0 以启用硬件加速\n* 验证AVD配置是否正确，然后选Finish,更多问题可以参考文档\n* 在Android Virtual Device Manager中，点击工具栏的 `Run`,启动模拟器并显示所选择的操作系统版本或设备的启动画面\n* 通过 `flutter run` 命令行运行启动项目\n\n## 如何在Android真机运行\n要准备在Android设备上运行并测试Flutter，需要安装Android4.1 (API level 16)或者更高低版本\n* 在设备上启用 `开发人员选项`和`USB调试`，可自行google\n* 使用USB将手机插入电脑，如果有授权提示则点同意\n* 在终端中，运行 `flutter devices`命令以验证Flutter是否识别你连接的Android设备\n* 通过 `flutter run` 启动项目\n\n\n------------------------------------------------------\n\n\n# Mac 环境搭建Flutter开发环境\n> 由于没有mac电脑，所以特地在VM下安装了一个mac系统\n\n## 前置条件\n- 磁盘空间足够\n- 安装了命令行工具: bash、curl、git 2.x、mkdir、rm、unzip、which\n- 由于国内访问Flutter可能受限，Flutter官方为中国地区待见了临时镜像，可添加如下环境变量到用户的环境变量中\n``` bash\n// Macintosh HD->Users->用户名->.bash_profile\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址\n```\n\n## 安装\n\n### Flutter SDK\n\n2. 下载并安装\n- 下载stable版本的sdk，然后解压到~/flutter\n\n\n3. 添加flutter路径到path中\n``` bash\ncd ~\nvim .bash_profile\n// 然后添加下面行,;wq 保存，然后重启bash\nexport PATH=/Users/xiexingen/flutter/bin:$PATH\n```\n\n4. 运行flutter doctor来检查flutter\n会有很多xx 比如xcode，android相关的工具\n\n### Android Studio(建议3.0及以上)\n1. 下载\n- https://developer.android.google.com/studio(需要翻墙)\n- https://developer.android.google.cn/studio  \n如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk\n\n2. 为Android Studio安装Flutter和Dart插件\nFile->Settings->Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio\n如图\n![20190909203319.png](http://qiniu.xxgtalk.cn/blog/images/20190909203319.png)\n\n### 设置环境变量\n- 添加系统环境变量\n``` bash\n// 电脑/Users/用户名/.bash_profile\n# Android 环境变量 xiexingen为我的用户名\nexport ANDROID_HOME=/Users/xiexingen/Library/Android/sdk\n# Android 模拟器路径\nexport PATH=${PATH}:${ANDROID_HOME}/emulator\n# Android tools 路径\nexport PATH=${PATH}:${ANDROID_HOME}/tools\n# Android 平台工具路径\nexport PATH=${PATH}:${ANDROID_HOME}/platform-tools\n# Android NDK路径\nANDROID_NDK_HOME=/Users/xiexingen/Library/Android/ndk/android-ndk-r10e\n# Flutter镜像\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n# Flutter 环境变量\nexport PATH=/Users/xiexingen/flutter/bin:$PATH\n```\n\n> 配置完成后，需要重启电脑\n\n### 安装Xcode\n1. 通过苹果应用商店安装\n2. 配置Xcode命令行工具以使用最新安装的Xcode版本\n``` bash\nsudo xcode-select --switch /Applications/Xcode.app/Contents/Developer\n```\n\n### 设置IOS模拟器\n1. 在终端输入如下命令行打开一个ios模拟器\n``` bash\nopen -a Simulator\n```\n2. 通过模拟器菜单的 *硬件->设备*,确保是64位的iphone5s或更新的模拟器\n\n### 如何将Flutter安装到IOS真机上\n\n要通过*flutter run* 将Flutter应用安装到ios整机设备，需要一些额外的工具和一个Apple账号，还需要在Xcode中进行设置：\n> 当然，用XCode来讲Flutter运行在真机上更简单，只需要点 *run*按钮即可，可以根据需要进行两种不同的运行方式；  \n1. 安装 [Homebrew](https://brew.sh)\n2. 确保homebrew最新\n``` bash\nbrew update\n```\n3. 打开终端并运行如下命令来安装用于将Flutter应用安装到IOS设备的工具\n``` bash\nbrew install --HEAD usbmuxd\nbrew link usbmuxd\nbrew install --HEAd libimobiledevice\nbrew install ideviceinstaller ios-deploy cocoapods\npod setup\n```\n如果这些命令中的任何一个失败并出现错误，可运行*brew doctor*并按照说明来解决问题\n\n4. 遵循Xcode前面流程来配置项目\n* 在你Flutter项目目录中通过*open ios/Runner.xcworkspace*打开默认的Xcode workspace\n* 在Xcode中，选择导航面板左侧中的Runner项目\n* 在Runner target设置页面中，确保在 常规>前面>团队 下选择了您的开发团队。当你选择一个团队时，Xcode会创建并下载开发证书，向您的设备注册您的账户，并创建和下载配置文件(如果需要)\n    * 要开始您的第一个IOS开发项目，您可能需要使用您的APP ID登录Xcode\n    * 任何App Id都支持开发和测试，但是如想法不到App Store则需要支付99到的开发者账号\n* 当你第一次attach真机设备进行ios开发时，需要同时信任你的Mac和该设备上的开发证书。首次将IOS设备连接到Mac时，请在对话中选择 *信任*,然后，转到IOS设备上的设置应用程序，选择 常规>设备管理 并信任您的证书\n    * 如果Xcode中的自动签名失败，请验证项目的 General>Identity>Bundle Identifier值是否唯一.\n\n5. 通过flutter run 运行启动项目\n``` bash\nflutter run\n```\n\n\n# 其他\n\n## 验证\n- 运行 adb // 检测android相关\n- 运行flutter doctor  // 检测flutter相关\n> 第一次运行flutter命令(如 flutter doctor)，它会下载自己的依赖项目并自动编译，并缓存\n\n\n## FAQ\n\n### 无法启动模拟器\n> emulator: ERROR:x86 emulation currently requires hardware acceleration! Please ensure Windows Hypervisor Platform (WHPX) is properly installed and usable. CPU acceleration status: HAXM is not installed on this machine  \n解决方案:选择 Tools-> SDK Manager -> SDK Tools,安装 HAXM 即可\n![20190909204602.png](http://qiniu.xxgtalk.cn/blog/images/20190909204602.png)\n\n### 创建flutter项目\n1. 通过android studio创建\nFile->Create->New Flutter Project\n\n2. 通过命令行\nflutter create my_first_app\n\n### 运行flutter项目\n1. 通过android studio 启动按钮\n\n2. 命令行运行android模拟器\n``` bash\n// hw1 表示模拟器的名称\nemulator -avd hw1\n```\n\n3. 命令行 flutter run\n前置条件，需要一个已经启动的android模拟器或者连接到电脑的android设备","source":"_posts/flutter/01-environment.md","raw":"---\ntitle: Flutter-01 环境搭建\ncategories:\n  - Flutter\ntags:\n  - Flutter\nabbrlink: 5925\ndate: 2019-09-09 19:40:22\n---\n\nFlutter-01 环境搭建\n<!-- more -->\n\n文档地址 https://developer.android.google.cn/studio/intro\n\n# Window10环境搭建Flutter开发环境\n\n## 前置条件\n- 磁盘空间足够\n- git 2.x\n\n## 安装\n\n### Android Studio(建议3.0及以上)\n1. 下载\n- https://developer.android.google.com/studio(需要翻墙)\n- https://developer.android.google.cn/studio  \n如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk\n\n2. 为Android Studio安装Flutter和Dart插件\nFile->Settings->Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio\n如图\n![20190909203319.png](http://qiniu.xxgtalk.cn/blog/images/20190909203319.png)\n\n### Flutter SDK\n1. 配置flutter临时镜像(非必须)\n``` bash\n// 增加如下变量到用户环境变量中\nPUB_HOSTED_URL=https://pub.flutter-io.cn  \nFLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址\n```\n\n2. 下载并安装\n- 通过 git 克隆flutter项目代码到本地，比如我的是D:\\Program Files\\Flutter\n不建议放到高级目录，比如C:\\Program Files\n- 然后在Flutter安装目录的flutter文件下找到flutter_console.bat 双击运行  \n\n### 设置环境变量\n1. 系统环境PATH添加 D:\\Program Files\\Flutter\\bin\n2. Android环境变量配置\n- 添加系统环境变量\n``` bash\n// 键和值，其中目录为Android SDK的目录，可以通过android studio菜单File->Settings 然后搜索SDK 可查看SDK的安装目录\nANDROID_HOME:C:\\Users\\xiexingen\\AppData\\Local\\Android\\Sdk\n```\n- 在系统环境变量中的Path中添加%ANDROID_HOME%\\emulator\n- 在系统环境变量中的Path中添加%ANDROID_HOME%\\platform-tools\n- 在系统环境变量中的Path中添加%ANDROID_HOME%\\tools\n\n> 配置完成后，需要重启电脑\n\n### 在Android模拟器上运行Flutter\n* 机器上需要启用VM acceleration\n* 启动android studio 菜单 Tools->AVD Manager 并选择 `Create Virtual Device`\n* 选择一个设备 然后点 Next\n* 为要模拟的Android版本选择一个或多个系统镜像，然后选择Next(建议使用x86)\n* 在Emulated Performance下，选择 Hardware-GLES 2.0 以启用硬件加速\n* 验证AVD配置是否正确，然后选Finish,更多问题可以参考文档\n* 在Android Virtual Device Manager中，点击工具栏的 `Run`,启动模拟器并显示所选择的操作系统版本或设备的启动画面\n* 通过 `flutter run` 命令行运行启动项目\n\n## 如何在Android真机运行\n要准备在Android设备上运行并测试Flutter，需要安装Android4.1 (API level 16)或者更高低版本\n* 在设备上启用 `开发人员选项`和`USB调试`，可自行google\n* 使用USB将手机插入电脑，如果有授权提示则点同意\n* 在终端中，运行 `flutter devices`命令以验证Flutter是否识别你连接的Android设备\n* 通过 `flutter run` 启动项目\n\n\n------------------------------------------------------\n\n\n# Mac 环境搭建Flutter开发环境\n> 由于没有mac电脑，所以特地在VM下安装了一个mac系统\n\n## 前置条件\n- 磁盘空间足够\n- 安装了命令行工具: bash、curl、git 2.x、mkdir、rm、unzip、which\n- 由于国内访问Flutter可能受限，Flutter官方为中国地区待见了临时镜像，可添加如下环境变量到用户的环境变量中\n``` bash\n// Macintosh HD->Users->用户名->.bash_profile\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址\n```\n\n## 安装\n\n### Flutter SDK\n\n2. 下载并安装\n- 下载stable版本的sdk，然后解压到~/flutter\n\n\n3. 添加flutter路径到path中\n``` bash\ncd ~\nvim .bash_profile\n// 然后添加下面行,;wq 保存，然后重启bash\nexport PATH=/Users/xiexingen/flutter/bin:$PATH\n```\n\n4. 运行flutter doctor来检查flutter\n会有很多xx 比如xcode，android相关的工具\n\n### Android Studio(建议3.0及以上)\n1. 下载\n- https://developer.android.google.com/studio(需要翻墙)\n- https://developer.android.google.cn/studio  \n如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk\n\n2. 为Android Studio安装Flutter和Dart插件\nFile->Settings->Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio\n如图\n![20190909203319.png](http://qiniu.xxgtalk.cn/blog/images/20190909203319.png)\n\n### 设置环境变量\n- 添加系统环境变量\n``` bash\n// 电脑/Users/用户名/.bash_profile\n# Android 环境变量 xiexingen为我的用户名\nexport ANDROID_HOME=/Users/xiexingen/Library/Android/sdk\n# Android 模拟器路径\nexport PATH=${PATH}:${ANDROID_HOME}/emulator\n# Android tools 路径\nexport PATH=${PATH}:${ANDROID_HOME}/tools\n# Android 平台工具路径\nexport PATH=${PATH}:${ANDROID_HOME}/platform-tools\n# Android NDK路径\nANDROID_NDK_HOME=/Users/xiexingen/Library/Android/ndk/android-ndk-r10e\n# Flutter镜像\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n# Flutter 环境变量\nexport PATH=/Users/xiexingen/flutter/bin:$PATH\n```\n\n> 配置完成后，需要重启电脑\n\n### 安装Xcode\n1. 通过苹果应用商店安装\n2. 配置Xcode命令行工具以使用最新安装的Xcode版本\n``` bash\nsudo xcode-select --switch /Applications/Xcode.app/Contents/Developer\n```\n\n### 设置IOS模拟器\n1. 在终端输入如下命令行打开一个ios模拟器\n``` bash\nopen -a Simulator\n```\n2. 通过模拟器菜单的 *硬件->设备*,确保是64位的iphone5s或更新的模拟器\n\n### 如何将Flutter安装到IOS真机上\n\n要通过*flutter run* 将Flutter应用安装到ios整机设备，需要一些额外的工具和一个Apple账号，还需要在Xcode中进行设置：\n> 当然，用XCode来讲Flutter运行在真机上更简单，只需要点 *run*按钮即可，可以根据需要进行两种不同的运行方式；  \n1. 安装 [Homebrew](https://brew.sh)\n2. 确保homebrew最新\n``` bash\nbrew update\n```\n3. 打开终端并运行如下命令来安装用于将Flutter应用安装到IOS设备的工具\n``` bash\nbrew install --HEAD usbmuxd\nbrew link usbmuxd\nbrew install --HEAd libimobiledevice\nbrew install ideviceinstaller ios-deploy cocoapods\npod setup\n```\n如果这些命令中的任何一个失败并出现错误，可运行*brew doctor*并按照说明来解决问题\n\n4. 遵循Xcode前面流程来配置项目\n* 在你Flutter项目目录中通过*open ios/Runner.xcworkspace*打开默认的Xcode workspace\n* 在Xcode中，选择导航面板左侧中的Runner项目\n* 在Runner target设置页面中，确保在 常规>前面>团队 下选择了您的开发团队。当你选择一个团队时，Xcode会创建并下载开发证书，向您的设备注册您的账户，并创建和下载配置文件(如果需要)\n    * 要开始您的第一个IOS开发项目，您可能需要使用您的APP ID登录Xcode\n    * 任何App Id都支持开发和测试，但是如想法不到App Store则需要支付99到的开发者账号\n* 当你第一次attach真机设备进行ios开发时，需要同时信任你的Mac和该设备上的开发证书。首次将IOS设备连接到Mac时，请在对话中选择 *信任*,然后，转到IOS设备上的设置应用程序，选择 常规>设备管理 并信任您的证书\n    * 如果Xcode中的自动签名失败，请验证项目的 General>Identity>Bundle Identifier值是否唯一.\n\n5. 通过flutter run 运行启动项目\n``` bash\nflutter run\n```\n\n\n# 其他\n\n## 验证\n- 运行 adb // 检测android相关\n- 运行flutter doctor  // 检测flutter相关\n> 第一次运行flutter命令(如 flutter doctor)，它会下载自己的依赖项目并自动编译，并缓存\n\n\n## FAQ\n\n### 无法启动模拟器\n> emulator: ERROR:x86 emulation currently requires hardware acceleration! Please ensure Windows Hypervisor Platform (WHPX) is properly installed and usable. CPU acceleration status: HAXM is not installed on this machine  \n解决方案:选择 Tools-> SDK Manager -> SDK Tools,安装 HAXM 即可\n![20190909204602.png](http://qiniu.xxgtalk.cn/blog/images/20190909204602.png)\n\n### 创建flutter项目\n1. 通过android studio创建\nFile->Create->New Flutter Project\n\n2. 通过命令行\nflutter create my_first_app\n\n### 运行flutter项目\n1. 通过android studio 启动按钮\n\n2. 命令行运行android模拟器\n``` bash\n// hw1 表示模拟器的名称\nemulator -avd hw1\n```\n\n3. 命令行 flutter run\n前置条件，需要一个已经启动的android模拟器或者连接到电脑的android设备","slug":"flutter/01-environment","published":1,"updated":"2020-12-28T00:55:28.065Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6uw0014d8v887r4f1j4","content":"<p>Flutter-01 环境搭建</p>\n<a id=\"more\"></a>\n\n<p>文档地址 <a href=\"https://developer.android.google.cn/studio/intro\">https://developer.android.google.cn/studio/intro</a></p>\n<h1 id=\"Window10环境搭建Flutter开发环境\"><a href=\"#Window10环境搭建Flutter开发环境\" class=\"headerlink\" title=\"Window10环境搭建Flutter开发环境\"></a>Window10环境搭建Flutter开发环境</h1><h2 id=\"前置条件\"><a href=\"#前置条件\" class=\"headerlink\" title=\"前置条件\"></a>前置条件</h2><ul>\n<li>磁盘空间足够</li>\n<li>git 2.x</li>\n</ul>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"Android-Studio-建议3-0及以上\"><a href=\"#Android-Studio-建议3-0及以上\" class=\"headerlink\" title=\"Android Studio(建议3.0及以上)\"></a>Android Studio(建议3.0及以上)</h3><ol>\n<li>下载</li>\n</ol>\n<ul>\n<li><a href=\"https://developer.android.google.com/studio(%E9%9C%80%E8%A6%81%E7%BF%BB%E5%A2%99)\">https://developer.android.google.com/studio(需要翻墙)</a></li>\n<li><a href=\"https://developer.android.google.cn/studio\">https://developer.android.google.cn/studio</a><br>如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk</li>\n</ul>\n<ol start=\"2\">\n<li>为Android Studio安装Flutter和Dart插件<br>File-&gt;Settings-&gt;Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio<br>如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190909203319.png\" alt=\"20190909203319.png\"></li>\n</ol>\n<h3 id=\"Flutter-SDK\"><a href=\"#Flutter-SDK\" class=\"headerlink\" title=\"Flutter SDK\"></a>Flutter SDK</h3><ol>\n<li><p>配置flutter临时镜像(非必须)</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">// 增加如下变量到用户环境变量中\nPUB_HOSTED_URL<span class=\"token operator\">=</span>https://pub.flutter-io.cn  \nFLUTTER_STORAGE_BASE_URL<span class=\"token operator\">=</span>https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址</code></pre>\n</li>\n<li><p>下载并安装</p>\n</li>\n</ol>\n<ul>\n<li>通过 git 克隆flutter项目代码到本地，比如我的是D:\\Program Files\\Flutter<br>不建议放到高级目录，比如C:\\Program Files</li>\n<li>然后在Flutter安装目录的flutter文件下找到flutter_console.bat 双击运行  </li>\n</ul>\n<h3 id=\"设置环境变量\"><a href=\"#设置环境变量\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h3><ol>\n<li>系统环境PATH添加 D:\\Program Files\\Flutter\\bin</li>\n<li>Android环境变量配置</li>\n</ol>\n<ul>\n<li>添加系统环境变量<pre class=\" language-bash\"><code class=\"language-bash\">// 键和值，其中目录为Android SDK的目录，可以通过android studio菜单File-<span class=\"token operator\">></span>Settings 然后搜索SDK 可查看SDK的安装目录\nANDROID_HOME:C:\\Users\\xiexingen\\AppData\\Local\\Android\\Sdk</code></pre>\n</li>\n<li>在系统环境变量中的Path中添加%ANDROID_HOME%\\emulator</li>\n<li>在系统环境变量中的Path中添加%ANDROID_HOME%\\platform-tools</li>\n<li>在系统环境变量中的Path中添加%ANDROID_HOME%\\tools</li>\n</ul>\n<blockquote>\n<p>配置完成后，需要重启电脑</p>\n</blockquote>\n<h3 id=\"在Android模拟器上运行Flutter\"><a href=\"#在Android模拟器上运行Flutter\" class=\"headerlink\" title=\"在Android模拟器上运行Flutter\"></a>在Android模拟器上运行Flutter</h3><ul>\n<li>机器上需要启用VM acceleration</li>\n<li>启动android studio 菜单 Tools-&gt;AVD Manager 并选择 <code>Create Virtual Device</code></li>\n<li>选择一个设备 然后点 Next</li>\n<li>为要模拟的Android版本选择一个或多个系统镜像，然后选择Next(建议使用x86)</li>\n<li>在Emulated Performance下，选择 Hardware-GLES 2.0 以启用硬件加速</li>\n<li>验证AVD配置是否正确，然后选Finish,更多问题可以参考文档</li>\n<li>在Android Virtual Device Manager中，点击工具栏的 <code>Run</code>,启动模拟器并显示所选择的操作系统版本或设备的启动画面</li>\n<li>通过 <code>flutter run</code> 命令行运行启动项目</li>\n</ul>\n<h2 id=\"如何在Android真机运行\"><a href=\"#如何在Android真机运行\" class=\"headerlink\" title=\"如何在Android真机运行\"></a>如何在Android真机运行</h2><p>要准备在Android设备上运行并测试Flutter，需要安装Android4.1 (API level 16)或者更高低版本</p>\n<ul>\n<li>在设备上启用 <code>开发人员选项</code>和<code>USB调试</code>，可自行google</li>\n<li>使用USB将手机插入电脑，如果有授权提示则点同意</li>\n<li>在终端中，运行 <code>flutter devices</code>命令以验证Flutter是否识别你连接的Android设备</li>\n<li>通过 <code>flutter run</code> 启动项目</li>\n</ul>\n<hr>\n<h1 id=\"Mac-环境搭建Flutter开发环境\"><a href=\"#Mac-环境搭建Flutter开发环境\" class=\"headerlink\" title=\"Mac 环境搭建Flutter开发环境\"></a>Mac 环境搭建Flutter开发环境</h1><blockquote>\n<p>由于没有mac电脑，所以特地在VM下安装了一个mac系统</p>\n</blockquote>\n<h2 id=\"前置条件-1\"><a href=\"#前置条件-1\" class=\"headerlink\" title=\"前置条件\"></a>前置条件</h2><ul>\n<li>磁盘空间足够</li>\n<li>安装了命令行工具: bash、curl、git 2.x、mkdir、rm、unzip、which</li>\n<li>由于国内访问Flutter可能受限，Flutter官方为中国地区待见了临时镜像，可添加如下环境变量到用户的环境变量中<pre class=\" language-bash\"><code class=\"language-bash\">// Macintosh HD-<span class=\"token operator\">></span>Users-<span class=\"token operator\">></span>用户名-<span class=\"token operator\">></span>.bash_profile\n<span class=\"token function\">export</span> PUB_HOSTED_URL<span class=\"token operator\">=</span>https://pub.flutter-io.cn\n<span class=\"token function\">export</span> FLUTTER_STORAGE_BASE_URL<span class=\"token operator\">=</span>https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址</code></pre>\n</li>\n</ul>\n<h2 id=\"安装-1\"><a href=\"#安装-1\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"Flutter-SDK-1\"><a href=\"#Flutter-SDK-1\" class=\"headerlink\" title=\"Flutter SDK\"></a>Flutter SDK</h3><ol start=\"2\">\n<li>下载并安装</li>\n</ol>\n<ul>\n<li>下载stable版本的sdk，然后解压到~/flutter</li>\n</ul>\n<ol start=\"3\">\n<li><p>添加flutter路径到path中</p>\n<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token function\">cd</span> ~\nvim .bash_profile\n// 然后添加下面行,<span class=\"token punctuation\">;</span>wq 保存，然后重启bash\n<span class=\"token function\">export</span> PATH<span class=\"token operator\">=</span>/Users/xiexingen/flutter/bin:<span class=\"token variable\">$PATH</span></code></pre>\n</li>\n<li><p>运行flutter doctor来检查flutter<br>会有很多xx 比如xcode，android相关的工具</p>\n</li>\n</ol>\n<h3 id=\"Android-Studio-建议3-0及以上-1\"><a href=\"#Android-Studio-建议3-0及以上-1\" class=\"headerlink\" title=\"Android Studio(建议3.0及以上)\"></a>Android Studio(建议3.0及以上)</h3><ol>\n<li>下载</li>\n</ol>\n<ul>\n<li><a href=\"https://developer.android.google.com/studio(%E9%9C%80%E8%A6%81%E7%BF%BB%E5%A2%99)\">https://developer.android.google.com/studio(需要翻墙)</a></li>\n<li><a href=\"https://developer.android.google.cn/studio\">https://developer.android.google.cn/studio</a><br>如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk</li>\n</ul>\n<ol start=\"2\">\n<li>为Android Studio安装Flutter和Dart插件<br>File-&gt;Settings-&gt;Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio<br>如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190909203319.png\" alt=\"20190909203319.png\"></li>\n</ol>\n<h3 id=\"设置环境变量-1\"><a href=\"#设置环境变量-1\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h3><ul>\n<li>添加系统环境变量<pre class=\" language-bash\"><code class=\"language-bash\">// 电脑/Users/用户名/.bash_profile\n<span class=\"token comment\" spellcheck=\"true\"># Android 环境变量 xiexingen为我的用户名</span>\n<span class=\"token function\">export</span> ANDROID_HOME<span class=\"token operator\">=</span>/Users/xiexingen/Library/Android/sdk\n<span class=\"token comment\" spellcheck=\"true\"># Android 模拟器路径</span>\n<span class=\"token function\">export</span> PATH<span class=\"token operator\">=</span>$<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;PATH&amp;#125;:$&amp;#123;ANDROID_HOME&amp;#125;/emulator</span>\n<span class=\"token comment\" spellcheck=\"true\"># Android tools 路径</span>\n<span class=\"token function\">export</span> PATH<span class=\"token operator\">=</span>$<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;PATH&amp;#125;:$&amp;#123;ANDROID_HOME&amp;#125;/tools</span>\n<span class=\"token comment\" spellcheck=\"true\"># Android 平台工具路径</span>\n<span class=\"token function\">export</span> PATH<span class=\"token operator\">=</span>$<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;PATH&amp;#125;:$&amp;#123;ANDROID_HOME&amp;#125;/platform-tools</span>\n<span class=\"token comment\" spellcheck=\"true\"># Android NDK路径</span>\nANDROID_NDK_HOME<span class=\"token operator\">=</span>/Users/xiexingen/Library/Android/ndk/android-ndk-r10e\n<span class=\"token comment\" spellcheck=\"true\"># Flutter镜像</span>\n<span class=\"token function\">export</span> PUB_HOSTED_URL<span class=\"token operator\">=</span>https://pub.flutter-io.cn\n<span class=\"token function\">export</span> FLUTTER_STORAGE_BASE_URL<span class=\"token operator\">=</span>https://storage.flutter-io.cn\n<span class=\"token comment\" spellcheck=\"true\"># Flutter 环境变量</span>\n<span class=\"token function\">export</span> PATH<span class=\"token operator\">=</span>/Users/xiexingen/flutter/bin:<span class=\"token variable\">$PATH</span></code></pre>\n</li>\n</ul>\n<blockquote>\n<p>配置完成后，需要重启电脑</p>\n</blockquote>\n<h3 id=\"安装Xcode\"><a href=\"#安装Xcode\" class=\"headerlink\" title=\"安装Xcode\"></a>安装Xcode</h3><ol>\n<li>通过苹果应用商店安装</li>\n<li>配置Xcode命令行工具以使用最新安装的Xcode版本<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> xcode-select --switch /Applications/Xcode.app/Contents/Developer</code></pre>\n</li>\n</ol>\n<h3 id=\"设置IOS模拟器\"><a href=\"#设置IOS模拟器\" class=\"headerlink\" title=\"设置IOS模拟器\"></a>设置IOS模拟器</h3><ol>\n<li>在终端输入如下命令行打开一个ios模拟器<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token function\">open</span> -a Simulator</code></pre>\n</li>\n<li>通过模拟器菜单的 <em>硬件-&gt;设备</em>,确保是64位的iphone5s或更新的模拟器</li>\n</ol>\n<h3 id=\"如何将Flutter安装到IOS真机上\"><a href=\"#如何将Flutter安装到IOS真机上\" class=\"headerlink\" title=\"如何将Flutter安装到IOS真机上\"></a>如何将Flutter安装到IOS真机上</h3><p>要通过<em>flutter run</em> 将Flutter应用安装到ios整机设备，需要一些额外的工具和一个Apple账号，还需要在Xcode中进行设置：</p>\n<blockquote>\n<p>当然，用XCode来讲Flutter运行在真机上更简单，只需要点 <em>run</em>按钮即可，可以根据需要进行两种不同的运行方式；  </p>\n</blockquote>\n<ol>\n<li><p>安装 <a href=\"https://brew.sh/\">Homebrew</a></p>\n</li>\n<li><p>确保homebrew最新</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">brew update</code></pre>\n</li>\n<li><p>打开终端并运行如下命令来安装用于将Flutter应用安装到IOS设备的工具</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> --HEAD usbmuxd\nbrew <span class=\"token function\">link</span> usbmuxd\nbrew <span class=\"token function\">install</span> --HEAd libimobiledevice\nbrew <span class=\"token function\">install</span> ideviceinstaller ios-deploy cocoapods\npod setup</code></pre>\n<p>如果这些命令中的任何一个失败并出现错误，可运行<em>brew doctor</em>并按照说明来解决问题</p>\n</li>\n<li><p>遵循Xcode前面流程来配置项目</p>\n</li>\n</ol>\n<ul>\n<li>在你Flutter项目目录中通过<em>open ios/Runner.xcworkspace</em>打开默认的Xcode workspace</li>\n<li>在Xcode中，选择导航面板左侧中的Runner项目</li>\n<li>在Runner target设置页面中，确保在 常规&gt;前面&gt;团队 下选择了您的开发团队。当你选择一个团队时，Xcode会创建并下载开发证书，向您的设备注册您的账户，并创建和下载配置文件(如果需要)<ul>\n<li>要开始您的第一个IOS开发项目，您可能需要使用您的APP ID登录Xcode</li>\n<li>任何App Id都支持开发和测试，但是如想法不到App Store则需要支付99到的开发者账号</li>\n</ul>\n</li>\n<li>当你第一次attach真机设备进行ios开发时，需要同时信任你的Mac和该设备上的开发证书。首次将IOS设备连接到Mac时，请在对话中选择 <em>信任</em>,然后，转到IOS设备上的设置应用程序，选择 常规&gt;设备管理 并信任您的证书<ul>\n<li>如果Xcode中的自动签名失败，请验证项目的 General&gt;Identity&gt;Bundle Identifier值是否唯一.</li>\n</ul>\n</li>\n</ul>\n<ol start=\"5\">\n<li>通过flutter run 运行启动项目<pre class=\" language-bash\"><code class=\"language-bash\">flutter run</code></pre>\n</li>\n</ol>\n<h1 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h1><h2 id=\"验证\"><a href=\"#验证\" class=\"headerlink\" title=\"验证\"></a>验证</h2><ul>\n<li>运行 adb // 检测android相关</li>\n<li>运行flutter doctor  // 检测flutter相关<blockquote>\n<p>第一次运行flutter命令(如 flutter doctor)，它会下载自己的依赖项目并自动编译，并缓存</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"FAQ\"><a href=\"#FAQ\" class=\"headerlink\" title=\"FAQ\"></a>FAQ</h2><h3 id=\"无法启动模拟器\"><a href=\"#无法启动模拟器\" class=\"headerlink\" title=\"无法启动模拟器\"></a>无法启动模拟器</h3><blockquote>\n<p>emulator: ERROR:x86 emulation currently requires hardware acceleration! Please ensure Windows Hypervisor Platform (WHPX) is properly installed and usable. CPU acceleration status: HAXM is not installed on this machine<br>解决方案:选择 Tools-&gt; SDK Manager -&gt; SDK Tools,安装 HAXM 即可<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190909204602.png\" alt=\"20190909204602.png\"></p>\n</blockquote>\n<h3 id=\"创建flutter项目\"><a href=\"#创建flutter项目\" class=\"headerlink\" title=\"创建flutter项目\"></a>创建flutter项目</h3><ol>\n<li><p>通过android studio创建<br>File-&gt;Create-&gt;New Flutter Project</p>\n</li>\n<li><p>通过命令行<br>flutter create my_first_app</p>\n</li>\n</ol>\n<h3 id=\"运行flutter项目\"><a href=\"#运行flutter项目\" class=\"headerlink\" title=\"运行flutter项目\"></a>运行flutter项目</h3><ol>\n<li><p>通过android studio 启动按钮</p>\n</li>\n<li><p>命令行运行android模拟器</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">// hw1 表示模拟器的名称\nemulator -avd hw1</code></pre>\n</li>\n<li><p>命令行 flutter run<br>前置条件，需要一个已经启动的android模拟器或者连接到电脑的android设备</p>\n</li>\n</ol>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Flutter-01 环境搭建</p>","more":"<p>文档地址 <a href=\"https://developer.android.google.cn/studio/intro\">https://developer.android.google.cn/studio/intro</a></p>\n<h1 id=\"Window10环境搭建Flutter开发环境\"><a href=\"#Window10环境搭建Flutter开发环境\" class=\"headerlink\" title=\"Window10环境搭建Flutter开发环境\"></a>Window10环境搭建Flutter开发环境</h1><h2 id=\"前置条件\"><a href=\"#前置条件\" class=\"headerlink\" title=\"前置条件\"></a>前置条件</h2><ul>\n<li>磁盘空间足够</li>\n<li>git 2.x</li>\n</ul>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"Android-Studio-建议3-0及以上\"><a href=\"#Android-Studio-建议3-0及以上\" class=\"headerlink\" title=\"Android Studio(建议3.0及以上)\"></a>Android Studio(建议3.0及以上)</h3><ol>\n<li>下载</li>\n</ol>\n<ul>\n<li><a href=\"https://developer.android.google.com/studio(%E9%9C%80%E8%A6%81%E7%BF%BB%E5%A2%99)\">https://developer.android.google.com/studio(需要翻墙)</a></li>\n<li><a href=\"https://developer.android.google.cn/studio\">https://developer.android.google.cn/studio</a><br>如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk</li>\n</ul>\n<ol start=\"2\">\n<li>为Android Studio安装Flutter和Dart插件<br>File-&gt;Settings-&gt;Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio<br>如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190909203319.png\" alt=\"20190909203319.png\"></li>\n</ol>\n<h3 id=\"Flutter-SDK\"><a href=\"#Flutter-SDK\" class=\"headerlink\" title=\"Flutter SDK\"></a>Flutter SDK</h3><ol>\n<li><p>配置flutter临时镜像(非必须)</p>\n<pre><code class=\"bash\">// 增加如下变量到用户环境变量中\nPUB_HOSTED_URL=https://pub.flutter-io.cn  \nFLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址</code></pre>\n</li>\n<li><p>下载并安装</p>\n</li>\n</ol>\n<ul>\n<li>通过 git 克隆flutter项目代码到本地，比如我的是D:\\Program Files\\Flutter<br>不建议放到高级目录，比如C:\\Program Files</li>\n<li>然后在Flutter安装目录的flutter文件下找到flutter_console.bat 双击运行  </li>\n</ul>\n<h3 id=\"设置环境变量\"><a href=\"#设置环境变量\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h3><ol>\n<li>系统环境PATH添加 D:\\Program Files\\Flutter\\bin</li>\n<li>Android环境变量配置</li>\n</ol>\n<ul>\n<li>添加系统环境变量<pre><code class=\"bash\">// 键和值，其中目录为Android SDK的目录，可以通过android studio菜单File-&gt;Settings 然后搜索SDK 可查看SDK的安装目录\nANDROID_HOME:C:\\Users\\xiexingen\\AppData\\Local\\Android\\Sdk</code></pre>\n</li>\n<li>在系统环境变量中的Path中添加%ANDROID_HOME%\\emulator</li>\n<li>在系统环境变量中的Path中添加%ANDROID_HOME%\\platform-tools</li>\n<li>在系统环境变量中的Path中添加%ANDROID_HOME%\\tools</li>\n</ul>\n<blockquote>\n<p>配置完成后，需要重启电脑</p>\n</blockquote>\n<h3 id=\"在Android模拟器上运行Flutter\"><a href=\"#在Android模拟器上运行Flutter\" class=\"headerlink\" title=\"在Android模拟器上运行Flutter\"></a>在Android模拟器上运行Flutter</h3><ul>\n<li>机器上需要启用VM acceleration</li>\n<li>启动android studio 菜单 Tools-&gt;AVD Manager 并选择 <code>Create Virtual Device</code></li>\n<li>选择一个设备 然后点 Next</li>\n<li>为要模拟的Android版本选择一个或多个系统镜像，然后选择Next(建议使用x86)</li>\n<li>在Emulated Performance下，选择 Hardware-GLES 2.0 以启用硬件加速</li>\n<li>验证AVD配置是否正确，然后选Finish,更多问题可以参考文档</li>\n<li>在Android Virtual Device Manager中，点击工具栏的 <code>Run</code>,启动模拟器并显示所选择的操作系统版本或设备的启动画面</li>\n<li>通过 <code>flutter run</code> 命令行运行启动项目</li>\n</ul>\n<h2 id=\"如何在Android真机运行\"><a href=\"#如何在Android真机运行\" class=\"headerlink\" title=\"如何在Android真机运行\"></a>如何在Android真机运行</h2><p>要准备在Android设备上运行并测试Flutter，需要安装Android4.1 (API level 16)或者更高低版本</p>\n<ul>\n<li>在设备上启用 <code>开发人员选项</code>和<code>USB调试</code>，可自行google</li>\n<li>使用USB将手机插入电脑，如果有授权提示则点同意</li>\n<li>在终端中，运行 <code>flutter devices</code>命令以验证Flutter是否识别你连接的Android设备</li>\n<li>通过 <code>flutter run</code> 启动项目</li>\n</ul>\n<hr>\n<h1 id=\"Mac-环境搭建Flutter开发环境\"><a href=\"#Mac-环境搭建Flutter开发环境\" class=\"headerlink\" title=\"Mac 环境搭建Flutter开发环境\"></a>Mac 环境搭建Flutter开发环境</h1><blockquote>\n<p>由于没有mac电脑，所以特地在VM下安装了一个mac系统</p>\n</blockquote>\n<h2 id=\"前置条件-1\"><a href=\"#前置条件-1\" class=\"headerlink\" title=\"前置条件\"></a>前置条件</h2><ul>\n<li>磁盘空间足够</li>\n<li>安装了命令行工具: bash、curl、git 2.x、mkdir、rm、unzip、which</li>\n<li>由于国内访问Flutter可能受限，Flutter官方为中国地区待见了临时镜像，可添加如下环境变量到用户的环境变量中<pre><code class=\"bash\">// Macintosh HD-&gt;Users-&gt;用户名-&gt;.bash_profile\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n// 注:这些镜像为临时镜像，并不保证一直可用，可以从https://flutter.dev/community/china 查看最新的网址</code></pre>\n</li>\n</ul>\n<h2 id=\"安装-1\"><a href=\"#安装-1\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"Flutter-SDK-1\"><a href=\"#Flutter-SDK-1\" class=\"headerlink\" title=\"Flutter SDK\"></a>Flutter SDK</h3><ol start=\"2\">\n<li>下载并安装</li>\n</ol>\n<ul>\n<li>下载stable版本的sdk，然后解压到~/flutter</li>\n</ul>\n<ol start=\"3\">\n<li><p>添加flutter路径到path中</p>\n<pre><code class=\"bash\">cd ~\nvim .bash_profile\n// 然后添加下面行,;wq 保存，然后重启bash\nexport PATH=/Users/xiexingen/flutter/bin:$PATH</code></pre>\n</li>\n<li><p>运行flutter doctor来检查flutter<br>会有很多xx 比如xcode，android相关的工具</p>\n</li>\n</ol>\n<h3 id=\"Android-Studio-建议3-0及以上-1\"><a href=\"#Android-Studio-建议3-0及以上-1\" class=\"headerlink\" title=\"Android Studio(建议3.0及以上)\"></a>Android Studio(建议3.0及以上)</h3><ol>\n<li>下载</li>\n</ol>\n<ul>\n<li><a href=\"https://developer.android.google.com/studio(%E9%9C%80%E8%A6%81%E7%BF%BB%E5%A2%99)\">https://developer.android.google.com/studio(需要翻墙)</a></li>\n<li><a href=\"https://developer.android.google.cn/studio\">https://developer.android.google.cn/studio</a><br>如果过程提示是否安装一些东西，点同意即可,会自动安装java jdk</li>\n</ul>\n<ol start=\"2\">\n<li>为Android Studio安装Flutter和Dart插件<br>File-&gt;Settings-&gt;Plugins 然后搜索Flutter点击安装，这个时候会提示安装Dart插件，点安装 然后重启Android Studio<br>如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190909203319.png\" alt=\"20190909203319.png\"></li>\n</ol>\n<h3 id=\"设置环境变量-1\"><a href=\"#设置环境变量-1\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h3><ul>\n<li>添加系统环境变量<pre><code class=\"bash\">// 电脑/Users/用户名/.bash_profile\n# Android 环境变量 xiexingen为我的用户名\nexport ANDROID_HOME=/Users/xiexingen/Library/Android/sdk\n# Android 模拟器路径\nexport PATH=$&#123;PATH&#125;:$&#123;ANDROID_HOME&#125;/emulator\n# Android tools 路径\nexport PATH=$&#123;PATH&#125;:$&#123;ANDROID_HOME&#125;/tools\n# Android 平台工具路径\nexport PATH=$&#123;PATH&#125;:$&#123;ANDROID_HOME&#125;/platform-tools\n# Android NDK路径\nANDROID_NDK_HOME=/Users/xiexingen/Library/Android/ndk/android-ndk-r10e\n# Flutter镜像\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\n# Flutter 环境变量\nexport PATH=/Users/xiexingen/flutter/bin:$PATH</code></pre>\n</li>\n</ul>\n<blockquote>\n<p>配置完成后，需要重启电脑</p>\n</blockquote>\n<h3 id=\"安装Xcode\"><a href=\"#安装Xcode\" class=\"headerlink\" title=\"安装Xcode\"></a>安装Xcode</h3><ol>\n<li>通过苹果应用商店安装</li>\n<li>配置Xcode命令行工具以使用最新安装的Xcode版本<pre><code class=\"bash\">sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer</code></pre>\n</li>\n</ol>\n<h3 id=\"设置IOS模拟器\"><a href=\"#设置IOS模拟器\" class=\"headerlink\" title=\"设置IOS模拟器\"></a>设置IOS模拟器</h3><ol>\n<li>在终端输入如下命令行打开一个ios模拟器<pre><code class=\"bash\">open -a Simulator</code></pre>\n</li>\n<li>通过模拟器菜单的 <em>硬件-&gt;设备</em>,确保是64位的iphone5s或更新的模拟器</li>\n</ol>\n<h3 id=\"如何将Flutter安装到IOS真机上\"><a href=\"#如何将Flutter安装到IOS真机上\" class=\"headerlink\" title=\"如何将Flutter安装到IOS真机上\"></a>如何将Flutter安装到IOS真机上</h3><p>要通过<em>flutter run</em> 将Flutter应用安装到ios整机设备，需要一些额外的工具和一个Apple账号，还需要在Xcode中进行设置：</p>\n<blockquote>\n<p>当然，用XCode来讲Flutter运行在真机上更简单，只需要点 <em>run</em>按钮即可，可以根据需要进行两种不同的运行方式；  </p>\n</blockquote>\n<ol>\n<li><p>安装 <a href=\"https://brew.sh/\">Homebrew</a></p>\n</li>\n<li><p>确保homebrew最新</p>\n<pre><code class=\"bash\">brew update</code></pre>\n</li>\n<li><p>打开终端并运行如下命令来安装用于将Flutter应用安装到IOS设备的工具</p>\n<pre><code class=\"bash\">brew install --HEAD usbmuxd\nbrew link usbmuxd\nbrew install --HEAd libimobiledevice\nbrew install ideviceinstaller ios-deploy cocoapods\npod setup</code></pre>\n<p>如果这些命令中的任何一个失败并出现错误，可运行<em>brew doctor</em>并按照说明来解决问题</p>\n</li>\n<li><p>遵循Xcode前面流程来配置项目</p>\n</li>\n</ol>\n<ul>\n<li>在你Flutter项目目录中通过<em>open ios/Runner.xcworkspace</em>打开默认的Xcode workspace</li>\n<li>在Xcode中，选择导航面板左侧中的Runner项目</li>\n<li>在Runner target设置页面中，确保在 常规&gt;前面&gt;团队 下选择了您的开发团队。当你选择一个团队时，Xcode会创建并下载开发证书，向您的设备注册您的账户，并创建和下载配置文件(如果需要)<ul>\n<li>要开始您的第一个IOS开发项目，您可能需要使用您的APP ID登录Xcode</li>\n<li>任何App Id都支持开发和测试，但是如想法不到App Store则需要支付99到的开发者账号</li>\n</ul>\n</li>\n<li>当你第一次attach真机设备进行ios开发时，需要同时信任你的Mac和该设备上的开发证书。首次将IOS设备连接到Mac时，请在对话中选择 <em>信任</em>,然后，转到IOS设备上的设置应用程序，选择 常规&gt;设备管理 并信任您的证书<ul>\n<li>如果Xcode中的自动签名失败，请验证项目的 General&gt;Identity&gt;Bundle Identifier值是否唯一.</li>\n</ul>\n</li>\n</ul>\n<ol start=\"5\">\n<li>通过flutter run 运行启动项目<pre><code class=\"bash\">flutter run</code></pre>\n</li>\n</ol>\n<h1 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h1><h2 id=\"验证\"><a href=\"#验证\" class=\"headerlink\" title=\"验证\"></a>验证</h2><ul>\n<li>运行 adb // 检测android相关</li>\n<li>运行flutter doctor  // 检测flutter相关<blockquote>\n<p>第一次运行flutter命令(如 flutter doctor)，它会下载自己的依赖项目并自动编译，并缓存</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"FAQ\"><a href=\"#FAQ\" class=\"headerlink\" title=\"FAQ\"></a>FAQ</h2><h3 id=\"无法启动模拟器\"><a href=\"#无法启动模拟器\" class=\"headerlink\" title=\"无法启动模拟器\"></a>无法启动模拟器</h3><blockquote>\n<p>emulator: ERROR:x86 emulation currently requires hardware acceleration! Please ensure Windows Hypervisor Platform (WHPX) is properly installed and usable. CPU acceleration status: HAXM is not installed on this machine<br>解决方案:选择 Tools-&gt; SDK Manager -&gt; SDK Tools,安装 HAXM 即可<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190909204602.png\" alt=\"20190909204602.png\"></p>\n</blockquote>\n<h3 id=\"创建flutter项目\"><a href=\"#创建flutter项目\" class=\"headerlink\" title=\"创建flutter项目\"></a>创建flutter项目</h3><ol>\n<li><p>通过android studio创建<br>File-&gt;Create-&gt;New Flutter Project</p>\n</li>\n<li><p>通过命令行<br>flutter create my_first_app</p>\n</li>\n</ol>\n<h3 id=\"运行flutter项目\"><a href=\"#运行flutter项目\" class=\"headerlink\" title=\"运行flutter项目\"></a>运行flutter项目</h3><ol>\n<li><p>通过android studio 启动按钮</p>\n</li>\n<li><p>命令行运行android模拟器</p>\n<pre><code class=\"bash\">// hw1 表示模拟器的名称\nemulator -avd hw1</code></pre>\n</li>\n<li><p>命令行 flutter run<br>前置条件，需要一个已经启动的android模拟器或者连接到电脑的android设备</p>\n</li>\n</ol>"},{"title":"Nginx开篇","abbrlink":14221,"date":"2019-11-30T01:10:10.000Z","_content":"\nDocker基础开篇\n<!-- more -->\n\n## centos 7安装nginx\n- 更新yum\n``` bash\nyum -y update  \n```\n\n- 通过yum安装\n``` bash\nyum install epel-release\nyum install nginx \n```\n- 配置nginx自动启动\n``` bash\nsystemctl start nginx\nsystemctl enable nginx\nsystemctl status nginx\n```\n\n- 配置防火墙\n``` bash\nfirewall-cmd --zone=public --permanent --add-service=http\nfirewall-cmd --zone=public --permanent --add-service=https\nfirewall-cmd --reload\n``` bash\n\n## nginx 配置文件\n- worker_processer\n配置支持的并发数量\n\n- events\n``` bash\n配置网络连接数量\nevents:{\n    worker_connections:1024 \n}\n```\n\n- http\n\n\n## 反向代理\n``` bash\n# 基础案例\nserver {\n    listen 80;\n    server_name test.xxgtalk.cn;\n\n    # listen [::]:80 ipv6only=on;\n    # root /var/www/mywebsite2;\n    # index index.html index.htm;\n\n    location / {\n        proxy_pass http://localhost:9001;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n    # error_page 404 /404.html;\n    # error_page 500 502 503 504 /50x.html;\n    # location = /50x.html {\n    #     root /var/www/mywebsite1;\n    # }\n} \n\n```\n\n## 负载均衡\n``` bash\n# 负载均衡案例\nupstream myserver {\n server 192.168.20.23:8080;\n server 192.168.20.23:8081;\n}\nserver {\n    listen 80;\n    server_name test.xxgtalk.cn;\n\n    # listen [::]:80 ipv6only=on;\n    # root /var/www/mywebsite2;\n    # index index.html index.htm;\n\n    location / {\n        proxy_pass http://myserver;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n    # error_page 404 /404.html;\n    # error_page 500 502 503 504 /50x.html;\n    # location = /50x.html {\n    #     root /var/www/mywebsite1;\n    # }\n} \n```\n\n## 动静分离(跟基础类似)\n\n## 高可用\n![20191130225646.png](http://qiniu.xxgtalk.cn/blog/images/20191130225646.png)\n1. 需要在轮胎服务器安装nginx\n2. 需要再两台服务器上安装keepalived\n``` bash\nyum install keepalived -y\n\n## 修改每台机器上的keepalived配置文件\n\n## 检测是否安装成功\nrpm -q -q keepalived\n## 目录位置\n/etc/keepalived\n```\n","source":"_posts/nginx/01-introduct.md","raw":"---\ntitle: Nginx开篇\ncategories:\n  - Nginx\ntags:\n  - Nginx\nabbrlink: 14221\ndate: 2019-11-30 09:10:10\n---\n\nDocker基础开篇\n<!-- more -->\n\n## centos 7安装nginx\n- 更新yum\n``` bash\nyum -y update  \n```\n\n- 通过yum安装\n``` bash\nyum install epel-release\nyum install nginx \n```\n- 配置nginx自动启动\n``` bash\nsystemctl start nginx\nsystemctl enable nginx\nsystemctl status nginx\n```\n\n- 配置防火墙\n``` bash\nfirewall-cmd --zone=public --permanent --add-service=http\nfirewall-cmd --zone=public --permanent --add-service=https\nfirewall-cmd --reload\n``` bash\n\n## nginx 配置文件\n- worker_processer\n配置支持的并发数量\n\n- events\n``` bash\n配置网络连接数量\nevents:{\n    worker_connections:1024 \n}\n```\n\n- http\n\n\n## 反向代理\n``` bash\n# 基础案例\nserver {\n    listen 80;\n    server_name test.xxgtalk.cn;\n\n    # listen [::]:80 ipv6only=on;\n    # root /var/www/mywebsite2;\n    # index index.html index.htm;\n\n    location / {\n        proxy_pass http://localhost:9001;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n    # error_page 404 /404.html;\n    # error_page 500 502 503 504 /50x.html;\n    # location = /50x.html {\n    #     root /var/www/mywebsite1;\n    # }\n} \n\n```\n\n## 负载均衡\n``` bash\n# 负载均衡案例\nupstream myserver {\n server 192.168.20.23:8080;\n server 192.168.20.23:8081;\n}\nserver {\n    listen 80;\n    server_name test.xxgtalk.cn;\n\n    # listen [::]:80 ipv6only=on;\n    # root /var/www/mywebsite2;\n    # index index.html index.htm;\n\n    location / {\n        proxy_pass http://myserver;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n    # error_page 404 /404.html;\n    # error_page 500 502 503 504 /50x.html;\n    # location = /50x.html {\n    #     root /var/www/mywebsite1;\n    # }\n} \n```\n\n## 动静分离(跟基础类似)\n\n## 高可用\n![20191130225646.png](http://qiniu.xxgtalk.cn/blog/images/20191130225646.png)\n1. 需要在轮胎服务器安装nginx\n2. 需要再两台服务器上安装keepalived\n``` bash\nyum install keepalived -y\n\n## 修改每台机器上的keepalived配置文件\n\n## 检测是否安装成功\nrpm -q -q keepalived\n## 目录位置\n/etc/keepalived\n```\n","slug":"nginx/01-introduct","published":1,"updated":"2020-12-28T00:55:28.070Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6ux0017d8v80b5a7tta","content":"<p>Docker基础开篇</p>\n<a id=\"more\"></a>\n\n<h2 id=\"centos-7安装nginx\"><a href=\"#centos-7安装nginx\" class=\"headerlink\" title=\"centos 7安装nginx\"></a>centos 7安装nginx</h2><ul>\n<li><p>更新yum</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">yum -y update  </code></pre>\n</li>\n<li><p>通过yum安装</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> epel-release\nyum <span class=\"token function\">install</span> nginx </code></pre>\n</li>\n<li><p>配置nginx自动启动</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">systemctl start nginx\nsystemctl <span class=\"token function\">enable</span> nginx\nsystemctl status nginx</code></pre>\n</li>\n<li><p>配置防火墙</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">firewall-cmd --zone<span class=\"token operator\">=</span>public --permanent --add-service<span class=\"token operator\">=</span>http\nfirewall-cmd --zone<span class=\"token operator\">=</span>public --permanent --add-service<span class=\"token operator\">=</span>https\nfirewall-cmd --reload\n``` <span class=\"token function\">bash</span>\n</code></pre>\n</li>\n</ul>\n<h2 id=\"nginx-配置文件\"><a href=\"#nginx-配置文件\" class=\"headerlink\" title=\"nginx 配置文件\"></a>nginx 配置文件</h2><ul>\n<li><p>worker_processer<br>配置支持的并发数量</p>\n</li>\n<li><p>events</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">配置网络连接数量\nevents:<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;</span>\n  worker_connections:1024 \n<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#125;</span></code></pre>\n</li>\n<li><p>http</p>\n</li>\n</ul>\n<h2 id=\"反向代理\"><a href=\"#反向代理\" class=\"headerlink\" title=\"反向代理\"></a>反向代理</h2><pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token comment\" spellcheck=\"true\"># 基础案例</span>\nserver <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;</span>\n    listen 80<span class=\"token punctuation\">;</span>\n    server_name test.xxgtalk.cn<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\" spellcheck=\"true\"># listen [::]:80 ipv6only=on;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># root /var/www/mywebsite2;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># index index.html index.htm;</span>\n\n    location / <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;</span>\n        proxy_pass http://localhost:9001<span class=\"token punctuation\">;</span>\n        proxy_http_version 1.1<span class=\"token punctuation\">;</span>\n        proxy_set_header Upgrade <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n        proxy_set_header Connection <span class=\"token string\">'upgrade'</span><span class=\"token punctuation\">;</span>\n        proxy_set_header Host <span class=\"token variable\">$host</span><span class=\"token punctuation\">;</span>\n        proxy_cache_bypass <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#125;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># error_page 404 /404.html;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># error_page 500 502 503 504 /50x.html;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># location = /50x.html &amp;#123;</span>\n    <span class=\"token comment\" spellcheck=\"true\">#     root /var/www/mywebsite1;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># &amp;#125;</span>\n<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#125; </span>\n</code></pre>\n<h2 id=\"负载均衡\"><a href=\"#负载均衡\" class=\"headerlink\" title=\"负载均衡\"></a>负载均衡</h2><pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token comment\" spellcheck=\"true\"># 负载均衡案例</span>\nupstream myserver <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;</span>\n server 192.168.20.23:8080<span class=\"token punctuation\">;</span>\n server 192.168.20.23:8081<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#125;</span>\nserver <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;</span>\n    listen 80<span class=\"token punctuation\">;</span>\n    server_name test.xxgtalk.cn<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\" spellcheck=\"true\"># listen [::]:80 ipv6only=on;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># root /var/www/mywebsite2;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># index index.html index.htm;</span>\n\n    location / <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#123;</span>\n        proxy_pass http://myserver<span class=\"token punctuation\">;</span>\n        proxy_http_version 1.1<span class=\"token punctuation\">;</span>\n        proxy_set_header Upgrade <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n        proxy_set_header Connection <span class=\"token string\">'upgrade'</span><span class=\"token punctuation\">;</span>\n        proxy_set_header Host <span class=\"token variable\">$host</span><span class=\"token punctuation\">;</span>\n        proxy_cache_bypass <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#125;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># error_page 404 /404.html;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># error_page 500 502 503 504 /50x.html;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># location = /50x.html &amp;#123;</span>\n    <span class=\"token comment\" spellcheck=\"true\">#     root /var/www/mywebsite1;</span>\n    <span class=\"token comment\" spellcheck=\"true\"># &amp;#125;</span>\n<span class=\"token operator\">&amp;</span><span class=\"token comment\" spellcheck=\"true\">#125; </span></code></pre>\n<h2 id=\"动静分离-跟基础类似\"><a href=\"#动静分离-跟基础类似\" class=\"headerlink\" title=\"动静分离(跟基础类似)\"></a>动静分离(跟基础类似)</h2><h2 id=\"高可用\"><a href=\"#高可用\" class=\"headerlink\" title=\"高可用\"></a>高可用</h2><p><img src=\"http://qiniu.xxgtalk.cn/blog/images/20191130225646.png\" alt=\"20191130225646.png\"></p>\n<ol>\n<li>需要在轮胎服务器安装nginx</li>\n<li>需要再两台服务器上安装keepalived<pre class=\" language-bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> keepalived -y\n</code></pre>\n</li>\n</ol>\n<h2 id=\"修改每台机器上的keepalived配置文件\"><a href=\"#修改每台机器上的keepalived配置文件\" class=\"headerlink\" title=\"修改每台机器上的keepalived配置文件\"></a>修改每台机器上的keepalived配置文件</h2><h2 id=\"检测是否安装成功\"><a href=\"#检测是否安装成功\" class=\"headerlink\" title=\"检测是否安装成功\"></a>检测是否安装成功</h2><p>rpm -q -q keepalived</p>\n<h2 id=\"目录位置\"><a href=\"#目录位置\" class=\"headerlink\" title=\"目录位置\"></a>目录位置</h2><p>/etc/keepalived</p>\n<pre><code></code></pre>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Docker基础开篇</p>","more":"<h2 id=\"centos-7安装nginx\"><a href=\"#centos-7安装nginx\" class=\"headerlink\" title=\"centos 7安装nginx\"></a>centos 7安装nginx</h2><ul>\n<li><p>更新yum</p>\n<pre><code class=\"bash\">yum -y update  </code></pre>\n</li>\n<li><p>通过yum安装</p>\n<pre><code class=\"bash\">yum install epel-release\nyum install nginx </code></pre>\n</li>\n<li><p>配置nginx自动启动</p>\n<pre><code class=\"bash\">systemctl start nginx\nsystemctl enable nginx\nsystemctl status nginx</code></pre>\n</li>\n<li><p>配置防火墙</p>\n<pre><code class=\"bash\">firewall-cmd --zone=public --permanent --add-service=http\nfirewall-cmd --zone=public --permanent --add-service=https\nfirewall-cmd --reload\n``` bash\n</code></pre>\n</li>\n</ul>\n<h2 id=\"nginx-配置文件\"><a href=\"#nginx-配置文件\" class=\"headerlink\" title=\"nginx 配置文件\"></a>nginx 配置文件</h2><ul>\n<li><p>worker_processer<br>配置支持的并发数量</p>\n</li>\n<li><p>events</p>\n<pre><code class=\"bash\">配置网络连接数量\nevents:&#123;\n  worker_connections:1024 \n&#125;</code></pre>\n</li>\n<li><p>http</p>\n</li>\n</ul>\n<h2 id=\"反向代理\"><a href=\"#反向代理\" class=\"headerlink\" title=\"反向代理\"></a>反向代理</h2><pre><code class=\"bash\"># 基础案例\nserver &#123;\n    listen 80;\n    server_name test.xxgtalk.cn;\n\n    # listen [::]:80 ipv6only=on;\n    # root /var/www/mywebsite2;\n    # index index.html index.htm;\n\n    location / &#123;\n        proxy_pass http://localhost:9001;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection &#39;upgrade&#39;;\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    &#125;\n    # error_page 404 /404.html;\n    # error_page 500 502 503 504 /50x.html;\n    # location = /50x.html &#123;\n    #     root /var/www/mywebsite1;\n    # &#125;\n&#125; \n</code></pre>\n<h2 id=\"负载均衡\"><a href=\"#负载均衡\" class=\"headerlink\" title=\"负载均衡\"></a>负载均衡</h2><pre><code class=\"bash\"># 负载均衡案例\nupstream myserver &#123;\n server 192.168.20.23:8080;\n server 192.168.20.23:8081;\n&#125;\nserver &#123;\n    listen 80;\n    server_name test.xxgtalk.cn;\n\n    # listen [::]:80 ipv6only=on;\n    # root /var/www/mywebsite2;\n    # index index.html index.htm;\n\n    location / &#123;\n        proxy_pass http://myserver;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection &#39;upgrade&#39;;\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    &#125;\n    # error_page 404 /404.html;\n    # error_page 500 502 503 504 /50x.html;\n    # location = /50x.html &#123;\n    #     root /var/www/mywebsite1;\n    # &#125;\n&#125; </code></pre>\n<h2 id=\"动静分离-跟基础类似\"><a href=\"#动静分离-跟基础类似\" class=\"headerlink\" title=\"动静分离(跟基础类似)\"></a>动静分离(跟基础类似)</h2><h2 id=\"高可用\"><a href=\"#高可用\" class=\"headerlink\" title=\"高可用\"></a>高可用</h2><p><img src=\"http://qiniu.xxgtalk.cn/blog/images/20191130225646.png\" alt=\"20191130225646.png\"></p>\n<ol>\n<li>需要在轮胎服务器安装nginx</li>\n<li>需要再两台服务器上安装keepalived<pre><code class=\"bash\">yum install keepalived -y\n</code></pre>\n</li>\n</ol>\n<h2 id=\"修改每台机器上的keepalived配置文件\"><a href=\"#修改每台机器上的keepalived配置文件\" class=\"headerlink\" title=\"修改每台机器上的keepalived配置文件\"></a>修改每台机器上的keepalived配置文件</h2><h2 id=\"检测是否安装成功\"><a href=\"#检测是否安装成功\" class=\"headerlink\" title=\"检测是否安装成功\"></a>检测是否安装成功</h2><p>rpm -q -q keepalived</p>\n<h2 id=\"目录位置\"><a href=\"#目录位置\" class=\"headerlink\" title=\"目录位置\"></a>目录位置</h2><p>/etc/keepalived</p>\n<pre><code></code></pre>"},{"title":"写博客的神器-图床篇","abbrlink":5711,"date":"2019-08-26T12:10:10.000Z","_content":"\nvscode下使用 PicGo自动上传图片\n<!-- more -->\n\n### 前言\n> [PicGo github地址](https://github.com/Molunerfinn/PicGo)  \n> [PicGo 文档地址](https://picgo.github.io/PicGo-Doc/zh/guide/config.html) \n\n\n### 纯手工时代\n| 类型 | 优点 | 缺点\n| :--- | :---  | :---\n|站内 | 1.图片自定义命名<br/> 2.方便管理迁移  | 1.增加博客服务器压力(一般都是比较弱的机器)<br/> 2. 操作麻烦\n|外部资源服务器<br/>比如(七牛、微博、腾讯云、阿里云等) |1. 减轻服务器压力<br/> |1.操作麻烦，不好管理图片\n\n### 工业1.0时代\n今天的重点是，vscode下的[PicGo](https://github.com/Molunerfinn/PicGo)插件,通过简单的配置可以实现切换 七牛、微博、腾讯云COS、又拍云、github、阿里云oss、imgur等，与vscode很方便的集成，综合对比了下 腾讯云、阿里云皆收费，github国内又有点慢，最后选择了七牛，每个月10G 博客应该够用，配置如下:\n![](http://qiniu.xxgtalk.cn/blog/images/20190807085943.png)\n","source":"_posts/other/blog_image_lib.md","raw":"---\ntitle: 写博客的神器-图床篇\ncategories:\n  - 其他\ntags:\n  - 其他\nabbrlink: 5711\ndate: 2019-08-26 20:10:10\n---\n\nvscode下使用 PicGo自动上传图片\n<!-- more -->\n\n### 前言\n> [PicGo github地址](https://github.com/Molunerfinn/PicGo)  \n> [PicGo 文档地址](https://picgo.github.io/PicGo-Doc/zh/guide/config.html) \n\n\n### 纯手工时代\n| 类型 | 优点 | 缺点\n| :--- | :---  | :---\n|站内 | 1.图片自定义命名<br/> 2.方便管理迁移  | 1.增加博客服务器压力(一般都是比较弱的机器)<br/> 2. 操作麻烦\n|外部资源服务器<br/>比如(七牛、微博、腾讯云、阿里云等) |1. 减轻服务器压力<br/> |1.操作麻烦，不好管理图片\n\n### 工业1.0时代\n今天的重点是，vscode下的[PicGo](https://github.com/Molunerfinn/PicGo)插件,通过简单的配置可以实现切换 七牛、微博、腾讯云COS、又拍云、github、阿里云oss、imgur等，与vscode很方便的集成，综合对比了下 腾讯云、阿里云皆收费，github国内又有点慢，最后选择了七牛，每个月10G 博客应该够用，配置如下:\n![](http://qiniu.xxgtalk.cn/blog/images/20190807085943.png)\n","slug":"other/blog_image_lib","published":1,"updated":"2020-12-28T00:55:28.071Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6uz001cd8v8167kgn60","content":"<p>vscode下使用 PicGo自动上传图片</p>\n<a id=\"more\"></a>\n\n<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><blockquote>\n<p><a href=\"https://github.com/Molunerfinn/PicGo\">PicGo github地址</a><br><a href=\"https://picgo.github.io/PicGo-Doc/zh/guide/config.html\">PicGo 文档地址</a> </p>\n</blockquote>\n<h3 id=\"纯手工时代\"><a href=\"#纯手工时代\" class=\"headerlink\" title=\"纯手工时代\"></a>纯手工时代</h3><table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">优点</th>\n<th align=\"left\">缺点</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">站内</td>\n<td align=\"left\">1.图片自定义命名<br/> 2.方便管理迁移</td>\n<td align=\"left\">1.增加博客服务器压力(一般都是比较弱的机器)<br/> 2. 操作麻烦</td>\n</tr>\n<tr>\n<td align=\"left\">外部资源服务器<br/>比如(七牛、微博、腾讯云、阿里云等)</td>\n<td align=\"left\">1. 减轻服务器压力<br/></td>\n<td align=\"left\">1.操作麻烦，不好管理图片</td>\n</tr>\n</tbody></table>\n<h3 id=\"工业1-0时代\"><a href=\"#工业1-0时代\" class=\"headerlink\" title=\"工业1.0时代\"></a>工业1.0时代</h3><p>今天的重点是，vscode下的<a href=\"https://github.com/Molunerfinn/PicGo\">PicGo</a>插件,通过简单的配置可以实现切换 七牛、微博、腾讯云COS、又拍云、github、阿里云oss、imgur等，与vscode很方便的集成，综合对比了下 腾讯云、阿里云皆收费，github国内又有点慢，最后选择了七牛，每个月10G 博客应该够用，配置如下:<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190807085943.png\"></p>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>vscode下使用 PicGo自动上传图片</p>","more":"<h3 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h3><blockquote>\n<p><a href=\"https://github.com/Molunerfinn/PicGo\">PicGo github地址</a><br><a href=\"https://picgo.github.io/PicGo-Doc/zh/guide/config.html\">PicGo 文档地址</a> </p>\n</blockquote>\n<h3 id=\"纯手工时代\"><a href=\"#纯手工时代\" class=\"headerlink\" title=\"纯手工时代\"></a>纯手工时代</h3><table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">优点</th>\n<th align=\"left\">缺点</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">站内</td>\n<td align=\"left\">1.图片自定义命名<br/> 2.方便管理迁移</td>\n<td align=\"left\">1.增加博客服务器压力(一般都是比较弱的机器)<br/> 2. 操作麻烦</td>\n</tr>\n<tr>\n<td align=\"left\">外部资源服务器<br/>比如(七牛、微博、腾讯云、阿里云等)</td>\n<td align=\"left\">1. 减轻服务器压力<br/></td>\n<td align=\"left\">1.操作麻烦，不好管理图片</td>\n</tr>\n</tbody></table>\n<h3 id=\"工业1-0时代\"><a href=\"#工业1-0时代\" class=\"headerlink\" title=\"工业1.0时代\"></a>工业1.0时代</h3><p>今天的重点是，vscode下的<a href=\"https://github.com/Molunerfinn/PicGo\">PicGo</a>插件,通过简单的配置可以实现切换 七牛、微博、腾讯云COS、又拍云、github、阿里云oss、imgur等，与vscode很方便的集成，综合对比了下 腾讯云、阿里云皆收费，github国内又有点慢，最后选择了七牛，每个月10G 博客应该够用，配置如下:<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190807085943.png\"></p>"},{"title":"redis-config常用点介绍","abbrlink":43898,"date":"2018-12-03T01:10:10.000Z","_content":"\nredis-config常用点介绍\n<!-- more -->\n\n> 参考文档:http://redisdoc.com/\n\n1. 是否以守护进程方式运行，redis默认不是守护进程方式运行，可以修改该配置项来使用守护进程方式运行\ndaemonizo:yes\n\n2. pidfile 指定守护进程方式的写入文件\n当redis以守护进程方式运行时，redis默认会吧pid写入/var/run/redis.pid文件，可以通过pidfile指定 pidfile /var/run/redis.pid\n\n3. 指定redis端口 \n配置文件里面找port，默认是6379 \n\n4. bind 绑定的主机ip\n``` bash\nbind 127.0.0.1\n```\n\n5. timeout\n超时时间,默认为0 表示关闭该功能\n\n6. loglevel \n``` bash\n设置日志级别 debug verbose notice warning  \nsyslog-enabled:是否将日志输出到系统日志syslog里头    \nsyslog-indent: 指定syslog里的日志标志\nsyslog-facility： 指定syslog设备，值可以是USER或者LOCAL0-LOCAL7\n```\n\n7. 日志记录方式，默认为标志输出，如果配置redis为守护进程方式运行，而这里又配置日志记录方式为标准输出，则日志将会发送给/dev/nulll\nlogfile stdout\n\n8. databases 数据库数量\n``` bash\ndatabases 16\n```\n\n9. 指定多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件适配\n``` bash\nsave <seconds> <changes>\n# redis 默认配置文件提供了三个条件\n# save 900 1 # 900秒内有一个更改\n# save 300 10 # 300秒内有10个更改\n# save 60 10000 # 60秒内有10000个更改\n```\n\n10. 指定存储至本地数据库时是否压缩数据，默认为yes，redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，单会大致数据库文件变得巨大\n``` bash\nrdbcompression yes\n```\n\n11. 指定本地数据库文件名，默认为dump.rdb\n``` bash\ndbfilename dump.rdb\n```\n\n12. 指定本地数据库存放目录\n``` bash\ndir ./\n```\n\n13. 设置当本机为slav服务是，设置master服务的ip地址及端口，在redis启动时，他会自动从master进行数据同步\n``` bash\nslaveof <masterip> <masterport>\n```\n\n14. 当master服务设置了密码保护时，slav服务连接master的密码\n``` bash\nmasterauth <master-password>\n```\n\n15. 设置redis连接密码，如果设置了密码，客户端在连接的时候需要通过 auth <password> 提供密码，默认为关闭\n``` bash\nrequirepass Abcd1234\n```\n\n16. 设置同一时间最大客户端连接数，默认无限制，redis可以同时打开的客户端连接数为redis经常可以打开的最大文件描述符数，如果设置maxclients 0,表示不作限值。当客户端连接数达到限制时，redis会关闭新的连接并向客户端返回 max number of clients reached错误信息\n``` bash\nmaxclients 128\n```\n\n17. 指定redis最大内存限制，redis在启动时会把数据加载到内存中，达到最大内存后，redis会尝试清除已到期或即将到期的key，当次方法处理后，仍然达到最大内存设置，将无法进行写入操作，但仍可以读，redis新的vm机制，会把key存放内存，value存放在swap区\n``` bash\nmaxmemory <bytes>\n```\n\n18. 指定是否每次更新操作后进行日志记录，redis在默认情况下是异步吧数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失，因为redis本身同步数据文件是按上面save条件来同步的，所有的数据会在一段时间内只存在于内存中。默认为 no\n``` bash\nappendonly no\n```\n\n19. 指定更新日志文件名，默认为appendonly.aof\n``` bash\nappendfilename  appendonly.aof\n```\n\n20. 指定更新日志条件，共有3个可选值\nno: 表示等操作系统镜像数据缓存同步到磁盘(块)\nalways: 表示每次更新操作后手动调用fsync()将数据写到磁盘(慢，安全)\neverysec:表示每秒同步一次(折中，默认值)\n``` bash\nappendfsync everysec\n```\n\n21. 指定是否启用虚拟内存机制，默认为no，简单的介绍下，VM机制将数据分页存放，有redis将访问量较少的页即冷水机swap到磁盘上，访问多的页由磁盘自动换出到内存中\n``` bash\nvm-enabled no\n```\n\n22. 虚拟内存文件路径，默认值为/temp/redis.swap，不可多个redis实例共享\n``` bash\nvm-swap-file /tmp/redis.swap\n```\n\n23. 将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多小，所有索引数据都是内存存储的(redis的所有数据就是keys)，也就是说 当vm-max-memory设置为0的时候，其实就是所有的value都存在于磁盘。默认值为0\n``` bash\nvm-max-memory 0\n```\n\n24. redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但是一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的，建议如果存储很多小对象，page大小最好设置为32或者64bytes；如果存储很大对象，可以使用更大的page，如果不确定，就是用默认值\n``` bash\nvm-max-size 32\n```\n\n25. 设置swap文件中的page数量，由于页表(一种表示页面空闲或使用bitmap)是放在内存中的，在磁盘上每8个pages将消耗1bytes内存。\n``` bash\nvm-pages 1342177289\n```\n\n26. 设置访问swap文件的线程数，最好不要超过机器的核数，如果设置为0，那么对所有swap文件的操作都是串行的，可能会造成比较长的延迟，美容是4\n``` bash\nvm-max-thread:4\n```\n\n27. 设置在想客户端应答时，是否吧较小的包合并为一个包发送，默认为开启\n``` bash\nglueoutputbuf yes\n```\n\n28. 指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法\n``` bash\n# hash-max-zipmap-entries 64\n# has-max-zipmap-value 512\n```\n\n29. 指定是否激活重置哈希，默认为开启\n``` bash\nactiverehashing yes\n```\n\n30. 指定包含其他的配置文件，可以在同一主机上多个redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件\n``` bash\ninclude /path/to/local.conf\n```\n\n\n##  SNAPSHOTTING快照\n\n## REPLICATION复制\n\n## SECURITY安全\n\n- requirepass节点  \nconfig get requirepass   \nconfig set requirepass [v]\n\n\n## LIMITS限值\n\n- maxclients :最大连接数\n\n- maxmemory :最大内存\n\n- maxmemory-policy : 默认为noeviction\nvolatile-lru: 使用LRU算法移除key，只对设置了过期时间的键\n\nallkeys-lru:使用LRU算法移除key\n\nvolatile-random:在过期集合中随机移除，值对设置了过期时间的键有效\n\nallkeys-random: 随机移除key\n\nvolatile-ttl: 移除那些TTL值最小的key，也就是最近要过期的key\n\nnoeviction: 永不过期，不进行移除，针对写操作，直返回错误信息\n\n\n- maxmemory-samples\n\n\n## APPEND ONLY MODE追加\n","source":"_posts/redis/01-config.md","raw":"---\ntitle: redis-config常用点介绍\ncategories:\n  - redis\ntags:\n  - redis\nabbrlink: 43898\ndate: 2018-12-03 09:10:10\n---\n\nredis-config常用点介绍\n<!-- more -->\n\n> 参考文档:http://redisdoc.com/\n\n1. 是否以守护进程方式运行，redis默认不是守护进程方式运行，可以修改该配置项来使用守护进程方式运行\ndaemonizo:yes\n\n2. pidfile 指定守护进程方式的写入文件\n当redis以守护进程方式运行时，redis默认会吧pid写入/var/run/redis.pid文件，可以通过pidfile指定 pidfile /var/run/redis.pid\n\n3. 指定redis端口 \n配置文件里面找port，默认是6379 \n\n4. bind 绑定的主机ip\n``` bash\nbind 127.0.0.1\n```\n\n5. timeout\n超时时间,默认为0 表示关闭该功能\n\n6. loglevel \n``` bash\n设置日志级别 debug verbose notice warning  \nsyslog-enabled:是否将日志输出到系统日志syslog里头    \nsyslog-indent: 指定syslog里的日志标志\nsyslog-facility： 指定syslog设备，值可以是USER或者LOCAL0-LOCAL7\n```\n\n7. 日志记录方式，默认为标志输出，如果配置redis为守护进程方式运行，而这里又配置日志记录方式为标准输出，则日志将会发送给/dev/nulll\nlogfile stdout\n\n8. databases 数据库数量\n``` bash\ndatabases 16\n```\n\n9. 指定多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件适配\n``` bash\nsave <seconds> <changes>\n# redis 默认配置文件提供了三个条件\n# save 900 1 # 900秒内有一个更改\n# save 300 10 # 300秒内有10个更改\n# save 60 10000 # 60秒内有10000个更改\n```\n\n10. 指定存储至本地数据库时是否压缩数据，默认为yes，redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，单会大致数据库文件变得巨大\n``` bash\nrdbcompression yes\n```\n\n11. 指定本地数据库文件名，默认为dump.rdb\n``` bash\ndbfilename dump.rdb\n```\n\n12. 指定本地数据库存放目录\n``` bash\ndir ./\n```\n\n13. 设置当本机为slav服务是，设置master服务的ip地址及端口，在redis启动时，他会自动从master进行数据同步\n``` bash\nslaveof <masterip> <masterport>\n```\n\n14. 当master服务设置了密码保护时，slav服务连接master的密码\n``` bash\nmasterauth <master-password>\n```\n\n15. 设置redis连接密码，如果设置了密码，客户端在连接的时候需要通过 auth <password> 提供密码，默认为关闭\n``` bash\nrequirepass Abcd1234\n```\n\n16. 设置同一时间最大客户端连接数，默认无限制，redis可以同时打开的客户端连接数为redis经常可以打开的最大文件描述符数，如果设置maxclients 0,表示不作限值。当客户端连接数达到限制时，redis会关闭新的连接并向客户端返回 max number of clients reached错误信息\n``` bash\nmaxclients 128\n```\n\n17. 指定redis最大内存限制，redis在启动时会把数据加载到内存中，达到最大内存后，redis会尝试清除已到期或即将到期的key，当次方法处理后，仍然达到最大内存设置，将无法进行写入操作，但仍可以读，redis新的vm机制，会把key存放内存，value存放在swap区\n``` bash\nmaxmemory <bytes>\n```\n\n18. 指定是否每次更新操作后进行日志记录，redis在默认情况下是异步吧数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失，因为redis本身同步数据文件是按上面save条件来同步的，所有的数据会在一段时间内只存在于内存中。默认为 no\n``` bash\nappendonly no\n```\n\n19. 指定更新日志文件名，默认为appendonly.aof\n``` bash\nappendfilename  appendonly.aof\n```\n\n20. 指定更新日志条件，共有3个可选值\nno: 表示等操作系统镜像数据缓存同步到磁盘(块)\nalways: 表示每次更新操作后手动调用fsync()将数据写到磁盘(慢，安全)\neverysec:表示每秒同步一次(折中，默认值)\n``` bash\nappendfsync everysec\n```\n\n21. 指定是否启用虚拟内存机制，默认为no，简单的介绍下，VM机制将数据分页存放，有redis将访问量较少的页即冷水机swap到磁盘上，访问多的页由磁盘自动换出到内存中\n``` bash\nvm-enabled no\n```\n\n22. 虚拟内存文件路径，默认值为/temp/redis.swap，不可多个redis实例共享\n``` bash\nvm-swap-file /tmp/redis.swap\n```\n\n23. 将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多小，所有索引数据都是内存存储的(redis的所有数据就是keys)，也就是说 当vm-max-memory设置为0的时候，其实就是所有的value都存在于磁盘。默认值为0\n``` bash\nvm-max-memory 0\n```\n\n24. redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但是一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的，建议如果存储很多小对象，page大小最好设置为32或者64bytes；如果存储很大对象，可以使用更大的page，如果不确定，就是用默认值\n``` bash\nvm-max-size 32\n```\n\n25. 设置swap文件中的page数量，由于页表(一种表示页面空闲或使用bitmap)是放在内存中的，在磁盘上每8个pages将消耗1bytes内存。\n``` bash\nvm-pages 1342177289\n```\n\n26. 设置访问swap文件的线程数，最好不要超过机器的核数，如果设置为0，那么对所有swap文件的操作都是串行的，可能会造成比较长的延迟，美容是4\n``` bash\nvm-max-thread:4\n```\n\n27. 设置在想客户端应答时，是否吧较小的包合并为一个包发送，默认为开启\n``` bash\nglueoutputbuf yes\n```\n\n28. 指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法\n``` bash\n# hash-max-zipmap-entries 64\n# has-max-zipmap-value 512\n```\n\n29. 指定是否激活重置哈希，默认为开启\n``` bash\nactiverehashing yes\n```\n\n30. 指定包含其他的配置文件，可以在同一主机上多个redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件\n``` bash\ninclude /path/to/local.conf\n```\n\n\n##  SNAPSHOTTING快照\n\n## REPLICATION复制\n\n## SECURITY安全\n\n- requirepass节点  \nconfig get requirepass   \nconfig set requirepass [v]\n\n\n## LIMITS限值\n\n- maxclients :最大连接数\n\n- maxmemory :最大内存\n\n- maxmemory-policy : 默认为noeviction\nvolatile-lru: 使用LRU算法移除key，只对设置了过期时间的键\n\nallkeys-lru:使用LRU算法移除key\n\nvolatile-random:在过期集合中随机移除，值对设置了过期时间的键有效\n\nallkeys-random: 随机移除key\n\nvolatile-ttl: 移除那些TTL值最小的key，也就是最近要过期的key\n\nnoeviction: 永不过期，不进行移除，针对写操作，直返回错误信息\n\n\n- maxmemory-samples\n\n\n## APPEND ONLY MODE追加\n","slug":"redis/01-config","published":1,"updated":"2020-12-28T00:55:28.072Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6v0001fd8v8ggvwal3q","content":"<p>redis-config常用点介绍</p>\n<a id=\"more\"></a>\n\n<blockquote>\n<p>参考文档:<a href=\"http://redisdoc.com/\">http://redisdoc.com/</a></p>\n</blockquote>\n<ol>\n<li><p>是否以守护进程方式运行，redis默认不是守护进程方式运行，可以修改该配置项来使用守护进程方式运行<br>daemonizo:yes</p>\n</li>\n<li><p>pidfile 指定守护进程方式的写入文件<br>当redis以守护进程方式运行时，redis默认会吧pid写入/var/run/redis.pid文件，可以通过pidfile指定 pidfile /var/run/redis.pid</p>\n</li>\n<li><p>指定redis端口<br>配置文件里面找port，默认是6379 </p>\n</li>\n<li><p>bind 绑定的主机ip</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">bind 127.0.0.1</code></pre>\n</li>\n<li><p>timeout<br>超时时间,默认为0 表示关闭该功能</p>\n</li>\n<li><p>loglevel </p>\n<pre class=\" language-bash\"><code class=\"language-bash\">设置日志级别 debug verbose notice warning  \nsyslog-enabled:是否将日志输出到系统日志syslog里头    \nsyslog-indent: 指定syslog里的日志标志\nsyslog-facility： 指定syslog设备，值可以是USER或者LOCAL0-LOCAL7</code></pre>\n</li>\n<li><p>日志记录方式，默认为标志输出，如果配置redis为守护进程方式运行，而这里又配置日志记录方式为标准输出，则日志将会发送给/dev/nulll<br>logfile stdout</p>\n</li>\n<li><p>databases 数据库数量</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">databases 16</code></pre>\n</li>\n<li><p>指定多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件适配</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">save <span class=\"token operator\">&lt;</span>seconds<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>changes<span class=\"token operator\">></span>\n<span class=\"token comment\" spellcheck=\"true\"># redis 默认配置文件提供了三个条件</span>\n<span class=\"token comment\" spellcheck=\"true\"># save 900 1 # 900秒内有一个更改</span>\n<span class=\"token comment\" spellcheck=\"true\"># save 300 10 # 300秒内有10个更改</span>\n<span class=\"token comment\" spellcheck=\"true\"># save 60 10000 # 60秒内有10000个更改</span></code></pre>\n</li>\n<li><p>指定存储至本地数据库时是否压缩数据，默认为yes，redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，单会大致数据库文件变得巨大</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">rdbcompression <span class=\"token function\">yes</span></code></pre>\n</li>\n<li><p>指定本地数据库文件名，默认为dump.rdb</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">dbfilename dump.rdb</code></pre>\n</li>\n<li><p>指定本地数据库存放目录</p>\n<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token function\">dir</span> ./</code></pre>\n</li>\n<li><p>设置当本机为slav服务是，设置master服务的ip地址及端口，在redis启动时，他会自动从master进行数据同步</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">slaveof <span class=\"token operator\">&lt;</span>masterip<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>masterport<span class=\"token operator\">></span></code></pre>\n</li>\n<li><p>当master服务设置了密码保护时，slav服务连接master的密码</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">masterauth <span class=\"token operator\">&lt;</span>master-password<span class=\"token operator\">></span></code></pre>\n</li>\n<li><p>设置redis连接密码，如果设置了密码，客户端在连接的时候需要通过 auth <password> 提供密码，默认为关闭</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">requirepass Abcd1234</code></pre>\n</li>\n<li><p>设置同一时间最大客户端连接数，默认无限制，redis可以同时打开的客户端连接数为redis经常可以打开的最大文件描述符数，如果设置maxclients 0,表示不作限值。当客户端连接数达到限制时，redis会关闭新的连接并向客户端返回 max number of clients reached错误信息</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">maxclients 128</code></pre>\n</li>\n<li><p>指定redis最大内存限制，redis在启动时会把数据加载到内存中，达到最大内存后，redis会尝试清除已到期或即将到期的key，当次方法处理后，仍然达到最大内存设置，将无法进行写入操作，但仍可以读，redis新的vm机制，会把key存放内存，value存放在swap区</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">maxmemory <span class=\"token operator\">&lt;</span>bytes<span class=\"token operator\">></span></code></pre>\n</li>\n<li><p>指定是否每次更新操作后进行日志记录，redis在默认情况下是异步吧数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失，因为redis本身同步数据文件是按上面save条件来同步的，所有的数据会在一段时间内只存在于内存中。默认为 no</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">appendonly no</code></pre>\n</li>\n<li><p>指定更新日志文件名，默认为appendonly.aof</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">appendfilename  appendonly.aof</code></pre>\n</li>\n<li><p>指定更新日志条件，共有3个可选值<br>no: 表示等操作系统镜像数据缓存同步到磁盘(块)<br>always: 表示每次更新操作后手动调用fsync()将数据写到磁盘(慢，安全)<br>everysec:表示每秒同步一次(折中，默认值)</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">appendfsync everysec</code></pre>\n</li>\n<li><p>指定是否启用虚拟内存机制，默认为no，简单的介绍下，VM机制将数据分页存放，有redis将访问量较少的页即冷水机swap到磁盘上，访问多的页由磁盘自动换出到内存中</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">vm-enabled no</code></pre>\n</li>\n<li><p>虚拟内存文件路径，默认值为/temp/redis.swap，不可多个redis实例共享</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">vm-swap-file /tmp/redis.swap</code></pre>\n</li>\n<li><p>将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多小，所有索引数据都是内存存储的(redis的所有数据就是keys)，也就是说 当vm-max-memory设置为0的时候，其实就是所有的value都存在于磁盘。默认值为0</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">vm-max-memory 0</code></pre>\n</li>\n<li><p>redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但是一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的，建议如果存储很多小对象，page大小最好设置为32或者64bytes；如果存储很大对象，可以使用更大的page，如果不确定，就是用默认值</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">vm-max-size 32</code></pre>\n</li>\n<li><p>设置swap文件中的page数量，由于页表(一种表示页面空闲或使用bitmap)是放在内存中的，在磁盘上每8个pages将消耗1bytes内存。</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">vm-pages 1342177289</code></pre>\n</li>\n<li><p>设置访问swap文件的线程数，最好不要超过机器的核数，如果设置为0，那么对所有swap文件的操作都是串行的，可能会造成比较长的延迟，美容是4</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">vm-max-thread:4</code></pre>\n</li>\n<li><p>设置在想客户端应答时，是否吧较小的包合并为一个包发送，默认为开启</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">glueoutputbuf <span class=\"token function\">yes</span></code></pre>\n</li>\n<li><p>指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法</p>\n<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token comment\" spellcheck=\"true\"># hash-max-zipmap-entries 64</span>\n<span class=\"token comment\" spellcheck=\"true\"># has-max-zipmap-value 512</span></code></pre>\n</li>\n<li><p>指定是否激活重置哈希，默认为开启</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">activerehashing <span class=\"token function\">yes</span></code></pre>\n</li>\n<li><p>指定包含其他的配置文件，可以在同一主机上多个redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">include /path/to/local.conf</code></pre>\n</li>\n</ol>\n<h2 id=\"SNAPSHOTTING快照\"><a href=\"#SNAPSHOTTING快照\" class=\"headerlink\" title=\"SNAPSHOTTING快照\"></a>SNAPSHOTTING快照</h2><h2 id=\"REPLICATION复制\"><a href=\"#REPLICATION复制\" class=\"headerlink\" title=\"REPLICATION复制\"></a>REPLICATION复制</h2><h2 id=\"SECURITY安全\"><a href=\"#SECURITY安全\" class=\"headerlink\" title=\"SECURITY安全\"></a>SECURITY安全</h2><ul>\n<li>requirepass节点<br>config get requirepass<br>config set requirepass [v]</li>\n</ul>\n<h2 id=\"LIMITS限值\"><a href=\"#LIMITS限值\" class=\"headerlink\" title=\"LIMITS限值\"></a>LIMITS限值</h2><ul>\n<li><p>maxclients :最大连接数</p>\n</li>\n<li><p>maxmemory :最大内存</p>\n</li>\n<li><p>maxmemory-policy : 默认为noeviction<br>volatile-lru: 使用LRU算法移除key，只对设置了过期时间的键</p>\n</li>\n</ul>\n<p>allkeys-lru:使用LRU算法移除key</p>\n<p>volatile-random:在过期集合中随机移除，值对设置了过期时间的键有效</p>\n<p>allkeys-random: 随机移除key</p>\n<p>volatile-ttl: 移除那些TTL值最小的key，也就是最近要过期的key</p>\n<p>noeviction: 永不过期，不进行移除，针对写操作，直返回错误信息</p>\n<ul>\n<li>maxmemory-samples</li>\n</ul>\n<h2 id=\"APPEND-ONLY-MODE追加\"><a href=\"#APPEND-ONLY-MODE追加\" class=\"headerlink\" title=\"APPEND ONLY MODE追加\"></a>APPEND ONLY MODE追加</h2>","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>redis-config常用点介绍</p>","more":"<blockquote>\n<p>参考文档:<a href=\"http://redisdoc.com/\">http://redisdoc.com/</a></p>\n</blockquote>\n<ol>\n<li><p>是否以守护进程方式运行，redis默认不是守护进程方式运行，可以修改该配置项来使用守护进程方式运行<br>daemonizo:yes</p>\n</li>\n<li><p>pidfile 指定守护进程方式的写入文件<br>当redis以守护进程方式运行时，redis默认会吧pid写入/var/run/redis.pid文件，可以通过pidfile指定 pidfile /var/run/redis.pid</p>\n</li>\n<li><p>指定redis端口<br>配置文件里面找port，默认是6379 </p>\n</li>\n<li><p>bind 绑定的主机ip</p>\n<pre><code class=\"bash\">bind 127.0.0.1</code></pre>\n</li>\n<li><p>timeout<br>超时时间,默认为0 表示关闭该功能</p>\n</li>\n<li><p>loglevel </p>\n<pre><code class=\"bash\">设置日志级别 debug verbose notice warning  \nsyslog-enabled:是否将日志输出到系统日志syslog里头    \nsyslog-indent: 指定syslog里的日志标志\nsyslog-facility： 指定syslog设备，值可以是USER或者LOCAL0-LOCAL7</code></pre>\n</li>\n<li><p>日志记录方式，默认为标志输出，如果配置redis为守护进程方式运行，而这里又配置日志记录方式为标准输出，则日志将会发送给/dev/nulll<br>logfile stdout</p>\n</li>\n<li><p>databases 数据库数量</p>\n<pre><code class=\"bash\">databases 16</code></pre>\n</li>\n<li><p>指定多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件适配</p>\n<pre><code class=\"bash\">save &lt;seconds&gt; &lt;changes&gt;\n# redis 默认配置文件提供了三个条件\n# save 900 1 # 900秒内有一个更改\n# save 300 10 # 300秒内有10个更改\n# save 60 10000 # 60秒内有10000个更改</code></pre>\n</li>\n<li><p>指定存储至本地数据库时是否压缩数据，默认为yes，redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，单会大致数据库文件变得巨大</p>\n<pre><code class=\"bash\">rdbcompression yes</code></pre>\n</li>\n<li><p>指定本地数据库文件名，默认为dump.rdb</p>\n<pre><code class=\"bash\">dbfilename dump.rdb</code></pre>\n</li>\n<li><p>指定本地数据库存放目录</p>\n<pre><code class=\"bash\">dir ./</code></pre>\n</li>\n<li><p>设置当本机为slav服务是，设置master服务的ip地址及端口，在redis启动时，他会自动从master进行数据同步</p>\n<pre><code class=\"bash\">slaveof &lt;masterip&gt; &lt;masterport&gt;</code></pre>\n</li>\n<li><p>当master服务设置了密码保护时，slav服务连接master的密码</p>\n<pre><code class=\"bash\">masterauth &lt;master-password&gt;</code></pre>\n</li>\n<li><p>设置redis连接密码，如果设置了密码，客户端在连接的时候需要通过 auth <password> 提供密码，默认为关闭</p>\n<pre><code class=\"bash\">requirepass Abcd1234</code></pre>\n</li>\n<li><p>设置同一时间最大客户端连接数，默认无限制，redis可以同时打开的客户端连接数为redis经常可以打开的最大文件描述符数，如果设置maxclients 0,表示不作限值。当客户端连接数达到限制时，redis会关闭新的连接并向客户端返回 max number of clients reached错误信息</p>\n<pre><code class=\"bash\">maxclients 128</code></pre>\n</li>\n<li><p>指定redis最大内存限制，redis在启动时会把数据加载到内存中，达到最大内存后，redis会尝试清除已到期或即将到期的key，当次方法处理后，仍然达到最大内存设置，将无法进行写入操作，但仍可以读，redis新的vm机制，会把key存放内存，value存放在swap区</p>\n<pre><code class=\"bash\">maxmemory &lt;bytes&gt;</code></pre>\n</li>\n<li><p>指定是否每次更新操作后进行日志记录，redis在默认情况下是异步吧数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失，因为redis本身同步数据文件是按上面save条件来同步的，所有的数据会在一段时间内只存在于内存中。默认为 no</p>\n<pre><code class=\"bash\">appendonly no</code></pre>\n</li>\n<li><p>指定更新日志文件名，默认为appendonly.aof</p>\n<pre><code class=\"bash\">appendfilename  appendonly.aof</code></pre>\n</li>\n<li><p>指定更新日志条件，共有3个可选值<br>no: 表示等操作系统镜像数据缓存同步到磁盘(块)<br>always: 表示每次更新操作后手动调用fsync()将数据写到磁盘(慢，安全)<br>everysec:表示每秒同步一次(折中，默认值)</p>\n<pre><code class=\"bash\">appendfsync everysec</code></pre>\n</li>\n<li><p>指定是否启用虚拟内存机制，默认为no，简单的介绍下，VM机制将数据分页存放，有redis将访问量较少的页即冷水机swap到磁盘上，访问多的页由磁盘自动换出到内存中</p>\n<pre><code class=\"bash\">vm-enabled no</code></pre>\n</li>\n<li><p>虚拟内存文件路径，默认值为/temp/redis.swap，不可多个redis实例共享</p>\n<pre><code class=\"bash\">vm-swap-file /tmp/redis.swap</code></pre>\n</li>\n<li><p>将所有大于vm-max-memory的数据存入虚拟内存，无论vm-max-memory设置多小，所有索引数据都是内存存储的(redis的所有数据就是keys)，也就是说 当vm-max-memory设置为0的时候，其实就是所有的value都存在于磁盘。默认值为0</p>\n<pre><code class=\"bash\">vm-max-memory 0</code></pre>\n</li>\n<li><p>redis swap文件分成了很多的page，一个对象可以保存在多个page上面，但是一个page上不能被多个对象共享，vm-page-size是要根据存储的数据大小来设定的，建议如果存储很多小对象，page大小最好设置为32或者64bytes；如果存储很大对象，可以使用更大的page，如果不确定，就是用默认值</p>\n<pre><code class=\"bash\">vm-max-size 32</code></pre>\n</li>\n<li><p>设置swap文件中的page数量，由于页表(一种表示页面空闲或使用bitmap)是放在内存中的，在磁盘上每8个pages将消耗1bytes内存。</p>\n<pre><code class=\"bash\">vm-pages 1342177289</code></pre>\n</li>\n<li><p>设置访问swap文件的线程数，最好不要超过机器的核数，如果设置为0，那么对所有swap文件的操作都是串行的，可能会造成比较长的延迟，美容是4</p>\n<pre><code class=\"bash\">vm-max-thread:4</code></pre>\n</li>\n<li><p>设置在想客户端应答时，是否吧较小的包合并为一个包发送，默认为开启</p>\n<pre><code class=\"bash\">glueoutputbuf yes</code></pre>\n</li>\n<li><p>指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法</p>\n<pre><code class=\"bash\"># hash-max-zipmap-entries 64\n# has-max-zipmap-value 512</code></pre>\n</li>\n<li><p>指定是否激活重置哈希，默认为开启</p>\n<pre><code class=\"bash\">activerehashing yes</code></pre>\n</li>\n<li><p>指定包含其他的配置文件，可以在同一主机上多个redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件</p>\n<pre><code class=\"bash\">include /path/to/local.conf</code></pre>\n</li>\n</ol>\n<h2 id=\"SNAPSHOTTING快照\"><a href=\"#SNAPSHOTTING快照\" class=\"headerlink\" title=\"SNAPSHOTTING快照\"></a>SNAPSHOTTING快照</h2><h2 id=\"REPLICATION复制\"><a href=\"#REPLICATION复制\" class=\"headerlink\" title=\"REPLICATION复制\"></a>REPLICATION复制</h2><h2 id=\"SECURITY安全\"><a href=\"#SECURITY安全\" class=\"headerlink\" title=\"SECURITY安全\"></a>SECURITY安全</h2><ul>\n<li>requirepass节点<br>config get requirepass<br>config set requirepass [v]</li>\n</ul>\n<h2 id=\"LIMITS限值\"><a href=\"#LIMITS限值\" class=\"headerlink\" title=\"LIMITS限值\"></a>LIMITS限值</h2><ul>\n<li><p>maxclients :最大连接数</p>\n</li>\n<li><p>maxmemory :最大内存</p>\n</li>\n<li><p>maxmemory-policy : 默认为noeviction<br>volatile-lru: 使用LRU算法移除key，只对设置了过期时间的键</p>\n</li>\n</ul>\n<p>allkeys-lru:使用LRU算法移除key</p>\n<p>volatile-random:在过期集合中随机移除，值对设置了过期时间的键有效</p>\n<p>allkeys-random: 随机移除key</p>\n<p>volatile-ttl: 移除那些TTL值最小的key，也就是最近要过期的key</p>\n<p>noeviction: 永不过期，不进行移除，针对写操作，直返回错误信息</p>\n<ul>\n<li>maxmemory-samples</li>\n</ul>\n<h2 id=\"APPEND-ONLY-MODE追加\"><a href=\"#APPEND-ONLY-MODE追加\" class=\"headerlink\" title=\"APPEND ONLY MODE追加\"></a>APPEND ONLY MODE追加</h2>"},{"title":"redis-cli基础","abbrlink":21149,"date":"2018-12-02T01:10:10.000Z","_content":"\nredis-cli基础\n<!-- more -->\n\n- 参考文档:http://redisdoc.com/\n\n\n| 命令 | 说明 | 参数说明 | 案例\n| :--- | :--- | :--- | :--- \n|redis-cli -h [host] -p [port] -a [password]| 通过redis-cli连接redis | host:地址<br>port:端口号,默认为6379<br> password:密码 | redis-cli -h localhost -p 7379 -a test\n| ping | 测试是否通 | 如果返回pong，表示通了 | \n| FLUSHALL | 清空所有db |  | \n| FLUSHDB | 清空当前db |  | \n| select [index] | 切换到第几个db | index：从0开始的db下标 | select 0\n| DBSIZE | 显示当前db中的key个数  |  | \n| keys [pattern] | 显示当前db中的所有key | pattern：匹配符(如：？) |  keys *\n| get [key] | 查询指定key的值 | key:键名  |  get name\n| del [key] | 删除指定key的值 | key:键名  |  del name\n| EXISTS [key] | 判断是否存在指定的key  | key:键名 |  EXISTS name\n| move [key] [db] | 移动指定的key到指定的db |key:键名<br> db:db下标  | \n| ttl [key] | 查看过期时间  | key:键名,返回值(-1:永不过期 -2:已过期，会移除) |  ttl name\n| EXPIRE [key] [time] | 设置带过期时间的键值 | key:键名<br>time:过期时间(秒)<br>| EXPIRE name 10\n| type [key]| 查看指定key的数据类型 | key:键名| \n\n# String\n- append [key]:追加   \n\n- STRLEN [key]:字符串长度\n\n- INCR [key]:数值增加 \n\n- INCRBY [key] v:数值增加v\n\n- DECR [key] :数值减少\n\n- DECRBY [key] v:数值减少v\n\n- GETRANGE [key] [start] [end]:字符串截取\n\n- SETRANGE [key] [start] [end]:字符串截取\n\n- setnx [key] [v]: 如果不存在才设置\n\n- msetnx [key] [...v] : 设置多个\n\n# List\n- LPUSH [key] [...v] :依次往左边插入多个\n\n- RPUSH [key] [...v] :依次往右边插入多个\n\n- LRANGE [key] [start] [end] :列出多个\n\n- lpop [key] :删除第一个\n\n- rpop [key] :删除第一个\n\n- LINDEX [key] [index] :查看指定下标的值\n\n- LLEN [key] :查看list长度\n\n- LREM [key] [count] [v]:删除指定列表中指定的count个v\n\n- LTRIM [key] [start] [end]: 从start开始删除到end为止\n\n- rpoplpush [source] [destination]: 移除source的最后一项 并插入到destination的第一项\n\n- lset [key] [index] [value] : 用value替换指定下标的值\n\n- linsert [key] [before/after] [value1] [value2]: 在value1前/后插入value2\n\n# Set\n- SMEMBERS [key] :查看set中数据集合\n\n- sadd [key] [...v]:添加多个值，去重复的\n\n- scard [key] :查看元素中的数量\n\n- SREM [key] [v] :删除指定集合中的指定的值\n\n- srandmember [key] [count]: 随机生成count个整数\n\n- spop [key]:随机删除一个\n\n- smove [key1] [key2] [v] :将set集合key1中的v移到key2中\n\n- sdiff [key1] [key2]: 查询key1中有，key2中没有的\n\n- sinter [key1] [key2]: 查询两个中都有的\n\n- sunion [key1] [key2]：查询两个的去重后的合并集合\n\n# Hash => K/V模式不变，V是一个键值对\n\n- hget [key] [vKey]:查询key中v的值\n\n- hmget [key] [...vKey]: 一次查询多个\n\n- hset [key] [vKey] [value]：设置key中v的值为value,例:hset user id 1\n\n- hmset [key] [...[vKey] [value]]: 一次设置多个，例:hmset user name xxg age 28 id\n\n- HGETALL [key] :查询key中所有的键值对，得到数组['属性','值']形式\n\n- hdel [key] [...vKey] :删除多个指定的vKey\n\n- hlen [key] :查询指定key中的数量\n\n- hexists [key] [vKey]:判断key里面是否存在某个值的key\n\n- HKEYS [key] : 查看指定key中所有的值的key\n\n- hvals [key] : 查看指定key中所有的值\n\n- HINCRYBY/HINCRYBYFLOAT [key] [vKey] [v] :给指定key增加指定的整数/小数\n\n- hsetnx [key] [vKey] [value]：设置值，如果不存在\n\n# Zset \n\n卧槽，实在不想写了，参考: http://redisdoc.com/sorted_set/index.html","source":"_posts/redis/02-cmd.md","raw":"---\ntitle: redis-cli基础\ncategories:\n  - redis\ntags:\n  - redis\nabbrlink: 21149\ndate: 2018-12-02 09:10:10\n---\n\nredis-cli基础\n<!-- more -->\n\n- 参考文档:http://redisdoc.com/\n\n\n| 命令 | 说明 | 参数说明 | 案例\n| :--- | :--- | :--- | :--- \n|redis-cli -h [host] -p [port] -a [password]| 通过redis-cli连接redis | host:地址<br>port:端口号,默认为6379<br> password:密码 | redis-cli -h localhost -p 7379 -a test\n| ping | 测试是否通 | 如果返回pong，表示通了 | \n| FLUSHALL | 清空所有db |  | \n| FLUSHDB | 清空当前db |  | \n| select [index] | 切换到第几个db | index：从0开始的db下标 | select 0\n| DBSIZE | 显示当前db中的key个数  |  | \n| keys [pattern] | 显示当前db中的所有key | pattern：匹配符(如：？) |  keys *\n| get [key] | 查询指定key的值 | key:键名  |  get name\n| del [key] | 删除指定key的值 | key:键名  |  del name\n| EXISTS [key] | 判断是否存在指定的key  | key:键名 |  EXISTS name\n| move [key] [db] | 移动指定的key到指定的db |key:键名<br> db:db下标  | \n| ttl [key] | 查看过期时间  | key:键名,返回值(-1:永不过期 -2:已过期，会移除) |  ttl name\n| EXPIRE [key] [time] | 设置带过期时间的键值 | key:键名<br>time:过期时间(秒)<br>| EXPIRE name 10\n| type [key]| 查看指定key的数据类型 | key:键名| \n\n# String\n- append [key]:追加   \n\n- STRLEN [key]:字符串长度\n\n- INCR [key]:数值增加 \n\n- INCRBY [key] v:数值增加v\n\n- DECR [key] :数值减少\n\n- DECRBY [key] v:数值减少v\n\n- GETRANGE [key] [start] [end]:字符串截取\n\n- SETRANGE [key] [start] [end]:字符串截取\n\n- setnx [key] [v]: 如果不存在才设置\n\n- msetnx [key] [...v] : 设置多个\n\n# List\n- LPUSH [key] [...v] :依次往左边插入多个\n\n- RPUSH [key] [...v] :依次往右边插入多个\n\n- LRANGE [key] [start] [end] :列出多个\n\n- lpop [key] :删除第一个\n\n- rpop [key] :删除第一个\n\n- LINDEX [key] [index] :查看指定下标的值\n\n- LLEN [key] :查看list长度\n\n- LREM [key] [count] [v]:删除指定列表中指定的count个v\n\n- LTRIM [key] [start] [end]: 从start开始删除到end为止\n\n- rpoplpush [source] [destination]: 移除source的最后一项 并插入到destination的第一项\n\n- lset [key] [index] [value] : 用value替换指定下标的值\n\n- linsert [key] [before/after] [value1] [value2]: 在value1前/后插入value2\n\n# Set\n- SMEMBERS [key] :查看set中数据集合\n\n- sadd [key] [...v]:添加多个值，去重复的\n\n- scard [key] :查看元素中的数量\n\n- SREM [key] [v] :删除指定集合中的指定的值\n\n- srandmember [key] [count]: 随机生成count个整数\n\n- spop [key]:随机删除一个\n\n- smove [key1] [key2] [v] :将set集合key1中的v移到key2中\n\n- sdiff [key1] [key2]: 查询key1中有，key2中没有的\n\n- sinter [key1] [key2]: 查询两个中都有的\n\n- sunion [key1] [key2]：查询两个的去重后的合并集合\n\n# Hash => K/V模式不变，V是一个键值对\n\n- hget [key] [vKey]:查询key中v的值\n\n- hmget [key] [...vKey]: 一次查询多个\n\n- hset [key] [vKey] [value]：设置key中v的值为value,例:hset user id 1\n\n- hmset [key] [...[vKey] [value]]: 一次设置多个，例:hmset user name xxg age 28 id\n\n- HGETALL [key] :查询key中所有的键值对，得到数组['属性','值']形式\n\n- hdel [key] [...vKey] :删除多个指定的vKey\n\n- hlen [key] :查询指定key中的数量\n\n- hexists [key] [vKey]:判断key里面是否存在某个值的key\n\n- HKEYS [key] : 查看指定key中所有的值的key\n\n- hvals [key] : 查看指定key中所有的值\n\n- HINCRYBY/HINCRYBYFLOAT [key] [vKey] [v] :给指定key增加指定的整数/小数\n\n- hsetnx [key] [vKey] [value]：设置值，如果不存在\n\n# Zset \n\n卧槽，实在不想写了，参考: http://redisdoc.com/sorted_set/index.html","slug":"redis/02-cmd","published":1,"updated":"2020-12-28T00:55:28.072Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6v2001hd8v84vf44oyx","content":"<p>redis-cli基础</p>\n<a id=\"more\"></a>\n\n<ul>\n<li>参考文档:<a href=\"http://redisdoc.com/\">http://redisdoc.com/</a></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">命令</th>\n<th align=\"left\">说明</th>\n<th align=\"left\">参数说明</th>\n<th align=\"left\">案例</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">redis-cli -h [host] -p [port] -a [password]</td>\n<td align=\"left\">通过redis-cli连接redis</td>\n<td align=\"left\">host:地址<br>port:端口号,默认为6379<br> password:密码</td>\n<td align=\"left\">redis-cli -h localhost -p 7379 -a test</td>\n</tr>\n<tr>\n<td align=\"left\">ping</td>\n<td align=\"left\">测试是否通</td>\n<td align=\"left\">如果返回pong，表示通了</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">FLUSHALL</td>\n<td align=\"left\">清空所有db</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">FLUSHDB</td>\n<td align=\"left\">清空当前db</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">select [index]</td>\n<td align=\"left\">切换到第几个db</td>\n<td align=\"left\">index：从0开始的db下标</td>\n<td align=\"left\">select 0</td>\n</tr>\n<tr>\n<td align=\"left\">DBSIZE</td>\n<td align=\"left\">显示当前db中的key个数</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">keys [pattern]</td>\n<td align=\"left\">显示当前db中的所有key</td>\n<td align=\"left\">pattern：匹配符(如：？)</td>\n<td align=\"left\">keys *</td>\n</tr>\n<tr>\n<td align=\"left\">get [key]</td>\n<td align=\"left\">查询指定key的值</td>\n<td align=\"left\">key:键名</td>\n<td align=\"left\">get name</td>\n</tr>\n<tr>\n<td align=\"left\">del [key]</td>\n<td align=\"left\">删除指定key的值</td>\n<td align=\"left\">key:键名</td>\n<td align=\"left\">del name</td>\n</tr>\n<tr>\n<td align=\"left\">EXISTS [key]</td>\n<td align=\"left\">判断是否存在指定的key</td>\n<td align=\"left\">key:键名</td>\n<td align=\"left\">EXISTS name</td>\n</tr>\n<tr>\n<td align=\"left\">move [key] [db]</td>\n<td align=\"left\">移动指定的key到指定的db</td>\n<td align=\"left\">key:键名<br> db:db下标</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">ttl [key]</td>\n<td align=\"left\">查看过期时间</td>\n<td align=\"left\">key:键名,返回值(-1:永不过期 -2:已过期，会移除)</td>\n<td align=\"left\">ttl name</td>\n</tr>\n<tr>\n<td align=\"left\">EXPIRE [key] [time]</td>\n<td align=\"left\">设置带过期时间的键值</td>\n<td align=\"left\">key:键名<br>time:过期时间(秒)<br></td>\n<td align=\"left\">EXPIRE name 10</td>\n</tr>\n<tr>\n<td align=\"left\">type [key]</td>\n<td align=\"left\">查看指定key的数据类型</td>\n<td align=\"left\">key:键名</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<h1 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h1><ul>\n<li><p>append [key]:追加   </p>\n</li>\n<li><p>STRLEN [key]:字符串长度</p>\n</li>\n<li><p>INCR [key]:数值增加 </p>\n</li>\n<li><p>INCRBY [key] v:数值增加v</p>\n</li>\n<li><p>DECR [key] :数值减少</p>\n</li>\n<li><p>DECRBY [key] v:数值减少v</p>\n</li>\n<li><p>GETRANGE [key] [start] [end]:字符串截取</p>\n</li>\n<li><p>SETRANGE [key] [start] [end]:字符串截取</p>\n</li>\n<li><p>setnx [key] [v]: 如果不存在才设置</p>\n</li>\n<li><p>msetnx [key] […v] : 设置多个</p>\n</li>\n</ul>\n<h1 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h1><ul>\n<li><p>LPUSH [key] […v] :依次往左边插入多个</p>\n</li>\n<li><p>RPUSH [key] […v] :依次往右边插入多个</p>\n</li>\n<li><p>LRANGE [key] [start] [end] :列出多个</p>\n</li>\n<li><p>lpop [key] :删除第一个</p>\n</li>\n<li><p>rpop [key] :删除第一个</p>\n</li>\n<li><p>LINDEX [key] [index] :查看指定下标的值</p>\n</li>\n<li><p>LLEN [key] :查看list长度</p>\n</li>\n<li><p>LREM [key] [count] [v]:删除指定列表中指定的count个v</p>\n</li>\n<li><p>LTRIM [key] [start] [end]: 从start开始删除到end为止</p>\n</li>\n<li><p>rpoplpush [source] [destination]: 移除source的最后一项 并插入到destination的第一项</p>\n</li>\n<li><p>lset [key] [index] [value] : 用value替换指定下标的值</p>\n</li>\n<li><p>linsert [key] [before/after] [value1] [value2]: 在value1前/后插入value2</p>\n</li>\n</ul>\n<h1 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h1><ul>\n<li><p>SMEMBERS [key] :查看set中数据集合</p>\n</li>\n<li><p>sadd [key] […v]:添加多个值，去重复的</p>\n</li>\n<li><p>scard [key] :查看元素中的数量</p>\n</li>\n<li><p>SREM [key] [v] :删除指定集合中的指定的值</p>\n</li>\n<li><p>srandmember [key] [count]: 随机生成count个整数</p>\n</li>\n<li><p>spop [key]:随机删除一个</p>\n</li>\n<li><p>smove [key1] [key2] [v] :将set集合key1中的v移到key2中</p>\n</li>\n<li><p>sdiff [key1] [key2]: 查询key1中有，key2中没有的</p>\n</li>\n<li><p>sinter [key1] [key2]: 查询两个中都有的</p>\n</li>\n<li><p>sunion [key1] [key2]：查询两个的去重后的合并集合</p>\n</li>\n</ul>\n<h1 id=\"Hash-gt-K-V模式不变，V是一个键值对\"><a href=\"#Hash-gt-K-V模式不变，V是一个键值对\" class=\"headerlink\" title=\"Hash =&gt; K/V模式不变，V是一个键值对\"></a>Hash =&gt; K/V模式不变，V是一个键值对</h1><ul>\n<li><p>hget [key] [vKey]:查询key中v的值</p>\n</li>\n<li><p>hmget [key] […vKey]: 一次查询多个</p>\n</li>\n<li><p>hset [key] [vKey] [value]：设置key中v的值为value,例:hset user id 1</p>\n</li>\n<li><p>hmset [key] […[vKey] [value]]: 一次设置多个，例:hmset user name xxg age 28 id</p>\n</li>\n<li><p>HGETALL [key] :查询key中所有的键值对，得到数组[‘属性’,’值’]形式</p>\n</li>\n<li><p>hdel [key] […vKey] :删除多个指定的vKey</p>\n</li>\n<li><p>hlen [key] :查询指定key中的数量</p>\n</li>\n<li><p>hexists [key] [vKey]:判断key里面是否存在某个值的key</p>\n</li>\n<li><p>HKEYS [key] : 查看指定key中所有的值的key</p>\n</li>\n<li><p>hvals [key] : 查看指定key中所有的值</p>\n</li>\n<li><p>HINCRYBY/HINCRYBYFLOAT [key] [vKey] [v] :给指定key增加指定的整数/小数</p>\n</li>\n<li><p>hsetnx [key] [vKey] [value]：设置值，如果不存在</p>\n</li>\n</ul>\n<h1 id=\"Zset\"><a href=\"#Zset\" class=\"headerlink\" title=\"Zset\"></a>Zset</h1><p>卧槽，实在不想写了，参考: <a href=\"http://redisdoc.com/sorted_set/index.html\">http://redisdoc.com/sorted_set/index.html</a></p>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>redis-cli基础</p>","more":"<ul>\n<li>参考文档:<a href=\"http://redisdoc.com/\">http://redisdoc.com/</a></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">命令</th>\n<th align=\"left\">说明</th>\n<th align=\"left\">参数说明</th>\n<th align=\"left\">案例</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">redis-cli -h [host] -p [port] -a [password]</td>\n<td align=\"left\">通过redis-cli连接redis</td>\n<td align=\"left\">host:地址<br>port:端口号,默认为6379<br> password:密码</td>\n<td align=\"left\">redis-cli -h localhost -p 7379 -a test</td>\n</tr>\n<tr>\n<td align=\"left\">ping</td>\n<td align=\"left\">测试是否通</td>\n<td align=\"left\">如果返回pong，表示通了</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">FLUSHALL</td>\n<td align=\"left\">清空所有db</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">FLUSHDB</td>\n<td align=\"left\">清空当前db</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">select [index]</td>\n<td align=\"left\">切换到第几个db</td>\n<td align=\"left\">index：从0开始的db下标</td>\n<td align=\"left\">select 0</td>\n</tr>\n<tr>\n<td align=\"left\">DBSIZE</td>\n<td align=\"left\">显示当前db中的key个数</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">keys [pattern]</td>\n<td align=\"left\">显示当前db中的所有key</td>\n<td align=\"left\">pattern：匹配符(如：？)</td>\n<td align=\"left\">keys *</td>\n</tr>\n<tr>\n<td align=\"left\">get [key]</td>\n<td align=\"left\">查询指定key的值</td>\n<td align=\"left\">key:键名</td>\n<td align=\"left\">get name</td>\n</tr>\n<tr>\n<td align=\"left\">del [key]</td>\n<td align=\"left\">删除指定key的值</td>\n<td align=\"left\">key:键名</td>\n<td align=\"left\">del name</td>\n</tr>\n<tr>\n<td align=\"left\">EXISTS [key]</td>\n<td align=\"left\">判断是否存在指定的key</td>\n<td align=\"left\">key:键名</td>\n<td align=\"left\">EXISTS name</td>\n</tr>\n<tr>\n<td align=\"left\">move [key] [db]</td>\n<td align=\"left\">移动指定的key到指定的db</td>\n<td align=\"left\">key:键名<br> db:db下标</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">ttl [key]</td>\n<td align=\"left\">查看过期时间</td>\n<td align=\"left\">key:键名,返回值(-1:永不过期 -2:已过期，会移除)</td>\n<td align=\"left\">ttl name</td>\n</tr>\n<tr>\n<td align=\"left\">EXPIRE [key] [time]</td>\n<td align=\"left\">设置带过期时间的键值</td>\n<td align=\"left\">key:键名<br>time:过期时间(秒)<br></td>\n<td align=\"left\">EXPIRE name 10</td>\n</tr>\n<tr>\n<td align=\"left\">type [key]</td>\n<td align=\"left\">查看指定key的数据类型</td>\n<td align=\"left\">key:键名</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<h1 id=\"String\"><a href=\"#String\" class=\"headerlink\" title=\"String\"></a>String</h1><ul>\n<li><p>append [key]:追加   </p>\n</li>\n<li><p>STRLEN [key]:字符串长度</p>\n</li>\n<li><p>INCR [key]:数值增加 </p>\n</li>\n<li><p>INCRBY [key] v:数值增加v</p>\n</li>\n<li><p>DECR [key] :数值减少</p>\n</li>\n<li><p>DECRBY [key] v:数值减少v</p>\n</li>\n<li><p>GETRANGE [key] [start] [end]:字符串截取</p>\n</li>\n<li><p>SETRANGE [key] [start] [end]:字符串截取</p>\n</li>\n<li><p>setnx [key] [v]: 如果不存在才设置</p>\n</li>\n<li><p>msetnx [key] […v] : 设置多个</p>\n</li>\n</ul>\n<h1 id=\"List\"><a href=\"#List\" class=\"headerlink\" title=\"List\"></a>List</h1><ul>\n<li><p>LPUSH [key] […v] :依次往左边插入多个</p>\n</li>\n<li><p>RPUSH [key] […v] :依次往右边插入多个</p>\n</li>\n<li><p>LRANGE [key] [start] [end] :列出多个</p>\n</li>\n<li><p>lpop [key] :删除第一个</p>\n</li>\n<li><p>rpop [key] :删除第一个</p>\n</li>\n<li><p>LINDEX [key] [index] :查看指定下标的值</p>\n</li>\n<li><p>LLEN [key] :查看list长度</p>\n</li>\n<li><p>LREM [key] [count] [v]:删除指定列表中指定的count个v</p>\n</li>\n<li><p>LTRIM [key] [start] [end]: 从start开始删除到end为止</p>\n</li>\n<li><p>rpoplpush [source] [destination]: 移除source的最后一项 并插入到destination的第一项</p>\n</li>\n<li><p>lset [key] [index] [value] : 用value替换指定下标的值</p>\n</li>\n<li><p>linsert [key] [before/after] [value1] [value2]: 在value1前/后插入value2</p>\n</li>\n</ul>\n<h1 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h1><ul>\n<li><p>SMEMBERS [key] :查看set中数据集合</p>\n</li>\n<li><p>sadd [key] […v]:添加多个值，去重复的</p>\n</li>\n<li><p>scard [key] :查看元素中的数量</p>\n</li>\n<li><p>SREM [key] [v] :删除指定集合中的指定的值</p>\n</li>\n<li><p>srandmember [key] [count]: 随机生成count个整数</p>\n</li>\n<li><p>spop [key]:随机删除一个</p>\n</li>\n<li><p>smove [key1] [key2] [v] :将set集合key1中的v移到key2中</p>\n</li>\n<li><p>sdiff [key1] [key2]: 查询key1中有，key2中没有的</p>\n</li>\n<li><p>sinter [key1] [key2]: 查询两个中都有的</p>\n</li>\n<li><p>sunion [key1] [key2]：查询两个的去重后的合并集合</p>\n</li>\n</ul>\n<h1 id=\"Hash-gt-K-V模式不变，V是一个键值对\"><a href=\"#Hash-gt-K-V模式不变，V是一个键值对\" class=\"headerlink\" title=\"Hash =&gt; K/V模式不变，V是一个键值对\"></a>Hash =&gt; K/V模式不变，V是一个键值对</h1><ul>\n<li><p>hget [key] [vKey]:查询key中v的值</p>\n</li>\n<li><p>hmget [key] […vKey]: 一次查询多个</p>\n</li>\n<li><p>hset [key] [vKey] [value]：设置key中v的值为value,例:hset user id 1</p>\n</li>\n<li><p>hmset [key] […[vKey] [value]]: 一次设置多个，例:hmset user name xxg age 28 id</p>\n</li>\n<li><p>HGETALL [key] :查询key中所有的键值对，得到数组[‘属性’,’值’]形式</p>\n</li>\n<li><p>hdel [key] […vKey] :删除多个指定的vKey</p>\n</li>\n<li><p>hlen [key] :查询指定key中的数量</p>\n</li>\n<li><p>hexists [key] [vKey]:判断key里面是否存在某个值的key</p>\n</li>\n<li><p>HKEYS [key] : 查看指定key中所有的值的key</p>\n</li>\n<li><p>hvals [key] : 查看指定key中所有的值</p>\n</li>\n<li><p>HINCRYBY/HINCRYBYFLOAT [key] [vKey] [v] :给指定key增加指定的整数/小数</p>\n</li>\n<li><p>hsetnx [key] [vKey] [value]：设置值，如果不存在</p>\n</li>\n</ul>\n<h1 id=\"Zset\"><a href=\"#Zset\" class=\"headerlink\" title=\"Zset\"></a>Zset</h1><p>卧槽，实在不想写了，参考: <a href=\"http://redisdoc.com/sorted_set/index.html\">http://redisdoc.com/sorted_set/index.html</a></p>"},{"title":"Openssl生成免费证书","abbrlink":31096,"date":"2018-05-16T01:10:10.000Z","_content":"\n使用Openssl生成免费证书\n<!-- more -->\n\n> 官网地址 openssl的windows官网: https://slproweb.com/products/Win32OpenSSL.html  \n1. 下载安装\n2. 在自己目录下运行 \n    ``` bash\n    openssl req -newkey rsa:2048 -nodes -keyout socialnetwork.key -x509 -days 365 -out socialnetwork.cer\n    ```\n3. 生成pfx文件命令\n    ``` bash\n    openssl pkcs12 -export -in socialnetwork.cer -inkey socialnetwork.key -out socialnetwork.pfx\n    ```","source":"_posts/tools/cer.md","raw":"---\ntitle: Openssl生成免费证书\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 31096\ndate: 2018-05-16 09:10:10\n---\n\n使用Openssl生成免费证书\n<!-- more -->\n\n> 官网地址 openssl的windows官网: https://slproweb.com/products/Win32OpenSSL.html  \n1. 下载安装\n2. 在自己目录下运行 \n    ``` bash\n    openssl req -newkey rsa:2048 -nodes -keyout socialnetwork.key -x509 -days 365 -out socialnetwork.cer\n    ```\n3. 生成pfx文件命令\n    ``` bash\n    openssl pkcs12 -export -in socialnetwork.cer -inkey socialnetwork.key -out socialnetwork.pfx\n    ```","slug":"tools/cer","published":1,"updated":"2020-12-29T01:15:00.445Z","_id":"ckj9at6v9001md8v8hugj3m7x","comments":1,"layout":"post","photos":[],"link":""},{"title":"优质文章收集(持续更新中...)","abbrlink":28144,"date":"2019-04-26T01:10:10.000Z","_content":"\n各大优质文章收集(持续更新中...)\n<!-- more -->\n\n\n#### 前端 \n[可能是最全的前端动效库汇总](https://juejin.im/post/5cc089eae51d456e7d189f9d)\n\n[常用前端库](https://github.com/sorrycc/awesome-f2e-libs)\n\n[awesome-tools](https://github.com/sorrycc/awesome-tools)\n\n[前端工程化-5:你所需要的npm知识储备都在这了](https://juejin.im/post/5d08d3d3f265da1b7e103a4d?utm_source=gold_browser_extension)\n\n[正则相关](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)\n\n[flex布局-语法篇](http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html)、[flex布局-实战篇](http://www.ruanyifeng.com/blog/2015/07/flex-examples.html)  \n[ES6](https://juejin.im/post/5d9bf530518825427b27639d)\n\n\n#### Chrome插件开发\n[chrome插件开发](https://github.com/sxei/chrome-plugin-demo)\n\n[博客文章](http://www.cnblogs.com/champagne/p/?page=2)\n\n[官方资料](https://zjcqoo.github.io/-----https://developer.chrome.com/extensions)\n\n#### 其他\nNAS 私有文件服务器","source":"_posts/tools/articleCollections.md","raw":"---\ntitle: 优质文章收集(持续更新中...)\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 28144\ndate: 2019-04-26 09:10:10\n---\n\n各大优质文章收集(持续更新中...)\n<!-- more -->\n\n\n#### 前端 \n[可能是最全的前端动效库汇总](https://juejin.im/post/5cc089eae51d456e7d189f9d)\n\n[常用前端库](https://github.com/sorrycc/awesome-f2e-libs)\n\n[awesome-tools](https://github.com/sorrycc/awesome-tools)\n\n[前端工程化-5:你所需要的npm知识储备都在这了](https://juejin.im/post/5d08d3d3f265da1b7e103a4d?utm_source=gold_browser_extension)\n\n[正则相关](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)\n\n[flex布局-语法篇](http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html)、[flex布局-实战篇](http://www.ruanyifeng.com/blog/2015/07/flex-examples.html)  \n[ES6](https://juejin.im/post/5d9bf530518825427b27639d)\n\n\n#### Chrome插件开发\n[chrome插件开发](https://github.com/sxei/chrome-plugin-demo)\n\n[博客文章](http://www.cnblogs.com/champagne/p/?page=2)\n\n[官方资料](https://zjcqoo.github.io/-----https://developer.chrome.com/extensions)\n\n#### 其他\nNAS 私有文件服务器","slug":"tools/articleCollections","published":1,"updated":"2020-12-28T00:55:28.073Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6vb001od8v83wgpfs2h","content":"<p>各大优质文章收集(持续更新中…)</p>\n<a id=\"more\"></a>\n\n\n<h4 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h4><p><a href=\"https://juejin.im/post/5cc089eae51d456e7d189f9d\">可能是最全的前端动效库汇总</a></p>\n<p><a href=\"https://github.com/sorrycc/awesome-f2e-libs\">常用前端库</a></p>\n<p><a href=\"https://github.com/sorrycc/awesome-tools\">awesome-tools</a></p>\n<p><a href=\"https://juejin.im/post/5d08d3d3f265da1b7e103a4d?utm_source=gold_browser_extension\">前端工程化-5:你所需要的npm知识储备都在这了</a></p>\n<p><a href=\"https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md\">正则相关</a></p>\n<p><a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html\">flex布局-语法篇</a>、<a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-examples.html\">flex布局-实战篇</a><br><a href=\"https://juejin.im/post/5d9bf530518825427b27639d\">ES6</a></p>\n<h4 id=\"Chrome插件开发\"><a href=\"#Chrome插件开发\" class=\"headerlink\" title=\"Chrome插件开发\"></a>Chrome插件开发</h4><p><a href=\"https://github.com/sxei/chrome-plugin-demo\">chrome插件开发</a></p>\n<p><a href=\"http://www.cnblogs.com/champagne/p/?page=2\">博客文章</a></p>\n<p><a href=\"https://zjcqoo.github.io/-----https://developer.chrome.com/extensions\">官方资料</a></p>\n<h4 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h4><p>NAS 私有文件服务器</p>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>各大优质文章收集(持续更新中…)</p>","more":"<h4 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h4><p><a href=\"https://juejin.im/post/5cc089eae51d456e7d189f9d\">可能是最全的前端动效库汇总</a></p>\n<p><a href=\"https://github.com/sorrycc/awesome-f2e-libs\">常用前端库</a></p>\n<p><a href=\"https://github.com/sorrycc/awesome-tools\">awesome-tools</a></p>\n<p><a href=\"https://juejin.im/post/5d08d3d3f265da1b7e103a4d?utm_source=gold_browser_extension\">前端工程化-5:你所需要的npm知识储备都在这了</a></p>\n<p><a href=\"https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md\">正则相关</a></p>\n<p><a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html\">flex布局-语法篇</a>、<a href=\"http://www.ruanyifeng.com/blog/2015/07/flex-examples.html\">flex布局-实战篇</a><br><a href=\"https://juejin.im/post/5d9bf530518825427b27639d\">ES6</a></p>\n<h4 id=\"Chrome插件开发\"><a href=\"#Chrome插件开发\" class=\"headerlink\" title=\"Chrome插件开发\"></a>Chrome插件开发</h4><p><a href=\"https://github.com/sxei/chrome-plugin-demo\">chrome插件开发</a></p>\n<p><a href=\"http://www.cnblogs.com/champagne/p/?page=2\">博客文章</a></p>\n<p><a href=\"https://zjcqoo.github.io/-----https://developer.chrome.com/extensions\">官方资料</a></p>\n<h4 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h4><p>NAS 私有文件服务器</p>"},{"title":"资料收集(持续更新中...)","abbrlink":28144,"date":"2018-09-13T01:10:10.000Z","_content":"\n各大组件、工具收藏夹(持续更新中...)\n<!-- more -->\n\n\n## 后端 \n| 类型 | 推荐组件\n| :--- | :--- \n|爬虫 |[puppeteer](https://github.com/GoogleChrome/puppeteer)、[puppeteer-sharp](https://github.com/kblok/puppeteer-sharp)、[DotnetSpide](https://github.com/dotnetcore/DotnetSpider)、[Hawk](https://github.com/ferventdesert/Hawk)\n|工业物联网 | [HslCommunication](https://github.com/dathlin/HslCommunication)\n|斗地主| [FightLandlord](https://github.com/2881099/FightLandlord)\n|规则引擎| [NRules](https://github.com/NRules/NRules)\n|机器人|[BotDemo](https://github.com/leonlj/BotDemo)\n|定时任务|[quartzui](https://github.com/zhaopeiym/quartzui)、[Topshelf](https://github.com/Topshelf/Topshelf)\n|机器学| [machinelearning](https://github.com/dotnet/machinelearning)\n|导出pdf|[jsPDF](https://github.com/MrRio/jsPDF)、[wkhtmltopdf](https://github.com/wkhtmltopdf/wkhtmltopdf)、[itextsharp](https://github.com/itext/itextsharp)\n|redis桌面管理器|[RedisPlus](https://gitee.com/MaxBill/RedisPlus)\n|host切换工具|[SwitchHosts](https://github.com/oldj/SwitchHosts)\n|异常收集框架 | [Exceptionless](https://github.com/exceptionless/Exceptionless)\n|容器监管|[portainer](https://github.com/portainer/portainer)\n\n## 工具\n| 类型 | 推荐组件\n| :--- | :--- \n|redis桌面管理器|[RedisPlus](https://gitee.com/MaxBill/RedisPlus)\n|host切换工具|[SwitchHosts](https://github.com/oldj/SwitchHosts)\n\n## 纯前端库\n| 类型 | 推荐组件\n| :--- | :--- \n|数字转大写|[nzh](https://github.com/cnwhy/nzh)\n|js帮助库|[lodash](https://github.com/lodash/lodash)\n|时区|[moment](https://github.com/moment/moment)\n|3D动画|[Three.js](https://github.com/mrdoob/three.js)\n|动画|[Anime.js](https://github.com/juliangarnier/anime)、[GreenSock](https://github.com/greensock/GreenSock-JS)\n|打字机|[ityped](https://github.com/luisvinicius167/ityped)\n|悬停效果|[Hover](https://github.com/IanLunn/Hover)\n|快捷键|[hotkeys](https://github.com/jaywcjlove/hotkeys)\n|拖拽|[react-dnd](https://github.com/react-dnd/react-dnd)、[react-beautiful-dnd](https://github.com/atlassian/react-beautiful-dnd)|\n\n## 推荐.neter常用优秀开源项目\n- Domain-Driven-Design-Example  \nDDD 示例 挺不错的.  \n[github https://github.com/zkavtaskin/Domain-Driven-Design-Example](https://github.com/zkavtaskin/Domain-Driven-Design-Example)\n\n- SmartStoreNET\n开源的电商项目  \n[github https://github.com/smartstore/SmartStoreNET](https://github.com/smartstore/SmartStoreNET)\n\n- abp  \nABP框架全称为“ASP.NET Boilerplate Project”，中文翻译为“ ASP.NET样板项目”，ABP是一个开源应用程序框架,专注于基于ASP.NET Core 的Web应用程序开发,但也支持开发其他类型的应用程序  \n[github https://github.com/abpframework/abp](https://github.com/abpframework/abp)\n\n- grpc  \ngRPC 是一个由Google开源的，跨语言的，高性能的远程过程调用（RPC）框架。gRPC使客户端和服务端应用程序可以透明地进行通信，并简化了连接系统的构建。它使用HTTP/2作为通信协议，使用 Protocol Buffers 作为序列化协议。并且微软官方 ASP.NET 项目的人员进行维护，良好的接入 .NET Core 生态  \n[github https://github.com/grpc/grpc-dotnet](https://github.com/grpc/grpc-dotnet)\n\n- Autofac  \nIOC容器  \n[github https://github.com/autofac/Autofac](https://github.com/autofac/Autofac)\n\n- Hangfire  \n非常容易地在.NET或者.NETcore应用程序中执行后台任务，无需windows服务或者单独的进程。且任务信息可以被持久保存。  \n[github https://github.com/HangfireIO/Hangfire](https://github.com/HangfireIO/Hangfire)\n\n- quartz  \n任务调度  \n[github https://github.com/quartznet/quartznet](https://github.com/quartznet/quartznet)\n\n- polly\nPolly 是一个 .NET 弹性和瞬态故障处理库，允许开发人员以 Fluent 和线程安全的方式来实现重试、断路、超时、隔离和回退策略。  \n[github https://github.com/App-vNext/Polly](https://github.com/App-vNext/Polly)  \n\n- redis 命令\n《Redis Command Reference》全文的中文翻译版。 http://RedisDoc.com  \n[github https://github.com/huangz1990/redis](https://github.com/huangz1990/redis)  \n\n- orleans\n一种构建分布式、 高规模（伸缩）的应用程序， 奥尔良是一个框架，提供一个简单的方法来构建分布式的高规模计算应用程序，而无需了解并应用复杂并发或其他伸缩模式。它是由微软研究院创建和设计在云计算中使用。  \n[github https://github.com/dotnet/orleans](https://github.com/dotnet/orleans)  \n\n- rabbitmq-dotnet-client\nrabbitmq 客户端类库  \n[github https://github.com/rabbitmq/rabbitmq-dotnet-client](https://github.com/rabbitmq/rabbitmq-dotnet-client)  \n\n- AutoMapper\n将一个对象映射到另一个对象的代码。摆脱了繁琐的赋值过程  \n[github https://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)  \n\n## 程序员一般可以从什么平台接私活\n\n### 国内\n- 程序员客栈：https://www.proginn.com\n程序员客栈中国非常领先的自由工作平台，为中高端程序员、产品经理和设计师等等互联网相关人员提供稳定的线上工作机会，包括自由工作、远程工作和兼职工作，还支持按需雇佣，工作模式非常多，感兴趣的推荐大家尝试一下。\n虽然名称叫程序员客栈，但是除了程序员，像产品经理，设计师等等互联网相关人员，都能在上面找到适合自己的项目。感兴趣的可以体验一下  \n[https://www.proginn.com](https://www.proginn.com)\n\n- CODING 码市：https://mart.coding.net  \nCoding 旗下的互联网软件外包服务平台，平台以外包为主。\n\n- 开源众包：zb.oschina.net/projects  \n开源中国的众包平台，主要是以众包为主。\n\n- 猪八戒：https://zbj.com  \n找兼职的地方，主要是入门级项目，不适合专业程序员，只适合新手。\n\n- 英选：linktion.cn  \n平台以定制开发外包服务为主，也是外包项目平台。\n\n- 快码众包：kuaima.co  \n\n- 码易众包平台：mayigeek.com  \n\n-  一早一晚平台：yizaoyiwan.com/  \n\n- 开发邦：http://www.kaifabang.com  \n\n- 人人开发：rrkf.com  \n\n- 厘米脚印：http://www.limijiaoyin.com  \n\n- Sxsoft：https://www.sxsoft.com/  \n\n- 猿急送：https://www.yuanjisong.com/\n\n-  实现网传送门：shixian.com/\n\n- 智城外包网：http://www.taskcity.com/\n\n### 国外\n- Upwork：https://www.upwork.com/  \nUpwork 是全球最大的、最优秀的、最规范的综合类人力外包服务平台，由著名的 Elance 和 oDesk 合并。这里聚集 900 万来自全球各地的自由工作者，你肯定可以在找到适合你的职位  \n\n- Freelancer：https://www.freelance.com/\n工作类型覆盖了很多不同的领域，由程序开发到市场营销、广告、会计、法务等一系列的可以远程的工作  \n\n- Dribbble：https://dribbble.com/jobs  \n你没看错，Dribbble 不只是全球最受欢迎的设计师社区，同样是设计师寻找远程工作的好出处。自从被 Tiny 收购后，Dribbble 的招聘属性正在慢慢增强，试着持续 PO 出自己的好作品，等待你的伯乐，同样你可以关注 Jobs 页面，给心仪的 Team 提交简历  \n\n- Stackoverflow：https://stackoverflow.com/jobs  \n被广大程序员熟知的 Stackoverflow 本身就是一个全民远程工作的公司，程序员在远程工作中有很大的先天优势，Stackoverflow Jobs 里有远程职位的筛选，这里有丰富的远程技术职位  \n\n- 99designs：https://99designs.com/  \n99designs 是一个专门针对设计师的雇佣平台，你可以在这里参加设计竞赛给公开的项目投标，也可以给雇主提供一对一的专业服务  \n\n- Remoteok：https://remoteok.io/  \nRemoteok 不仅提供最初的兼职类远程工作，还有全职类，签署合同类和实习类的工作。网站创始人 Pieter Levels 本身就是一名数字游民，他同样是 Nomadlist 的创始人  \n\n- Toptal：https://www.toptal.com/  \nToptal 是一个高端一些的自由职业者平台，适合比较有经验和工作尽力的远程工作者。它将企业与全球的软件工程师，设计师和业务顾问联系起来  \n\n- Ange：https://angel.co/job-collections/remote  \nAngelList 主要是服务于初创公司和天使投资人的平台，这里还有初创公司提供的远程工作的机会，如果对远程加入初创公司感兴趣的，可以尝试一下  \n\n- Topcoder：https://www.topcoder.com/  \nTopcoder 通过算法比赛吸引世界顶级的程序员，他会将一下大型项目分割成很多小模块，通过竞赛的模式交给用户来做，优胜者可以拿到制定模块的奖金  \n\n> [react相关](/2018/12/10/front/react/components)\n\n\n","source":"_posts/tools/collections.md","raw":"---\ntitle: 资料收集(持续更新中...)\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 28144\ndate: 2018-09-13 09:10:10\n---\n\n各大组件、工具收藏夹(持续更新中...)\n<!-- more -->\n\n\n## 后端 \n| 类型 | 推荐组件\n| :--- | :--- \n|爬虫 |[puppeteer](https://github.com/GoogleChrome/puppeteer)、[puppeteer-sharp](https://github.com/kblok/puppeteer-sharp)、[DotnetSpide](https://github.com/dotnetcore/DotnetSpider)、[Hawk](https://github.com/ferventdesert/Hawk)\n|工业物联网 | [HslCommunication](https://github.com/dathlin/HslCommunication)\n|斗地主| [FightLandlord](https://github.com/2881099/FightLandlord)\n|规则引擎| [NRules](https://github.com/NRules/NRules)\n|机器人|[BotDemo](https://github.com/leonlj/BotDemo)\n|定时任务|[quartzui](https://github.com/zhaopeiym/quartzui)、[Topshelf](https://github.com/Topshelf/Topshelf)\n|机器学| [machinelearning](https://github.com/dotnet/machinelearning)\n|导出pdf|[jsPDF](https://github.com/MrRio/jsPDF)、[wkhtmltopdf](https://github.com/wkhtmltopdf/wkhtmltopdf)、[itextsharp](https://github.com/itext/itextsharp)\n|redis桌面管理器|[RedisPlus](https://gitee.com/MaxBill/RedisPlus)\n|host切换工具|[SwitchHosts](https://github.com/oldj/SwitchHosts)\n|异常收集框架 | [Exceptionless](https://github.com/exceptionless/Exceptionless)\n|容器监管|[portainer](https://github.com/portainer/portainer)\n\n## 工具\n| 类型 | 推荐组件\n| :--- | :--- \n|redis桌面管理器|[RedisPlus](https://gitee.com/MaxBill/RedisPlus)\n|host切换工具|[SwitchHosts](https://github.com/oldj/SwitchHosts)\n\n## 纯前端库\n| 类型 | 推荐组件\n| :--- | :--- \n|数字转大写|[nzh](https://github.com/cnwhy/nzh)\n|js帮助库|[lodash](https://github.com/lodash/lodash)\n|时区|[moment](https://github.com/moment/moment)\n|3D动画|[Three.js](https://github.com/mrdoob/three.js)\n|动画|[Anime.js](https://github.com/juliangarnier/anime)、[GreenSock](https://github.com/greensock/GreenSock-JS)\n|打字机|[ityped](https://github.com/luisvinicius167/ityped)\n|悬停效果|[Hover](https://github.com/IanLunn/Hover)\n|快捷键|[hotkeys](https://github.com/jaywcjlove/hotkeys)\n|拖拽|[react-dnd](https://github.com/react-dnd/react-dnd)、[react-beautiful-dnd](https://github.com/atlassian/react-beautiful-dnd)|\n\n## 推荐.neter常用优秀开源项目\n- Domain-Driven-Design-Example  \nDDD 示例 挺不错的.  \n[github https://github.com/zkavtaskin/Domain-Driven-Design-Example](https://github.com/zkavtaskin/Domain-Driven-Design-Example)\n\n- SmartStoreNET\n开源的电商项目  \n[github https://github.com/smartstore/SmartStoreNET](https://github.com/smartstore/SmartStoreNET)\n\n- abp  \nABP框架全称为“ASP.NET Boilerplate Project”，中文翻译为“ ASP.NET样板项目”，ABP是一个开源应用程序框架,专注于基于ASP.NET Core 的Web应用程序开发,但也支持开发其他类型的应用程序  \n[github https://github.com/abpframework/abp](https://github.com/abpframework/abp)\n\n- grpc  \ngRPC 是一个由Google开源的，跨语言的，高性能的远程过程调用（RPC）框架。gRPC使客户端和服务端应用程序可以透明地进行通信，并简化了连接系统的构建。它使用HTTP/2作为通信协议，使用 Protocol Buffers 作为序列化协议。并且微软官方 ASP.NET 项目的人员进行维护，良好的接入 .NET Core 生态  \n[github https://github.com/grpc/grpc-dotnet](https://github.com/grpc/grpc-dotnet)\n\n- Autofac  \nIOC容器  \n[github https://github.com/autofac/Autofac](https://github.com/autofac/Autofac)\n\n- Hangfire  \n非常容易地在.NET或者.NETcore应用程序中执行后台任务，无需windows服务或者单独的进程。且任务信息可以被持久保存。  \n[github https://github.com/HangfireIO/Hangfire](https://github.com/HangfireIO/Hangfire)\n\n- quartz  \n任务调度  \n[github https://github.com/quartznet/quartznet](https://github.com/quartznet/quartznet)\n\n- polly\nPolly 是一个 .NET 弹性和瞬态故障处理库，允许开发人员以 Fluent 和线程安全的方式来实现重试、断路、超时、隔离和回退策略。  \n[github https://github.com/App-vNext/Polly](https://github.com/App-vNext/Polly)  \n\n- redis 命令\n《Redis Command Reference》全文的中文翻译版。 http://RedisDoc.com  \n[github https://github.com/huangz1990/redis](https://github.com/huangz1990/redis)  \n\n- orleans\n一种构建分布式、 高规模（伸缩）的应用程序， 奥尔良是一个框架，提供一个简单的方法来构建分布式的高规模计算应用程序，而无需了解并应用复杂并发或其他伸缩模式。它是由微软研究院创建和设计在云计算中使用。  \n[github https://github.com/dotnet/orleans](https://github.com/dotnet/orleans)  \n\n- rabbitmq-dotnet-client\nrabbitmq 客户端类库  \n[github https://github.com/rabbitmq/rabbitmq-dotnet-client](https://github.com/rabbitmq/rabbitmq-dotnet-client)  \n\n- AutoMapper\n将一个对象映射到另一个对象的代码。摆脱了繁琐的赋值过程  \n[github https://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)  \n\n## 程序员一般可以从什么平台接私活\n\n### 国内\n- 程序员客栈：https://www.proginn.com\n程序员客栈中国非常领先的自由工作平台，为中高端程序员、产品经理和设计师等等互联网相关人员提供稳定的线上工作机会，包括自由工作、远程工作和兼职工作，还支持按需雇佣，工作模式非常多，感兴趣的推荐大家尝试一下。\n虽然名称叫程序员客栈，但是除了程序员，像产品经理，设计师等等互联网相关人员，都能在上面找到适合自己的项目。感兴趣的可以体验一下  \n[https://www.proginn.com](https://www.proginn.com)\n\n- CODING 码市：https://mart.coding.net  \nCoding 旗下的互联网软件外包服务平台，平台以外包为主。\n\n- 开源众包：zb.oschina.net/projects  \n开源中国的众包平台，主要是以众包为主。\n\n- 猪八戒：https://zbj.com  \n找兼职的地方，主要是入门级项目，不适合专业程序员，只适合新手。\n\n- 英选：linktion.cn  \n平台以定制开发外包服务为主，也是外包项目平台。\n\n- 快码众包：kuaima.co  \n\n- 码易众包平台：mayigeek.com  \n\n-  一早一晚平台：yizaoyiwan.com/  \n\n- 开发邦：http://www.kaifabang.com  \n\n- 人人开发：rrkf.com  \n\n- 厘米脚印：http://www.limijiaoyin.com  \n\n- Sxsoft：https://www.sxsoft.com/  \n\n- 猿急送：https://www.yuanjisong.com/\n\n-  实现网传送门：shixian.com/\n\n- 智城外包网：http://www.taskcity.com/\n\n### 国外\n- Upwork：https://www.upwork.com/  \nUpwork 是全球最大的、最优秀的、最规范的综合类人力外包服务平台，由著名的 Elance 和 oDesk 合并。这里聚集 900 万来自全球各地的自由工作者，你肯定可以在找到适合你的职位  \n\n- Freelancer：https://www.freelance.com/\n工作类型覆盖了很多不同的领域，由程序开发到市场营销、广告、会计、法务等一系列的可以远程的工作  \n\n- Dribbble：https://dribbble.com/jobs  \n你没看错，Dribbble 不只是全球最受欢迎的设计师社区，同样是设计师寻找远程工作的好出处。自从被 Tiny 收购后，Dribbble 的招聘属性正在慢慢增强，试着持续 PO 出自己的好作品，等待你的伯乐，同样你可以关注 Jobs 页面，给心仪的 Team 提交简历  \n\n- Stackoverflow：https://stackoverflow.com/jobs  \n被广大程序员熟知的 Stackoverflow 本身就是一个全民远程工作的公司，程序员在远程工作中有很大的先天优势，Stackoverflow Jobs 里有远程职位的筛选，这里有丰富的远程技术职位  \n\n- 99designs：https://99designs.com/  \n99designs 是一个专门针对设计师的雇佣平台，你可以在这里参加设计竞赛给公开的项目投标，也可以给雇主提供一对一的专业服务  \n\n- Remoteok：https://remoteok.io/  \nRemoteok 不仅提供最初的兼职类远程工作，还有全职类，签署合同类和实习类的工作。网站创始人 Pieter Levels 本身就是一名数字游民，他同样是 Nomadlist 的创始人  \n\n- Toptal：https://www.toptal.com/  \nToptal 是一个高端一些的自由职业者平台，适合比较有经验和工作尽力的远程工作者。它将企业与全球的软件工程师，设计师和业务顾问联系起来  \n\n- Ange：https://angel.co/job-collections/remote  \nAngelList 主要是服务于初创公司和天使投资人的平台，这里还有初创公司提供的远程工作的机会，如果对远程加入初创公司感兴趣的，可以尝试一下  \n\n- Topcoder：https://www.topcoder.com/  \nTopcoder 通过算法比赛吸引世界顶级的程序员，他会将一下大型项目分割成很多小模块，通过竞赛的模式交给用户来做，优胜者可以拿到制定模块的奖金  \n\n> [react相关](/2018/12/10/front/react/components)\n\n\n","slug":"tools/collections","published":1,"updated":"2020-12-28T00:55:28.074Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6ve001sd8v80u7y5o92","content":"<p>各大组件、工具收藏夹(持续更新中…)</p>\n<a id=\"more\"></a>\n\n\n<h2 id=\"后端\"><a href=\"#后端\" class=\"headerlink\" title=\"后端\"></a>后端</h2><table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">推荐组件</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">爬虫</td>\n<td align=\"left\"><a href=\"https://github.com/GoogleChrome/puppeteer\">puppeteer</a>、<a href=\"https://github.com/kblok/puppeteer-sharp\">puppeteer-sharp</a>、<a href=\"https://github.com/dotnetcore/DotnetSpider\">DotnetSpide</a>、<a href=\"https://github.com/ferventdesert/Hawk\">Hawk</a></td>\n</tr>\n<tr>\n<td align=\"left\">工业物联网</td>\n<td align=\"left\"><a href=\"https://github.com/dathlin/HslCommunication\">HslCommunication</a></td>\n</tr>\n<tr>\n<td align=\"left\">斗地主</td>\n<td align=\"left\"><a href=\"https://github.com/2881099/FightLandlord\">FightLandlord</a></td>\n</tr>\n<tr>\n<td align=\"left\">规则引擎</td>\n<td align=\"left\"><a href=\"https://github.com/NRules/NRules\">NRules</a></td>\n</tr>\n<tr>\n<td align=\"left\">机器人</td>\n<td align=\"left\"><a href=\"https://github.com/leonlj/BotDemo\">BotDemo</a></td>\n</tr>\n<tr>\n<td align=\"left\">定时任务</td>\n<td align=\"left\"><a href=\"https://github.com/zhaopeiym/quartzui\">quartzui</a>、<a href=\"https://github.com/Topshelf/Topshelf\">Topshelf</a></td>\n</tr>\n<tr>\n<td align=\"left\">机器学</td>\n<td align=\"left\"><a href=\"https://github.com/dotnet/machinelearning\">machinelearning</a></td>\n</tr>\n<tr>\n<td align=\"left\">导出pdf</td>\n<td align=\"left\"><a href=\"https://github.com/MrRio/jsPDF\">jsPDF</a>、<a href=\"https://github.com/wkhtmltopdf/wkhtmltopdf\">wkhtmltopdf</a>、<a href=\"https://github.com/itext/itextsharp\">itextsharp</a></td>\n</tr>\n<tr>\n<td align=\"left\">redis桌面管理器</td>\n<td align=\"left\"><a href=\"https://gitee.com/MaxBill/RedisPlus\">RedisPlus</a></td>\n</tr>\n<tr>\n<td align=\"left\">host切换工具</td>\n<td align=\"left\"><a href=\"https://github.com/oldj/SwitchHosts\">SwitchHosts</a></td>\n</tr>\n<tr>\n<td align=\"left\">异常收集框架</td>\n<td align=\"left\"><a href=\"https://github.com/exceptionless/Exceptionless\">Exceptionless</a></td>\n</tr>\n<tr>\n<td align=\"left\">容器监管</td>\n<td align=\"left\"><a href=\"https://github.com/portainer/portainer\">portainer</a></td>\n</tr>\n</tbody></table>\n<h2 id=\"工具\"><a href=\"#工具\" class=\"headerlink\" title=\"工具\"></a>工具</h2><table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">推荐组件</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">redis桌面管理器</td>\n<td align=\"left\"><a href=\"https://gitee.com/MaxBill/RedisPlus\">RedisPlus</a></td>\n</tr>\n<tr>\n<td align=\"left\">host切换工具</td>\n<td align=\"left\"><a href=\"https://github.com/oldj/SwitchHosts\">SwitchHosts</a></td>\n</tr>\n</tbody></table>\n<h2 id=\"纯前端库\"><a href=\"#纯前端库\" class=\"headerlink\" title=\"纯前端库\"></a>纯前端库</h2><table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">推荐组件</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">数字转大写</td>\n<td align=\"left\"><a href=\"https://github.com/cnwhy/nzh\">nzh</a></td>\n</tr>\n<tr>\n<td align=\"left\">js帮助库</td>\n<td align=\"left\"><a href=\"https://github.com/lodash/lodash\">lodash</a></td>\n</tr>\n<tr>\n<td align=\"left\">时区</td>\n<td align=\"left\"><a href=\"https://github.com/moment/moment\">moment</a></td>\n</tr>\n<tr>\n<td align=\"left\">3D动画</td>\n<td align=\"left\"><a href=\"https://github.com/mrdoob/three.js\">Three.js</a></td>\n</tr>\n<tr>\n<td align=\"left\">动画</td>\n<td align=\"left\"><a href=\"https://github.com/juliangarnier/anime\">Anime.js</a>、<a href=\"https://github.com/greensock/GreenSock-JS\">GreenSock</a></td>\n</tr>\n<tr>\n<td align=\"left\">打字机</td>\n<td align=\"left\"><a href=\"https://github.com/luisvinicius167/ityped\">ityped</a></td>\n</tr>\n<tr>\n<td align=\"left\">悬停效果</td>\n<td align=\"left\"><a href=\"https://github.com/IanLunn/Hover\">Hover</a></td>\n</tr>\n<tr>\n<td align=\"left\">快捷键</td>\n<td align=\"left\"><a href=\"https://github.com/jaywcjlove/hotkeys\">hotkeys</a></td>\n</tr>\n<tr>\n<td align=\"left\">拖拽</td>\n<td align=\"left\"><a href=\"https://github.com/react-dnd/react-dnd\">react-dnd</a>、<a href=\"https://github.com/atlassian/react-beautiful-dnd\">react-beautiful-dnd</a></td>\n</tr>\n</tbody></table>\n<h2 id=\"推荐-neter常用优秀开源项目\"><a href=\"#推荐-neter常用优秀开源项目\" class=\"headerlink\" title=\"推荐.neter常用优秀开源项目\"></a>推荐.neter常用优秀开源项目</h2><ul>\n<li><p>Domain-Driven-Design-Example<br>DDD 示例 挺不错的.<br><a href=\"https://github.com/zkavtaskin/Domain-Driven-Design-Example\">github https://github.com/zkavtaskin/Domain-Driven-Design-Example</a></p>\n</li>\n<li><p>SmartStoreNET<br>开源的电商项目<br><a href=\"https://github.com/smartstore/SmartStoreNET\">github https://github.com/smartstore/SmartStoreNET</a></p>\n</li>\n<li><p>abp<br>ABP框架全称为“ASP.NET Boilerplate Project”，中文翻译为“ ASP.NET样板项目”，ABP是一个开源应用程序框架,专注于基于ASP.NET Core 的Web应用程序开发,但也支持开发其他类型的应用程序<br><a href=\"https://github.com/abpframework/abp\">github https://github.com/abpframework/abp</a></p>\n</li>\n<li><p>grpc<br>gRPC 是一个由Google开源的，跨语言的，高性能的远程过程调用（RPC）框架。gRPC使客户端和服务端应用程序可以透明地进行通信，并简化了连接系统的构建。它使用HTTP/2作为通信协议，使用 Protocol Buffers 作为序列化协议。并且微软官方 ASP.NET 项目的人员进行维护，良好的接入 .NET Core 生态<br><a href=\"https://github.com/grpc/grpc-dotnet\">github https://github.com/grpc/grpc-dotnet</a></p>\n</li>\n<li><p>Autofac<br>IOC容器<br><a href=\"https://github.com/autofac/Autofac\">github https://github.com/autofac/Autofac</a></p>\n</li>\n<li><p>Hangfire<br>非常容易地在.NET或者.NETcore应用程序中执行后台任务，无需windows服务或者单独的进程。且任务信息可以被持久保存。<br><a href=\"https://github.com/HangfireIO/Hangfire\">github https://github.com/HangfireIO/Hangfire</a></p>\n</li>\n<li><p>quartz<br>任务调度<br><a href=\"https://github.com/quartznet/quartznet\">github https://github.com/quartznet/quartznet</a></p>\n</li>\n<li><p>polly<br>Polly 是一个 .NET 弹性和瞬态故障处理库，允许开发人员以 Fluent 和线程安全的方式来实现重试、断路、超时、隔离和回退策略。<br><a href=\"https://github.com/App-vNext/Polly\">github https://github.com/App-vNext/Polly</a>  </p>\n</li>\n<li><p>redis 命令<br>《Redis Command Reference》全文的中文翻译版。 <a href=\"http://redisdoc.com/\">http://RedisDoc.com</a><br><a href=\"https://github.com/huangz1990/redis\">github https://github.com/huangz1990/redis</a>  </p>\n</li>\n<li><p>orleans<br>一种构建分布式、 高规模（伸缩）的应用程序， 奥尔良是一个框架，提供一个简单的方法来构建分布式的高规模计算应用程序，而无需了解并应用复杂并发或其他伸缩模式。它是由微软研究院创建和设计在云计算中使用。<br><a href=\"https://github.com/dotnet/orleans\">github https://github.com/dotnet/orleans</a>  </p>\n</li>\n<li><p>rabbitmq-dotnet-client<br>rabbitmq 客户端类库<br><a href=\"https://github.com/rabbitmq/rabbitmq-dotnet-client\">github https://github.com/rabbitmq/rabbitmq-dotnet-client</a>  </p>\n</li>\n<li><p>AutoMapper<br>将一个对象映射到另一个对象的代码。摆脱了繁琐的赋值过程<br><a href=\"https://github.com/AutoMapper/AutoMapper\">github https://github.com/AutoMapper/AutoMapper</a>  </p>\n</li>\n</ul>\n<h2 id=\"程序员一般可以从什么平台接私活\"><a href=\"#程序员一般可以从什么平台接私活\" class=\"headerlink\" title=\"程序员一般可以从什么平台接私活\"></a>程序员一般可以从什么平台接私活</h2><h3 id=\"国内\"><a href=\"#国内\" class=\"headerlink\" title=\"国内\"></a>国内</h3><ul>\n<li><p>程序员客栈：<a href=\"https://www.proginn.com/\">https://www.proginn.com</a><br>程序员客栈中国非常领先的自由工作平台，为中高端程序员、产品经理和设计师等等互联网相关人员提供稳定的线上工作机会，包括自由工作、远程工作和兼职工作，还支持按需雇佣，工作模式非常多，感兴趣的推荐大家尝试一下。<br>虽然名称叫程序员客栈，但是除了程序员，像产品经理，设计师等等互联网相关人员，都能在上面找到适合自己的项目。感兴趣的可以体验一下<br><a href=\"https://www.proginn.com/\">https://www.proginn.com</a></p>\n</li>\n<li><p>CODING 码市：<a href=\"https://mart.coding.net/\">https://mart.coding.net</a><br>Coding 旗下的互联网软件外包服务平台，平台以外包为主。</p>\n</li>\n<li><p>开源众包：zb.oschina.net/projects<br>开源中国的众包平台，主要是以众包为主。</p>\n</li>\n<li><p>猪八戒：<a href=\"https://zbj.com/\">https://zbj.com</a><br>找兼职的地方，主要是入门级项目，不适合专业程序员，只适合新手。</p>\n</li>\n<li><p>英选：linktion.cn<br>平台以定制开发外包服务为主，也是外包项目平台。</p>\n</li>\n<li><p>快码众包：kuaima.co  </p>\n</li>\n<li><p>码易众包平台：mayigeek.com  </p>\n</li>\n<li><p> 一早一晚平台：yizaoyiwan.com/  </p>\n</li>\n<li><p>开发邦：<a href=\"http://www.kaifabang.com/\">http://www.kaifabang.com</a>  </p>\n</li>\n<li><p>人人开发：rrkf.com  </p>\n</li>\n<li><p>厘米脚印：<a href=\"http://www.limijiaoyin.com/\">http://www.limijiaoyin.com</a>  </p>\n</li>\n<li><p>Sxsoft：<a href=\"https://www.sxsoft.com/\">https://www.sxsoft.com/</a>  </p>\n</li>\n<li><p>猿急送：<a href=\"https://www.yuanjisong.com/\">https://www.yuanjisong.com/</a></p>\n</li>\n<li><p> 实现网传送门：shixian.com/</p>\n</li>\n<li><p>智城外包网：<a href=\"http://www.taskcity.com/\">http://www.taskcity.com/</a></p>\n</li>\n</ul>\n<h3 id=\"国外\"><a href=\"#国外\" class=\"headerlink\" title=\"国外\"></a>国外</h3><ul>\n<li><p>Upwork：<a href=\"https://www.upwork.com/\">https://www.upwork.com/</a><br>Upwork 是全球最大的、最优秀的、最规范的综合类人力外包服务平台，由著名的 Elance 和 oDesk 合并。这里聚集 900 万来自全球各地的自由工作者，你肯定可以在找到适合你的职位  </p>\n</li>\n<li><p>Freelancer：<a href=\"https://www.freelance.com/\">https://www.freelance.com/</a><br>工作类型覆盖了很多不同的领域，由程序开发到市场营销、广告、会计、法务等一系列的可以远程的工作  </p>\n</li>\n<li><p>Dribbble：<a href=\"https://dribbble.com/jobs\">https://dribbble.com/jobs</a><br>你没看错，Dribbble 不只是全球最受欢迎的设计师社区，同样是设计师寻找远程工作的好出处。自从被 Tiny 收购后，Dribbble 的招聘属性正在慢慢增强，试着持续 PO 出自己的好作品，等待你的伯乐，同样你可以关注 Jobs 页面，给心仪的 Team 提交简历  </p>\n</li>\n<li><p>Stackoverflow：<a href=\"https://stackoverflow.com/jobs\">https://stackoverflow.com/jobs</a><br>被广大程序员熟知的 Stackoverflow 本身就是一个全民远程工作的公司，程序员在远程工作中有很大的先天优势，Stackoverflow Jobs 里有远程职位的筛选，这里有丰富的远程技术职位  </p>\n</li>\n<li><p>99designs：<a href=\"https://99designs.com/\">https://99designs.com/</a><br>99designs 是一个专门针对设计师的雇佣平台，你可以在这里参加设计竞赛给公开的项目投标，也可以给雇主提供一对一的专业服务  </p>\n</li>\n<li><p>Remoteok：<a href=\"https://remoteok.io/\">https://remoteok.io/</a><br>Remoteok 不仅提供最初的兼职类远程工作，还有全职类，签署合同类和实习类的工作。网站创始人 Pieter Levels 本身就是一名数字游民，他同样是 Nomadlist 的创始人  </p>\n</li>\n<li><p>Toptal：<a href=\"https://www.toptal.com/\">https://www.toptal.com/</a><br>Toptal 是一个高端一些的自由职业者平台，适合比较有经验和工作尽力的远程工作者。它将企业与全球的软件工程师，设计师和业务顾问联系起来  </p>\n</li>\n<li><p>Ange：<a href=\"https://angel.co/job-collections/remote\">https://angel.co/job-collections/remote</a><br>AngelList 主要是服务于初创公司和天使投资人的平台，这里还有初创公司提供的远程工作的机会，如果对远程加入初创公司感兴趣的，可以尝试一下  </p>\n</li>\n<li><p>Topcoder：<a href=\"https://www.topcoder.com/\">https://www.topcoder.com/</a><br>Topcoder 通过算法比赛吸引世界顶级的程序员，他会将一下大型项目分割成很多小模块，通过竞赛的模式交给用户来做，优胜者可以拿到制定模块的奖金  </p>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"/2018/12/10/front/react/components\">react相关</a></p>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>各大组件、工具收藏夹(持续更新中…)</p>","more":"<h2 id=\"后端\"><a href=\"#后端\" class=\"headerlink\" title=\"后端\"></a>后端</h2><table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">推荐组件</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">爬虫</td>\n<td align=\"left\"><a href=\"https://github.com/GoogleChrome/puppeteer\">puppeteer</a>、<a href=\"https://github.com/kblok/puppeteer-sharp\">puppeteer-sharp</a>、<a href=\"https://github.com/dotnetcore/DotnetSpider\">DotnetSpide</a>、<a href=\"https://github.com/ferventdesert/Hawk\">Hawk</a></td>\n</tr>\n<tr>\n<td align=\"left\">工业物联网</td>\n<td align=\"left\"><a href=\"https://github.com/dathlin/HslCommunication\">HslCommunication</a></td>\n</tr>\n<tr>\n<td align=\"left\">斗地主</td>\n<td align=\"left\"><a href=\"https://github.com/2881099/FightLandlord\">FightLandlord</a></td>\n</tr>\n<tr>\n<td align=\"left\">规则引擎</td>\n<td align=\"left\"><a href=\"https://github.com/NRules/NRules\">NRules</a></td>\n</tr>\n<tr>\n<td align=\"left\">机器人</td>\n<td align=\"left\"><a href=\"https://github.com/leonlj/BotDemo\">BotDemo</a></td>\n</tr>\n<tr>\n<td align=\"left\">定时任务</td>\n<td align=\"left\"><a href=\"https://github.com/zhaopeiym/quartzui\">quartzui</a>、<a href=\"https://github.com/Topshelf/Topshelf\">Topshelf</a></td>\n</tr>\n<tr>\n<td align=\"left\">机器学</td>\n<td align=\"left\"><a href=\"https://github.com/dotnet/machinelearning\">machinelearning</a></td>\n</tr>\n<tr>\n<td align=\"left\">导出pdf</td>\n<td align=\"left\"><a href=\"https://github.com/MrRio/jsPDF\">jsPDF</a>、<a href=\"https://github.com/wkhtmltopdf/wkhtmltopdf\">wkhtmltopdf</a>、<a href=\"https://github.com/itext/itextsharp\">itextsharp</a></td>\n</tr>\n<tr>\n<td align=\"left\">redis桌面管理器</td>\n<td align=\"left\"><a href=\"https://gitee.com/MaxBill/RedisPlus\">RedisPlus</a></td>\n</tr>\n<tr>\n<td align=\"left\">host切换工具</td>\n<td align=\"left\"><a href=\"https://github.com/oldj/SwitchHosts\">SwitchHosts</a></td>\n</tr>\n<tr>\n<td align=\"left\">异常收集框架</td>\n<td align=\"left\"><a href=\"https://github.com/exceptionless/Exceptionless\">Exceptionless</a></td>\n</tr>\n<tr>\n<td align=\"left\">容器监管</td>\n<td align=\"left\"><a href=\"https://github.com/portainer/portainer\">portainer</a></td>\n</tr>\n</tbody></table>\n<h2 id=\"工具\"><a href=\"#工具\" class=\"headerlink\" title=\"工具\"></a>工具</h2><table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">推荐组件</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">redis桌面管理器</td>\n<td align=\"left\"><a href=\"https://gitee.com/MaxBill/RedisPlus\">RedisPlus</a></td>\n</tr>\n<tr>\n<td align=\"left\">host切换工具</td>\n<td align=\"left\"><a href=\"https://github.com/oldj/SwitchHosts\">SwitchHosts</a></td>\n</tr>\n</tbody></table>\n<h2 id=\"纯前端库\"><a href=\"#纯前端库\" class=\"headerlink\" title=\"纯前端库\"></a>纯前端库</h2><table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">推荐组件</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">数字转大写</td>\n<td align=\"left\"><a href=\"https://github.com/cnwhy/nzh\">nzh</a></td>\n</tr>\n<tr>\n<td align=\"left\">js帮助库</td>\n<td align=\"left\"><a href=\"https://github.com/lodash/lodash\">lodash</a></td>\n</tr>\n<tr>\n<td align=\"left\">时区</td>\n<td align=\"left\"><a href=\"https://github.com/moment/moment\">moment</a></td>\n</tr>\n<tr>\n<td align=\"left\">3D动画</td>\n<td align=\"left\"><a href=\"https://github.com/mrdoob/three.js\">Three.js</a></td>\n</tr>\n<tr>\n<td align=\"left\">动画</td>\n<td align=\"left\"><a href=\"https://github.com/juliangarnier/anime\">Anime.js</a>、<a href=\"https://github.com/greensock/GreenSock-JS\">GreenSock</a></td>\n</tr>\n<tr>\n<td align=\"left\">打字机</td>\n<td align=\"left\"><a href=\"https://github.com/luisvinicius167/ityped\">ityped</a></td>\n</tr>\n<tr>\n<td align=\"left\">悬停效果</td>\n<td align=\"left\"><a href=\"https://github.com/IanLunn/Hover\">Hover</a></td>\n</tr>\n<tr>\n<td align=\"left\">快捷键</td>\n<td align=\"left\"><a href=\"https://github.com/jaywcjlove/hotkeys\">hotkeys</a></td>\n</tr>\n<tr>\n<td align=\"left\">拖拽</td>\n<td align=\"left\"><a href=\"https://github.com/react-dnd/react-dnd\">react-dnd</a>、<a href=\"https://github.com/atlassian/react-beautiful-dnd\">react-beautiful-dnd</a></td>\n</tr>\n</tbody></table>\n<h2 id=\"推荐-neter常用优秀开源项目\"><a href=\"#推荐-neter常用优秀开源项目\" class=\"headerlink\" title=\"推荐.neter常用优秀开源项目\"></a>推荐.neter常用优秀开源项目</h2><ul>\n<li><p>Domain-Driven-Design-Example<br>DDD 示例 挺不错的.<br><a href=\"https://github.com/zkavtaskin/Domain-Driven-Design-Example\">github https://github.com/zkavtaskin/Domain-Driven-Design-Example</a></p>\n</li>\n<li><p>SmartStoreNET<br>开源的电商项目<br><a href=\"https://github.com/smartstore/SmartStoreNET\">github https://github.com/smartstore/SmartStoreNET</a></p>\n</li>\n<li><p>abp<br>ABP框架全称为“ASP.NET Boilerplate Project”，中文翻译为“ ASP.NET样板项目”，ABP是一个开源应用程序框架,专注于基于ASP.NET Core 的Web应用程序开发,但也支持开发其他类型的应用程序<br><a href=\"https://github.com/abpframework/abp\">github https://github.com/abpframework/abp</a></p>\n</li>\n<li><p>grpc<br>gRPC 是一个由Google开源的，跨语言的，高性能的远程过程调用（RPC）框架。gRPC使客户端和服务端应用程序可以透明地进行通信，并简化了连接系统的构建。它使用HTTP/2作为通信协议，使用 Protocol Buffers 作为序列化协议。并且微软官方 ASP.NET 项目的人员进行维护，良好的接入 .NET Core 生态<br><a href=\"https://github.com/grpc/grpc-dotnet\">github https://github.com/grpc/grpc-dotnet</a></p>\n</li>\n<li><p>Autofac<br>IOC容器<br><a href=\"https://github.com/autofac/Autofac\">github https://github.com/autofac/Autofac</a></p>\n</li>\n<li><p>Hangfire<br>非常容易地在.NET或者.NETcore应用程序中执行后台任务，无需windows服务或者单独的进程。且任务信息可以被持久保存。<br><a href=\"https://github.com/HangfireIO/Hangfire\">github https://github.com/HangfireIO/Hangfire</a></p>\n</li>\n<li><p>quartz<br>任务调度<br><a href=\"https://github.com/quartznet/quartznet\">github https://github.com/quartznet/quartznet</a></p>\n</li>\n<li><p>polly<br>Polly 是一个 .NET 弹性和瞬态故障处理库，允许开发人员以 Fluent 和线程安全的方式来实现重试、断路、超时、隔离和回退策略。<br><a href=\"https://github.com/App-vNext/Polly\">github https://github.com/App-vNext/Polly</a>  </p>\n</li>\n<li><p>redis 命令<br>《Redis Command Reference》全文的中文翻译版。 <a href=\"http://redisdoc.com/\">http://RedisDoc.com</a><br><a href=\"https://github.com/huangz1990/redis\">github https://github.com/huangz1990/redis</a>  </p>\n</li>\n<li><p>orleans<br>一种构建分布式、 高规模（伸缩）的应用程序， 奥尔良是一个框架，提供一个简单的方法来构建分布式的高规模计算应用程序，而无需了解并应用复杂并发或其他伸缩模式。它是由微软研究院创建和设计在云计算中使用。<br><a href=\"https://github.com/dotnet/orleans\">github https://github.com/dotnet/orleans</a>  </p>\n</li>\n<li><p>rabbitmq-dotnet-client<br>rabbitmq 客户端类库<br><a href=\"https://github.com/rabbitmq/rabbitmq-dotnet-client\">github https://github.com/rabbitmq/rabbitmq-dotnet-client</a>  </p>\n</li>\n<li><p>AutoMapper<br>将一个对象映射到另一个对象的代码。摆脱了繁琐的赋值过程<br><a href=\"https://github.com/AutoMapper/AutoMapper\">github https://github.com/AutoMapper/AutoMapper</a>  </p>\n</li>\n</ul>\n<h2 id=\"程序员一般可以从什么平台接私活\"><a href=\"#程序员一般可以从什么平台接私活\" class=\"headerlink\" title=\"程序员一般可以从什么平台接私活\"></a>程序员一般可以从什么平台接私活</h2><h3 id=\"国内\"><a href=\"#国内\" class=\"headerlink\" title=\"国内\"></a>国内</h3><ul>\n<li><p>程序员客栈：<a href=\"https://www.proginn.com/\">https://www.proginn.com</a><br>程序员客栈中国非常领先的自由工作平台，为中高端程序员、产品经理和设计师等等互联网相关人员提供稳定的线上工作机会，包括自由工作、远程工作和兼职工作，还支持按需雇佣，工作模式非常多，感兴趣的推荐大家尝试一下。<br>虽然名称叫程序员客栈，但是除了程序员，像产品经理，设计师等等互联网相关人员，都能在上面找到适合自己的项目。感兴趣的可以体验一下<br><a href=\"https://www.proginn.com/\">https://www.proginn.com</a></p>\n</li>\n<li><p>CODING 码市：<a href=\"https://mart.coding.net/\">https://mart.coding.net</a><br>Coding 旗下的互联网软件外包服务平台，平台以外包为主。</p>\n</li>\n<li><p>开源众包：zb.oschina.net/projects<br>开源中国的众包平台，主要是以众包为主。</p>\n</li>\n<li><p>猪八戒：<a href=\"https://zbj.com/\">https://zbj.com</a><br>找兼职的地方，主要是入门级项目，不适合专业程序员，只适合新手。</p>\n</li>\n<li><p>英选：linktion.cn<br>平台以定制开发外包服务为主，也是外包项目平台。</p>\n</li>\n<li><p>快码众包：kuaima.co  </p>\n</li>\n<li><p>码易众包平台：mayigeek.com  </p>\n</li>\n<li><p> 一早一晚平台：yizaoyiwan.com/  </p>\n</li>\n<li><p>开发邦：<a href=\"http://www.kaifabang.com/\">http://www.kaifabang.com</a>  </p>\n</li>\n<li><p>人人开发：rrkf.com  </p>\n</li>\n<li><p>厘米脚印：<a href=\"http://www.limijiaoyin.com/\">http://www.limijiaoyin.com</a>  </p>\n</li>\n<li><p>Sxsoft：<a href=\"https://www.sxsoft.com/\">https://www.sxsoft.com/</a>  </p>\n</li>\n<li><p>猿急送：<a href=\"https://www.yuanjisong.com/\">https://www.yuanjisong.com/</a></p>\n</li>\n<li><p> 实现网传送门：shixian.com/</p>\n</li>\n<li><p>智城外包网：<a href=\"http://www.taskcity.com/\">http://www.taskcity.com/</a></p>\n</li>\n</ul>\n<h3 id=\"国外\"><a href=\"#国外\" class=\"headerlink\" title=\"国外\"></a>国外</h3><ul>\n<li><p>Upwork：<a href=\"https://www.upwork.com/\">https://www.upwork.com/</a><br>Upwork 是全球最大的、最优秀的、最规范的综合类人力外包服务平台，由著名的 Elance 和 oDesk 合并。这里聚集 900 万来自全球各地的自由工作者，你肯定可以在找到适合你的职位  </p>\n</li>\n<li><p>Freelancer：<a href=\"https://www.freelance.com/\">https://www.freelance.com/</a><br>工作类型覆盖了很多不同的领域，由程序开发到市场营销、广告、会计、法务等一系列的可以远程的工作  </p>\n</li>\n<li><p>Dribbble：<a href=\"https://dribbble.com/jobs\">https://dribbble.com/jobs</a><br>你没看错，Dribbble 不只是全球最受欢迎的设计师社区，同样是设计师寻找远程工作的好出处。自从被 Tiny 收购后，Dribbble 的招聘属性正在慢慢增强，试着持续 PO 出自己的好作品，等待你的伯乐，同样你可以关注 Jobs 页面，给心仪的 Team 提交简历  </p>\n</li>\n<li><p>Stackoverflow：<a href=\"https://stackoverflow.com/jobs\">https://stackoverflow.com/jobs</a><br>被广大程序员熟知的 Stackoverflow 本身就是一个全民远程工作的公司，程序员在远程工作中有很大的先天优势，Stackoverflow Jobs 里有远程职位的筛选，这里有丰富的远程技术职位  </p>\n</li>\n<li><p>99designs：<a href=\"https://99designs.com/\">https://99designs.com/</a><br>99designs 是一个专门针对设计师的雇佣平台，你可以在这里参加设计竞赛给公开的项目投标，也可以给雇主提供一对一的专业服务  </p>\n</li>\n<li><p>Remoteok：<a href=\"https://remoteok.io/\">https://remoteok.io/</a><br>Remoteok 不仅提供最初的兼职类远程工作，还有全职类，签署合同类和实习类的工作。网站创始人 Pieter Levels 本身就是一名数字游民，他同样是 Nomadlist 的创始人  </p>\n</li>\n<li><p>Toptal：<a href=\"https://www.toptal.com/\">https://www.toptal.com/</a><br>Toptal 是一个高端一些的自由职业者平台，适合比较有经验和工作尽力的远程工作者。它将企业与全球的软件工程师，设计师和业务顾问联系起来  </p>\n</li>\n<li><p>Ange：<a href=\"https://angel.co/job-collections/remote\">https://angel.co/job-collections/remote</a><br>AngelList 主要是服务于初创公司和天使投资人的平台，这里还有初创公司提供的远程工作的机会，如果对远程加入初创公司感兴趣的，可以尝试一下  </p>\n</li>\n<li><p>Topcoder：<a href=\"https://www.topcoder.com/\">https://www.topcoder.com/</a><br>Topcoder 通过算法比赛吸引世界顶级的程序员，他会将一下大型项目分割成很多小模块，通过竞赛的模式交给用户来做，优胜者可以拿到制定模块的奖金  </p>\n</li>\n</ul>\n<blockquote>\n<p><a href=\"/2018/12/10/front/react/components\">react相关</a></p>\n</blockquote>"},{"title":"开发中能提高工作效率的工具收集","abbrlink":10236,"date":"2018-05-16T01:10:11.000Z","_content":"\n开发工具收藏夹\n<!-- more -->\n\n##### 常用工具\n* sql对比工具：DiffUse  \n* BCompare 文件对比  \n* ORC 图片文本识别   \n\n##### VS插件  \n* Web Essentials  \n* web Extension Pack  \n* Productivity Power Tools 2015:方法开始结束标线  \n* [PicGo vscode的图床管理](https://picgo.github.io/PicGo-Doc/zh/guide/config.html#github%E5%9B%BE%E5%BA%8A)、[github](http://picgo.github.io)\n* Settings Sync vscode 同步插件\n\n##### 前端\n* 编辑器神器：webstrom、SubLime node  \n* 压缩合并混合：grunt、webpack\n* 依赖管理工具：bower、npm、cnpm、yarn\n* 轻量级服务器：httpserver  \n* 单元测试：karma 、jasmine  \n* karma是容器，jasmine是语法  \n* angularJS专用测试工具：protractor  \n\n##### 其他\n* Emmet：提供自动完成某些文档  \n* DocBlockr　　DocBlockr可以自动生成PHPDoc风格的注释。它支持的语言有Javascript, PHP, ActionScript, CoffeeScript, Java, Objective C, C, C++  \n\n##### 测试、分析工具  \n* 压力测试:Load Runner  \n* 服务器IIS分析:Visual Studio Profiler、WinDebug、opserver  \n\n##### SQL  \ntoad for mysql\n\n> 欢迎补充","source":"_posts/tools/develop.md","raw":"---\ntitle: 开发中能提高工作效率的工具收集\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 10236\ndate: 2018-05-16 09:10:11\n---\n\n开发工具收藏夹\n<!-- more -->\n\n##### 常用工具\n* sql对比工具：DiffUse  \n* BCompare 文件对比  \n* ORC 图片文本识别   \n\n##### VS插件  \n* Web Essentials  \n* web Extension Pack  \n* Productivity Power Tools 2015:方法开始结束标线  \n* [PicGo vscode的图床管理](https://picgo.github.io/PicGo-Doc/zh/guide/config.html#github%E5%9B%BE%E5%BA%8A)、[github](http://picgo.github.io)\n* Settings Sync vscode 同步插件\n\n##### 前端\n* 编辑器神器：webstrom、SubLime node  \n* 压缩合并混合：grunt、webpack\n* 依赖管理工具：bower、npm、cnpm、yarn\n* 轻量级服务器：httpserver  \n* 单元测试：karma 、jasmine  \n* karma是容器，jasmine是语法  \n* angularJS专用测试工具：protractor  \n\n##### 其他\n* Emmet：提供自动完成某些文档  \n* DocBlockr　　DocBlockr可以自动生成PHPDoc风格的注释。它支持的语言有Javascript, PHP, ActionScript, CoffeeScript, Java, Objective C, C, C++  \n\n##### 测试、分析工具  \n* 压力测试:Load Runner  \n* 服务器IIS分析:Visual Studio Profiler、WinDebug、opserver  \n\n##### SQL  \ntoad for mysql\n\n> 欢迎补充","slug":"tools/develop","published":1,"updated":"2020-12-28T00:55:28.075Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6vg001ud8v8den3e0ty","content":"<p>开发工具收藏夹</p>\n<a id=\"more\"></a>\n\n<h5 id=\"常用工具\"><a href=\"#常用工具\" class=\"headerlink\" title=\"常用工具\"></a>常用工具</h5><ul>\n<li>sql对比工具：DiffUse  </li>\n<li>BCompare 文件对比  </li>\n<li>ORC 图片文本识别   </li>\n</ul>\n<h5 id=\"VS插件\"><a href=\"#VS插件\" class=\"headerlink\" title=\"VS插件\"></a>VS插件</h5><ul>\n<li>Web Essentials  </li>\n<li>web Extension Pack  </li>\n<li>Productivity Power Tools 2015:方法开始结束标线  </li>\n<li><a href=\"https://picgo.github.io/PicGo-Doc/zh/guide/config.html#github%E5%9B%BE%E5%BA%8A\">PicGo vscode的图床管理</a>、<a href=\"http://picgo.github.io/\">github</a></li>\n<li>Settings Sync vscode 同步插件</li>\n</ul>\n<h5 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h5><ul>\n<li>编辑器神器：webstrom、SubLime node  </li>\n<li>压缩合并混合：grunt、webpack</li>\n<li>依赖管理工具：bower、npm、cnpm、yarn</li>\n<li>轻量级服务器：httpserver  </li>\n<li>单元测试：karma 、jasmine  </li>\n<li>karma是容器，jasmine是语法  </li>\n<li>angularJS专用测试工具：protractor  </li>\n</ul>\n<h5 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h5><ul>\n<li>Emmet：提供自动完成某些文档  </li>\n<li>DocBlockr　　DocBlockr可以自动生成PHPDoc风格的注释。它支持的语言有Javascript, PHP, ActionScript, CoffeeScript, Java, Objective C, C, C++  </li>\n</ul>\n<h5 id=\"测试、分析工具\"><a href=\"#测试、分析工具\" class=\"headerlink\" title=\"测试、分析工具\"></a>测试、分析工具</h5><ul>\n<li>压力测试:Load Runner  </li>\n<li>服务器IIS分析:Visual Studio Profiler、WinDebug、opserver  </li>\n</ul>\n<h5 id=\"SQL\"><a href=\"#SQL\" class=\"headerlink\" title=\"SQL\"></a>SQL</h5><p>toad for mysql</p>\n<blockquote>\n<p>欢迎补充</p>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>开发工具收藏夹</p>","more":"<h5 id=\"常用工具\"><a href=\"#常用工具\" class=\"headerlink\" title=\"常用工具\"></a>常用工具</h5><ul>\n<li>sql对比工具：DiffUse  </li>\n<li>BCompare 文件对比  </li>\n<li>ORC 图片文本识别   </li>\n</ul>\n<h5 id=\"VS插件\"><a href=\"#VS插件\" class=\"headerlink\" title=\"VS插件\"></a>VS插件</h5><ul>\n<li>Web Essentials  </li>\n<li>web Extension Pack  </li>\n<li>Productivity Power Tools 2015:方法开始结束标线  </li>\n<li><a href=\"https://picgo.github.io/PicGo-Doc/zh/guide/config.html#github%E5%9B%BE%E5%BA%8A\">PicGo vscode的图床管理</a>、<a href=\"http://picgo.github.io/\">github</a></li>\n<li>Settings Sync vscode 同步插件</li>\n</ul>\n<h5 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h5><ul>\n<li>编辑器神器：webstrom、SubLime node  </li>\n<li>压缩合并混合：grunt、webpack</li>\n<li>依赖管理工具：bower、npm、cnpm、yarn</li>\n<li>轻量级服务器：httpserver  </li>\n<li>单元测试：karma 、jasmine  </li>\n<li>karma是容器，jasmine是语法  </li>\n<li>angularJS专用测试工具：protractor  </li>\n</ul>\n<h5 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h5><ul>\n<li>Emmet：提供自动完成某些文档  </li>\n<li>DocBlockr　　DocBlockr可以自动生成PHPDoc风格的注释。它支持的语言有Javascript, PHP, ActionScript, CoffeeScript, Java, Objective C, C, C++  </li>\n</ul>\n<h5 id=\"测试、分析工具\"><a href=\"#测试、分析工具\" class=\"headerlink\" title=\"测试、分析工具\"></a>测试、分析工具</h5><ul>\n<li>压力测试:Load Runner  </li>\n<li>服务器IIS分析:Visual Studio Profiler、WinDebug、opserver  </li>\n</ul>\n<h5 id=\"SQL\"><a href=\"#SQL\" class=\"headerlink\" title=\"SQL\"></a>SQL</h5><p>toad for mysql</p>\n<blockquote>\n<p>欢迎补充</p>\n</blockquote>"},{"title":"git常用命令(笔记)","abbrlink":16549,"date":"2018-05-16T01:10:11.000Z","_content":"\n常用git命令\n<!-- more -->\n\n1. 创建一个版本库  \nmkdir repository    //创建一个文件夹  \ngit init [name]       //把目录编程git可以管理的仓库,[name]可选  \n2. 提交文件到版本库  \ngit add test.txt    //添加文件到版本库,此时还没有提交到git  \ngit commit -m \"提交注释\"    //告诉Git，把文件提交到仓库  \n3. 远程  \n查看当前git的状态:        git status      \n查看修改变的内容:        git diff  \n查看历史记录:                git log  \n查看修改的headid：       git reflog  \n查看分支：    git branch [-a|-r]    //-a 所有分支，-r:远程分支  \n查看远程库信息   :            git remote  \n查看远程库详细信息:        git remote -v  \n查看远程仓库：$ git remote -v                  \n添加远程仓库：$ git remote add [name] [url]  \n克隆远程仓库：git checkout [branchName] origin/[branchName] //如果远程分支有branchName而本地没  \ngit checkout -b [branchName] origin/[branchName] //如果远程分支有本地无，克隆并切换到  \n删除本地仓库: git branch -d [branch-name]  \n强制删除本地分支  git branch -D [branch-name]   \n删除远程仓库：$ git push origin :[branch-name] //删除远程分支  \n            git remote rm [branch-name]  \n            git push origin --delete [branchName]    \n修改远程仓库：$ git remote set-url --push [name] [newUrl]  \n拉取远程仓库：$ git pull origin [remoteName]:[localBranchName]  \n                            git fetch origin [remoteName]:[localBranchName]    //获取到当前分支  \n推送远程仓库：$ git push origin [remoteName]:[localBranchName]        //如果有冲突，需要先pull或者fetch远程的  \ngit push origin [remoteName]:[localBranchName] -f    //强推，使用本地覆盖服务器的  \n4. 与远程git关联  \na、在git上创建一个Repository  \nb、在本地执行命令：git remote add origin git@github.com:xiexingen/learngit.git    //将本地仓库与远程关联  \nc、重新关联：git remote set-url origin git://git.coding.net/xxxx/yyyy.git  \n5. 从远程下载到本地  \ngit clone [地址] [文件夹名称]    //将远程项目复制到本地之地文件加下  \n6. 分支  \n创建分支：git branch [branch Name]  \n切换分支：git checkout [branch Name]  \n创建+切换分支：git checkout -b [branch Name]  \n合并分支到当前分支：git merge [branch Name]  \n重命名分支：    git branch -m [new_branchName] [old_branchName]  \n查看所有分支：git branch -a  \n从指定分支创建并切换到分支:git checkout -b [local-branchName] [origin/branchName]  \n删除分支:    git branch [-d|-D] [local-branch] //-d 只能删除已经参与合并的分支,-D:可以删除为合并的分支，然后在git push origin :master 可以删除远程分支  \ngit merge命令用于合并指定分支到当前分支,注意到上面的Fast-forward信息，Git告诉我们，这次合并是“快进模式”，也就是直接把master指向dev的当前提交  \ngit merge dev :分两种情况一种是直接指向，另一种是生成另外一个将两个合并  \ngit merge --no-ff -m'comment' [branch Name]    //合并分支时，加上--no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并  \ngit merge --abort //取消合并  \n7. Bug分支  \ngit stash        //相当于tfs中的搁置  \ngit stash apply    //取消搁置到本地  \ngit stash drp     //删除搁置集  \ngit stash pop        //取消搁置到本地并删除搁置集  \ngit stash list    //查看搁置集  \ngit stash apply stash@{0}    //恢复指定的搁置集  \n8. 多人协作  \nA、git push -u origin [local-branch][:remote-branch]    //吧本地库推送到远程库上，-u，不但回吧本地的分支推送到远程新的master分支，还会把本地分支和远程分支关联起来，在以后的推送或者拉去时就可以简化命名\n后面如果有修改的话，只需要执行：git push origin [local-branch]    //吧本地分支的最新修改推送到服务器\nB、从本地推送分支，使用git push origin [local_branch]:[remote-branch]，如果推送失败，先用git pull抓取远程的新提交；\n在本地创建和远程分支对应的分支，使用git checkout -b branch-name origin/branch-name，本地和远程分支的名称最好一致；\nc、建立本地分支和远程分支的关联，使用git branch --set-upstream [local-branch] [origin/remote-branch]\n  从远程抓取分支，使用git pull，如果有冲突，要先处理冲突。\n如果git pull提示“no tracking information”，则说明本地分支和远程分支的链接关系没有创建，用命令git branch --set-upstream branch-name origin/branch-name\n9. 取消、回滚  \ngit -reflog 查看历史版本  \ngit reset --hard HEAD^    //回到上一次改动 (针对历史提交)  \ngit reset -hard 3628164    //3628164 headid 恢复到指定的记录(针对历史提交)  \ngit reset test.js //使用当前历史提交还原工作区  \ngit checkout -- test.js    //使用暂存区覆盖改动  \n10. clean  \ngit clean -n //将当前非暂存区的文件移除  \ngit clean -f //强制移除  \n11. 版本(tag)操作相关命令  \n查看版本：$ git tag  \n创建版本：$ git tag [name]  \n删除版本：$ git tag -d [name]  \n查看远程版本：$ git tag -r  \n创建远程版本(本地版本push到远程)：$ git push origin [name]  \n删除远程版本：$ git push origin :refs/tags/[name]  \n合并远程仓库的tag到本地：$ git pull origin --tags  \n上传本地tag到远程仓库：$ git push origin --tags  \n创建带注释的tag：$ git tag -a [name] -m 'yourMessage'  \n12. 忽略一些文件、文件夹不提交  \n在仓库根目录下创建名称为“.gitignore”的文件，写入不需要的文件夹名或文件，每个元素占一行即可，如  \ntarget  \nbin  \n*.db  \n13. 生成密钥  \n* 查看是否已经有了ssh密钥：cd ~/.ssh  \n    >如果提示：No such file or directory 说明你是第一次使用git  \n如果不是第一次使用，请执行下面的操作,清理原有ssh密钥。  \n $ mkdir key_backup $ cp id_rsa* key_backup $ rm id_rsa*  \n生成新的密钥：  \n$ ssh-keygen -t rsa -C “1002275364@qq.com”  \n14. 添加忽略文件  \ngit rm -f --cached [path] 移除单个文件，path表示全路径  \ngit rm -f --cached [path] -r 移除目录，path表示目录  \n15. 从暂存区移除文件  \ngit rm --cached [file] //将file从暂存区移除  \n16. tag\ngit tag -a v1.0 -m 'version 1.0'  \ngit tag 列出已有标签  \ngit tag -l 'v1.0' //列出指定标签  \ngit checkout -b [branchName] [tagname] //在特定的标签上创建一个新分支  \ngit tag v0.9 [626262] //给上次提价的commit id为626262打上标签  \ngit push origin [v1.0] //将标签v1.0push到远程  \ngit push origin --tags //将本地的所有tag push到远程  \ngit push origin :refs/tags/[v1.0] //删除v1.0  \n17. .gitignore文件无效的解决方法  \ngit rm -r --cached [指定文件]  \n提交\n\n##### 配置git使用BCompare来比对文件(用户目录\\.gitconfig里面)\n``` bash\n[user]\nname = xiexingen\nemail = 1002275364@qq.com\n[diff]\n    tool = bc4\n[difftool]\n    prompt = false\n[difftool \"bc4\"]\n    cmd = \\\"D:/Program Files/Beyond Compare 4/BComp.exe\\\" \\\"$LOCAL\\\" \\\"$REMOTE\\\"\n[merge]\n    tool = bc4\n[mergetool]\n    prompt = false\n    keepBackup = false\n[mergetool \"bc4\"]\n    cmd = \\\"D:/Program Files/Beyond Compare 4/BComp.exe\\\" \\\"$LOCAL\\\" \\\"$REMOTE\\\" \\\"$BASE\\\" \\\"$MERGED\\\"\n    trustExitCode = true\n[alias]\n    dt = difftool\n    mt = mergetool\n```\n使用：  \ngit difftool '文件1' '文件2'  \ngit mergetool  \n* 全局配置用户名\n``` bash\ngit config --global user.name xiexingen\ngit config --global user.email 1002275364@qq.com\ngit config --global alias.co checkout  //用co代替checkout\n```\n日志  \n``` bash\ngit log –graph –pretty=format:’%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset’ –abbrev-commit –date=relative **\n```\n* https带用户名密码形式迁出代码\ngit clone http://用户名:密码@gitlab.xxgtalk.cn/WT/StudyNetCore.git    \n\n* github上游合并问题\n``` js\n首先指定上游地址：git remote add upstream [original repo url]\n拉取上游代码:git fetch upstream\n合并代码:git merge upstream/master\n```","source":"_posts/tools/git.md","raw":"---\ntitle: git常用命令(笔记)\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 16549\ndate: 2018-05-16 09:10:11\n---\n\n常用git命令\n<!-- more -->\n\n1. 创建一个版本库  \nmkdir repository    //创建一个文件夹  \ngit init [name]       //把目录编程git可以管理的仓库,[name]可选  \n2. 提交文件到版本库  \ngit add test.txt    //添加文件到版本库,此时还没有提交到git  \ngit commit -m \"提交注释\"    //告诉Git，把文件提交到仓库  \n3. 远程  \n查看当前git的状态:        git status      \n查看修改变的内容:        git diff  \n查看历史记录:                git log  \n查看修改的headid：       git reflog  \n查看分支：    git branch [-a|-r]    //-a 所有分支，-r:远程分支  \n查看远程库信息   :            git remote  \n查看远程库详细信息:        git remote -v  \n查看远程仓库：$ git remote -v                  \n添加远程仓库：$ git remote add [name] [url]  \n克隆远程仓库：git checkout [branchName] origin/[branchName] //如果远程分支有branchName而本地没  \ngit checkout -b [branchName] origin/[branchName] //如果远程分支有本地无，克隆并切换到  \n删除本地仓库: git branch -d [branch-name]  \n强制删除本地分支  git branch -D [branch-name]   \n删除远程仓库：$ git push origin :[branch-name] //删除远程分支  \n            git remote rm [branch-name]  \n            git push origin --delete [branchName]    \n修改远程仓库：$ git remote set-url --push [name] [newUrl]  \n拉取远程仓库：$ git pull origin [remoteName]:[localBranchName]  \n                            git fetch origin [remoteName]:[localBranchName]    //获取到当前分支  \n推送远程仓库：$ git push origin [remoteName]:[localBranchName]        //如果有冲突，需要先pull或者fetch远程的  \ngit push origin [remoteName]:[localBranchName] -f    //强推，使用本地覆盖服务器的  \n4. 与远程git关联  \na、在git上创建一个Repository  \nb、在本地执行命令：git remote add origin git@github.com:xiexingen/learngit.git    //将本地仓库与远程关联  \nc、重新关联：git remote set-url origin git://git.coding.net/xxxx/yyyy.git  \n5. 从远程下载到本地  \ngit clone [地址] [文件夹名称]    //将远程项目复制到本地之地文件加下  \n6. 分支  \n创建分支：git branch [branch Name]  \n切换分支：git checkout [branch Name]  \n创建+切换分支：git checkout -b [branch Name]  \n合并分支到当前分支：git merge [branch Name]  \n重命名分支：    git branch -m [new_branchName] [old_branchName]  \n查看所有分支：git branch -a  \n从指定分支创建并切换到分支:git checkout -b [local-branchName] [origin/branchName]  \n删除分支:    git branch [-d|-D] [local-branch] //-d 只能删除已经参与合并的分支,-D:可以删除为合并的分支，然后在git push origin :master 可以删除远程分支  \ngit merge命令用于合并指定分支到当前分支,注意到上面的Fast-forward信息，Git告诉我们，这次合并是“快进模式”，也就是直接把master指向dev的当前提交  \ngit merge dev :分两种情况一种是直接指向，另一种是生成另外一个将两个合并  \ngit merge --no-ff -m'comment' [branch Name]    //合并分支时，加上--no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并  \ngit merge --abort //取消合并  \n7. Bug分支  \ngit stash        //相当于tfs中的搁置  \ngit stash apply    //取消搁置到本地  \ngit stash drp     //删除搁置集  \ngit stash pop        //取消搁置到本地并删除搁置集  \ngit stash list    //查看搁置集  \ngit stash apply stash@{0}    //恢复指定的搁置集  \n8. 多人协作  \nA、git push -u origin [local-branch][:remote-branch]    //吧本地库推送到远程库上，-u，不但回吧本地的分支推送到远程新的master分支，还会把本地分支和远程分支关联起来，在以后的推送或者拉去时就可以简化命名\n后面如果有修改的话，只需要执行：git push origin [local-branch]    //吧本地分支的最新修改推送到服务器\nB、从本地推送分支，使用git push origin [local_branch]:[remote-branch]，如果推送失败，先用git pull抓取远程的新提交；\n在本地创建和远程分支对应的分支，使用git checkout -b branch-name origin/branch-name，本地和远程分支的名称最好一致；\nc、建立本地分支和远程分支的关联，使用git branch --set-upstream [local-branch] [origin/remote-branch]\n  从远程抓取分支，使用git pull，如果有冲突，要先处理冲突。\n如果git pull提示“no tracking information”，则说明本地分支和远程分支的链接关系没有创建，用命令git branch --set-upstream branch-name origin/branch-name\n9. 取消、回滚  \ngit -reflog 查看历史版本  \ngit reset --hard HEAD^    //回到上一次改动 (针对历史提交)  \ngit reset -hard 3628164    //3628164 headid 恢复到指定的记录(针对历史提交)  \ngit reset test.js //使用当前历史提交还原工作区  \ngit checkout -- test.js    //使用暂存区覆盖改动  \n10. clean  \ngit clean -n //将当前非暂存区的文件移除  \ngit clean -f //强制移除  \n11. 版本(tag)操作相关命令  \n查看版本：$ git tag  \n创建版本：$ git tag [name]  \n删除版本：$ git tag -d [name]  \n查看远程版本：$ git tag -r  \n创建远程版本(本地版本push到远程)：$ git push origin [name]  \n删除远程版本：$ git push origin :refs/tags/[name]  \n合并远程仓库的tag到本地：$ git pull origin --tags  \n上传本地tag到远程仓库：$ git push origin --tags  \n创建带注释的tag：$ git tag -a [name] -m 'yourMessage'  \n12. 忽略一些文件、文件夹不提交  \n在仓库根目录下创建名称为“.gitignore”的文件，写入不需要的文件夹名或文件，每个元素占一行即可，如  \ntarget  \nbin  \n*.db  \n13. 生成密钥  \n* 查看是否已经有了ssh密钥：cd ~/.ssh  \n    >如果提示：No such file or directory 说明你是第一次使用git  \n如果不是第一次使用，请执行下面的操作,清理原有ssh密钥。  \n $ mkdir key_backup $ cp id_rsa* key_backup $ rm id_rsa*  \n生成新的密钥：  \n$ ssh-keygen -t rsa -C “1002275364@qq.com”  \n14. 添加忽略文件  \ngit rm -f --cached [path] 移除单个文件，path表示全路径  \ngit rm -f --cached [path] -r 移除目录，path表示目录  \n15. 从暂存区移除文件  \ngit rm --cached [file] //将file从暂存区移除  \n16. tag\ngit tag -a v1.0 -m 'version 1.0'  \ngit tag 列出已有标签  \ngit tag -l 'v1.0' //列出指定标签  \ngit checkout -b [branchName] [tagname] //在特定的标签上创建一个新分支  \ngit tag v0.9 [626262] //给上次提价的commit id为626262打上标签  \ngit push origin [v1.0] //将标签v1.0push到远程  \ngit push origin --tags //将本地的所有tag push到远程  \ngit push origin :refs/tags/[v1.0] //删除v1.0  \n17. .gitignore文件无效的解决方法  \ngit rm -r --cached [指定文件]  \n提交\n\n##### 配置git使用BCompare来比对文件(用户目录\\.gitconfig里面)\n``` bash\n[user]\nname = xiexingen\nemail = 1002275364@qq.com\n[diff]\n    tool = bc4\n[difftool]\n    prompt = false\n[difftool \"bc4\"]\n    cmd = \\\"D:/Program Files/Beyond Compare 4/BComp.exe\\\" \\\"$LOCAL\\\" \\\"$REMOTE\\\"\n[merge]\n    tool = bc4\n[mergetool]\n    prompt = false\n    keepBackup = false\n[mergetool \"bc4\"]\n    cmd = \\\"D:/Program Files/Beyond Compare 4/BComp.exe\\\" \\\"$LOCAL\\\" \\\"$REMOTE\\\" \\\"$BASE\\\" \\\"$MERGED\\\"\n    trustExitCode = true\n[alias]\n    dt = difftool\n    mt = mergetool\n```\n使用：  \ngit difftool '文件1' '文件2'  \ngit mergetool  \n* 全局配置用户名\n``` bash\ngit config --global user.name xiexingen\ngit config --global user.email 1002275364@qq.com\ngit config --global alias.co checkout  //用co代替checkout\n```\n日志  \n``` bash\ngit log –graph –pretty=format:’%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset’ –abbrev-commit –date=relative **\n```\n* https带用户名密码形式迁出代码\ngit clone http://用户名:密码@gitlab.xxgtalk.cn/WT/StudyNetCore.git    \n\n* github上游合并问题\n``` js\n首先指定上游地址：git remote add upstream [original repo url]\n拉取上游代码:git fetch upstream\n合并代码:git merge upstream/master\n```","slug":"tools/git","published":1,"updated":"2020-12-29T01:15:00.447Z","_id":"ckj9at6vi001yd8v88li04za3","comments":1,"layout":"post","photos":[],"link":""},{"title":"git提交规范","abbrlink":15312,"date":"2020-12-23T13:10:11.000Z","_content":"\ngit提交规范\n<!-- more -->\n\n# Commit Message 格式\n\n``` bash\n<type>(<scope>): <subject>\n<空一行>\n<body>\n<空一行>\n<footer>\n```\n\n* `<type>`\n    - feat: 新功能（feature）\n    - fix: 修补bug\n    - docs: 文档（documentation）\n    - style: 格式（不影响代码运行的变动）\n    - refactor: 重构（即不是新增功能，也不是修改bug的代码变动）\n    - perf: 更改代码以提高性能\n    - test: 添加测试\n    - chore: 构建过程或辅助工具的变动\n\n* `<scope>` 选填项，用来说明本次提交的影响的范围，如 $location, $browser。当更改影响的范围不止一个时，可以使用 *\n\n* `<subject>`: 用来简要描述本次改动，尽量遵循:\n    - 以动词开头，使用第一人称现在时，比如change，而不是changed或changes\n    - 首字母不要大写\n    - 结尾不用句号 .\n\n* `<body>` : 对 `<subject>` 的描述\n\n* `<footer>`: 主要放置不兼容变更和关闭Issue的信息\n    - 不兼容变更: 以 BREAKING CHANGE: 开头，描述变动、变动理由和迁移方法。\n    - 关闭Issue: 如close #666\n\n## 特殊格式\n- Revert: 此外如果需要撤销之前的Commit，那么本次Commit Message中必须以 revert： 开头，后面紧跟前面描述的Header部分，格式不变。并且，<body>部分的格式也是固定的，必须要记录撤销前Commit的SHA值。\n\n# 案例\n\n- feat\n\n    ``` bash\n    feat($browser): onUrlChange event (popstate/hashchange/polling)\n\n    Added new event to $browser:\n    - forward popstate event if available\n    - forward hashchange event if popstate not available\n    - do polling when neither popstate nor hashchange available\n\n    Breaks $browser.onHashChange, which was removed (use onUrlChange instead)\n    ```\n\n    ``` bash\n    feat(directive): ng:disabled, ng:checked, ng:multiple, ng:readonly, ng:selected\n\n    New directives for proper binding these attributes in older browsers (IE).\n    Added coresponding description, live examples and e2e tests.\n\n    Closes #351\n    ```\n\n- fix\n\n    ``` bash\n    fix($compile): couple of unit tests for IE9\n\n    Older IEs serialize html uppercased, but IE9 does not...\n    Would be better to expect case insensitive, unfortunately jasmine does\n    not allow to user regexps for throw expectations.\n\n    Closes #392\n    Breaks foo.bar api, foo.baz should be used instead\n    ```\n\n* docs\n\n    ``` bash\n    docs(guide): updated fixed docs from Google Docs\n\n    Couple of typos fixed:\n    - indentation\n    - batchLogbatchLog -> batchLog\n    - start periodic checking\n    - missing brace\n    ```\n\n    ``` bash\n    docs: fix grammar\n    docs: corrections and further clarifications \n    docs: update broken link\n    docs(README): update version number\n    docs(README): place badge\n    docs(inputs): remove redundant defaults\n    ```\n\n* style\n\n    ``` bash\n    style: fix table indentation\n    style($location): add couple of missing semi colons\n    ```\n\n* refactor\n\n    ``` bash\n    refactor: remove unnecessary object destructuring\n    refactor: use `Object.entries` rather than `Object.keys`\n    ```\n\n* perf\n\n    ``` bash\n    perf(*): Update network configuration\n    ```\n\n* test\n\n    ``` bash\n    test: clarify variables name\n    test(testRelease): set schedule test\n    ```\n\n* chore\n\n    ``` bash\n    chore(package): update xo to version 0.25.0\n    chore(package): remove commitizen from our dependencies\n    chore(*): transfer repo to cycjimmy\n    ```\n\n* revert\n\n    ``` bash\n    revert: \"fix: do not convert ssh `repositoryUrl` to https\"\n\n    This reverts commit b895231.\n    ```","source":"_posts/tools/gitcommit.md","raw":"---\ntitle: git提交规范\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 15312\ndate: 2020-12-23 21:10:11\n---\n\ngit提交规范\n<!-- more -->\n\n# Commit Message 格式\n\n``` bash\n<type>(<scope>): <subject>\n<空一行>\n<body>\n<空一行>\n<footer>\n```\n\n* `<type>`\n    - feat: 新功能（feature）\n    - fix: 修补bug\n    - docs: 文档（documentation）\n    - style: 格式（不影响代码运行的变动）\n    - refactor: 重构（即不是新增功能，也不是修改bug的代码变动）\n    - perf: 更改代码以提高性能\n    - test: 添加测试\n    - chore: 构建过程或辅助工具的变动\n\n* `<scope>` 选填项，用来说明本次提交的影响的范围，如 $location, $browser。当更改影响的范围不止一个时，可以使用 *\n\n* `<subject>`: 用来简要描述本次改动，尽量遵循:\n    - 以动词开头，使用第一人称现在时，比如change，而不是changed或changes\n    - 首字母不要大写\n    - 结尾不用句号 .\n\n* `<body>` : 对 `<subject>` 的描述\n\n* `<footer>`: 主要放置不兼容变更和关闭Issue的信息\n    - 不兼容变更: 以 BREAKING CHANGE: 开头，描述变动、变动理由和迁移方法。\n    - 关闭Issue: 如close #666\n\n## 特殊格式\n- Revert: 此外如果需要撤销之前的Commit，那么本次Commit Message中必须以 revert： 开头，后面紧跟前面描述的Header部分，格式不变。并且，<body>部分的格式也是固定的，必须要记录撤销前Commit的SHA值。\n\n# 案例\n\n- feat\n\n    ``` bash\n    feat($browser): onUrlChange event (popstate/hashchange/polling)\n\n    Added new event to $browser:\n    - forward popstate event if available\n    - forward hashchange event if popstate not available\n    - do polling when neither popstate nor hashchange available\n\n    Breaks $browser.onHashChange, which was removed (use onUrlChange instead)\n    ```\n\n    ``` bash\n    feat(directive): ng:disabled, ng:checked, ng:multiple, ng:readonly, ng:selected\n\n    New directives for proper binding these attributes in older browsers (IE).\n    Added coresponding description, live examples and e2e tests.\n\n    Closes #351\n    ```\n\n- fix\n\n    ``` bash\n    fix($compile): couple of unit tests for IE9\n\n    Older IEs serialize html uppercased, but IE9 does not...\n    Would be better to expect case insensitive, unfortunately jasmine does\n    not allow to user regexps for throw expectations.\n\n    Closes #392\n    Breaks foo.bar api, foo.baz should be used instead\n    ```\n\n* docs\n\n    ``` bash\n    docs(guide): updated fixed docs from Google Docs\n\n    Couple of typos fixed:\n    - indentation\n    - batchLogbatchLog -> batchLog\n    - start periodic checking\n    - missing brace\n    ```\n\n    ``` bash\n    docs: fix grammar\n    docs: corrections and further clarifications \n    docs: update broken link\n    docs(README): update version number\n    docs(README): place badge\n    docs(inputs): remove redundant defaults\n    ```\n\n* style\n\n    ``` bash\n    style: fix table indentation\n    style($location): add couple of missing semi colons\n    ```\n\n* refactor\n\n    ``` bash\n    refactor: remove unnecessary object destructuring\n    refactor: use `Object.entries` rather than `Object.keys`\n    ```\n\n* perf\n\n    ``` bash\n    perf(*): Update network configuration\n    ```\n\n* test\n\n    ``` bash\n    test: clarify variables name\n    test(testRelease): set schedule test\n    ```\n\n* chore\n\n    ``` bash\n    chore(package): update xo to version 0.25.0\n    chore(package): remove commitizen from our dependencies\n    chore(*): transfer repo to cycjimmy\n    ```\n\n* revert\n\n    ``` bash\n    revert: \"fix: do not convert ssh `repositoryUrl` to https\"\n\n    This reverts commit b895231.\n    ```","slug":"tools/gitcommit","published":1,"updated":"2020-12-28T00:58:56.911Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6vj0020d8v85fl216k7","content":"<p>git提交规范</p>\n<a id=\"more\"></a>\n\n<h1 id=\"Commit-Message-格式\"><a href=\"#Commit-Message-格式\" class=\"headerlink\" title=\"Commit Message 格式\"></a>Commit Message 格式</h1><pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token operator\">&lt;</span>type<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>scope<span class=\"token operator\">></span><span class=\"token punctuation\">)</span>: <span class=\"token operator\">&lt;</span>subject<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>空一行<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>空一行<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>footer<span class=\"token operator\">></span></code></pre>\n<ul>\n<li><p><code>&lt;type&gt;</code></p>\n<ul>\n<li>feat: 新功能（feature）</li>\n<li>fix: 修补bug</li>\n<li>docs: 文档（documentation）</li>\n<li>style: 格式（不影响代码运行的变动）</li>\n<li>refactor: 重构（即不是新增功能，也不是修改bug的代码变动）</li>\n<li>perf: 更改代码以提高性能</li>\n<li>test: 添加测试</li>\n<li>chore: 构建过程或辅助工具的变动</li>\n</ul>\n</li>\n<li><p><code>&lt;scope&gt;</code> 选填项，用来说明本次提交的影响的范围，如 $location, $browser。当更改影响的范围不止一个时，可以使用 *</p>\n</li>\n<li><p><code>&lt;subject&gt;</code>: 用来简要描述本次改动，尽量遵循:</p>\n<ul>\n<li>以动词开头，使用第一人称现在时，比如change，而不是changed或changes</li>\n<li>首字母不要大写</li>\n<li>结尾不用句号 .</li>\n</ul>\n</li>\n<li><p><code>&lt;body&gt;</code> : 对 <code>&lt;subject&gt;</code> 的描述</p>\n</li>\n<li><p><code>&lt;footer&gt;</code>: 主要放置不兼容变更和关闭Issue的信息</p>\n<ul>\n<li>不兼容变更: 以 BREAKING CHANGE: 开头，描述变动、变动理由和迁移方法。</li>\n<li>关闭Issue: 如close #666</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"特殊格式\"><a href=\"#特殊格式\" class=\"headerlink\" title=\"特殊格式\"></a>特殊格式</h2><ul>\n<li>Revert: 此外如果需要撤销之前的Commit，那么本次Commit Message中必须以 revert： 开头，后面紧跟前面描述的Header部分，格式不变。并且，<body>部分的格式也是固定的，必须要记录撤销前Commit的SHA值。</li>\n</ul>\n<h1 id=\"案例\"><a href=\"#案例\" class=\"headerlink\" title=\"案例\"></a>案例</h1><ul>\n<li><p>feat</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">feat<span class=\"token punctuation\">(</span><span class=\"token variable\">$browser</span><span class=\"token punctuation\">)</span>: onUrlChange event <span class=\"token punctuation\">(</span>popstate/hashchange/polling<span class=\"token punctuation\">)</span>\n\nAdded new event to <span class=\"token variable\">$browser</span><span class=\"token keyword\">:</span>\n- forward popstate event <span class=\"token keyword\">if</span> available\n- forward hashchange event <span class=\"token keyword\">if</span> popstate not available\n- <span class=\"token keyword\">do</span> polling when neither popstate nor hashchange available\n\nBreaks <span class=\"token variable\">$browser</span>.onHashChange, <span class=\"token function\">which</span> was removed <span class=\"token punctuation\">(</span>use onUrlChange instead<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\" language-bash\"><code class=\"language-bash\">feat<span class=\"token punctuation\">(</span>directive<span class=\"token punctuation\">)</span>: ng:disabled, ng:checked, ng:multiple, ng:readonly, ng:selected\n\nNew directives <span class=\"token keyword\">for</span> proper binding these attributes <span class=\"token keyword\">in</span> older browsers <span class=\"token punctuation\">(</span>IE<span class=\"token punctuation\">)</span>.\nAdded coresponding description, live examples and e2e tests.\n\nCloses <span class=\"token comment\" spellcheck=\"true\">#351</span></code></pre>\n</li>\n<li><p>fix</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">fix<span class=\"token punctuation\">(</span><span class=\"token variable\">$compile</span><span class=\"token punctuation\">)</span>: couple of unit tests <span class=\"token keyword\">for</span> IE9\n\nOlder IEs serialize html uppercased, but IE9 does not<span class=\"token punctuation\">..</span>.\nWould be better to <span class=\"token function\">expect</span> <span class=\"token keyword\">case</span> insensitive, unfortunately jasmine does\nnot allow to user regexps <span class=\"token keyword\">for</span> throw expectations.\n\nCloses <span class=\"token comment\" spellcheck=\"true\">#392</span>\nBreaks foo.bar api, foo.baz should be used instead</code></pre>\n</li>\n</ul>\n<ul>\n<li><p>docs</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">docs<span class=\"token punctuation\">(</span>guide<span class=\"token punctuation\">)</span>: updated fixed docs from Google Docs\n\nCouple of typos fixed:\n- indentation\n- batchLogbatchLog -<span class=\"token operator\">></span> batchLog\n- start periodic checking\n- missing brace</code></pre>\n<pre class=\" language-bash\"><code class=\"language-bash\">docs: fix grammar\ndocs: corrections and further clarifications \ndocs: update broken <span class=\"token function\">link</span>\ndocs<span class=\"token punctuation\">(</span>README<span class=\"token punctuation\">)</span>: update version number\ndocs<span class=\"token punctuation\">(</span>README<span class=\"token punctuation\">)</span>: place badge\ndocs<span class=\"token punctuation\">(</span>inputs<span class=\"token punctuation\">)</span>: remove redundant defaults</code></pre>\n</li>\n<li><p>style</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">style: fix table indentation\nstyle<span class=\"token punctuation\">(</span><span class=\"token variable\">$location</span><span class=\"token punctuation\">)</span>: add couple of missing semi colons</code></pre>\n</li>\n<li><p>refactor</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">refactor: remove unnecessary object destructuring\nrefactor: use <span class=\"token variable\"><span class=\"token variable\">`</span>Object.entries<span class=\"token variable\">`</span></span> rather than <span class=\"token variable\"><span class=\"token variable\">`</span>Object.keys<span class=\"token variable\">`</span></span></code></pre>\n</li>\n<li><p>perf</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">perf<span class=\"token punctuation\">(</span>*<span class=\"token punctuation\">)</span>: Update network configuration</code></pre>\n</li>\n<li><p>test</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">test: clarify variables name\ntest<span class=\"token punctuation\">(</span>testRelease<span class=\"token punctuation\">)</span>: <span class=\"token keyword\">set</span> schedule <span class=\"token function\">test</span></code></pre>\n</li>\n<li><p>chore</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">chore<span class=\"token punctuation\">(</span>package<span class=\"token punctuation\">)</span>: update xo to version 0.25.0\nchore<span class=\"token punctuation\">(</span>package<span class=\"token punctuation\">)</span>: remove commitizen from our dependencies\nchore<span class=\"token punctuation\">(</span>*<span class=\"token punctuation\">)</span>: transfer repo to cycjimmy</code></pre>\n</li>\n<li><p>revert</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">revert: <span class=\"token string\">\"fix: do not convert ssh <span class=\"token variable\"><span class=\"token variable\">`</span>repositoryUrl<span class=\"token variable\">`</span></span> to https\"</span>\n\nThis reverts commit b895231.</code></pre>\n</li>\n</ul>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>git提交规范</p>","more":"<h1 id=\"Commit-Message-格式\"><a href=\"#Commit-Message-格式\" class=\"headerlink\" title=\"Commit Message 格式\"></a>Commit Message 格式</h1><pre><code class=\"bash\">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n&lt;空一行&gt;\n&lt;body&gt;\n&lt;空一行&gt;\n&lt;footer&gt;</code></pre>\n<ul>\n<li><p><code>&lt;type&gt;</code></p>\n<ul>\n<li>feat: 新功能（feature）</li>\n<li>fix: 修补bug</li>\n<li>docs: 文档（documentation）</li>\n<li>style: 格式（不影响代码运行的变动）</li>\n<li>refactor: 重构（即不是新增功能，也不是修改bug的代码变动）</li>\n<li>perf: 更改代码以提高性能</li>\n<li>test: 添加测试</li>\n<li>chore: 构建过程或辅助工具的变动</li>\n</ul>\n</li>\n<li><p><code>&lt;scope&gt;</code> 选填项，用来说明本次提交的影响的范围，如 $location, $browser。当更改影响的范围不止一个时，可以使用 *</p>\n</li>\n<li><p><code>&lt;subject&gt;</code>: 用来简要描述本次改动，尽量遵循:</p>\n<ul>\n<li>以动词开头，使用第一人称现在时，比如change，而不是changed或changes</li>\n<li>首字母不要大写</li>\n<li>结尾不用句号 .</li>\n</ul>\n</li>\n<li><p><code>&lt;body&gt;</code> : 对 <code>&lt;subject&gt;</code> 的描述</p>\n</li>\n<li><p><code>&lt;footer&gt;</code>: 主要放置不兼容变更和关闭Issue的信息</p>\n<ul>\n<li>不兼容变更: 以 BREAKING CHANGE: 开头，描述变动、变动理由和迁移方法。</li>\n<li>关闭Issue: 如close #666</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"特殊格式\"><a href=\"#特殊格式\" class=\"headerlink\" title=\"特殊格式\"></a>特殊格式</h2><ul>\n<li>Revert: 此外如果需要撤销之前的Commit，那么本次Commit Message中必须以 revert： 开头，后面紧跟前面描述的Header部分，格式不变。并且，<body>部分的格式也是固定的，必须要记录撤销前Commit的SHA值。</li>\n</ul>\n<h1 id=\"案例\"><a href=\"#案例\" class=\"headerlink\" title=\"案例\"></a>案例</h1><ul>\n<li><p>feat</p>\n<pre><code class=\"bash\">feat($browser): onUrlChange event (popstate/hashchange/polling)\n\nAdded new event to $browser:\n- forward popstate event if available\n- forward hashchange event if popstate not available\n- do polling when neither popstate nor hashchange available\n\nBreaks $browser.onHashChange, which was removed (use onUrlChange instead)</code></pre>\n<pre><code class=\"bash\">feat(directive): ng:disabled, ng:checked, ng:multiple, ng:readonly, ng:selected\n\nNew directives for proper binding these attributes in older browsers (IE).\nAdded coresponding description, live examples and e2e tests.\n\nCloses #351</code></pre>\n</li>\n<li><p>fix</p>\n<pre><code class=\"bash\">fix($compile): couple of unit tests for IE9\n\nOlder IEs serialize html uppercased, but IE9 does not...\nWould be better to expect case insensitive, unfortunately jasmine does\nnot allow to user regexps for throw expectations.\n\nCloses #392\nBreaks foo.bar api, foo.baz should be used instead</code></pre>\n</li>\n</ul>\n<ul>\n<li><p>docs</p>\n<pre><code class=\"bash\">docs(guide): updated fixed docs from Google Docs\n\nCouple of typos fixed:\n- indentation\n- batchLogbatchLog -&gt; batchLog\n- start periodic checking\n- missing brace</code></pre>\n<pre><code class=\"bash\">docs: fix grammar\ndocs: corrections and further clarifications \ndocs: update broken link\ndocs(README): update version number\ndocs(README): place badge\ndocs(inputs): remove redundant defaults</code></pre>\n</li>\n<li><p>style</p>\n<pre><code class=\"bash\">style: fix table indentation\nstyle($location): add couple of missing semi colons</code></pre>\n</li>\n<li><p>refactor</p>\n<pre><code class=\"bash\">refactor: remove unnecessary object destructuring\nrefactor: use `Object.entries` rather than `Object.keys`</code></pre>\n</li>\n<li><p>perf</p>\n<pre><code class=\"bash\">perf(*): Update network configuration</code></pre>\n</li>\n<li><p>test</p>\n<pre><code class=\"bash\">test: clarify variables name\ntest(testRelease): set schedule test</code></pre>\n</li>\n<li><p>chore</p>\n<pre><code class=\"bash\">chore(package): update xo to version 0.25.0\nchore(package): remove commitizen from our dependencies\nchore(*): transfer repo to cycjimmy</code></pre>\n</li>\n<li><p>revert</p>\n<pre><code class=\"bash\">revert: &quot;fix: do not convert ssh `repositoryUrl` to https&quot;\n\nThis reverts commit b895231.</code></pre>\n</li>\n</ul>"},{"title":"nginx笔记","abbrlink":25491,"date":"2018-05-16T01:10:12.000Z","_content":"\nlinux安装nginx\n<!-- more -->\n\n1. nginx官网https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7\n2. 命令  \n启动:sudo nginx   \n重启:sudo nginx -s reload   \n关闭:sudo nginx -s stop  ","source":"_posts/tools/nginx.md","raw":"---\ntitle: nginx笔记\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 25491\ndate: 2018-05-16 09:10:12\n---\n\nlinux安装nginx\n<!-- more -->\n\n1. nginx官网https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7\n2. 命令  \n启动:sudo nginx   \n重启:sudo nginx -s reload   \n关闭:sudo nginx -s stop  ","slug":"tools/nginx","published":1,"updated":"2020-12-29T01:15:00.450Z","_id":"ckj9at6vl0024d8v85341e2sq","comments":1,"layout":"post","photos":[],"link":""},{"title":"利用ngrok来做内网穿透","abbrlink":44373,"date":"2018-12-17T11:10:12.000Z","_content":"\n我有很多自己的个人代码是跑在家里的服务器中的.一般来说都是自动化的处理我的一些生活问题,与数据收集等相关活动. 所以一般没有客户端访问家里服务器的需求. 但是很多时候脑子突发奇想.有一些小点子,一些小的bug或者小的优化,代码修改完成之后,有一个部署到需求. 因为家里服务器没有一个稳定的外网IP的,外网不能直接连接服务器. 所以我们需要 内网穿透.\n<!-- more -->\n\n\n\n### 用法\n1. 首先你需要去官网注册一个账号\n2. 下载ngrok,并且解压到一个你喜欢的目录下面\n3. 去官网复制你的授权码\n4. 授权ngrok\n``` bash\nngrok authtoken 授权码\n```\n### http\n``` bash\nngrok http 8080\n```\n\n### tcp\n``` bash\nngrok tcp 22\n```\n\n![20191217094149.png](http://qiniu.xxgtalk.cn/blog/images/20191217094149.png)\n\n最终你会得到,一个外网可以访问的地址. 用这个地址就可以直接访问到你\b本机的端口了.  \n\n当我们拥有这样一个公网地址之后,我们就可以ssh来控制家里的机器 或者使用github的webhook来做一切你想要做的事情.","source":"_posts/tools/ngrok.md","raw":"---\ntitle: 利用ngrok来做内网穿透\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 44373\ndate: 2018-12-17 19:10:12\n---\n\n我有很多自己的个人代码是跑在家里的服务器中的.一般来说都是自动化的处理我的一些生活问题,与数据收集等相关活动. 所以一般没有客户端访问家里服务器的需求. 但是很多时候脑子突发奇想.有一些小点子,一些小的bug或者小的优化,代码修改完成之后,有一个部署到需求. 因为家里服务器没有一个稳定的外网IP的,外网不能直接连接服务器. 所以我们需要 内网穿透.\n<!-- more -->\n\n\n\n### 用法\n1. 首先你需要去官网注册一个账号\n2. 下载ngrok,并且解压到一个你喜欢的目录下面\n3. 去官网复制你的授权码\n4. 授权ngrok\n``` bash\nngrok authtoken 授权码\n```\n### http\n``` bash\nngrok http 8080\n```\n\n### tcp\n``` bash\nngrok tcp 22\n```\n\n![20191217094149.png](http://qiniu.xxgtalk.cn/blog/images/20191217094149.png)\n\n最终你会得到,一个外网可以访问的地址. 用这个地址就可以直接访问到你\b本机的端口了.  \n\n当我们拥有这样一个公网地址之后,我们就可以ssh来控制家里的机器 或者使用github的webhook来做一切你想要做的事情.","slug":"tools/ngrok","published":1,"updated":"2020-12-28T00:55:28.076Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6vn0026d8v80isa19xr","content":"<p>我有很多自己的个人代码是跑在家里的服务器中的.一般来说都是自动化的处理我的一些生活问题,与数据收集等相关活动. 所以一般没有客户端访问家里服务器的需求. 但是很多时候脑子突发奇想.有一些小点子,一些小的bug或者小的优化,代码修改完成之后,有一个部署到需求. 因为家里服务器没有一个稳定的外网IP的,外网不能直接连接服务器. 所以我们需要 内网穿透.</p>\n<a id=\"more\"></a>\n\n\n\n<h3 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h3><ol>\n<li>首先你需要去官网注册一个账号</li>\n<li>下载ngrok,并且解压到一个你喜欢的目录下面</li>\n<li>去官网复制你的授权码</li>\n<li>授权ngrok<pre class=\" language-bash\"><code class=\"language-bash\">ngrok authtoken 授权码</code></pre>\n<h3 id=\"http\"><a href=\"#http\" class=\"headerlink\" title=\"http\"></a>http</h3><pre class=\" language-bash\"><code class=\"language-bash\">ngrok http 8080</code></pre>\n</li>\n</ol>\n<h3 id=\"tcp\"><a href=\"#tcp\" class=\"headerlink\" title=\"tcp\"></a>tcp</h3><pre class=\" language-bash\"><code class=\"language-bash\">ngrok tcp 22</code></pre>\n<p><img src=\"http://qiniu.xxgtalk.cn/blog/images/20191217094149.png\" alt=\"20191217094149.png\"></p>\n<p>最终你会得到,一个外网可以访问的地址. 用这个地址就可以直接访问到你\b本机的端口了.  </p>\n<p>当我们拥有这样一个公网地址之后,我们就可以ssh来控制家里的机器 或者使用github的webhook来做一切你想要做的事情.</p>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>我有很多自己的个人代码是跑在家里的服务器中的.一般来说都是自动化的处理我的一些生活问题,与数据收集等相关活动. 所以一般没有客户端访问家里服务器的需求. 但是很多时候脑子突发奇想.有一些小点子,一些小的bug或者小的优化,代码修改完成之后,有一个部署到需求. 因为家里服务器没有一个稳定的外网IP的,外网不能直接连接服务器. 所以我们需要 内网穿透.</p>","more":"<h3 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h3><ol>\n<li>首先你需要去官网注册一个账号</li>\n<li>下载ngrok,并且解压到一个你喜欢的目录下面</li>\n<li>去官网复制你的授权码</li>\n<li>授权ngrok<pre><code class=\"bash\">ngrok authtoken 授权码</code></pre>\n<h3 id=\"http\"><a href=\"#http\" class=\"headerlink\" title=\"http\"></a>http</h3><pre><code class=\"bash\">ngrok http 8080</code></pre>\n</li>\n</ol>\n<h3 id=\"tcp\"><a href=\"#tcp\" class=\"headerlink\" title=\"tcp\"></a>tcp</h3><pre><code class=\"bash\">ngrok tcp 22</code></pre>\n<p><img src=\"http://qiniu.xxgtalk.cn/blog/images/20191217094149.png\" alt=\"20191217094149.png\"></p>\n<p>最终你会得到,一个外网可以访问的地址. 用这个地址就可以直接访问到你\b本机的端口了.  </p>\n<p>当我们拥有这样一个公网地址之后,我们就可以ssh来控制家里的机器 或者使用github的webhook来做一切你想要做的事情.</p>"},{"title":"npm前端项目","abbrlink":15805,"date":"2018-05-16T01:10:12.000Z","_content":"\nnpm相关前端操作\n<!-- more -->\n\n##### 本地调试\n调试本地的包  \n1. cd 到包的文件夹下 将当前包link到全局\n    ``` bash\n    npm link\n    ```\n2. cd 到项目文件夹 将要使用的包link过来 命令如下\n    ``` bash\n    npm link [package name]\n    ```\n示例：\n> 包名称 xxg-uim-plugin-locale、项目名称 xxg-admin  \n先在 xxg-uim-plugin-locale文件夹下将当前包link到全局，执行 :npm link  \n在定位到xxg-admin项目下，执行: npm link xxg-umi-plugin-locale  \n这样 如果通过yarn add xxg-umi-plugin-locale 安装包的时候会link到本地而不会从npm下载 这样方便本地开发调试\n\n##### 发布到npm  \n续待更新...","source":"_posts/tools/npm.md","raw":"---\ntitle: npm前端项目\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 15805\ndate: 2018-05-16 09:10:12\n---\n\nnpm相关前端操作\n<!-- more -->\n\n##### 本地调试\n调试本地的包  \n1. cd 到包的文件夹下 将当前包link到全局\n    ``` bash\n    npm link\n    ```\n2. cd 到项目文件夹 将要使用的包link过来 命令如下\n    ``` bash\n    npm link [package name]\n    ```\n示例：\n> 包名称 xxg-uim-plugin-locale、项目名称 xxg-admin  \n先在 xxg-uim-plugin-locale文件夹下将当前包link到全局，执行 :npm link  \n在定位到xxg-admin项目下，执行: npm link xxg-umi-plugin-locale  \n这样 如果通过yarn add xxg-umi-plugin-locale 安装包的时候会link到本地而不会从npm下载 这样方便本地开发调试\n\n##### 发布到npm  \n续待更新...","slug":"tools/npm","published":1,"updated":"2020-12-29T01:15:00.452Z","_id":"ckj9at6vq002ad8v8c1rg3oji","comments":1,"layout":"post","photos":[],"link":""},{"title":"通过dotnet命令上传自己的nuget包","abbrlink":20038,"date":"2018-05-16T01:10:13.000Z","_content":"\n通过dotnet命令上传自己的nuget包\n<!-- more -->\n\n##### 通过dotnet命令上传自己的nuget包\n- 编辑项目属性 在打包选项中设置各种东西 勾选'在版本中生成Nuget包'、设置其他东西 如包Id、版本等  \n- 通过vs发布该包 我生成的为:XXG.AutoMapper.AutoReg.1.1.0.nupkg\n- 执行命令\n    ``` bash\n    dotnet nuget push XXG.AutoMapper.AutoReg.1.1.0.nupkg -k oy2km5lmhmh4lnff32uadp2qudugxwce5jjamrh6xgx4vy -s https://api.nuget.org/v3/index.json\n    ```\n","source":"_posts/tools/nuget.md","raw":"---\ntitle: 通过dotnet命令上传自己的nuget包\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 20038\ndate: 2018-05-16 09:10:13\n---\n\n通过dotnet命令上传自己的nuget包\n<!-- more -->\n\n##### 通过dotnet命令上传自己的nuget包\n- 编辑项目属性 在打包选项中设置各种东西 勾选'在版本中生成Nuget包'、设置其他东西 如包Id、版本等  \n- 通过vs发布该包 我生成的为:XXG.AutoMapper.AutoReg.1.1.0.nupkg\n- 执行命令\n    ``` bash\n    dotnet nuget push XXG.AutoMapper.AutoReg.1.1.0.nupkg -k oy2km5lmhmh4lnff32uadp2qudugxwce5jjamrh6xgx4vy -s https://api.nuget.org/v3/index.json\n    ```\n","slug":"tools/nuget","published":1,"updated":"2020-12-29T01:15:00.455Z","_id":"ckj9at6vr002cd8v8buhxcriw","comments":1,"layout":"post","photos":[],"link":""},{"title":"office笔记","abbrlink":51824,"date":"2018-05-16T01:10:13.000Z","_content":"\noffice笔记-长期更新\n<!-- more -->\n\n1. =INDIRECT(\"Sheet1!C\"&ROW())&\"\"，引用下拉框，自动行号   \n2. 字符串拼接：=$A1&$B1，表示：输出A1和B1单元格的内容  ","source":"_posts/tools/office.md","raw":"---\ntitle: office笔记\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 51824\ndate: 2018-05-16 09:10:13\n---\n\noffice笔记-长期更新\n<!-- more -->\n\n1. =INDIRECT(\"Sheet1!C\"&ROW())&\"\"，引用下拉框，自动行号   \n2. 字符串拼接：=$A1&$B1，表示：输出A1和B1单元格的内容  ","slug":"tools/office","published":1,"updated":"2020-12-29T01:15:00.457Z","_id":"ckj9at6vt002ed8v8ahzna17f","comments":1,"layout":"post","photos":[],"link":""},{"title":"使用travis自动部署到github","abbrlink":207,"date":"2019-03-16T01:10:15.000Z","_content":"\n\n#### 使用github+travis+ant-design-pro-site打造自己公司的前端开发文档站点\n<!-- more -->\n\n#### 开篇\n\n> 插播一条小广告，我们公司招人.net、前端(react栈) ；有求职意向可以私我内推(qq:1002275364)\n\n目前公司的系统是基于.net web mvc开发，由于历史原因吧，里面有razor写的，也有公司自定义的前端单页框架jui写的一部分，在后续的开发、维护过程中愈发困难；基于各方面考虑以最后打算后端基于.netcore；前端基于react+antd+dva+umi栈重构；\n1. 为什么用.net core  \n其实吧，我跟后端是有很大的渊源的，做了好几年后端吧，发现.net后端其实蛮苦逼的，不仅得写后端api还得写前端页面(没办法，你让美工去写razor页面感觉有点过分)，这也是为什么要前后端分离的原因之一(虽然分离之后前端页面还是后端开发人员兼职写^_^)；  \n.net core 天生为了跨平台、高性能、微服务、云而生；作为一个后端黑带6道的我，中小型项目里面玩的还是蛮顺手的(像什么abp、DI、dapper、ef、NPOI、itextsharp、quartznet、CAP、SignalR、Polly、DotnetSpider等还是玩过一些些的，只要别跟我扯什么动不动就双十一的场景，还是可以聊的下去的)  \n其次，.net core生态圈目前虽然不如java等，但是还是可以看到一直在进步；像什么桌面应用、Xamarin、ML.NET、爬虫、Xamarin、区块链、IoT、Unity3D、等都有涉及到;微服务方向，有Ocelot、Consul、Polly 等等等等等等等等等等等等等...  \n2. 为啥用react+antd+dva+umi【+ts】栈\n目前开发人员以后端人员为主力，对jquery栈比较熟悉；切换到react后需要比较大的转变，需要接触很多新知识，比如es6的析构赋值、rest、箭头函数、Generate、Promise、模板字符串;再比如 react的生命周期、redux的数据流等 这些都是新的东西；考虑到各方面，最终打算数据量方案使用dva(简单明了以model为单位集reducers、effects、subscribe等)，至于antd不用过多介绍，业界公认前端ui库\n\n好像有点跑题了~~~~~\n\n#### 工作准备\n1. 注册账号[github](https://github.com)、[travis](https://travis-ci.org)\n2. github上创建仓库(wetrial-site)\n3. github上生成一个token(记得保存下来)，用于travis推送代码到gh-pages分支  \n![生成token](http://qiniu.xxgtalk.cn/blog/images/tools/travis_github_generate_token.jpg) \n记得将tokens保存下来，稍后要用到，仓库权限选择第一项 repo即可  \n4. travis设置  \n点击头像、然后选择项目，默认是用户，如果你的项目是组织项目的，需要切换到组织，如图所示  \n![travis项目选择](http://qiniu.xxgtalk.cn/blog/images/tools/travis_project_list.jpg) \n5. 进入项目配置页面，如图  \n![travis项目选择](http://qiniu.xxgtalk.cn/blog/images/tools/travis_project_setting.jpg) \n添加环境变量相关东西，包括域名、token等\n![配置](http://qiniu.xxgtalk.cn/blog/images/tools/travis_environment.jpg)   \n6. 回到实际的项目\n从ant-design-pro-site拉取代码，然后根据自己的实际情况做修改；比如我去掉了尾栏的一些东西，增加了css相关的大栏(这里不具体介绍)  \n7. 在根目录下添加travis的配置文件.travis.yml 内容如下所示\n``` yml\nlanguage: node_js\n\nnode_js:\n  - \"8\"\n\n# 缓存依赖\ncache:\n  directories:\n    - node_modules\n\nbefore_install:\n  - export TZ='Asia/Shanghai' # 更改时区\n\n# 依赖安装\ninstall:\n  - npm install\n\n# 构建脚本\nscript: \n  - npm run build-site\n\n# 分支白名单\nbranches:\n  only:\n    - master # 只对 master 分支进行构建\n\n# GitHub Pages 部署\ndeploy:\n  - provider: pages\n    skip_cleanup: true\n     # 在项目仪表盘的 Settings -> Environment Variables 中配置\n    github_token: $GITHUB_TOKEN\n    # 将 build 目录下的内容推送到默认的 gh-pages 分支上，并不会连带 build 目录一起\n    local_dir: _site\n    # 绑定自定义域名，根据自己的情况来\n    fqdn: $CUSTOM_DOMAIN\n    name: $GIT_NAME\n    email: $GIT_EMAIL\n```\n然后提交并同步到github,回到travis将会看到如下一幕  \n![配置](http://qiniu.xxgtalk.cn/blog/images/tools/travis_log.jpg)    \n你也可以从日志里面看到具体的执行过程，等待执行完成后回到github中将会看到里面多了一个gh-pages分支，没错 这个分支就是travis中的deploy推送过去的，里面就是编译后的代码，再回到setting里面，将会看到已经默认配置好站点地址了，这里我们改改 使用自己的域名，如图所示:  \n![](http://qiniu.xxgtalk.cn/blog/images/tools/travis_github_config.jpg) \n最后，去域名管理页，将自己的这个子域名一定一个类型为CNAME的，地址为:wetrial.github.io\n\n#### 结尾  \n访问刚配置的地址:http://ant.xxgtalk.cn 可以看到部署好的文档\n\n![wetrial示例](http://qiniu.xxgtalk.cn/blog/images/tools/wetrial-site.jpg) \n\n> 此外,打算写一篇这块的手册，[地址:https://www.yuque.com/wetrial/front-end/xuyan](https://www.yuque.com/wetrial/front-end/xuyan) 欢迎 [FORK](https://www.yuque.com/wetrial/front-end/xuyan)","source":"_posts/tools/travis.md","raw":"---\ntitle: 使用travis自动部署到github\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 207\ndate: 2019-03-16 09:10:15\n---\n\n\n#### 使用github+travis+ant-design-pro-site打造自己公司的前端开发文档站点\n<!-- more -->\n\n#### 开篇\n\n> 插播一条小广告，我们公司招人.net、前端(react栈) ；有求职意向可以私我内推(qq:1002275364)\n\n目前公司的系统是基于.net web mvc开发，由于历史原因吧，里面有razor写的，也有公司自定义的前端单页框架jui写的一部分，在后续的开发、维护过程中愈发困难；基于各方面考虑以最后打算后端基于.netcore；前端基于react+antd+dva+umi栈重构；\n1. 为什么用.net core  \n其实吧，我跟后端是有很大的渊源的，做了好几年后端吧，发现.net后端其实蛮苦逼的，不仅得写后端api还得写前端页面(没办法，你让美工去写razor页面感觉有点过分)，这也是为什么要前后端分离的原因之一(虽然分离之后前端页面还是后端开发人员兼职写^_^)；  \n.net core 天生为了跨平台、高性能、微服务、云而生；作为一个后端黑带6道的我，中小型项目里面玩的还是蛮顺手的(像什么abp、DI、dapper、ef、NPOI、itextsharp、quartznet、CAP、SignalR、Polly、DotnetSpider等还是玩过一些些的，只要别跟我扯什么动不动就双十一的场景，还是可以聊的下去的)  \n其次，.net core生态圈目前虽然不如java等，但是还是可以看到一直在进步；像什么桌面应用、Xamarin、ML.NET、爬虫、Xamarin、区块链、IoT、Unity3D、等都有涉及到;微服务方向，有Ocelot、Consul、Polly 等等等等等等等等等等等等等...  \n2. 为啥用react+antd+dva+umi【+ts】栈\n目前开发人员以后端人员为主力，对jquery栈比较熟悉；切换到react后需要比较大的转变，需要接触很多新知识，比如es6的析构赋值、rest、箭头函数、Generate、Promise、模板字符串;再比如 react的生命周期、redux的数据流等 这些都是新的东西；考虑到各方面，最终打算数据量方案使用dva(简单明了以model为单位集reducers、effects、subscribe等)，至于antd不用过多介绍，业界公认前端ui库\n\n好像有点跑题了~~~~~\n\n#### 工作准备\n1. 注册账号[github](https://github.com)、[travis](https://travis-ci.org)\n2. github上创建仓库(wetrial-site)\n3. github上生成一个token(记得保存下来)，用于travis推送代码到gh-pages分支  \n![生成token](http://qiniu.xxgtalk.cn/blog/images/tools/travis_github_generate_token.jpg) \n记得将tokens保存下来，稍后要用到，仓库权限选择第一项 repo即可  \n4. travis设置  \n点击头像、然后选择项目，默认是用户，如果你的项目是组织项目的，需要切换到组织，如图所示  \n![travis项目选择](http://qiniu.xxgtalk.cn/blog/images/tools/travis_project_list.jpg) \n5. 进入项目配置页面，如图  \n![travis项目选择](http://qiniu.xxgtalk.cn/blog/images/tools/travis_project_setting.jpg) \n添加环境变量相关东西，包括域名、token等\n![配置](http://qiniu.xxgtalk.cn/blog/images/tools/travis_environment.jpg)   \n6. 回到实际的项目\n从ant-design-pro-site拉取代码，然后根据自己的实际情况做修改；比如我去掉了尾栏的一些东西，增加了css相关的大栏(这里不具体介绍)  \n7. 在根目录下添加travis的配置文件.travis.yml 内容如下所示\n``` yml\nlanguage: node_js\n\nnode_js:\n  - \"8\"\n\n# 缓存依赖\ncache:\n  directories:\n    - node_modules\n\nbefore_install:\n  - export TZ='Asia/Shanghai' # 更改时区\n\n# 依赖安装\ninstall:\n  - npm install\n\n# 构建脚本\nscript: \n  - npm run build-site\n\n# 分支白名单\nbranches:\n  only:\n    - master # 只对 master 分支进行构建\n\n# GitHub Pages 部署\ndeploy:\n  - provider: pages\n    skip_cleanup: true\n     # 在项目仪表盘的 Settings -> Environment Variables 中配置\n    github_token: $GITHUB_TOKEN\n    # 将 build 目录下的内容推送到默认的 gh-pages 分支上，并不会连带 build 目录一起\n    local_dir: _site\n    # 绑定自定义域名，根据自己的情况来\n    fqdn: $CUSTOM_DOMAIN\n    name: $GIT_NAME\n    email: $GIT_EMAIL\n```\n然后提交并同步到github,回到travis将会看到如下一幕  \n![配置](http://qiniu.xxgtalk.cn/blog/images/tools/travis_log.jpg)    \n你也可以从日志里面看到具体的执行过程，等待执行完成后回到github中将会看到里面多了一个gh-pages分支，没错 这个分支就是travis中的deploy推送过去的，里面就是编译后的代码，再回到setting里面，将会看到已经默认配置好站点地址了，这里我们改改 使用自己的域名，如图所示:  \n![](http://qiniu.xxgtalk.cn/blog/images/tools/travis_github_config.jpg) \n最后，去域名管理页，将自己的这个子域名一定一个类型为CNAME的，地址为:wetrial.github.io\n\n#### 结尾  \n访问刚配置的地址:http://ant.xxgtalk.cn 可以看到部署好的文档\n\n![wetrial示例](http://qiniu.xxgtalk.cn/blog/images/tools/wetrial-site.jpg) \n\n> 此外,打算写一篇这块的手册，[地址:https://www.yuque.com/wetrial/front-end/xuyan](https://www.yuque.com/wetrial/front-end/xuyan) 欢迎 [FORK](https://www.yuque.com/wetrial/front-end/xuyan)","slug":"tools/travis","published":1,"updated":"2020-12-29T01:15:00.459Z","_id":"ckj9at6vv002id8v8ea24bfna","comments":1,"layout":"post","photos":[],"link":""},{"title":"windows使用相关","abbrlink":41253,"date":"2018-05-20T01:10:15.000Z","_content":"\n#### window技巧-长期更新\n<!-- more -->\n\n##### 一、技巧篇\n* 查看占用端口  \nnetstat -aon    [|findstr \"1005\"]      查找1005端口被那个占用  \n* windows下删除多层级文件夹：  \n安装rimraf包：npm install -g rimraf  \n然后通过：rimraf <目录名称> 来删除  \n* *#06#:查看IphoneCMD\n*  如何下载到本地，而不是边下载边更新：  \n创建一个快捷方式，在快捷方式的后面加 \"-layout\" 双击后就是下载到本地 而不是安装\n* 打开本地连接：ncpa.cpl\n* 查看系统支持的最大内存：wmic memphysical get maxcapacity\n* 修改hosts文件后刷新 ipconfig -flushdns\n##### 二、快捷键\n* comexp.msc:打开window组件服务，可以查看事务  \n* netplwiz   :修改用户组相关  \n* inetmgr:打开IIS  \n* ssms:SQLServer数据库\n* SQLServerManager11.msc 数据库管理工具\n* devenv:VS\n* mstsc:远程\n* Alt+Enter 显示所选项的属性\n* Alt+Esc 以项目打开的顺序循环切换项目\n* Alt+向上键 在 Windows 资源管理器中查看上一级文件夹\n* Win + M：最小化所有窗口\n* Windows 徽标键 + 加号或减号 放大或缩小\n* Windows 徽标键 输入mspaint 打开画图\n* Windows 徽标键 输入psr打开系统视频录制\n* Windows 徽标键  snippingtool  win7自带截图工具\n* notepad 打开记事本\n* write----------写字板\n* perfmon.msc----计算机性能监测程序\n* services.msc 服务\n* f10或alt键 激活当前程序的菜单栏\n* osk------------打开屏幕键盘 \n* 结束进程：cmd---taskkill /im`notepad.exe /t\n* cdm常用命令：具体参考（http://www.51xue8.com/e/DownSys/play/?classid=31&id=1001&pathid=4&jishu=26）\n* ver====显示系统版本······ver/? =帮助\n* dir====显示驱动版本 · ·······dir/? =帮助\n* copy（用法4，全部复制）如：copy c:\\新建文件夹\\*.* ()d:\\txt\n* chkdsk/?=====查看磁盘文件报告\n* chkdsk===检查磁盘\n* dir====C盘文件夹目录（详细，时间，大小··）\n* dir/w =====显示C盘文件夹 （不显示时间，大小）\n* dir/l 显示子文件夹\n* dir/p======屏幕显示不完时加p\n* format====格式化磁盘（慎用）如：format g:\n* format/?====格式化帮助\n* del=====删除文件 如：del c:\\···\n* del/?===删除帮助\n* md====创建文件夹\n* ipconfig ====查看ip等信息\n* ren=====文件重命名\n* nslookup======ip地址查询\n* exit=====退出\n* rd======删除目录\n* tasklist =====显示进程\n* type=======显示文本内容\n* tree=======显示所有文件名····显示D盘则tree d:\\\n* ping=======检测网络···如ping（必须空格）-f\n* net user=========更改用户\n* net share====== 查看共享文件\n* help==============显示所有命令\n* gpedit.msc-----组策略\n* sndrec32-------录音机\n* Nslookup-------IP地址侦测器\n* explorer-------打开资源管理器\n* logoff---------注销命令\n* tsshutdn-------60秒倒计时关机命令\n* lusrmgr.msc----本机用户和组\n* services.msc---本地服务设置\n* oobe/msoobe /a----检查XP是否激活\n* cleanmgr-------垃圾整理\n* net start messenger----开始信使服务\n* compmgmt.msc---计算机管理\n* net stop messenger-----停止信使服务\n* conf-----------启动netmeeting\n* dvdplay--------DVD播放器\n* charmap--------启动字符映射表\n* diskmgmt.msc---磁盘管理实用程序\n* calc-----------启动计算器\n* dfrg.msc-------磁盘碎片整理程序\n* chkdsk.exe-----Chkdsk磁盘检查\n* devmgmt.msc--- 设备管理器\n* regsvr32 /u *.dll----停止dll文件运行\n* drwtsn32------ 系统医生\n* rononce -p ----15秒关机\n* dxdiag---------检查DirectX信息\n* regedt32-------注册表编辑器\n* Msconfig.exe---系统配置实用程序\n* rsop.msc-------组策略结果集\n* mem.exe--------显示内存使用情况\n* regedit.exe----注册表\n* winchat--------XP自带局域网聊天\n* progman--------程序管理器\n* winmsd---------系统信息\n* perfmon.msc----计算机性能监测程序\n* winver---------检查Windows版本\n* sfc /scannow-----扫描错误并复原\n* taskmgr-----任务管理器（2000／xp／2003\n* winver---------检查Windows版本\n* wmimgmt.msc----打开windows管理体系结构(WMI)\n* wupdmgr--------windows更新程序\n* wscript--------windows脚本宿主设置\n* write----------写字板\n* winmsd---------系统信息\n* wiaacmgr-------扫描仪和照相机向导\n* winchat--------XP自带局域网聊天\n* mem.exe--------显示内存使用情况\n* Msconfig.exe---系统配置实用程序\n* mplayer2-------简易widnows media player\n* mspaint--------画图板\n* mstsc----------远程桌面连接\n* mplayer2-------媒体播放机\n* magnify--------放大镜实用程序\n* mmc------------打开控制台\n* mobsync--------同步命令\n* dxdiag---------检查DirectX信息\n* drwtsn32------ 系统医生\n* devmgmt.msc--- 设备管理器\n* dfrg.msc-------磁盘碎片整理程序\n* diskmgmt.msc---磁盘管理实用程序\n* dcomcnfg-------打开系统组件服务\n* ddeshare-------打开DDE共享设置\n* dvdplay--------DVD播放器\n* net stop messenger-----停止信使服务\n* net start messenger----开始信使服务\n* notepad--------打开记事本\n* nslookup-------网络管理的工具向导\n* ntbackup-------系统备份和还原\n* narrator-------屏幕“讲述人”\n* ntmsmgr.msc----移动存储管理器\n* ntmsoprq.msc---移动存储管理员操作请求\n* netstat -an----(TC)命令检查接口\n* syncapp--------创建一个公文包\n* sysedit--------系统配置编辑器\n* sigverif-------文件签名验证程序\n* sndrec32-------录音机\n* shrpubw--------创建共享文件夹\n* secpol.msc-----本地安全策略\n* syskey---------系统加密，一旦加密就不能解开，保护windows xp系统的双重密码\n* services.msc---本地服务设置\n* Sndvol32-------音量控制程序\n* sfc.exe--------系统文件检查器\n* sfc /scannow---windows文件保护\n* tsshutdn-------60秒倒计时关机命令\n* tourstart------xp简介（安装完成后出现的漫游xp程序）\n* taskmgr--------任务管理器\n* eventvwr-------事件查看器\n* eudcedit-------造字程序\n* explorer-------打开资源管理器\n* packager-------对象包装程序\n* perfmon.msc----计算机性能监测程序\n* progman--------程序管理器\n* regedit.exe----注册表\n* rsop.msc-------组策略结果集\n* regedt32-------注册表编辑器\n* rononce -p ----15秒关机\n* regsvr32 /u *.dll----停止dll文件运行\n* regsvr32 /u zipfldr.dll------取消ZIP支持\n* cmd.exe--------CMD命令提示符\n* chkdsk.exe-----Chkdsk磁盘检查\n* certmgr.msc----证书管理实用程序\n* calc-----------启动计算器\n* charmap--------启动字符映射表\n* cliconfg-------SQL SERVER 客户端网络实用程序\n* Clipbrd--------剪贴板查看器\n* conf-----------启动netmeeting\n* compmgmt.msc---计算机管理\n* cleanmgr-------垃圾整理\n* ciadv.msc------索引服务程序\n* osk------------打开屏幕键盘\n* odbcad32-------ODBC数据源管理器\n* oobe/msoobe /a----检查XP是否激活\n* lusrmgr.msc----本机用户和组\n* logoff---------注销命令\n* iexpress-------木马捆绑工具，系统自带\n* Nslookup-------IP地址侦测器\n* fsmgmt.msc-----共享文件夹管理器\n* utilman--------辅助工具管理器\n* 系统查看=========systeminfo\n\n* 轻松访问键盘快捷方式  \n　　按住右Shift 八秒钟： 启用和关闭筛选键  \n　　按左 Alt+左 Shift+PrtScn(或 PrtScn)：启用或关闭高对比度  \n　　按左 Alt+左 Shift+Num Lock ：启用或关闭鼠标键   \n　　按 Shift 五次： 启用或关闭粘滞键  \n　　按住 Num Lock 五秒钟：启用或关闭切换键  \n　　Windows 徽标键 + U ： 打开轻松访问中心\n* 常规键盘快捷方式  \n　　F1 显示帮助  \n　　Ctrl+C  复制选择的项目  \n　　Ctrl+X  剪切选择的项目  \n　　Ctrl+V  粘贴选择的项目  \n　　Ctrl+Z  撤消操作  \n　　Ctrl+Y  重新执行某项操作\n　　F2 重命名选定项目  \n　　Ctrl+向右键 将光标移动到下一个字词的起始处  \n　　Ctrl+向左键 将光标移动到上一个字词的起始处  \n　　Ctrl+向下键 将光标移动到下一个段落的起始处  \n　　Ctrl+向上键 将光标移动到上一个段落的起始处  \n　　Ctrl+Shift 加某个箭头键 选择一块文本  \n　　Shift 加任意箭头键 在窗口中或桌面上选择多个项目，或者在文档中选择文本   \n　　Ctrl 加任意箭头键+空格键 选择窗口中或桌面上的多个单个项目  \n　　Ctrl+A 选择文档或窗口中的所有项目  \n　　F3 搜索文件或文件夹  \n　　Alt+Enter 显示所选项的属性  \n　　Alt+F4 关闭活动项目或者退出活动程序  \n　　Alt+空格键 为活动窗口打开快捷方式菜单  \n　　Ctrl+F4 关闭活动文档(在允许同时打开多个文档的程序中)  \n　　Alt+Tab 在打开的项目之间切换  \n　　Ctrl+Alt+Tab 使用箭头键在打开的项目之间切换  \n　　Ctrl+鼠标滚轮 更改桌面上的图标大小  \n　　Windows 徽标键 + Tab 使用 Aero Flip 3-D 循环切换任务栏上的程序  \n　　Ctrl + Windows 徽标键 + Tab 通过 Aero Flip 3-D 使用箭头键循环切换任务栏上的程序  \n　　Alt+Esc 以项目打开的顺序循环切换项目  \n　　F6 在窗口中或桌面上循环切换屏幕元素  \n　　F4 在 Windows 资源管理器中显示地址栏列表  \n　　Shift+F10 显示选定项目的快捷菜单  \n　　Ctrl+Esc 打开「开始」菜单  \n　　Alt+加下划线的字母 显示相应的菜单  \n　　Alt+加下划线的字母 执行菜单命令(或其他有下划线的命令)  \n　　F10 激活活动程序中的菜单栏  \n　　向右键 打开右侧的下一个菜单或者打开子菜单  \n　　向左键 打开左侧的下一个菜单或者关闭子菜单  \n　　F5 刷新活动窗口  \n　　Alt+向上键 在 Windows 资源管理器中查看上一级文件夹  \n　　Esc 取消当前任务  \n　　Ctrl+Shift+Esc 打开任务管理器  \n　　插入 CD 时按住 Shift 阻止 CD 自动播放  \n* 对话框键盘快捷方式  \n　　Ctrl+Tab  在选项卡上向前移动  \n　　Ctrl+Shift+Tab  在选项卡上向后移动  \n　　Tab  在选项上向前移动  \n　　Shift+Tab  在选项上向后移动  \n　　Alt+加下划线的字母  执行与该字母匹配的命令(或选择选项)  \n　　Enter  对于许多选定命令代替单击鼠标  \n　　空格键 如果活动选项是复选框，则选中或清除该复选框  \n　　箭头键 如果活动选项是一组选项按钮，则选择某个按钮  \n　　F1 显示帮助  \n　　F4 显示活动列表中的项目  \n　　Backspace 如果在“另存为”或“打开”对话框中选中了某个文件夹，则打开上一级文件夹  \n* Windows 徽标键相关的快捷键  \n　　Windows徽标键就是显示为Windows旗帜，或标有文字Win或Windows的按键，以下简称Win键。XP时代有4个经典的 Win 键组合：R/E/F/L。到了 Win7，花样更多了。  \n　　Win：打开或关闭开始菜单  \n　　Win + Pause：显示系统属性对话框  \n　　Win + D：显示桌面  \n　　Win + M：最小化所有窗口  \n　　Win + SHIFT + M：还原最小化窗口到桌面上  \n　　Win + E：打开我的电脑  \n　　Win + F：搜索文件或文件夹  \n　　Ctrl + Win + F：搜索计算机(如果您在网络上)  \n　　Win + L：锁定您的计算机或切换用户  \n　　Win + R：打开运行对话框  \n　　Win + T：切换任务栏上的程序(感觉是和alt+ESC 一样 )  \n　　Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，新开一个实例。(感觉这个比较新颖，貌似快速启动。) Shift + Windows logo key +number：Start a new instance of the program pinned to the taskbar in the position indicated by the number  \n　　Ctrl + Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，切换到上一次的活动窗口。 Ctrl+Windows logo key +number：Switch to the last active window of the program pinned to the taskbar in the position indicated by the number  \n　　ALT + Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，显示跳转清单。 Alt+Windows logo key +number： Open the Jump List for the program pinned to the taskbar in the position indicated by the number  \n　　Win + TAB：循环切换任务栏上的程序并使用的Aero三维效果  \n　　Ctrl + Win + TAB：使用方向键来循环循环切换任务栏上的程序，并使用的Aero三维效果  \n　　按Ctrl + Win + B：切换到在通知区域中显示信息的程序  \n　　Win + 空格：预览桌面  \n　　Win + ↑：最大化窗口  \n　　Win + ↓：最小化窗口  \n　　Win + ←：最大化到窗口左侧的屏幕上  \n　　Win + →：最大化窗口到右侧的屏幕上  \n　　Win + Home：最小化所有窗口，除了当前激活窗口  \n　　Win+ SHIFT + ↑：拉伸窗口的到屏幕的顶部和底部  \n　　Win+ SHIFT + →/←：移动一个窗口，从一个显示器到另一个  \n　　Win + P：选择一个演示文稿显示模式  \n　　Win + G：循环切换侧边栏的小工具  \n　　Win + U：打开轻松访问中心  \n　　Win + x：打开Windows移动中心  \n* Windows Explorer相关快捷键    \n　　Ctrl+N 打开新窗口    \n　　Ctrl+Shift+N 新建文件夹\n","source":"_posts/tools/windows.md","raw":"---\ntitle: windows使用相关\ncategories:\n  - 工具\ntags:\n  - 工具\nabbrlink: 41253\ndate: 2018-05-20 09:10:15\n---\n\n#### window技巧-长期更新\n<!-- more -->\n\n##### 一、技巧篇\n* 查看占用端口  \nnetstat -aon    [|findstr \"1005\"]      查找1005端口被那个占用  \n* windows下删除多层级文件夹：  \n安装rimraf包：npm install -g rimraf  \n然后通过：rimraf <目录名称> 来删除  \n* *#06#:查看IphoneCMD\n*  如何下载到本地，而不是边下载边更新：  \n创建一个快捷方式，在快捷方式的后面加 \"-layout\" 双击后就是下载到本地 而不是安装\n* 打开本地连接：ncpa.cpl\n* 查看系统支持的最大内存：wmic memphysical get maxcapacity\n* 修改hosts文件后刷新 ipconfig -flushdns\n##### 二、快捷键\n* comexp.msc:打开window组件服务，可以查看事务  \n* netplwiz   :修改用户组相关  \n* inetmgr:打开IIS  \n* ssms:SQLServer数据库\n* SQLServerManager11.msc 数据库管理工具\n* devenv:VS\n* mstsc:远程\n* Alt+Enter 显示所选项的属性\n* Alt+Esc 以项目打开的顺序循环切换项目\n* Alt+向上键 在 Windows 资源管理器中查看上一级文件夹\n* Win + M：最小化所有窗口\n* Windows 徽标键 + 加号或减号 放大或缩小\n* Windows 徽标键 输入mspaint 打开画图\n* Windows 徽标键 输入psr打开系统视频录制\n* Windows 徽标键  snippingtool  win7自带截图工具\n* notepad 打开记事本\n* write----------写字板\n* perfmon.msc----计算机性能监测程序\n* services.msc 服务\n* f10或alt键 激活当前程序的菜单栏\n* osk------------打开屏幕键盘 \n* 结束进程：cmd---taskkill /im`notepad.exe /t\n* cdm常用命令：具体参考（http://www.51xue8.com/e/DownSys/play/?classid=31&id=1001&pathid=4&jishu=26）\n* ver====显示系统版本······ver/? =帮助\n* dir====显示驱动版本 · ·······dir/? =帮助\n* copy（用法4，全部复制）如：copy c:\\新建文件夹\\*.* ()d:\\txt\n* chkdsk/?=====查看磁盘文件报告\n* chkdsk===检查磁盘\n* dir====C盘文件夹目录（详细，时间，大小··）\n* dir/w =====显示C盘文件夹 （不显示时间，大小）\n* dir/l 显示子文件夹\n* dir/p======屏幕显示不完时加p\n* format====格式化磁盘（慎用）如：format g:\n* format/?====格式化帮助\n* del=====删除文件 如：del c:\\···\n* del/?===删除帮助\n* md====创建文件夹\n* ipconfig ====查看ip等信息\n* ren=====文件重命名\n* nslookup======ip地址查询\n* exit=====退出\n* rd======删除目录\n* tasklist =====显示进程\n* type=======显示文本内容\n* tree=======显示所有文件名····显示D盘则tree d:\\\n* ping=======检测网络···如ping（必须空格）-f\n* net user=========更改用户\n* net share====== 查看共享文件\n* help==============显示所有命令\n* gpedit.msc-----组策略\n* sndrec32-------录音机\n* Nslookup-------IP地址侦测器\n* explorer-------打开资源管理器\n* logoff---------注销命令\n* tsshutdn-------60秒倒计时关机命令\n* lusrmgr.msc----本机用户和组\n* services.msc---本地服务设置\n* oobe/msoobe /a----检查XP是否激活\n* cleanmgr-------垃圾整理\n* net start messenger----开始信使服务\n* compmgmt.msc---计算机管理\n* net stop messenger-----停止信使服务\n* conf-----------启动netmeeting\n* dvdplay--------DVD播放器\n* charmap--------启动字符映射表\n* diskmgmt.msc---磁盘管理实用程序\n* calc-----------启动计算器\n* dfrg.msc-------磁盘碎片整理程序\n* chkdsk.exe-----Chkdsk磁盘检查\n* devmgmt.msc--- 设备管理器\n* regsvr32 /u *.dll----停止dll文件运行\n* drwtsn32------ 系统医生\n* rononce -p ----15秒关机\n* dxdiag---------检查DirectX信息\n* regedt32-------注册表编辑器\n* Msconfig.exe---系统配置实用程序\n* rsop.msc-------组策略结果集\n* mem.exe--------显示内存使用情况\n* regedit.exe----注册表\n* winchat--------XP自带局域网聊天\n* progman--------程序管理器\n* winmsd---------系统信息\n* perfmon.msc----计算机性能监测程序\n* winver---------检查Windows版本\n* sfc /scannow-----扫描错误并复原\n* taskmgr-----任务管理器（2000／xp／2003\n* winver---------检查Windows版本\n* wmimgmt.msc----打开windows管理体系结构(WMI)\n* wupdmgr--------windows更新程序\n* wscript--------windows脚本宿主设置\n* write----------写字板\n* winmsd---------系统信息\n* wiaacmgr-------扫描仪和照相机向导\n* winchat--------XP自带局域网聊天\n* mem.exe--------显示内存使用情况\n* Msconfig.exe---系统配置实用程序\n* mplayer2-------简易widnows media player\n* mspaint--------画图板\n* mstsc----------远程桌面连接\n* mplayer2-------媒体播放机\n* magnify--------放大镜实用程序\n* mmc------------打开控制台\n* mobsync--------同步命令\n* dxdiag---------检查DirectX信息\n* drwtsn32------ 系统医生\n* devmgmt.msc--- 设备管理器\n* dfrg.msc-------磁盘碎片整理程序\n* diskmgmt.msc---磁盘管理实用程序\n* dcomcnfg-------打开系统组件服务\n* ddeshare-------打开DDE共享设置\n* dvdplay--------DVD播放器\n* net stop messenger-----停止信使服务\n* net start messenger----开始信使服务\n* notepad--------打开记事本\n* nslookup-------网络管理的工具向导\n* ntbackup-------系统备份和还原\n* narrator-------屏幕“讲述人”\n* ntmsmgr.msc----移动存储管理器\n* ntmsoprq.msc---移动存储管理员操作请求\n* netstat -an----(TC)命令检查接口\n* syncapp--------创建一个公文包\n* sysedit--------系统配置编辑器\n* sigverif-------文件签名验证程序\n* sndrec32-------录音机\n* shrpubw--------创建共享文件夹\n* secpol.msc-----本地安全策略\n* syskey---------系统加密，一旦加密就不能解开，保护windows xp系统的双重密码\n* services.msc---本地服务设置\n* Sndvol32-------音量控制程序\n* sfc.exe--------系统文件检查器\n* sfc /scannow---windows文件保护\n* tsshutdn-------60秒倒计时关机命令\n* tourstart------xp简介（安装完成后出现的漫游xp程序）\n* taskmgr--------任务管理器\n* eventvwr-------事件查看器\n* eudcedit-------造字程序\n* explorer-------打开资源管理器\n* packager-------对象包装程序\n* perfmon.msc----计算机性能监测程序\n* progman--------程序管理器\n* regedit.exe----注册表\n* rsop.msc-------组策略结果集\n* regedt32-------注册表编辑器\n* rononce -p ----15秒关机\n* regsvr32 /u *.dll----停止dll文件运行\n* regsvr32 /u zipfldr.dll------取消ZIP支持\n* cmd.exe--------CMD命令提示符\n* chkdsk.exe-----Chkdsk磁盘检查\n* certmgr.msc----证书管理实用程序\n* calc-----------启动计算器\n* charmap--------启动字符映射表\n* cliconfg-------SQL SERVER 客户端网络实用程序\n* Clipbrd--------剪贴板查看器\n* conf-----------启动netmeeting\n* compmgmt.msc---计算机管理\n* cleanmgr-------垃圾整理\n* ciadv.msc------索引服务程序\n* osk------------打开屏幕键盘\n* odbcad32-------ODBC数据源管理器\n* oobe/msoobe /a----检查XP是否激活\n* lusrmgr.msc----本机用户和组\n* logoff---------注销命令\n* iexpress-------木马捆绑工具，系统自带\n* Nslookup-------IP地址侦测器\n* fsmgmt.msc-----共享文件夹管理器\n* utilman--------辅助工具管理器\n* 系统查看=========systeminfo\n\n* 轻松访问键盘快捷方式  \n　　按住右Shift 八秒钟： 启用和关闭筛选键  \n　　按左 Alt+左 Shift+PrtScn(或 PrtScn)：启用或关闭高对比度  \n　　按左 Alt+左 Shift+Num Lock ：启用或关闭鼠标键   \n　　按 Shift 五次： 启用或关闭粘滞键  \n　　按住 Num Lock 五秒钟：启用或关闭切换键  \n　　Windows 徽标键 + U ： 打开轻松访问中心\n* 常规键盘快捷方式  \n　　F1 显示帮助  \n　　Ctrl+C  复制选择的项目  \n　　Ctrl+X  剪切选择的项目  \n　　Ctrl+V  粘贴选择的项目  \n　　Ctrl+Z  撤消操作  \n　　Ctrl+Y  重新执行某项操作\n　　F2 重命名选定项目  \n　　Ctrl+向右键 将光标移动到下一个字词的起始处  \n　　Ctrl+向左键 将光标移动到上一个字词的起始处  \n　　Ctrl+向下键 将光标移动到下一个段落的起始处  \n　　Ctrl+向上键 将光标移动到上一个段落的起始处  \n　　Ctrl+Shift 加某个箭头键 选择一块文本  \n　　Shift 加任意箭头键 在窗口中或桌面上选择多个项目，或者在文档中选择文本   \n　　Ctrl 加任意箭头键+空格键 选择窗口中或桌面上的多个单个项目  \n　　Ctrl+A 选择文档或窗口中的所有项目  \n　　F3 搜索文件或文件夹  \n　　Alt+Enter 显示所选项的属性  \n　　Alt+F4 关闭活动项目或者退出活动程序  \n　　Alt+空格键 为活动窗口打开快捷方式菜单  \n　　Ctrl+F4 关闭活动文档(在允许同时打开多个文档的程序中)  \n　　Alt+Tab 在打开的项目之间切换  \n　　Ctrl+Alt+Tab 使用箭头键在打开的项目之间切换  \n　　Ctrl+鼠标滚轮 更改桌面上的图标大小  \n　　Windows 徽标键 + Tab 使用 Aero Flip 3-D 循环切换任务栏上的程序  \n　　Ctrl + Windows 徽标键 + Tab 通过 Aero Flip 3-D 使用箭头键循环切换任务栏上的程序  \n　　Alt+Esc 以项目打开的顺序循环切换项目  \n　　F6 在窗口中或桌面上循环切换屏幕元素  \n　　F4 在 Windows 资源管理器中显示地址栏列表  \n　　Shift+F10 显示选定项目的快捷菜单  \n　　Ctrl+Esc 打开「开始」菜单  \n　　Alt+加下划线的字母 显示相应的菜单  \n　　Alt+加下划线的字母 执行菜单命令(或其他有下划线的命令)  \n　　F10 激活活动程序中的菜单栏  \n　　向右键 打开右侧的下一个菜单或者打开子菜单  \n　　向左键 打开左侧的下一个菜单或者关闭子菜单  \n　　F5 刷新活动窗口  \n　　Alt+向上键 在 Windows 资源管理器中查看上一级文件夹  \n　　Esc 取消当前任务  \n　　Ctrl+Shift+Esc 打开任务管理器  \n　　插入 CD 时按住 Shift 阻止 CD 自动播放  \n* 对话框键盘快捷方式  \n　　Ctrl+Tab  在选项卡上向前移动  \n　　Ctrl+Shift+Tab  在选项卡上向后移动  \n　　Tab  在选项上向前移动  \n　　Shift+Tab  在选项上向后移动  \n　　Alt+加下划线的字母  执行与该字母匹配的命令(或选择选项)  \n　　Enter  对于许多选定命令代替单击鼠标  \n　　空格键 如果活动选项是复选框，则选中或清除该复选框  \n　　箭头键 如果活动选项是一组选项按钮，则选择某个按钮  \n　　F1 显示帮助  \n　　F4 显示活动列表中的项目  \n　　Backspace 如果在“另存为”或“打开”对话框中选中了某个文件夹，则打开上一级文件夹  \n* Windows 徽标键相关的快捷键  \n　　Windows徽标键就是显示为Windows旗帜，或标有文字Win或Windows的按键，以下简称Win键。XP时代有4个经典的 Win 键组合：R/E/F/L。到了 Win7，花样更多了。  \n　　Win：打开或关闭开始菜单  \n　　Win + Pause：显示系统属性对话框  \n　　Win + D：显示桌面  \n　　Win + M：最小化所有窗口  \n　　Win + SHIFT + M：还原最小化窗口到桌面上  \n　　Win + E：打开我的电脑  \n　　Win + F：搜索文件或文件夹  \n　　Ctrl + Win + F：搜索计算机(如果您在网络上)  \n　　Win + L：锁定您的计算机或切换用户  \n　　Win + R：打开运行对话框  \n　　Win + T：切换任务栏上的程序(感觉是和alt+ESC 一样 )  \n　　Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，新开一个实例。(感觉这个比较新颖，貌似快速启动。) Shift + Windows logo key +number：Start a new instance of the program pinned to the taskbar in the position indicated by the number  \n　　Ctrl + Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，切换到上一次的活动窗口。 Ctrl+Windows logo key +number：Switch to the last active window of the program pinned to the taskbar in the position indicated by the number  \n　　ALT + Win + 数字：让位于任务栏指定位置(按下的数字作为序号)的程序，显示跳转清单。 Alt+Windows logo key +number： Open the Jump List for the program pinned to the taskbar in the position indicated by the number  \n　　Win + TAB：循环切换任务栏上的程序并使用的Aero三维效果  \n　　Ctrl + Win + TAB：使用方向键来循环循环切换任务栏上的程序，并使用的Aero三维效果  \n　　按Ctrl + Win + B：切换到在通知区域中显示信息的程序  \n　　Win + 空格：预览桌面  \n　　Win + ↑：最大化窗口  \n　　Win + ↓：最小化窗口  \n　　Win + ←：最大化到窗口左侧的屏幕上  \n　　Win + →：最大化窗口到右侧的屏幕上  \n　　Win + Home：最小化所有窗口，除了当前激活窗口  \n　　Win+ SHIFT + ↑：拉伸窗口的到屏幕的顶部和底部  \n　　Win+ SHIFT + →/←：移动一个窗口，从一个显示器到另一个  \n　　Win + P：选择一个演示文稿显示模式  \n　　Win + G：循环切换侧边栏的小工具  \n　　Win + U：打开轻松访问中心  \n　　Win + x：打开Windows移动中心  \n* Windows Explorer相关快捷键    \n　　Ctrl+N 打开新窗口    \n　　Ctrl+Shift+N 新建文件夹\n","slug":"tools/windows","published":1,"updated":"2020-12-29T01:15:00.461Z","_id":"ckj9at6vw002kd8v8dc4j5ijg","comments":1,"layout":"post","photos":[],"link":""},{"title":"Docker中安装Consul","abbrlink":48510,"date":"2018-09-04T13:48:20.000Z","_content":"\nDocker中安装Consul\n<!-- more -->\n\n> Consul Docker镜像地址:https://hub.docker.com/_/consul\n1. Docker中启动Consul  \n    ```\n    docker run -d -e 'CONSUL_LOCAL_CONFIG={\"skip_leave_on_interrupt\": true}' --name=consul1 consul agent -server -bind=119.29.92.252 -bootstrap-expect=3 -node=consul1\n    ```   \n    * -node：节点的名称  \n    * -bind：绑定的一个地址，用于节点之间通信的地址，可以是内外网，必须是可以访问到的地址  \n    * -server：这个就是表示这个节点是个SERVER  \n    * -bootstrap-expect：这个就是表示期望提供的SERVER节点数目，数目一达到，它就会被激活，然后就是leader节点了\n2. 启动节点2、3\n    ```\n    docker run -d -e 'CONSUL_LOCAL_CONFIG={\"skip_leave_on_interrupt\": true}' --name=consul2 consul agent -server -bind=172.17.0.3  -join=119.29.92.252 -node-id=$(uuidgen | awk '{print tolower($0)}')  -node=consul2\n\n    docker run -d -e 'CONSUL_LOCAL_CONFIG={\"skip_leave_on_interrupt\": true}' --name=consul3 consul agent -server -bind=172.17.0.4  -join=119.29.92.252 -node-id=$(uuidgen | awk '{print tolower($0)}')  -node=consul3 -client=172.17.0.4\n    ```\n    * -join：这个表示启动的时候，要加入到哪个集群内，这里就是说要加入到*节点1的集群\n    * -node-id：这个貌似版本8才加入的，这里用这个来指定唯一的节点ID，可以查看这个issue  \n    * -client：这个表示注册或者查询等一系列客户端对它操作的IP，如果不指定这个IP，默认是127.0.0.1。\n","source":"_posts/dotnetcore/consul/docker中安装Consul.md","raw":"---\ntitle: Docker中安装Consul\ncategories:\n  - .NetCore\ntags:\n  - Consul\n  - .NetCore\nabbrlink: 48510\ndate: 2018-09-04 21:48:20\n---\n\nDocker中安装Consul\n<!-- more -->\n\n> Consul Docker镜像地址:https://hub.docker.com/_/consul\n1. Docker中启动Consul  \n    ```\n    docker run -d -e 'CONSUL_LOCAL_CONFIG={\"skip_leave_on_interrupt\": true}' --name=consul1 consul agent -server -bind=119.29.92.252 -bootstrap-expect=3 -node=consul1\n    ```   \n    * -node：节点的名称  \n    * -bind：绑定的一个地址，用于节点之间通信的地址，可以是内外网，必须是可以访问到的地址  \n    * -server：这个就是表示这个节点是个SERVER  \n    * -bootstrap-expect：这个就是表示期望提供的SERVER节点数目，数目一达到，它就会被激活，然后就是leader节点了\n2. 启动节点2、3\n    ```\n    docker run -d -e 'CONSUL_LOCAL_CONFIG={\"skip_leave_on_interrupt\": true}' --name=consul2 consul agent -server -bind=172.17.0.3  -join=119.29.92.252 -node-id=$(uuidgen | awk '{print tolower($0)}')  -node=consul2\n\n    docker run -d -e 'CONSUL_LOCAL_CONFIG={\"skip_leave_on_interrupt\": true}' --name=consul3 consul agent -server -bind=172.17.0.4  -join=119.29.92.252 -node-id=$(uuidgen | awk '{print tolower($0)}')  -node=consul3 -client=172.17.0.4\n    ```\n    * -join：这个表示启动的时候，要加入到哪个集群内，这里就是说要加入到*节点1的集群\n    * -node-id：这个貌似版本8才加入的，这里用这个来指定唯一的节点ID，可以查看这个issue  \n    * -client：这个表示注册或者查询等一系列客户端对它操作的IP，如果不指定这个IP，默认是127.0.0.1。\n","slug":"dotnetcore/consul/docker中安装Consul","published":1,"updated":"2020-12-28T00:55:28.054Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6vy002pd8v8056vc2r4","content":"<p>Docker中安装Consul</p>\n<a id=\"more\"></a>\n\n<blockquote>\n<p>Consul Docker镜像地址:<a href=\"https://hub.docker.com/_/consul\">https://hub.docker.com/_/consul</a></p>\n</blockquote>\n<ol>\n<li><p>Docker中启动Consul  </p>\n<pre><code>docker run -d -e &#39;CONSUL_LOCAL_CONFIG=&#123;&quot;skip_leave_on_interrupt&quot;: true&#125;&#39; --name=consul1 consul agent -server -bind=119.29.92.252 -bootstrap-expect=3 -node=consul1</code></pre>\n<ul>\n<li>-node：节点的名称  </li>\n<li>-bind：绑定的一个地址，用于节点之间通信的地址，可以是内外网，必须是可以访问到的地址  </li>\n<li>-server：这个就是表示这个节点是个SERVER  </li>\n<li>-bootstrap-expect：这个就是表示期望提供的SERVER节点数目，数目一达到，它就会被激活，然后就是leader节点了</li>\n</ul>\n</li>\n<li><p>启动节点2、3</p>\n<pre><code>docker run -d -e &#39;CONSUL_LOCAL_CONFIG=&#123;&quot;skip_leave_on_interrupt&quot;: true&#125;&#39; --name=consul2 consul agent -server -bind=172.17.0.3  -join=119.29.92.252 -node-id=$(uuidgen | awk &#39;&#123;print tolower($0)&#125;&#39;)  -node=consul2\n\ndocker run -d -e &#39;CONSUL_LOCAL_CONFIG=&#123;&quot;skip_leave_on_interrupt&quot;: true&#125;&#39; --name=consul3 consul agent -server -bind=172.17.0.4  -join=119.29.92.252 -node-id=$(uuidgen | awk &#39;&#123;print tolower($0)&#125;&#39;)  -node=consul3 -client=172.17.0.4</code></pre>\n<ul>\n<li>-join：这个表示启动的时候，要加入到哪个集群内，这里就是说要加入到*节点1的集群</li>\n<li>-node-id：这个貌似版本8才加入的，这里用这个来指定唯一的节点ID，可以查看这个issue  </li>\n<li>-client：这个表示注册或者查询等一系列客户端对它操作的IP，如果不指定这个IP，默认是127.0.0.1。</li>\n</ul>\n</li>\n</ol>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>Docker中安装Consul</p>","more":"<blockquote>\n<p>Consul Docker镜像地址:<a href=\"https://hub.docker.com/_/consul\">https://hub.docker.com/_/consul</a></p>\n</blockquote>\n<ol>\n<li><p>Docker中启动Consul  </p>\n<pre><code>docker run -d -e &#39;CONSUL_LOCAL_CONFIG=&#123;&quot;skip_leave_on_interrupt&quot;: true&#125;&#39; --name=consul1 consul agent -server -bind=119.29.92.252 -bootstrap-expect=3 -node=consul1</code></pre>\n<ul>\n<li>-node：节点的名称  </li>\n<li>-bind：绑定的一个地址，用于节点之间通信的地址，可以是内外网，必须是可以访问到的地址  </li>\n<li>-server：这个就是表示这个节点是个SERVER  </li>\n<li>-bootstrap-expect：这个就是表示期望提供的SERVER节点数目，数目一达到，它就会被激活，然后就是leader节点了</li>\n</ul>\n</li>\n<li><p>启动节点2、3</p>\n<pre><code>docker run -d -e &#39;CONSUL_LOCAL_CONFIG=&#123;&quot;skip_leave_on_interrupt&quot;: true&#125;&#39; --name=consul2 consul agent -server -bind=172.17.0.3  -join=119.29.92.252 -node-id=$(uuidgen | awk &#39;&#123;print tolower($0)&#125;&#39;)  -node=consul2\n\ndocker run -d -e &#39;CONSUL_LOCAL_CONFIG=&#123;&quot;skip_leave_on_interrupt&quot;: true&#125;&#39; --name=consul3 consul agent -server -bind=172.17.0.4  -join=119.29.92.252 -node-id=$(uuidgen | awk &#39;&#123;print tolower($0)&#125;&#39;)  -node=consul3 -client=172.17.0.4</code></pre>\n<ul>\n<li>-join：这个表示启动的时候，要加入到哪个集群内，这里就是说要加入到*节点1的集群</li>\n<li>-node-id：这个貌似版本8才加入的，这里用这个来指定唯一的节点ID，可以查看这个issue  </li>\n<li>-client：这个表示注册或者查询等一系列客户端对它操作的IP，如果不指定这个IP，默认是127.0.0.1。</li>\n</ul>\n</li>\n</ol>"},{"title":"基于CookieBase认证的模式","author":"谢新根","abbrlink":31048,"date":"2018-03-05T13:01:01.000Z","_content":"\n基于CookieBase认证的模式\n<!-- more -->\n\n>说明 通过vs2017新建的.net core项目默认没有添加身份认证与授权以及路由等  \n1. 在StartUp.ConfigureServices中addMvc之前添加AddAuthentication  \nusing Microsoft.AspNetCore.Authentication.Cookies;\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0101.png)\n2. 在Configure方法中  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0201.png)\n3. 模拟登陆  \nusing Microsoft.AspNetCore.Authentication;\nusing Microsoft.AspNetCore.Authentication.Cookies;\nusing System.Security.Claims;\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0301.png)\n4. 在对应的Controller或者Action中贴上属性[Authorize]  ","source":"_posts/dotnetcore/core/02cookie-base-authorization.md","raw":"---\ntitle: 基于CookieBase认证的模式\nauthor: 谢新根\ncategories:\n  - .NetCore\ntags:\n  - .NetCore\nabbrlink: 31048\ndate: 2018-03-05 21:01:01\n---\n\n基于CookieBase认证的模式\n<!-- more -->\n\n>说明 通过vs2017新建的.net core项目默认没有添加身份认证与授权以及路由等  \n1. 在StartUp.ConfigureServices中addMvc之前添加AddAuthentication  \nusing Microsoft.AspNetCore.Authentication.Cookies;\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0101.png)\n2. 在Configure方法中  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0201.png)\n3. 模拟登陆  \nusing Microsoft.AspNetCore.Authentication;\nusing Microsoft.AspNetCore.Authentication.Cookies;\nusing System.Security.Claims;\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/02/0301.png)\n4. 在对应的Controller或者Action中贴上属性[Authorize]  ","slug":"dotnetcore/core/02cookie-base-authorization","published":1,"updated":"2020-12-29T01:15:00.465Z","_id":"ckj9at6w0002sd8v8cdor4uvb","comments":1,"layout":"post","photos":[],"link":""},{"title":".NetCore+centos环境搭建手摸手实战","author":"谢新根","abbrlink":36628,"date":"2018-03-03T13:01:01.000Z","_content":"\n.NetCore+centos环境搭建手摸手实战\n<!-- more -->\n\n1. 安装VMware Workstation  \n下载地址:https://my.vmware.com/cn/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation_pro/14_0  下载安装 \n2. 安装CentOS7  \n安装好后发现不能使用网络 参考资料\nhttp://blog.csdn.net/wanz2/article/details/52820876\n3. 安装.net core  \n参考官网步骤:https://www.microsoft.com/net/learn/get-started/linuxcentos\n4. 安装nginx  \n同样参考官网步骤:https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7\n5. vs2017新建项目发布成本地文件夹  \n新建项目，使用mvc模板发布到本地文件夹\n6. 通过Xftp上传到centos  \n通过Xftp将打包的文件直接粘贴到centos中(我是在root目录下建了个web文件夹专门用于存放部署的站点)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0601.png)\n7. 将dotnetcore站点运行起来  \n在Xftp中点击新建终端打开XsHell 将路径定位到站点文件夹 cd /root/web/mvc  执行 dotnet HelloWord.dll  看到如下信息 表示你已经成功了\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0701.png)\n这个时候你在外面访问是访问不了的 因为防火墙没有启用5000端口\n如果一定想看看 可以再开一个终端 输入如图\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0702.png)\n8. 配置nginx将80端口指向dotnetcore站点  \n这一步就是通过nginx将80请求转到上面的localhost:5000\n先找着nginx中的配置\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0801.png)\n打开后会发现里面有个\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0802.png)\n在如下目录中新建一个文件 输入配置   \n    ```nginx\n        server {\n            listen 80;\n            location / {\n                proxy_pass http://localhost:5000;\n                proxy_http_version 1.1;\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection keep-alive;\n                proxy_set_header Host $host;\n                proxy_cache_bypass $http_upgrade;\n            }\n        }\n    ```  \n    ![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0803.png)\n然后重启nginx ==》sudo nginx -s reload  \n9. 查看成果  \n在浏览器中输入192.168.2.105  如图\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0901.png)\n\n> 总结:  \n> 过程中遇到一些问题，比如虚拟机中的centos系统中使用不了网络 这个折腾了劳资一个上午(如有碰到，第2点中有参考资料)","source":"_posts/dotnetcore/core/01dotnetcore-centos-install.md","raw":"---\ntitle: .NetCore+centos环境搭建手摸手实战\nauthor: 谢新根\ncategories:\n  - .NetCore\ntags:\n  - .NetCore\nabbrlink: 36628\ndate: 2018-03-03 21:01:01\n---\n\n.NetCore+centos环境搭建手摸手实战\n<!-- more -->\n\n1. 安装VMware Workstation  \n下载地址:https://my.vmware.com/cn/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation_pro/14_0  下载安装 \n2. 安装CentOS7  \n安装好后发现不能使用网络 参考资料\nhttp://blog.csdn.net/wanz2/article/details/52820876\n3. 安装.net core  \n参考官网步骤:https://www.microsoft.com/net/learn/get-started/linuxcentos\n4. 安装nginx  \n同样参考官网步骤:https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7\n5. vs2017新建项目发布成本地文件夹  \n新建项目，使用mvc模板发布到本地文件夹\n6. 通过Xftp上传到centos  \n通过Xftp将打包的文件直接粘贴到centos中(我是在root目录下建了个web文件夹专门用于存放部署的站点)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0601.png)\n7. 将dotnetcore站点运行起来  \n在Xftp中点击新建终端打开XsHell 将路径定位到站点文件夹 cd /root/web/mvc  执行 dotnet HelloWord.dll  看到如下信息 表示你已经成功了\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0701.png)\n这个时候你在外面访问是访问不了的 因为防火墙没有启用5000端口\n如果一定想看看 可以再开一个终端 输入如图\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0702.png)\n8. 配置nginx将80端口指向dotnetcore站点  \n这一步就是通过nginx将80请求转到上面的localhost:5000\n先找着nginx中的配置\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0801.png)\n打开后会发现里面有个\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0802.png)\n在如下目录中新建一个文件 输入配置   \n    ```nginx\n        server {\n            listen 80;\n            location / {\n                proxy_pass http://localhost:5000;\n                proxy_http_version 1.1;\n                proxy_set_header Upgrade $http_upgrade;\n                proxy_set_header Connection keep-alive;\n                proxy_set_header Host $host;\n                proxy_cache_bypass $http_upgrade;\n            }\n        }\n    ```  \n    ![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0803.png)\n然后重启nginx ==》sudo nginx -s reload  \n9. 查看成果  \n在浏览器中输入192.168.2.105  如图\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/01/0901.png)\n\n> 总结:  \n> 过程中遇到一些问题，比如虚拟机中的centos系统中使用不了网络 这个折腾了劳资一个上午(如有碰到，第2点中有参考资料)","slug":"dotnetcore/core/01dotnetcore-centos-install","published":1,"updated":"2020-12-29T01:15:00.467Z","_id":"ckj9at6w3002xd8v81kb4g7tq","comments":1,"layout":"post","photos":[],"link":""},{"title":"基于JWT的认证模式","author":"谢新根","abbrlink":51645,"date":"2018-03-06T13:01:01.000Z","_content":"\n基于JWT的认证模式\n<!-- more -->\n\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0001.png)\n1. 在项目目录下定义一个JwtSetting实体类  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0101.png)\n2. 在appsettings.json中配置值  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0201.png)\n3. 在StartUp中设置验证方式\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0301.png)\n4. 在管道中加入认证\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0401.png)\n5. 登录  \nJwtSecurityToken 需要添加包Microsoft.AspNetCore.Authentication.JwtBearer  \nusing Microsoft.IdentityModel.Tokens;  \nusing System.IdentityModel.Tokens.Jwt;  \nusing System.Security.Claims;  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0501.png)  \n6. 通过postman模拟登录获取token\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0601.png)\n7. 将token以请求头形式放到请求中发送请求\n[注] 键:Authorization      token值记得加\"bearer \" \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0701.png) \n\n-------------------------\n扩展  \n1. 使用自定义验证以及自定义头部token  \n定义MyTokenValidation 实现接口ISecurityTokenValidator\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0101.png) \n2. 在ConfigureServices方法中   \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0201.png) \n3. 运行效果  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0301.png) \n","source":"_posts/dotnetcore/core/03jwt-authorization.md","raw":"---\ntitle: 基于JWT的认证模式\nauthor: 谢新根\ncategories:\n  - .NetCore\ntags:\n  - .NetCore\nabbrlink: 51645\ndate: 2018-03-06 21:01:01\n---\n\n基于JWT的认证模式\n<!-- more -->\n\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0001.png)\n1. 在项目目录下定义一个JwtSetting实体类  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0101.png)\n2. 在appsettings.json中配置值  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0201.png)\n3. 在StartUp中设置验证方式\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0301.png)\n4. 在管道中加入认证\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0401.png)\n5. 登录  \nJwtSecurityToken 需要添加包Microsoft.AspNetCore.Authentication.JwtBearer  \nusing Microsoft.IdentityModel.Tokens;  \nusing System.IdentityModel.Tokens.Jwt;  \nusing System.Security.Claims;  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0501.png)  \n6. 通过postman模拟登录获取token\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0601.png)\n7. 将token以请求头形式放到请求中发送请求\n[注] 键:Authorization      token值记得加\"bearer \" \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/0701.png) \n\n-------------------------\n扩展  \n1. 使用自定义验证以及自定义头部token  \n定义MyTokenValidation 实现接口ISecurityTokenValidator\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0101.png) \n2. 在ConfigureServices方法中   \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0201.png) \n3. 运行效果  \n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/core/03/e0301.png) \n","slug":"dotnetcore/core/03jwt-authorization","published":1,"updated":"2020-12-29T01:15:00.469Z","_id":"ckj9at6w70030d8v8fwbr6lqf","comments":1,"layout":"post","photos":[],"link":""},{"title":"EFCore相关资料","author":"谢新根","abbrlink":18207,"date":"2018-03-01T13:01:01.000Z","_content":"EFCore相关资料\n<!-- more -->\n\n1. 命令行  \nCMD形式 | VS中Package Manager形式\n---- | ---\ndotnet ef migrations add InitCreate\t[-o 路径] | Add-Migration InitCreate\ndotnet ef database update   | Update-Database\ndotnet ef migrations remove | Remove-Migrations\ndonet ef database update [LastGoodMigration] | Update-Database LastGoodMigration\ndotnet ef migrations script [-o 路径] | Script-Migration\n>生成 migrationName1 到 -migrationName2的脚本  \n> dotnet ef migrations script migrationName1 migrationName2    \n> 不能使用dotnet ef命令行解决方式 在项目文件csproj文件中添加  \n```\n<DotNetCliToolReference Include=\"Microsoft.EntityFrameworkCore.Tools.DotNet\" Version=\"2.0.1\" />\n```","source":"_posts/dotnetcore/core/efcore.md","raw":"---\ntitle: EFCore相关资料\nauthor: 谢新根\ncategories:\n  - .NetCore\ntags:\n  - .NetCore\nabbrlink: 18207\ndate: 2018-03-01 21:01:01\n---\nEFCore相关资料\n<!-- more -->\n\n1. 命令行  \nCMD形式 | VS中Package Manager形式\n---- | ---\ndotnet ef migrations add InitCreate\t[-o 路径] | Add-Migration InitCreate\ndotnet ef database update   | Update-Database\ndotnet ef migrations remove | Remove-Migrations\ndonet ef database update [LastGoodMigration] | Update-Database LastGoodMigration\ndotnet ef migrations script [-o 路径] | Script-Migration\n>生成 migrationName1 到 -migrationName2的脚本  \n> dotnet ef migrations script migrationName1 migrationName2    \n> 不能使用dotnet ef命令行解决方式 在项目文件csproj文件中添加  \n```\n<DotNetCliToolReference Include=\"Microsoft.EntityFrameworkCore.Tools.DotNet\" Version=\"2.0.1\" />\n```","slug":"dotnetcore/core/efcore","published":1,"updated":"2020-12-29T01:15:00.471Z","_id":"ckj9at6wa0035d8v89z3r3gt9","comments":1,"layout":"post","photos":[],"link":""},{"title":"NetCore相关框架收集","author":"谢新根","abbrlink":4879,"date":"2018-02-27T13:01:01.000Z","_content":"\n.NetCore相关框架收集\n<!-- more -->\n\n.net core的 开源项目地址 https://github.com/dotnet/corefx \n\nasp.net core 框架的地址 https://github.com/aspnet\n\nEF Core源码 https://github.com/aspnet/EntityFrameworkCore\n\n配置模块源码 https://github.com/aspnet/Configuration \n\n路由模块 https://github.com/aspnet/Routing\n\n认证及授权  https://github.com/aspnet/Security\n\n依赖注入 https://github.com/aspnet/DependencyInjection\n\n 这个一定要看，有很多的一些HTTP管道的抽象接口都定义在这里 https://github.com/aspnet/HttpAbstractions \n\nhttps://github.com/aspnet/Options\n\nhttps://github.com/aspnet/Mvc \n\nhttps://github.com/aspnet/Hosting","source":"_posts/dotnetcore/core/collections.md","raw":"---\ntitle: NetCore相关框架收集\nauthor: 谢新根\ncategories:\n  - .NetCore\ntags:\n  - .NetCore\nabbrlink: 4879\ndate: 2018-02-27 21:01:01\n---\n\n.NetCore相关框架收集\n<!-- more -->\n\n.net core的 开源项目地址 https://github.com/dotnet/corefx \n\nasp.net core 框架的地址 https://github.com/aspnet\n\nEF Core源码 https://github.com/aspnet/EntityFrameworkCore\n\n配置模块源码 https://github.com/aspnet/Configuration \n\n路由模块 https://github.com/aspnet/Routing\n\n认证及授权  https://github.com/aspnet/Security\n\n依赖注入 https://github.com/aspnet/DependencyInjection\n\n 这个一定要看，有很多的一些HTTP管道的抽象接口都定义在这里 https://github.com/aspnet/HttpAbstractions \n\nhttps://github.com/aspnet/Options\n\nhttps://github.com/aspnet/Mvc \n\nhttps://github.com/aspnet/Hosting","slug":"dotnetcore/core/collections","published":1,"updated":"2020-12-29T01:15:00.475Z","_id":"ckj9at6wd0038d8v8gul7d8ww","comments":1,"layout":"post","photos":[],"link":""},{"title":"DotNetCore 备忘录","author":"谢新根","abbrlink":13728,"date":"2018-03-01T11:01:01.000Z","_content":"\nDotNetCore 备忘录\n<!-- more -->\n\n##### 常用备忘录\n> docker run -d -p 8081:80 --name wechat -v /docker/wechat/App_Data/:/app/App_Data/ --restart always registry.cn-hangzhou.aliyuncs.com/xxg/wechat:v1.1.5 \n1. 使用dotnet watch 在项目项目文件夹中添加(自.netcore2.1.0开始已经集成进去 不需要手动添加)     \n   ``` c#\n   <ItemGroup>\n    <DotNetCliToolReference Include=\"Microsoft.DotNet.Watcher.Tools\" Version=\"2.0.0\" />\n   </ItemGroup>   \n\n   <!-- 使用dotnet ef ... -->\n   <ItemGroup>\n   <DotNetCliToolReference Include=\"Microsoft.EntityFrameworkCore.Tools.DotNet\" Version=\"2.0.1\" />\n   </ItemGroup>   \n   ```\n2. 测试框架   \nMoq  \nfluentassertions\n3. 查看nuget目录  \n通过dotnet dotnet nuget locals all --list  \n4. JSON解析不适用首字母小写形式(默认会首字母小写)  \n在ConfigureServices中配置\n    ``` c#\n    services.AddMvc()\n        .AddJsonOptions(options =>\n        {\n            if (options.SerializerSettings.ContractResolver is DefaultContractResolver resolver)\n            {\n                resolver.NamingStrategy = null;\n            }\n        });\n    ```\n5. 添加输出响应内容xml格式   \n.net core中默认只返回json格式需要xml的话需要修改Output formatter\n    ``` c#\n    services.AddMvc()\n        .AddMvcOptions(options=> {\n            options.OutputFormatters.Add(new XmlDataContractSerializerOutputFormatter());\n        })\n    ```\n6. 全局异常  \n+ [6.1] 往MVC Filters中添加过滤器  \n添加一个全局异常类继承ExceptionFilterAttribute\n    ``` c#\n    public class GlobalExceptionFilter : IExceptionFilter\n    {\n        private readonly IHostingEnvironment _hostingEnvironment;\n        private readonly ILogger<GlobalExceptionFilter> _logger;\n\n        public GlobalExceptionFilter(\n            IHostingEnvironment hostingEnvironment,\n            IModelMetadataProvider modelMetadataProvider,\n            ILogger<GlobalExceptionFilter> logger)\n        {\n            _hostingEnvironment = hostingEnvironment;\n            _logger = logger;\n        }\n\n\n\n        public void OnException(ExceptionContext context)\n        {\n            HttpStatusCode status = HttpStatusCode.InternalServerError;\n            String message = String.Empty;\n\n            var exceptionType = context.Exception.GetType();\n            if (exceptionType == typeof(UnauthorizedAccessException))\n            {\n                message = \"Unauthorized Access\";\n                status = HttpStatusCode.Unauthorized;\n            }\n            else if (exceptionType == typeof(NotImplementedException))\n            {\n                message = \"A server error occurred.\";\n                status = HttpStatusCode.NotImplemented;\n            }\n            else if (exceptionType == typeof(BusinessException))\n            {\n                message = context.Exception.ToString();\n                status = HttpStatusCode.InternalServerError;\n            }\n            else\n            {\n                message = context.Exception.Message;\n                status = HttpStatusCode.NotFound;\n            }\n            context.ExceptionHandled = true;\n\n            HttpResponse response = context.HttpContext.Response;\n            response.StatusCode = (int)status;\n            response.ContentType = \"application/json\";\n\n            var ar = new AjaxResponse()\n            {\n                Success = false,\n                Message = message,\n                Data = context.Exception\n            };\n            response.WriteAsync(JsonConvert.SerializeObject(ar));\n\n\n            //context.Result = new JsonNetResult(new AjaxResponse() {\n            //    Success=false,\n            //    Message=context.Exception.Message,\n            //    Data=context.Exception\n            //});\n        }\n    }\n    ```\n在ConfigureServices方法AddMvc中\n    ``` c# \n    services.AddMvc(config=> {\n        config.Filters.Add(typeof(GlobalExceptionFilter));\n    })\n    ```\n+ [6.2] 在Configure方法中添加异常处理管道(注意在所有请求管道的最前面)\n    ```\n    app.UseExceptionHandler(options =>\n    {\n        options.Run(async context =>\n        {\n            context.Response.StatusCode = (int)HttpStatusCode.InternalServerError;\n            context.Response.ContentType = \"application/json\";\n            var ex = context.Features.Get<IExceptionHandlerFeature>();\n            if (ex != null)\n            {\n                var response = new AjaxResponse()\n                {\n                    Success = false,\n                    Message = ex.Error.Message,\n                    Data = ex.Error\n                };\n                await context.Response.WriteAsync(JsonConvert.SerializeObject(response)).ConfigureAwait(false);\n            }\n        });\n    });\n    ```\n","source":"_posts/dotnetcore/core/remark.md","raw":"---\ntitle: DotNetCore 备忘录\nauthor: 谢新根\ncategories:\n  - .NetCore\ntags:\n  - .NetCore\nabbrlink: 13728\ndate: 2018-03-01 19:01:01\n---\n\nDotNetCore 备忘录\n<!-- more -->\n\n##### 常用备忘录\n> docker run -d -p 8081:80 --name wechat -v /docker/wechat/App_Data/:/app/App_Data/ --restart always registry.cn-hangzhou.aliyuncs.com/xxg/wechat:v1.1.5 \n1. 使用dotnet watch 在项目项目文件夹中添加(自.netcore2.1.0开始已经集成进去 不需要手动添加)     \n   ``` c#\n   <ItemGroup>\n    <DotNetCliToolReference Include=\"Microsoft.DotNet.Watcher.Tools\" Version=\"2.0.0\" />\n   </ItemGroup>   \n\n   <!-- 使用dotnet ef ... -->\n   <ItemGroup>\n   <DotNetCliToolReference Include=\"Microsoft.EntityFrameworkCore.Tools.DotNet\" Version=\"2.0.1\" />\n   </ItemGroup>   \n   ```\n2. 测试框架   \nMoq  \nfluentassertions\n3. 查看nuget目录  \n通过dotnet dotnet nuget locals all --list  \n4. JSON解析不适用首字母小写形式(默认会首字母小写)  \n在ConfigureServices中配置\n    ``` c#\n    services.AddMvc()\n        .AddJsonOptions(options =>\n        {\n            if (options.SerializerSettings.ContractResolver is DefaultContractResolver resolver)\n            {\n                resolver.NamingStrategy = null;\n            }\n        });\n    ```\n5. 添加输出响应内容xml格式   \n.net core中默认只返回json格式需要xml的话需要修改Output formatter\n    ``` c#\n    services.AddMvc()\n        .AddMvcOptions(options=> {\n            options.OutputFormatters.Add(new XmlDataContractSerializerOutputFormatter());\n        })\n    ```\n6. 全局异常  \n+ [6.1] 往MVC Filters中添加过滤器  \n添加一个全局异常类继承ExceptionFilterAttribute\n    ``` c#\n    public class GlobalExceptionFilter : IExceptionFilter\n    {\n        private readonly IHostingEnvironment _hostingEnvironment;\n        private readonly ILogger<GlobalExceptionFilter> _logger;\n\n        public GlobalExceptionFilter(\n            IHostingEnvironment hostingEnvironment,\n            IModelMetadataProvider modelMetadataProvider,\n            ILogger<GlobalExceptionFilter> logger)\n        {\n            _hostingEnvironment = hostingEnvironment;\n            _logger = logger;\n        }\n\n\n\n        public void OnException(ExceptionContext context)\n        {\n            HttpStatusCode status = HttpStatusCode.InternalServerError;\n            String message = String.Empty;\n\n            var exceptionType = context.Exception.GetType();\n            if (exceptionType == typeof(UnauthorizedAccessException))\n            {\n                message = \"Unauthorized Access\";\n                status = HttpStatusCode.Unauthorized;\n            }\n            else if (exceptionType == typeof(NotImplementedException))\n            {\n                message = \"A server error occurred.\";\n                status = HttpStatusCode.NotImplemented;\n            }\n            else if (exceptionType == typeof(BusinessException))\n            {\n                message = context.Exception.ToString();\n                status = HttpStatusCode.InternalServerError;\n            }\n            else\n            {\n                message = context.Exception.Message;\n                status = HttpStatusCode.NotFound;\n            }\n            context.ExceptionHandled = true;\n\n            HttpResponse response = context.HttpContext.Response;\n            response.StatusCode = (int)status;\n            response.ContentType = \"application/json\";\n\n            var ar = new AjaxResponse()\n            {\n                Success = false,\n                Message = message,\n                Data = context.Exception\n            };\n            response.WriteAsync(JsonConvert.SerializeObject(ar));\n\n\n            //context.Result = new JsonNetResult(new AjaxResponse() {\n            //    Success=false,\n            //    Message=context.Exception.Message,\n            //    Data=context.Exception\n            //});\n        }\n    }\n    ```\n在ConfigureServices方法AddMvc中\n    ``` c# \n    services.AddMvc(config=> {\n        config.Filters.Add(typeof(GlobalExceptionFilter));\n    })\n    ```\n+ [6.2] 在Configure方法中添加异常处理管道(注意在所有请求管道的最前面)\n    ```\n    app.UseExceptionHandler(options =>\n    {\n        options.Run(async context =>\n        {\n            context.Response.StatusCode = (int)HttpStatusCode.InternalServerError;\n            context.Response.ContentType = \"application/json\";\n            var ex = context.Features.Get<IExceptionHandlerFeature>();\n            if (ex != null)\n            {\n                var response = new AjaxResponse()\n                {\n                    Success = false,\n                    Message = ex.Error.Message,\n                    Data = ex.Error\n                };\n                await context.Response.WriteAsync(JsonConvert.SerializeObject(response)).ConfigureAwait(false);\n            }\n        });\n    });\n    ```\n","slug":"dotnetcore/core/remark","published":1,"updated":"2020-12-29T01:15:00.479Z","_id":"ckj9at6we003dd8v8edgr5z2c","comments":1,"layout":"post","photos":[],"link":""},{"title":"IdentityServer4-ClientCredentials模式","author":"谢新根","abbrlink":27943,"date":"2018-03-10T13:01:01.000Z","_content":"\nIdentityServer4-ClientCredentials模式\n<!-- more -->\n\n##### 一、IdentityServer端 也叫服务端\n1. 新建.netcore web项目 设置启动端口为60000 并通过Nuget引用IdentityServer4\n2. 添加ApiResource和Client(此处方便测试固定了一些数据)\n    ``` cs\n    using IdentityServer4.Models;\n    using System.Collections.Generic;\n\n    namespace Api\n    {\n        public class Config\n        {\n            public static IEnumerable<ApiResource> GetResources()\n            {\n                return new List<ApiResource>()\n                {\n                    new ApiResource(\"api\",\"My Api\")\n                };\n            }\n\n            public static IEnumerable<Client> GetClients()\n            {\n                return new List<Client>()\n                {\n                    new Client(){\n                        ClientId=\"client\",\n                        AllowedGrantTypes=GrantTypes.ClientCredentials,\n                        ClientSecrets={\n                            new Secret(\"secret\".Sha256())\n                        },\n                        AllowedScopes={\"api\"}\n                    }\n                };\n            }\n        }\n    }\n    ```\n3. 使用IdentityServe4\n    ``` cs\n    public void ConfigureServices(IServiceCollection services)\n    {\n        services.AddIdentityServer()\n            .AddDeveloperSigningCredential()\n            .AddInMemoryApiResources(Config.GetResources())\n            .AddInMemoryClients(Config.GetClients());\n    }\n\n    public void Configure(IApplicationBuilder app,IHostingEnvironment env)\n    {\n        if (env.IsDevelopment())\n        {\n            app.UseDeveloperExceptionPage();\n        }\n        app.UseIdentityServer();\n    }\n    ```\n4. 启动项目 http://localhost:60000/.well-known/openid-configuration 可以看到相关json数据\n![json](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/1-0401.png)\n\n#### 二、Api端\n1. 新建.netcore web项目 设置启动端口为60001 \n通过Nuget引用IdentityServer4.AccessTokenValidation 此处只需要验证所以不需要引用IdentityServer4\n2. 配置StartUp\n    ``` cs\n    using Microsoft.AspNetCore.Builder;\n    using Microsoft.AspNetCore.Hosting;\n    using Microsoft.Extensions.Configuration;\n    using Microsoft.Extensions.DependencyInjection;\n\n    namespace Api\n    {\n        public class Startup\n        {\n            public Startup(IConfiguration configuration)\n            {\n                Configuration = configuration;\n            }\n\n            public IConfiguration Configuration { get; }\n\n            // This method gets called by the runtime. Use this method to add services to the container.\n            public void ConfigureServices(IServiceCollection services)\n            {\n                services.AddAuthentication(\"Bearer\")\n                    .AddIdentityServerAuthentication(options =>\n                    {\n                        options.Authority = \"http://localhost:60001\";//设置认证服务器地址\n                        options.RequireHttpsMetadata = false;//不需要https\n                        options.ApiName = \"api\";//api resource的名字 对应定义的ApiResource中的name\n                    });\n                services.AddMvc();\n            }\n\n            // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\n            public void Configure(IApplicationBuilder app, IHostingEnvironment env)\n            {\n                if (env.IsDevelopment())\n                {\n                    app.UseDeveloperExceptionPage();\n                }\n                app.UseAuthentication();\n                app.UseMvc();\n            }\n        }\n    }\n    ```\n3. 在controller上贴上属性[Authorize] 表示只允许登录用户访问\n4. 通过postman获取token(注意请求body中的参数)\n![json](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/2-0401.png)\n5. 请求需要登录的api 此处为api/values\n![json](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/2-0501.png)\n\n#### 三、client 客户端也叫ThirPart【选修】\n定义一个控制台程序 访问api获取数据\n1. 创建.net core控制台程序 通过Nuget引用包IdentityModel\n    ``` cs\n    using IdentityModel.Client;\n    using System;\n    using System.Net.Http;\n\n    namespace Client\n    {\n        class Program\n        {\n            static void Main(string[] args)\n            {\n                var diso = DiscoveryClient.GetAsync(\"http://localhost:60000\").Result;\n                if (diso.IsError)\n                {\n                    Console.WriteLine(diso.Error);\n                }\n                var tokenClient = new TokenClient(diso.TokenEndpoint, \"client\", \"secret\");\n                var tokenResponse = tokenClient.RequestClientCredentialsAsync(\"api\").Result;\n                if (tokenResponse.IsError)\n                {\n                    Console.WriteLine(tokenResponse.Error);\n                }\n                else {\n                    Console.WriteLine(tokenResponse.Json);\n                }\n\n                var httpClient= new HttpClient();\n                httpClient.SetBearerToken(tokenResponse.AccessToken);\n                var response = httpClient.GetAsync(\"http://localhost:60001/api/values\").Result;\n                if (response.IsSuccessStatusCode)\n                {\n                    Console.WriteLine(response.Content.ReadAsStringAsync().Result);\n                }\n\n\n\n                Console.ReadKey();\n            }\n        }\n    }\n\n    ```","source":"_posts/dotnetcore/identityserver4/01client-credentials.md","raw":"---\ntitle: IdentityServer4-ClientCredentials模式\nauthor: 谢新根\ncategories:\n  - .NetCore\ntags:\n  - .NetCore\n  - IdentityServer4\nabbrlink: 27943\ndate: 2018-03-10 21:01:01\n---\n\nIdentityServer4-ClientCredentials模式\n<!-- more -->\n\n##### 一、IdentityServer端 也叫服务端\n1. 新建.netcore web项目 设置启动端口为60000 并通过Nuget引用IdentityServer4\n2. 添加ApiResource和Client(此处方便测试固定了一些数据)\n    ``` cs\n    using IdentityServer4.Models;\n    using System.Collections.Generic;\n\n    namespace Api\n    {\n        public class Config\n        {\n            public static IEnumerable<ApiResource> GetResources()\n            {\n                return new List<ApiResource>()\n                {\n                    new ApiResource(\"api\",\"My Api\")\n                };\n            }\n\n            public static IEnumerable<Client> GetClients()\n            {\n                return new List<Client>()\n                {\n                    new Client(){\n                        ClientId=\"client\",\n                        AllowedGrantTypes=GrantTypes.ClientCredentials,\n                        ClientSecrets={\n                            new Secret(\"secret\".Sha256())\n                        },\n                        AllowedScopes={\"api\"}\n                    }\n                };\n            }\n        }\n    }\n    ```\n3. 使用IdentityServe4\n    ``` cs\n    public void ConfigureServices(IServiceCollection services)\n    {\n        services.AddIdentityServer()\n            .AddDeveloperSigningCredential()\n            .AddInMemoryApiResources(Config.GetResources())\n            .AddInMemoryClients(Config.GetClients());\n    }\n\n    public void Configure(IApplicationBuilder app,IHostingEnvironment env)\n    {\n        if (env.IsDevelopment())\n        {\n            app.UseDeveloperExceptionPage();\n        }\n        app.UseIdentityServer();\n    }\n    ```\n4. 启动项目 http://localhost:60000/.well-known/openid-configuration 可以看到相关json数据\n![json](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/1-0401.png)\n\n#### 二、Api端\n1. 新建.netcore web项目 设置启动端口为60001 \n通过Nuget引用IdentityServer4.AccessTokenValidation 此处只需要验证所以不需要引用IdentityServer4\n2. 配置StartUp\n    ``` cs\n    using Microsoft.AspNetCore.Builder;\n    using Microsoft.AspNetCore.Hosting;\n    using Microsoft.Extensions.Configuration;\n    using Microsoft.Extensions.DependencyInjection;\n\n    namespace Api\n    {\n        public class Startup\n        {\n            public Startup(IConfiguration configuration)\n            {\n                Configuration = configuration;\n            }\n\n            public IConfiguration Configuration { get; }\n\n            // This method gets called by the runtime. Use this method to add services to the container.\n            public void ConfigureServices(IServiceCollection services)\n            {\n                services.AddAuthentication(\"Bearer\")\n                    .AddIdentityServerAuthentication(options =>\n                    {\n                        options.Authority = \"http://localhost:60001\";//设置认证服务器地址\n                        options.RequireHttpsMetadata = false;//不需要https\n                        options.ApiName = \"api\";//api resource的名字 对应定义的ApiResource中的name\n                    });\n                services.AddMvc();\n            }\n\n            // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\n            public void Configure(IApplicationBuilder app, IHostingEnvironment env)\n            {\n                if (env.IsDevelopment())\n                {\n                    app.UseDeveloperExceptionPage();\n                }\n                app.UseAuthentication();\n                app.UseMvc();\n            }\n        }\n    }\n    ```\n3. 在controller上贴上属性[Authorize] 表示只允许登录用户访问\n4. 通过postman获取token(注意请求body中的参数)\n![json](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/2-0401.png)\n5. 请求需要登录的api 此处为api/values\n![json](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/01/2-0501.png)\n\n#### 三、client 客户端也叫ThirPart【选修】\n定义一个控制台程序 访问api获取数据\n1. 创建.net core控制台程序 通过Nuget引用包IdentityModel\n    ``` cs\n    using IdentityModel.Client;\n    using System;\n    using System.Net.Http;\n\n    namespace Client\n    {\n        class Program\n        {\n            static void Main(string[] args)\n            {\n                var diso = DiscoveryClient.GetAsync(\"http://localhost:60000\").Result;\n                if (diso.IsError)\n                {\n                    Console.WriteLine(diso.Error);\n                }\n                var tokenClient = new TokenClient(diso.TokenEndpoint, \"client\", \"secret\");\n                var tokenResponse = tokenClient.RequestClientCredentialsAsync(\"api\").Result;\n                if (tokenResponse.IsError)\n                {\n                    Console.WriteLine(tokenResponse.Error);\n                }\n                else {\n                    Console.WriteLine(tokenResponse.Json);\n                }\n\n                var httpClient= new HttpClient();\n                httpClient.SetBearerToken(tokenResponse.AccessToken);\n                var response = httpClient.GetAsync(\"http://localhost:60001/api/values\").Result;\n                if (response.IsSuccessStatusCode)\n                {\n                    Console.WriteLine(response.Content.ReadAsStringAsync().Result);\n                }\n\n\n\n                Console.ReadKey();\n            }\n        }\n    }\n\n    ```","slug":"dotnetcore/identityserver4/01client-credentials","published":1,"updated":"2020-12-29T01:15:00.482Z","_id":"ckj9at6wg003fd8v8ecul5a5u","comments":1,"layout":"post","photos":[],"link":""},{"title":"IdentityServer4 资料收集","author":"谢新根","abbrlink":61073,"date":"2018-03-09T13:01:01.000Z","_content":"IdentityServer4 资料收集\n<!-- more -->\n\n* IdentityServer4  endPoint查看地址：http://localhost:5000/.well-known/openId-configuration\n\n* 博客推荐 http://www.cnblogs.com/stulzq/p/8119928.html\n\n* 八幅漫画理解使用JSON Web Token设计单点登录系统\nhttp://blog.leapoahead.com/2015/09/07/user-authentication-with-jwt/\n\n* JSON Web Token - 在Web应用间安全地传递信息\nhttp://blog.leapoahead.com/2015/09/06/understanding-jwt/\n\n* 纯OAuth2 授权码模式的实现 。 (不包含OICD）\nhttps://github.com/bayardw/IdentityServer4.Authorization.Code\n\n* YAML语法介绍：\nhttp://www.ruanyifeng.com/blog/2016/07/yaml.html","source":"_posts/dotnetcore/identityserver4/article.md","raw":"---\ntitle: IdentityServer4 资料收集\nauthor: 谢新根\ncategories:\n  - .NetCore\ntags:\n  - .NetCore\n  - IdentityServer4\nabbrlink: 61073\ndate: 2018-03-09 21:01:01\n---\nIdentityServer4 资料收集\n<!-- more -->\n\n* IdentityServer4  endPoint查看地址：http://localhost:5000/.well-known/openId-configuration\n\n* 博客推荐 http://www.cnblogs.com/stulzq/p/8119928.html\n\n* 八幅漫画理解使用JSON Web Token设计单点登录系统\nhttp://blog.leapoahead.com/2015/09/07/user-authentication-with-jwt/\n\n* JSON Web Token - 在Web应用间安全地传递信息\nhttp://blog.leapoahead.com/2015/09/06/understanding-jwt/\n\n* 纯OAuth2 授权码模式的实现 。 (不包含OICD）\nhttps://github.com/bayardw/IdentityServer4.Authorization.Code\n\n* YAML语法介绍：\nhttp://www.ruanyifeng.com/blog/2016/07/yaml.html","slug":"dotnetcore/identityserver4/article","published":1,"updated":"2020-12-29T01:15:00.485Z","_id":"ckj9at6wi003kd8v82mum7hof","comments":1,"layout":"post","photos":[],"link":""},{"title":"IdentityServer4-使用密码授权模式","author":"谢新根","abbrlink":60051,"date":"2018-03-11T13:01:01.000Z","_content":"\nIdentityServer4-使用密码授权模式\n<!-- more -->\n\n##### 一、IdentityServer 也叫服务端\n1. 新建.netcore web项目 设置启动端口为60000 并通过Nuget引用IdentityServer4\n2. 添加ApiResource和Client(此处方便测试固定了一些数据)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0201.png)\n3. 使用IdentityServer\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0301.png)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0302.png)\n4. 启动项目 http://localhost:60000/.well-known/openid-configuration 可以看到相关json数据\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0401.png)\n##### 二、Api端 (与clientCredentials模式完全一致)\n1. 新建.netcore web项目 设置启动端口为60001\n   通过Nuget引用IdentityServer4.AccessTokenValidation 此处只需要验证所以不需要引用IdentityServer4\n2. 配置\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0201.png)\n3. 在controller上贴上属性[Authorize] 表示只允许登录用户访问\n4. 通过postman获取token(注意请求body中的参数)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0401.png)\n5. 请求需要登录的api 此处为api/values\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0501.png)\n##### 三、client 客户端也叫ThirPart【选修】\n>定义一个控制台程序 访问api获取数据\n1. 创建.net core控制台程序 通过Nuget引用包IdentityModel\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/3-0101.png)\n","source":"_posts/dotnetcore/identityserver4/02passport.md","raw":"---\ntitle: IdentityServer4-使用密码授权模式\nauthor: 谢新根\ncategories:\n  - .NetCore\ntags:\n  - .NetCore\n  - IdentityServer4\nabbrlink: 60051\ndate: 2018-03-11 21:01:01\n---\n\nIdentityServer4-使用密码授权模式\n<!-- more -->\n\n##### 一、IdentityServer 也叫服务端\n1. 新建.netcore web项目 设置启动端口为60000 并通过Nuget引用IdentityServer4\n2. 添加ApiResource和Client(此处方便测试固定了一些数据)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0201.png)\n3. 使用IdentityServer\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0301.png)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0302.png)\n4. 启动项目 http://localhost:60000/.well-known/openid-configuration 可以看到相关json数据\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/1-0401.png)\n##### 二、Api端 (与clientCredentials模式完全一致)\n1. 新建.netcore web项目 设置启动端口为60001\n   通过Nuget引用IdentityServer4.AccessTokenValidation 此处只需要验证所以不需要引用IdentityServer4\n2. 配置\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0201.png)\n3. 在controller上贴上属性[Authorize] 表示只允许登录用户访问\n4. 通过postman获取token(注意请求body中的参数)\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0401.png)\n5. 请求需要登录的api 此处为api/values\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/2-0501.png)\n##### 三、client 客户端也叫ThirPart【选修】\n>定义一个控制台程序 访问api获取数据\n1. 创建.net core控制台程序 通过Nuget引用包IdentityModel\n![](http://qiniu.xxgtalk.cn/blog/images/dotnetcore/identityserver4/02/3-0101.png)\n","slug":"dotnetcore/identityserver4/02passport","published":1,"updated":"2020-12-29T01:15:00.487Z","_id":"ckj9at6wk003ld8v80v5jdqdc","comments":1,"layout":"post","photos":[],"link":""},{"title":".net core 3.0 Signalr - 实现一个业务推送系统","date":"2019-09-20T12:00:10.000Z","abbrlink":34744,"_content":"\n## 介绍\nASP.NET Core SignalR 是一个开源代码库，它简化了向应用添加实时 Web 功能的过程。 实时 Web 功能使服务器端代码能够即时将内容推送到客户端。  \nSignalR 的适用对象：  \n- 需要来自服务器的高频率更新的应用。 例如：游戏、社交网络、投票、拍卖、地图和 GPS 应用。\n- 仪表板和监视应用。 示例包括公司仪表板、销售状态即时更新或行程警示。\n- 协作应用。 协作应用的示例包括白板应用和团队会议软件。\n- 需要通知的应用。 社交网络、电子邮件、聊天、游戏、行程警示以及许多其他应用都使用通知。\nSignalR 提供了一个用于创建服务器到客户端远程过程调用（RPC）的 API。 RPC 通过服务器端 .NET Core 代码调用客户端上的 JavaScript 函数。\n以下是 ASP.NET Core SignalR 的一些功能：\n- 自动管理连接。\n- 同时向所有连接的客户端发送消息。 例如，聊天室。\n- 将消息发送到特定的客户端或客户端组。\n- 扩展以处理增加的流量。\n\n## 业务需求\n- 一个人可以开多个tab有多个连接\n- 给指定的一个、一批人推送(以User为中心对该用户的所有连接进行推送(浏览器多个tab))\n- 给指定的组中某些人推送(群聊)\n- 给指定的人某些Connect推送(登录排斥，不允许多台电同时脑登录)\n\n## 改进部分\n- 优先使用socket进行通信\n- 支持一个用户多个连接\n- 使用MessagePack进行传输\n- 使用Redis作为底板来支持横向扩展\n\n本系列共分为10篇，包括基础知识介绍，项目实战等，目录如下\n\n[.net core 3.0 Signalr - 01 基础篇](/2019/09/21/dotnetcore/signalr/01-base/)   \n[.net core 3.0 Signalr - 02 使用强类型的Hub](/2019/09/22/dotnetcore/signalr/02-type-hub/)   \n[.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容](/2019/09/29/dotnetcore/signalr/03-message-pack/)   \n[.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展](/2019/10/01/dotnetcore/signalr/04-redis/)   \n[.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联](/2019/10/02/dotnetcore/signalr/05-jwt/)   \n[.net core 3.0 Signalr - 06 业务实现-业务分析](/2019/10/03/dotnetcore/signalr/06-analysis/)   \n[.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接](/2019/10/04/dotnetcore/signalr/07-self-manager/)   \n[.net core 3.0 Signalr - 08 业务实现-客户端demo](/2019/10/05/dotnetcore/signalr/08-clientdemo/)   \n[.net core 3.0 Signalr - 09 待改进&交流](/2019/10/05/dotnetcore/signalr/09-todo/)   \n\n## Demo源码地址\n> https://github.com/xiexingen/CTS.Signalr\n\n## 强烈推荐的参考文档  \n> 微软官方文档:https://docs.microsoft.com/zh-CN/aspnet/core/signalr/introduction?view=aspnetcore-3.0  \n> 发现写的不错的博客: https://www.cnblogs.com/cgzl/p/9509207.html  \n> 发现写的不错的博客:https://www.cnblogs.com/cgzl/p/9515516.html\n","source":"_posts/dotnetcore/signalr/00-introduct.md","raw":"---\ntitle: .net core 3.0 Signalr - 实现一个业务推送系统\ndate: '2019-09-20 20:00:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\n  - NetCore\nabbrlink: 34744\n---\n\n## 介绍\nASP.NET Core SignalR 是一个开源代码库，它简化了向应用添加实时 Web 功能的过程。 实时 Web 功能使服务器端代码能够即时将内容推送到客户端。  \nSignalR 的适用对象：  \n- 需要来自服务器的高频率更新的应用。 例如：游戏、社交网络、投票、拍卖、地图和 GPS 应用。\n- 仪表板和监视应用。 示例包括公司仪表板、销售状态即时更新或行程警示。\n- 协作应用。 协作应用的示例包括白板应用和团队会议软件。\n- 需要通知的应用。 社交网络、电子邮件、聊天、游戏、行程警示以及许多其他应用都使用通知。\nSignalR 提供了一个用于创建服务器到客户端远程过程调用（RPC）的 API。 RPC 通过服务器端 .NET Core 代码调用客户端上的 JavaScript 函数。\n以下是 ASP.NET Core SignalR 的一些功能：\n- 自动管理连接。\n- 同时向所有连接的客户端发送消息。 例如，聊天室。\n- 将消息发送到特定的客户端或客户端组。\n- 扩展以处理增加的流量。\n\n## 业务需求\n- 一个人可以开多个tab有多个连接\n- 给指定的一个、一批人推送(以User为中心对该用户的所有连接进行推送(浏览器多个tab))\n- 给指定的组中某些人推送(群聊)\n- 给指定的人某些Connect推送(登录排斥，不允许多台电同时脑登录)\n\n## 改进部分\n- 优先使用socket进行通信\n- 支持一个用户多个连接\n- 使用MessagePack进行传输\n- 使用Redis作为底板来支持横向扩展\n\n本系列共分为10篇，包括基础知识介绍，项目实战等，目录如下\n\n[.net core 3.0 Signalr - 01 基础篇](/2019/09/21/dotnetcore/signalr/01-base/)   \n[.net core 3.0 Signalr - 02 使用强类型的Hub](/2019/09/22/dotnetcore/signalr/02-type-hub/)   \n[.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容](/2019/09/29/dotnetcore/signalr/03-message-pack/)   \n[.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展](/2019/10/01/dotnetcore/signalr/04-redis/)   \n[.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联](/2019/10/02/dotnetcore/signalr/05-jwt/)   \n[.net core 3.0 Signalr - 06 业务实现-业务分析](/2019/10/03/dotnetcore/signalr/06-analysis/)   \n[.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接](/2019/10/04/dotnetcore/signalr/07-self-manager/)   \n[.net core 3.0 Signalr - 08 业务实现-客户端demo](/2019/10/05/dotnetcore/signalr/08-clientdemo/)   \n[.net core 3.0 Signalr - 09 待改进&交流](/2019/10/05/dotnetcore/signalr/09-todo/)   \n\n## Demo源码地址\n> https://github.com/xiexingen/CTS.Signalr\n\n## 强烈推荐的参考文档  \n> 微软官方文档:https://docs.microsoft.com/zh-CN/aspnet/core/signalr/introduction?view=aspnetcore-3.0  \n> 发现写的不错的博客: https://www.cnblogs.com/cgzl/p/9509207.html  \n> 发现写的不错的博客:https://www.cnblogs.com/cgzl/p/9515516.html\n","slug":"dotnetcore/signalr/00-introduct","published":1,"updated":"2020-12-29T01:13:55.968Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6wm003qd8v8aipkbt7z","content":"<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>ASP.NET Core SignalR 是一个开源代码库，它简化了向应用添加实时 Web 功能的过程。 实时 Web 功能使服务器端代码能够即时将内容推送到客户端。<br>SignalR 的适用对象：  </p>\n<ul>\n<li>需要来自服务器的高频率更新的应用。 例如：游戏、社交网络、投票、拍卖、地图和 GPS 应用。</li>\n<li>仪表板和监视应用。 示例包括公司仪表板、销售状态即时更新或行程警示。</li>\n<li>协作应用。 协作应用的示例包括白板应用和团队会议软件。</li>\n<li>需要通知的应用。 社交网络、电子邮件、聊天、游戏、行程警示以及许多其他应用都使用通知。<br>SignalR 提供了一个用于创建服务器到客户端远程过程调用（RPC）的 API。 RPC 通过服务器端 .NET Core 代码调用客户端上的 JavaScript 函数。<br>以下是 ASP.NET Core SignalR 的一些功能：</li>\n<li>自动管理连接。</li>\n<li>同时向所有连接的客户端发送消息。 例如，聊天室。</li>\n<li>将消息发送到特定的客户端或客户端组。</li>\n<li>扩展以处理增加的流量。</li>\n</ul>\n<h2 id=\"业务需求\"><a href=\"#业务需求\" class=\"headerlink\" title=\"业务需求\"></a>业务需求</h2><ul>\n<li>一个人可以开多个tab有多个连接</li>\n<li>给指定的一个、一批人推送(以User为中心对该用户的所有连接进行推送(浏览器多个tab))</li>\n<li>给指定的组中某些人推送(群聊)</li>\n<li>给指定的人某些Connect推送(登录排斥，不允许多台电同时脑登录)</li>\n</ul>\n<h2 id=\"改进部分\"><a href=\"#改进部分\" class=\"headerlink\" title=\"改进部分\"></a>改进部分</h2><ul>\n<li>优先使用socket进行通信</li>\n<li>支持一个用户多个连接</li>\n<li>使用MessagePack进行传输</li>\n<li>使用Redis作为底板来支持横向扩展</li>\n</ul>\n<p>本系列共分为10篇，包括基础知识介绍，项目实战等，目录如下</p>\n<p><a href=\"/2019/09/21/dotnetcore/signalr/01-base/\">.net core 3.0 Signalr - 01 基础篇</a><br><a href=\"/2019/09/22/dotnetcore/signalr/02-type-hub/\">.net core 3.0 Signalr - 02 使用强类型的Hub</a><br><a href=\"/2019/09/29/dotnetcore/signalr/03-message-pack/\">.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</a><br><a href=\"/2019/10/01/dotnetcore/signalr/04-redis/\">.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</a><br><a href=\"/2019/10/02/dotnetcore/signalr/05-jwt/\">.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</a><br><a href=\"/2019/10/03/dotnetcore/signalr/06-analysis/\">.net core 3.0 Signalr - 06 业务实现-业务分析</a><br><a href=\"/2019/10/04/dotnetcore/signalr/07-self-manager/\">.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</a><br><a href=\"/2019/10/05/dotnetcore/signalr/08-clientdemo/\">.net core 3.0 Signalr - 08 业务实现-客户端demo</a><br><a href=\"/2019/10/05/dotnetcore/signalr/09-todo/\">.net core 3.0 Signalr - 09 待改进&amp;交流</a>   </p>\n<h2 id=\"Demo源码地址\"><a href=\"#Demo源码地址\" class=\"headerlink\" title=\"Demo源码地址\"></a>Demo源码地址</h2><blockquote>\n<p><a href=\"https://github.com/xiexingen/CTS.Signalr\">https://github.com/xiexingen/CTS.Signalr</a></p>\n</blockquote>\n<h2 id=\"强烈推荐的参考文档\"><a href=\"#强烈推荐的参考文档\" class=\"headerlink\" title=\"强烈推荐的参考文档\"></a>强烈推荐的参考文档</h2><blockquote>\n<p>微软官方文档:<a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/signalr/introduction?view=aspnetcore-3.0\">https://docs.microsoft.com/zh-CN/aspnet/core/signalr/introduction?view=aspnetcore-3.0</a><br>发现写的不错的博客: <a href=\"https://www.cnblogs.com/cgzl/p/9509207.html\">https://www.cnblogs.com/cgzl/p/9509207.html</a><br>发现写的不错的博客:<a href=\"https://www.cnblogs.com/cgzl/p/9515516.html\">https://www.cnblogs.com/cgzl/p/9515516.html</a></p>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"","more":"<h2 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>ASP.NET Core SignalR 是一个开源代码库，它简化了向应用添加实时 Web 功能的过程。 实时 Web 功能使服务器端代码能够即时将内容推送到客户端。<br>SignalR 的适用对象：  </p>\n<ul>\n<li>需要来自服务器的高频率更新的应用。 例如：游戏、社交网络、投票、拍卖、地图和 GPS 应用。</li>\n<li>仪表板和监视应用。 示例包括公司仪表板、销售状态即时更新或行程警示。</li>\n<li>协作应用。 协作应用的示例包括白板应用和团队会议软件。</li>\n<li>需要通知的应用。 社交网络、电子邮件、聊天、游戏、行程警示以及许多其他应用都使用通知。<br>SignalR 提供了一个用于创建服务器到客户端远程过程调用（RPC）的 API。 RPC 通过服务器端 .NET Core 代码调用客户端上的 JavaScript 函数。<br>以下是 ASP.NET Core SignalR 的一些功能：</li>\n<li>自动管理连接。</li>\n<li>同时向所有连接的客户端发送消息。 例如，聊天室。</li>\n<li>将消息发送到特定的客户端或客户端组。</li>\n<li>扩展以处理增加的流量。</li>\n</ul>\n<h2 id=\"业务需求\"><a href=\"#业务需求\" class=\"headerlink\" title=\"业务需求\"></a>业务需求</h2><ul>\n<li>一个人可以开多个tab有多个连接</li>\n<li>给指定的一个、一批人推送(以User为中心对该用户的所有连接进行推送(浏览器多个tab))</li>\n<li>给指定的组中某些人推送(群聊)</li>\n<li>给指定的人某些Connect推送(登录排斥，不允许多台电同时脑登录)</li>\n</ul>\n<h2 id=\"改进部分\"><a href=\"#改进部分\" class=\"headerlink\" title=\"改进部分\"></a>改进部分</h2><ul>\n<li>优先使用socket进行通信</li>\n<li>支持一个用户多个连接</li>\n<li>使用MessagePack进行传输</li>\n<li>使用Redis作为底板来支持横向扩展</li>\n</ul>\n<p>本系列共分为10篇，包括基础知识介绍，项目实战等，目录如下</p>\n<p><a href=\"/2019/09/21/dotnetcore/signalr/01-base/\">.net core 3.0 Signalr - 01 基础篇</a><br><a href=\"/2019/09/22/dotnetcore/signalr/02-type-hub/\">.net core 3.0 Signalr - 02 使用强类型的Hub</a><br><a href=\"/2019/09/29/dotnetcore/signalr/03-message-pack/\">.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</a><br><a href=\"/2019/10/01/dotnetcore/signalr/04-redis/\">.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</a><br><a href=\"/2019/10/02/dotnetcore/signalr/05-jwt/\">.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</a><br><a href=\"/2019/10/03/dotnetcore/signalr/06-analysis/\">.net core 3.0 Signalr - 06 业务实现-业务分析</a><br><a href=\"/2019/10/04/dotnetcore/signalr/07-self-manager/\">.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</a><br><a href=\"/2019/10/05/dotnetcore/signalr/08-clientdemo/\">.net core 3.0 Signalr - 08 业务实现-客户端demo</a><br><a href=\"/2019/10/05/dotnetcore/signalr/09-todo/\">.net core 3.0 Signalr - 09 待改进&amp;交流</a>   </p>\n<h2 id=\"Demo源码地址\"><a href=\"#Demo源码地址\" class=\"headerlink\" title=\"Demo源码地址\"></a>Demo源码地址</h2><blockquote>\n<p><a href=\"https://github.com/xiexingen/CTS.Signalr\">https://github.com/xiexingen/CTS.Signalr</a></p>\n</blockquote>\n<h2 id=\"强烈推荐的参考文档\"><a href=\"#强烈推荐的参考文档\" class=\"headerlink\" title=\"强烈推荐的参考文档\"></a>强烈推荐的参考文档</h2><blockquote>\n<p>微软官方文档:<a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/signalr/introduction?view=aspnetcore-3.0\">https://docs.microsoft.com/zh-CN/aspnet/core/signalr/introduction?view=aspnetcore-3.0</a><br>发现写的不错的博客: <a href=\"https://www.cnblogs.com/cgzl/p/9509207.html\">https://www.cnblogs.com/cgzl/p/9509207.html</a><br>发现写的不错的博客:<a href=\"https://www.cnblogs.com/cgzl/p/9515516.html\">https://www.cnblogs.com/cgzl/p/9515516.html</a></p>\n</blockquote>\n"},{"title":".net core 3.0 Signalr - 01 基础篇","date":"2019-09-21T02:34:10.000Z","abbrlink":61070,"_content":"\n.net core 3.0 Signalr - 01 基础篇 以最简洁的方式介绍如何创建一个可连接的hub\n<!-- more -->\n\n因为将signalr作为单独的站点，此处需要建立两个项目，一个专门用于signalr作为推送项目，一个客户端(实际的业务项目)\n\n## 基础知识速览\n\n### Clients对象属性\n|   属性    |   描述 \n|   :---    |   :--- \n|   All    |   在所有连接的客户端上调用方法\n|   Caller  |   在调用集线器方法的客户端上调用方法\n|   Others  |   除当前连接外的所有连接\n\n### Clients对象方法\n|   方法    |   描述 \n|   :---    |   :--- \n|   AllExcept    |   在所有连接的客户端（指定的连接除外）上调用方法\n|   Client  |   在特定连接的客户端上调用方法(单个)\n|   Clients  |   在特定连接的客户端上调用方法(多个)\n|   Group  |   对指定组中的所有连接调用方法\n|   GroupExcept  |   对指定组中的所有连接调用方法，指定的连接除外\n|   Groups  |   在多组连接上调用方法\n|   OthersInGroup  |   对一组连接调用方法，而不包括调用该集线器方法的客户端\n|   User  |   对与特定用户关联的所有连接调用方法\n|   Users  |   对与指定用户相关联的所有连接调用方法\n\n\n## Signalr推送端\n- 通过命令行或者vs 2019新建.netcore web项目，选择.net core 3.0、webapi  \n- 建立一个Hub\n    ``` C#\n    public class NotifyHub : Hub\n    {\n\n    }\n    ```\n\n- 修改Startup中的ConfigServices方法，注册对应的服务\n    ``` C#\n    // 添加Signalr\n    services.AddSignalR(config =>\n    {\n        // _webEnv为通过依赖注入在Startup的构造函数中注入的 IWebHostEnvironment\n        if (_webEnv.IsDevelopment())\n        {\n            config.EnableDetailedErrors = true;\n        }\n    });\n    ```\n- 修改Configure配置HTTP请求的管道\n    ``` C#\n    ...\n    app.UseRouting();\n    app.UseEndpoints(endpoints =>{\n        endpoints.MapHub<NotifyHub>(\"/notify-hub\");\n    });\n\n    ```\n## 业务端\n[相关文档](https://docs.microsoft.com/zh-CN/aspnet/core/tutorials/signalr?view=aspnetcore-3.0&tabs=visual-studio)\n\n- 创建连接对象\n    ``` js\n    var connection=new signalR.HubConnectionBuilder()\n    .configureLogging(signalR.LogLevel.Error) // 前端控制台的日志级别，根据需要配置\n    .withUrl('http://localhost:50001/notify-hub') // 连接地址,这个地址是signalr项目的地址\n    .withAutomaticReconnect([0, 2000, 5000, 10000, 20000]) // 配置重连的时间\n    .build();\n\n    // 重连的时候触发\n    connection.onreconnecting(function (info) {\n        console.info('----------------------------------signalr-- onreconnecting', info);\n    });\n\n    //连接关闭的回调\n    connection.onclose(function (err) {\n        console.info('--------------------------------signalr-- onclose', err);\n    });\n\n    connection.start().then(function (data) {\n        console.log('已成功连接到signalr服务器')\n    }).catch(function (error) {\n        console.error(error.toString());\n    });\n\n    ```\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   下一篇  |   [.net core 3.0 Signalr - 02 使用强类型的Hub](/2019/09/22/dotnetcore/signalr/02-type-hub/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/01-base.md","raw":"---\ntitle: .net core 3.0 Signalr - 01 基础篇\ndate: '2019-09-21 10:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\n  - .NetCore\nabbrlink: 61070\n---\n\n.net core 3.0 Signalr - 01 基础篇 以最简洁的方式介绍如何创建一个可连接的hub\n<!-- more -->\n\n因为将signalr作为单独的站点，此处需要建立两个项目，一个专门用于signalr作为推送项目，一个客户端(实际的业务项目)\n\n## 基础知识速览\n\n### Clients对象属性\n|   属性    |   描述 \n|   :---    |   :--- \n|   All    |   在所有连接的客户端上调用方法\n|   Caller  |   在调用集线器方法的客户端上调用方法\n|   Others  |   除当前连接外的所有连接\n\n### Clients对象方法\n|   方法    |   描述 \n|   :---    |   :--- \n|   AllExcept    |   在所有连接的客户端（指定的连接除外）上调用方法\n|   Client  |   在特定连接的客户端上调用方法(单个)\n|   Clients  |   在特定连接的客户端上调用方法(多个)\n|   Group  |   对指定组中的所有连接调用方法\n|   GroupExcept  |   对指定组中的所有连接调用方法，指定的连接除外\n|   Groups  |   在多组连接上调用方法\n|   OthersInGroup  |   对一组连接调用方法，而不包括调用该集线器方法的客户端\n|   User  |   对与特定用户关联的所有连接调用方法\n|   Users  |   对与指定用户相关联的所有连接调用方法\n\n\n## Signalr推送端\n- 通过命令行或者vs 2019新建.netcore web项目，选择.net core 3.0、webapi  \n- 建立一个Hub\n    ``` C#\n    public class NotifyHub : Hub\n    {\n\n    }\n    ```\n\n- 修改Startup中的ConfigServices方法，注册对应的服务\n    ``` C#\n    // 添加Signalr\n    services.AddSignalR(config =>\n    {\n        // _webEnv为通过依赖注入在Startup的构造函数中注入的 IWebHostEnvironment\n        if (_webEnv.IsDevelopment())\n        {\n            config.EnableDetailedErrors = true;\n        }\n    });\n    ```\n- 修改Configure配置HTTP请求的管道\n    ``` C#\n    ...\n    app.UseRouting();\n    app.UseEndpoints(endpoints =>{\n        endpoints.MapHub<NotifyHub>(\"/notify-hub\");\n    });\n\n    ```\n## 业务端\n[相关文档](https://docs.microsoft.com/zh-CN/aspnet/core/tutorials/signalr?view=aspnetcore-3.0&tabs=visual-studio)\n\n- 创建连接对象\n    ``` js\n    var connection=new signalR.HubConnectionBuilder()\n    .configureLogging(signalR.LogLevel.Error) // 前端控制台的日志级别，根据需要配置\n    .withUrl('http://localhost:50001/notify-hub') // 连接地址,这个地址是signalr项目的地址\n    .withAutomaticReconnect([0, 2000, 5000, 10000, 20000]) // 配置重连的时间\n    .build();\n\n    // 重连的时候触发\n    connection.onreconnecting(function (info) {\n        console.info('----------------------------------signalr-- onreconnecting', info);\n    });\n\n    //连接关闭的回调\n    connection.onclose(function (err) {\n        console.info('--------------------------------signalr-- onclose', err);\n    });\n\n    connection.start().then(function (data) {\n        console.log('已成功连接到signalr服务器')\n    }).catch(function (error) {\n        console.error(error.toString());\n    });\n\n    ```\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   下一篇  |   [.net core 3.0 Signalr - 02 使用强类型的Hub](/2019/09/22/dotnetcore/signalr/02-type-hub/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/01-base","published":1,"updated":"2020-12-29T01:09:09.623Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6wo003rd8v88j598xc2","content":"<p>.net core 3.0 Signalr - 01 基础篇 以最简洁的方式介绍如何创建一个可连接的hub</p>\n<a id=\"more\"></a>\n\n<p>因为将signalr作为单独的站点，此处需要建立两个项目，一个专门用于signalr作为推送项目，一个客户端(实际的业务项目)</p>\n<h2 id=\"基础知识速览\"><a href=\"#基础知识速览\" class=\"headerlink\" title=\"基础知识速览\"></a>基础知识速览</h2><h3 id=\"Clients对象属性\"><a href=\"#Clients对象属性\" class=\"headerlink\" title=\"Clients对象属性\"></a>Clients对象属性</h3><table>\n<thead>\n<tr>\n<th align=\"left\">属性</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">All</td>\n<td align=\"left\">在所有连接的客户端上调用方法</td>\n</tr>\n<tr>\n<td align=\"left\">Caller</td>\n<td align=\"left\">在调用集线器方法的客户端上调用方法</td>\n</tr>\n<tr>\n<td align=\"left\">Others</td>\n<td align=\"left\">除当前连接外的所有连接</td>\n</tr>\n</tbody></table>\n<h3 id=\"Clients对象方法\"><a href=\"#Clients对象方法\" class=\"headerlink\" title=\"Clients对象方法\"></a>Clients对象方法</h3><table>\n<thead>\n<tr>\n<th align=\"left\">方法</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">AllExcept</td>\n<td align=\"left\">在所有连接的客户端（指定的连接除外）上调用方法</td>\n</tr>\n<tr>\n<td align=\"left\">Client</td>\n<td align=\"left\">在特定连接的客户端上调用方法(单个)</td>\n</tr>\n<tr>\n<td align=\"left\">Clients</td>\n<td align=\"left\">在特定连接的客户端上调用方法(多个)</td>\n</tr>\n<tr>\n<td align=\"left\">Group</td>\n<td align=\"left\">对指定组中的所有连接调用方法</td>\n</tr>\n<tr>\n<td align=\"left\">GroupExcept</td>\n<td align=\"left\">对指定组中的所有连接调用方法，指定的连接除外</td>\n</tr>\n<tr>\n<td align=\"left\">Groups</td>\n<td align=\"left\">在多组连接上调用方法</td>\n</tr>\n<tr>\n<td align=\"left\">OthersInGroup</td>\n<td align=\"left\">对一组连接调用方法，而不包括调用该集线器方法的客户端</td>\n</tr>\n<tr>\n<td align=\"left\">User</td>\n<td align=\"left\">对与特定用户关联的所有连接调用方法</td>\n</tr>\n<tr>\n<td align=\"left\">Users</td>\n<td align=\"left\">对与指定用户相关联的所有连接调用方法</td>\n</tr>\n</tbody></table>\n<h2 id=\"Signalr推送端\"><a href=\"#Signalr推送端\" class=\"headerlink\" title=\"Signalr推送端\"></a>Signalr推送端</h2><ul>\n<li><p>通过命令行或者vs 2019新建.netcore web项目，选择.net core 3.0、webapi  </p>\n</li>\n<li><p>建立一个Hub</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">public class NotifyHub : Hub\n&#123;\n\n&#125;</code></pre>\n</li>\n<li><p>修改Startup中的ConfigServices方法，注册对应的服务</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">// 添加Signalr\nservices.AddSignalR(config =>\n&#123;\n    // _webEnv为通过依赖注入在Startup的构造函数中注入的 IWebHostEnvironment\n    if (_webEnv.IsDevelopment())\n    &#123;\n        config.EnableDetailedErrors = true;\n    &#125;\n&#125;);</code></pre>\n</li>\n<li><p>修改Configure配置HTTP请求的管道</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">...\napp.UseRouting();\napp.UseEndpoints(endpoints =>&#123;\n    endpoints.MapHub<NotifyHub>(\"/notify-hub\");\n&#125;);\n</code></pre>\n<h2 id=\"业务端\"><a href=\"#业务端\" class=\"headerlink\" title=\"业务端\"></a>业务端</h2><p><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/tutorials/signalr?view=aspnetcore-3.0&tabs=visual-studio\">相关文档</a></p>\n</li>\n<li><p>创建连接对象</p>\n<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> connection<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">signalR<span class=\"token punctuation\">.</span>HubConnectionBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">configureLogging</span><span class=\"token punctuation\">(</span>signalR<span class=\"token punctuation\">.</span>LogLevel<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 前端控制台的日志级别，根据需要配置</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">withUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:50001/notify-hub'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 连接地址,这个地址是signalr项目的地址</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">withAutomaticReconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 配置重连的时间</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">// 重连的时候触发</span>\nconnection<span class=\"token punctuation\">.</span><span class=\"token function\">onreconnecting</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'----------------------------------signalr-- onreconnecting'</span><span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//连接关闭的回调</span>\nconnection<span class=\"token punctuation\">.</span><span class=\"token function\">onclose</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--------------------------------signalr-- onclose'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconnection<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'已成功连接到signalr服务器'</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/09/22/dotnetcore/signalr/02-type-hub/\">.net core 3.0 Signalr - 02 使用强类型的Hub</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 01 基础篇 以最简洁的方式介绍如何创建一个可连接的hub</p>","more":"<p>因为将signalr作为单独的站点，此处需要建立两个项目，一个专门用于signalr作为推送项目，一个客户端(实际的业务项目)</p>\n<h2 id=\"基础知识速览\"><a href=\"#基础知识速览\" class=\"headerlink\" title=\"基础知识速览\"></a>基础知识速览</h2><h3 id=\"Clients对象属性\"><a href=\"#Clients对象属性\" class=\"headerlink\" title=\"Clients对象属性\"></a>Clients对象属性</h3><table>\n<thead>\n<tr>\n<th align=\"left\">属性</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">All</td>\n<td align=\"left\">在所有连接的客户端上调用方法</td>\n</tr>\n<tr>\n<td align=\"left\">Caller</td>\n<td align=\"left\">在调用集线器方法的客户端上调用方法</td>\n</tr>\n<tr>\n<td align=\"left\">Others</td>\n<td align=\"left\">除当前连接外的所有连接</td>\n</tr>\n</tbody></table>\n<h3 id=\"Clients对象方法\"><a href=\"#Clients对象方法\" class=\"headerlink\" title=\"Clients对象方法\"></a>Clients对象方法</h3><table>\n<thead>\n<tr>\n<th align=\"left\">方法</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">AllExcept</td>\n<td align=\"left\">在所有连接的客户端（指定的连接除外）上调用方法</td>\n</tr>\n<tr>\n<td align=\"left\">Client</td>\n<td align=\"left\">在特定连接的客户端上调用方法(单个)</td>\n</tr>\n<tr>\n<td align=\"left\">Clients</td>\n<td align=\"left\">在特定连接的客户端上调用方法(多个)</td>\n</tr>\n<tr>\n<td align=\"left\">Group</td>\n<td align=\"left\">对指定组中的所有连接调用方法</td>\n</tr>\n<tr>\n<td align=\"left\">GroupExcept</td>\n<td align=\"left\">对指定组中的所有连接调用方法，指定的连接除外</td>\n</tr>\n<tr>\n<td align=\"left\">Groups</td>\n<td align=\"left\">在多组连接上调用方法</td>\n</tr>\n<tr>\n<td align=\"left\">OthersInGroup</td>\n<td align=\"left\">对一组连接调用方法，而不包括调用该集线器方法的客户端</td>\n</tr>\n<tr>\n<td align=\"left\">User</td>\n<td align=\"left\">对与特定用户关联的所有连接调用方法</td>\n</tr>\n<tr>\n<td align=\"left\">Users</td>\n<td align=\"left\">对与指定用户相关联的所有连接调用方法</td>\n</tr>\n</tbody></table>\n<h2 id=\"Signalr推送端\"><a href=\"#Signalr推送端\" class=\"headerlink\" title=\"Signalr推送端\"></a>Signalr推送端</h2><ul>\n<li><p>通过命令行或者vs 2019新建.netcore web项目，选择.net core 3.0、webapi  </p>\n</li>\n<li><p>建立一个Hub</p>\n<pre><code class=\"C#\">public class NotifyHub : Hub\n&#123;\n\n&#125;</code></pre>\n</li>\n<li><p>修改Startup中的ConfigServices方法，注册对应的服务</p>\n<pre><code class=\"C#\">// 添加Signalr\nservices.AddSignalR(config =&gt;\n&#123;\n    // _webEnv为通过依赖注入在Startup的构造函数中注入的 IWebHostEnvironment\n    if (_webEnv.IsDevelopment())\n    &#123;\n        config.EnableDetailedErrors = true;\n    &#125;\n&#125;);</code></pre>\n</li>\n<li><p>修改Configure配置HTTP请求的管道</p>\n<pre><code class=\"C#\">...\napp.UseRouting();\napp.UseEndpoints(endpoints =&gt;&#123;\n    endpoints.MapHub&lt;NotifyHub&gt;(&quot;/notify-hub&quot;);\n&#125;);\n</code></pre>\n<h2 id=\"业务端\"><a href=\"#业务端\" class=\"headerlink\" title=\"业务端\"></a>业务端</h2><p><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/tutorials/signalr?view=aspnetcore-3.0&tabs=visual-studio\">相关文档</a></p>\n</li>\n<li><p>创建连接对象</p>\n<pre><code class=\"js\">var connection=new signalR.HubConnectionBuilder()\n.configureLogging(signalR.LogLevel.Error) // 前端控制台的日志级别，根据需要配置\n.withUrl(&#39;http://localhost:50001/notify-hub&#39;) // 连接地址,这个地址是signalr项目的地址\n.withAutomaticReconnect([0, 2000, 5000, 10000, 20000]) // 配置重连的时间\n.build();\n\n// 重连的时候触发\nconnection.onreconnecting(function (info) &#123;\n    console.info(&#39;----------------------------------signalr-- onreconnecting&#39;, info);\n&#125;);\n\n//连接关闭的回调\nconnection.onclose(function (err) &#123;\n    console.info(&#39;--------------------------------signalr-- onclose&#39;, err);\n&#125;);\n\nconnection.start().then(function (data) &#123;\n    console.log(&#39;已成功连接到signalr服务器&#39;)\n&#125;).catch(function (error) &#123;\n    console.error(error.toString());\n&#125;);\n</code></pre>\n</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/09/22/dotnetcore/signalr/02-type-hub/\">.net core 3.0 Signalr - 02 使用强类型的Hub</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>"},{"title":".net core 3.0 Signalr - 02 使用强类型的Hub","date":"2019-09-22T02:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 02 使用强类型的Hub\n<!-- more -->\n\n## 强类型的优缺点\n- 优点\n强类型的Hub可以避免魔法函数名，相比弱类型更容易维护和发现问题，直接上代码\n- 缺点\n特么的得多些好几行代码\n\n## 代码\n\n### 接口定义\n  ``` C#\n    /// <summary>\n    /// 服务端接口\n    /// </summary>\n    public interface IServerNotifyHub\n    {\n\n    }\n\n    /// <summary>\n    /// 客户端使用的接口\n    /// </summary>\n    public interface IClientNotifyHub\n    {\n        // 这里我们定义一个统一的客户端通知方法\n        Task OnNotify(object data);\n    }\n  ```\n### 实现\n- 对之前的Hub进行修改,暂时就先通过OnNotify给当前所有客户端推送一个信息\n``` C#\n  public class NotifyHub : Hub<IClientNotifyHub>,IServerNotifyHub\n    {\n        public override async Task OnConnectedAsync()\n        {\n            await Clients.All.OnNotify(new { ConnectId = Context.ConnectionId });\n            await base.OnConnectedAsync();\n        }\n    }\n  ```\n  \n## 在api中调用Hub推送\n大部分情况下，是通过客户端某个操作，比如:将任务分配给张三，那么在分配任务的这个api中会调用推送 推送给张三一个通知，xxx分配了一个任务给你，在Controller中注入强类型的Hub，代码如下\n  ``` C#\n  ...\n  private readonly IHubContext<NotifyHub,IClientNotifyHub> _notifyHub;\n  public NotifyController(IHubContext<NotifyHub,IClientNotifyHub> notifyHub)\n  {\n      _notifyHub = notifyHub;\n  }\n  ```\n\n至此，强类型的Hub介绍完毕，更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 01 基础篇](/2019/09/21/dotnetcore/signalr/01-base/) \n|   下一篇  |   [.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容](/2019/09/29/dotnetcore/signalr/03-message-pack) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/02-type-hub.md","raw":"---\ntitle: .net core 3.0 Signalr - 02 使用强类型的Hub\ndate: '2019-09-22 10:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\n  - .NetCore\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 02 使用强类型的Hub\n<!-- more -->\n\n## 强类型的优缺点\n- 优点\n强类型的Hub可以避免魔法函数名，相比弱类型更容易维护和发现问题，直接上代码\n- 缺点\n特么的得多些好几行代码\n\n## 代码\n\n### 接口定义\n  ``` C#\n    /// <summary>\n    /// 服务端接口\n    /// </summary>\n    public interface IServerNotifyHub\n    {\n\n    }\n\n    /// <summary>\n    /// 客户端使用的接口\n    /// </summary>\n    public interface IClientNotifyHub\n    {\n        // 这里我们定义一个统一的客户端通知方法\n        Task OnNotify(object data);\n    }\n  ```\n### 实现\n- 对之前的Hub进行修改,暂时就先通过OnNotify给当前所有客户端推送一个信息\n``` C#\n  public class NotifyHub : Hub<IClientNotifyHub>,IServerNotifyHub\n    {\n        public override async Task OnConnectedAsync()\n        {\n            await Clients.All.OnNotify(new { ConnectId = Context.ConnectionId });\n            await base.OnConnectedAsync();\n        }\n    }\n  ```\n  \n## 在api中调用Hub推送\n大部分情况下，是通过客户端某个操作，比如:将任务分配给张三，那么在分配任务的这个api中会调用推送 推送给张三一个通知，xxx分配了一个任务给你，在Controller中注入强类型的Hub，代码如下\n  ``` C#\n  ...\n  private readonly IHubContext<NotifyHub,IClientNotifyHub> _notifyHub;\n  public NotifyController(IHubContext<NotifyHub,IClientNotifyHub> notifyHub)\n  {\n      _notifyHub = notifyHub;\n  }\n  ```\n\n至此，强类型的Hub介绍完毕，更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 01 基础篇](/2019/09/21/dotnetcore/signalr/01-base/) \n|   下一篇  |   [.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容](/2019/09/29/dotnetcore/signalr/03-message-pack) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/02-type-hub","published":1,"updated":"2020-12-29T01:09:09.596Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6wr003wd8v85nble9p4","content":"<p>.net core 3.0 Signalr - 02 使用强类型的Hub</p>\n<a id=\"more\"></a>\n\n<h2 id=\"强类型的优缺点\"><a href=\"#强类型的优缺点\" class=\"headerlink\" title=\"强类型的优缺点\"></a>强类型的优缺点</h2><ul>\n<li>优点<br>强类型的Hub可以避免魔法函数名，相比弱类型更容易维护和发现问题，直接上代码</li>\n<li>缺点<br>特么的得多些好几行代码</li>\n</ul>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><h3 id=\"接口定义\"><a href=\"#接口定义\" class=\"headerlink\" title=\"接口定义\"></a>接口定义</h3><pre class=\" language-C#\"><code class=\"language-C#\">  /// <summary>\n  /// 服务端接口\n  /// </summary>\n  public interface IServerNotifyHub\n  &#123;\n\n  &#125;\n\n  /// <summary>\n  /// 客户端使用的接口\n  /// </summary>\n  public interface IClientNotifyHub\n  &#123;\n      // 这里我们定义一个统一的客户端通知方法\n      Task OnNotify(object data);\n  &#125;</code></pre>\n<h3 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h3><ul>\n<li>对之前的Hub进行修改,暂时就先通过OnNotify给当前所有客户端推送一个信息<pre class=\" language-C#\"><code class=\"language-C#\">public class NotifyHub : Hub<IClientNotifyHub>,IServerNotifyHub\n  &#123;\n      public override async Task OnConnectedAsync()\n      &#123;\n          await Clients.All.OnNotify(new &#123; ConnectId = Context.ConnectionId &#125;);\n          await base.OnConnectedAsync();\n      &#125;\n  &#125;</code></pre>\n</li>\n</ul>\n<h2 id=\"在api中调用Hub推送\"><a href=\"#在api中调用Hub推送\" class=\"headerlink\" title=\"在api中调用Hub推送\"></a>在api中调用Hub推送</h2><p>大部分情况下，是通过客户端某个操作，比如:将任务分配给张三，那么在分配任务的这个api中会调用推送 推送给张三一个通知，xxx分配了一个任务给你，在Controller中注入强类型的Hub，代码如下</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">...\nprivate readonly IHubContext<NotifyHub,IClientNotifyHub> _notifyHub;\npublic NotifyController(IHubContext<NotifyHub,IClientNotifyHub> notifyHub)\n&#123;\n    _notifyHub = notifyHub;\n&#125;</code></pre>\n<p>至此，强类型的Hub介绍完毕，更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/09/21/dotnetcore/signalr/01-base/\">.net core 3.0 Signalr - 01 基础篇</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/09/29/dotnetcore/signalr/03-message-pack\">.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 02 使用强类型的Hub</p>","more":"<h2 id=\"强类型的优缺点\"><a href=\"#强类型的优缺点\" class=\"headerlink\" title=\"强类型的优缺点\"></a>强类型的优缺点</h2><ul>\n<li>优点<br>强类型的Hub可以避免魔法函数名，相比弱类型更容易维护和发现问题，直接上代码</li>\n<li>缺点<br>特么的得多些好几行代码</li>\n</ul>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><h3 id=\"接口定义\"><a href=\"#接口定义\" class=\"headerlink\" title=\"接口定义\"></a>接口定义</h3><pre><code class=\"C#\">  /// &lt;summary&gt;\n  /// 服务端接口\n  /// &lt;/summary&gt;\n  public interface IServerNotifyHub\n  &#123;\n\n  &#125;\n\n  /// &lt;summary&gt;\n  /// 客户端使用的接口\n  /// &lt;/summary&gt;\n  public interface IClientNotifyHub\n  &#123;\n      // 这里我们定义一个统一的客户端通知方法\n      Task OnNotify(object data);\n  &#125;</code></pre>\n<h3 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h3><ul>\n<li>对之前的Hub进行修改,暂时就先通过OnNotify给当前所有客户端推送一个信息<pre><code class=\"C#\">public class NotifyHub : Hub&lt;IClientNotifyHub&gt;,IServerNotifyHub\n  &#123;\n      public override async Task OnConnectedAsync()\n      &#123;\n          await Clients.All.OnNotify(new &#123; ConnectId = Context.ConnectionId &#125;);\n          await base.OnConnectedAsync();\n      &#125;\n  &#125;</code></pre>\n</li>\n</ul>\n<h2 id=\"在api中调用Hub推送\"><a href=\"#在api中调用Hub推送\" class=\"headerlink\" title=\"在api中调用Hub推送\"></a>在api中调用Hub推送</h2><p>大部分情况下，是通过客户端某个操作，比如:将任务分配给张三，那么在分配任务的这个api中会调用推送 推送给张三一个通知，xxx分配了一个任务给你，在Controller中注入强类型的Hub，代码如下</p>\n<pre><code class=\"C#\">...\nprivate readonly IHubContext&lt;NotifyHub,IClientNotifyHub&gt; _notifyHub;\npublic NotifyController(IHubContext&lt;NotifyHub,IClientNotifyHub&gt; notifyHub)\n&#123;\n    _notifyHub = notifyHub;\n&#125;</code></pre>\n<p>至此，强类型的Hub介绍完毕，更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/09/21/dotnetcore/signalr/01-base/\">.net core 3.0 Signalr - 01 基础篇</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/09/29/dotnetcore/signalr/03-message-pack\">.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>"},{"title":".net core 3.0 Signalr - 03 使用MessagePack压缩传输内容","date":"2019-09-29T06:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容\n<!-- more -->\n\n## MessagePack基础介绍\nSignalr默认使用的是json形式传递数据，但是signalr提供了灵活的扩展，支持MessagePack形式序列化数据，以增加性能降低网络传输的效果，极大的提高响应速度。\n\n先看一个MessagePack自定义序列化的例子,以一个自定义的实体对象为例，可以使用MessagepackObject标记为序列化的对象，同时定义使用属性名作为key(区分大小写)，同时可以定义忽略某个属性等、以及自定义key等\n  ``` C#\n    [MessagePackObject(keyAsPropertyName: true)]\n    public class OffLineData\n    {\n        /// <summary>\n        /// 用户Id\n        /// </summary>\n        public string UserId { set; get; }\n        /// <summary>\n        /// 连接Id\n        /// </summary>\n        public string ConnectionId { set; get; }\n        /// <summary>\n        /// 是否该用户的最后一个连接\n        /// </summary>\n        public bool IsLast { set; get; }\n        [IgnoreMember]\n        public string Test { set;get;}\n    }\n\n    // 比如对象，new OffLineData(){UserId=\"1000\",ConnectionId=\"AZDEFASDFASDF\",IsLast:true}通过MessagePack序列化后应该会是{UserId:\"1000\",ConnectionId:\"AZDEFASDFASDF\",IsLast:true},这个跟常用的json基本相同\n  ```\n\n同时MessagePack还可以定义序列化成数组形式，代码如下\n  ``` C#\n    [MessagePackObject]\n    public class OffLineData\n      {\n          /// <summary>\n          /// 用户Id\n          /// </summary>\n          [Key(0)]\n          public string UserId { set; get; }\n          /// <summary>\n          /// 连接Id\n          /// </summary>\n          [Key(0)]\n          public string ConnectionId { set; get; }\n          /// <summary>\n          /// 是否该用户的最后一个连接\n          /// </summary>\n          [Key(0)]\n          public bool IsLast { set; get; }\n      }\n\n    // 比如对象，new OffLineData(){UserId=\"1000\",ConnectionId=\"AZDEFASDFASDF\",IsLast:true}通过MessagePack序列化后应该会是[\"10000\",\"AZDEFASDFASDF\",true]\n  ```\n更多MessagePack的内容可以自行结尾的文档，此处不再过多介绍.\n\n\n## 为Signalr添加MessagePack支持\n- 引入需要的Nuget包\nMicrosoft.AspNetCore.SignalR.Protocols.MessagePack  \n- 修改之前的ConfigureServices\n  ``` C#\n    // 添加Signalr\n    services.AddSignalR(config =>\n    {\n        if (_webEnv.IsDevelopment())\n        {\n            config.EnableDetailedErrors = true;\n        }\n    })\n    // 支持MessagePack\n    .AddMessagePackProtocol();\n  ```\n- 前端引入messagepack解析库\n由于MessagePack传输是以二进制形式进行传输，降低了带宽，但是同时也增加到了代码的复杂度，原本直接获取数据就可以用的，现在需要先将二进制数据转换成正常数据，好在官方提供了对应的js库*msgpack5*、*signalr-protocol-msgpack*  \n可以通过vs的包管理工具或者npm安装，然后拷贝需要的文件到项目的lib文件夹,比如我的结构是\n  ``` bash\n    signalr-protocol-msgpack\n    |-msgpack5.js\n    |-msgpack5.min.js\n    |-signalr-protocol-msgpack.js\n    |-signalr-protocol-msgpack.min.js\n  ```\n前端页面引入这两个js(注意顺序:signalr、msgpack5、signalr-protocol-msgpack)  \n\n- 修改js连接对象，支持上MessagePack\n  ``` js\n  new signalR.HubConnectionBuilder()\n    .configureLogging(signalR.LogLevel.Error) // 前端控制台的日志级别，根据需要配置\n    .withUrl('http://localhost:50001/notify-hub') // 连接地址,这个地址是signalr项目的地址\n    .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol()) // 使用Messagepack来解析推送的数据\n    .withAutomaticReconnect([0, 2000, 5000, 10000, 20000]) // 配置重连的时间\n    .build();\n\n    // 重连的时候触发\n    connection.onreconnecting(function (info) {\n        console.info('----------------------------------signalr-- onreconnecting', info);\n    });\n\n    //连接关闭的回调\n    connection.onclose(function (err) {\n        console.info('--------------------------------signalr-- onclose', err);\n    });\n\n    connection.start().then(function (data) {\n        console.log('已成功连接到signalr服务器')\n    }).catch(function (error) {\n        console.error(error.toString());\n    });\n\n  ```\n\n## 尚未解决问题\n发现通过json.net序列化得到的对象，直接传递给MessagePack序列化会报错，没找着解决方法，直接改成字符串传递，然后在前端解析了，有遇到过的大佬欢迎指点下\n  \n至此，MessagePack介绍算结束了，更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 02 使用强类型的Hub](/2019/09/22/dotnetcore/signalr/02-type-hub/) \n|   下一篇  |   [.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展](/2019/10/01/dotnetcore/signalr/04-redis/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n|   MessagePack-CSharp  |   [MessagePack-CSharp](https://github.com/neuecc/MessagePack-CSharp) \n|   MessagePack  |   [MessagePack](https://msgpack.org/index.html) \n","source":"_posts/dotnetcore/signalr/03-message-pack.md","raw":"---\ntitle: .net core 3.0 Signalr - 03 使用MessagePack压缩传输内容\ndate: '2019-09-29 14:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\n  - .NetCore\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容\n<!-- more -->\n\n## MessagePack基础介绍\nSignalr默认使用的是json形式传递数据，但是signalr提供了灵活的扩展，支持MessagePack形式序列化数据，以增加性能降低网络传输的效果，极大的提高响应速度。\n\n先看一个MessagePack自定义序列化的例子,以一个自定义的实体对象为例，可以使用MessagepackObject标记为序列化的对象，同时定义使用属性名作为key(区分大小写)，同时可以定义忽略某个属性等、以及自定义key等\n  ``` C#\n    [MessagePackObject(keyAsPropertyName: true)]\n    public class OffLineData\n    {\n        /// <summary>\n        /// 用户Id\n        /// </summary>\n        public string UserId { set; get; }\n        /// <summary>\n        /// 连接Id\n        /// </summary>\n        public string ConnectionId { set; get; }\n        /// <summary>\n        /// 是否该用户的最后一个连接\n        /// </summary>\n        public bool IsLast { set; get; }\n        [IgnoreMember]\n        public string Test { set;get;}\n    }\n\n    // 比如对象，new OffLineData(){UserId=\"1000\",ConnectionId=\"AZDEFASDFASDF\",IsLast:true}通过MessagePack序列化后应该会是{UserId:\"1000\",ConnectionId:\"AZDEFASDFASDF\",IsLast:true},这个跟常用的json基本相同\n  ```\n\n同时MessagePack还可以定义序列化成数组形式，代码如下\n  ``` C#\n    [MessagePackObject]\n    public class OffLineData\n      {\n          /// <summary>\n          /// 用户Id\n          /// </summary>\n          [Key(0)]\n          public string UserId { set; get; }\n          /// <summary>\n          /// 连接Id\n          /// </summary>\n          [Key(0)]\n          public string ConnectionId { set; get; }\n          /// <summary>\n          /// 是否该用户的最后一个连接\n          /// </summary>\n          [Key(0)]\n          public bool IsLast { set; get; }\n      }\n\n    // 比如对象，new OffLineData(){UserId=\"1000\",ConnectionId=\"AZDEFASDFASDF\",IsLast:true}通过MessagePack序列化后应该会是[\"10000\",\"AZDEFASDFASDF\",true]\n  ```\n更多MessagePack的内容可以自行结尾的文档，此处不再过多介绍.\n\n\n## 为Signalr添加MessagePack支持\n- 引入需要的Nuget包\nMicrosoft.AspNetCore.SignalR.Protocols.MessagePack  \n- 修改之前的ConfigureServices\n  ``` C#\n    // 添加Signalr\n    services.AddSignalR(config =>\n    {\n        if (_webEnv.IsDevelopment())\n        {\n            config.EnableDetailedErrors = true;\n        }\n    })\n    // 支持MessagePack\n    .AddMessagePackProtocol();\n  ```\n- 前端引入messagepack解析库\n由于MessagePack传输是以二进制形式进行传输，降低了带宽，但是同时也增加到了代码的复杂度，原本直接获取数据就可以用的，现在需要先将二进制数据转换成正常数据，好在官方提供了对应的js库*msgpack5*、*signalr-protocol-msgpack*  \n可以通过vs的包管理工具或者npm安装，然后拷贝需要的文件到项目的lib文件夹,比如我的结构是\n  ``` bash\n    signalr-protocol-msgpack\n    |-msgpack5.js\n    |-msgpack5.min.js\n    |-signalr-protocol-msgpack.js\n    |-signalr-protocol-msgpack.min.js\n  ```\n前端页面引入这两个js(注意顺序:signalr、msgpack5、signalr-protocol-msgpack)  \n\n- 修改js连接对象，支持上MessagePack\n  ``` js\n  new signalR.HubConnectionBuilder()\n    .configureLogging(signalR.LogLevel.Error) // 前端控制台的日志级别，根据需要配置\n    .withUrl('http://localhost:50001/notify-hub') // 连接地址,这个地址是signalr项目的地址\n    .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol()) // 使用Messagepack来解析推送的数据\n    .withAutomaticReconnect([0, 2000, 5000, 10000, 20000]) // 配置重连的时间\n    .build();\n\n    // 重连的时候触发\n    connection.onreconnecting(function (info) {\n        console.info('----------------------------------signalr-- onreconnecting', info);\n    });\n\n    //连接关闭的回调\n    connection.onclose(function (err) {\n        console.info('--------------------------------signalr-- onclose', err);\n    });\n\n    connection.start().then(function (data) {\n        console.log('已成功连接到signalr服务器')\n    }).catch(function (error) {\n        console.error(error.toString());\n    });\n\n  ```\n\n## 尚未解决问题\n发现通过json.net序列化得到的对象，直接传递给MessagePack序列化会报错，没找着解决方法，直接改成字符串传递，然后在前端解析了，有遇到过的大佬欢迎指点下\n  \n至此，MessagePack介绍算结束了，更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 02 使用强类型的Hub](/2019/09/22/dotnetcore/signalr/02-type-hub/) \n|   下一篇  |   [.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展](/2019/10/01/dotnetcore/signalr/04-redis/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n|   MessagePack-CSharp  |   [MessagePack-CSharp](https://github.com/neuecc/MessagePack-CSharp) \n|   MessagePack  |   [MessagePack](https://msgpack.org/index.html) \n","slug":"dotnetcore/signalr/03-message-pack","published":1,"updated":"2020-12-29T01:09:09.596Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6ws003xd8v8h9v964zi","content":"<p>.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</p>\n<a id=\"more\"></a>\n\n<h2 id=\"MessagePack基础介绍\"><a href=\"#MessagePack基础介绍\" class=\"headerlink\" title=\"MessagePack基础介绍\"></a>MessagePack基础介绍</h2><p>Signalr默认使用的是json形式传递数据，但是signalr提供了灵活的扩展，支持MessagePack形式序列化数据，以增加性能降低网络传输的效果，极大的提高响应速度。</p>\n<p>先看一个MessagePack自定义序列化的例子,以一个自定义的实体对象为例，可以使用MessagepackObject标记为序列化的对象，同时定义使用属性名作为key(区分大小写)，同时可以定义忽略某个属性等、以及自定义key等</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">  [MessagePackObject(keyAsPropertyName: true)]\n  public class OffLineData\n  &#123;\n      /// <summary>\n      /// 用户Id\n      /// </summary>\n      public string UserId &#123; set; get; &#125;\n      /// <summary>\n      /// 连接Id\n      /// </summary>\n      public string ConnectionId &#123; set; get; &#125;\n      /// <summary>\n      /// 是否该用户的最后一个连接\n      /// </summary>\n      public bool IsLast &#123; set; get; &#125;\n      [IgnoreMember]\n      public string Test &#123; set;get;&#125;\n  &#125;\n\n  // 比如对象，new OffLineData()&#123;UserId=\"1000\",ConnectionId=\"AZDEFASDFASDF\",IsLast:true&#125;通过MessagePack序列化后应该会是&#123;UserId:\"1000\",ConnectionId:\"AZDEFASDFASDF\",IsLast:true&#125;,这个跟常用的json基本相同</code></pre>\n<p>同时MessagePack还可以定义序列化成数组形式，代码如下</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">  [MessagePackObject]\n  public class OffLineData\n    &#123;\n        /// <summary>\n        /// 用户Id\n        /// </summary>\n        [Key(0)]\n        public string UserId &#123; set; get; &#125;\n        /// <summary>\n        /// 连接Id\n        /// </summary>\n        [Key(0)]\n        public string ConnectionId &#123; set; get; &#125;\n        /// <summary>\n        /// 是否该用户的最后一个连接\n        /// </summary>\n        [Key(0)]\n        public bool IsLast &#123; set; get; &#125;\n    &#125;\n\n  // 比如对象，new OffLineData()&#123;UserId=\"1000\",ConnectionId=\"AZDEFASDFASDF\",IsLast:true&#125;通过MessagePack序列化后应该会是[\"10000\",\"AZDEFASDFASDF\",true]</code></pre>\n<p>更多MessagePack的内容可以自行结尾的文档，此处不再过多介绍.</p>\n<h2 id=\"为Signalr添加MessagePack支持\"><a href=\"#为Signalr添加MessagePack支持\" class=\"headerlink\" title=\"为Signalr添加MessagePack支持\"></a>为Signalr添加MessagePack支持</h2><ul>\n<li><p>引入需要的Nuget包<br>Microsoft.AspNetCore.SignalR.Protocols.MessagePack  </p>\n</li>\n<li><p>修改之前的ConfigureServices</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">  // 添加Signalr\n  services.AddSignalR(config =>\n  &#123;\n      if (_webEnv.IsDevelopment())\n      &#123;\n          config.EnableDetailedErrors = true;\n      &#125;\n  &#125;)\n  // 支持MessagePack\n  .AddMessagePackProtocol();</code></pre>\n</li>\n<li><p>前端引入messagepack解析库<br>由于MessagePack传输是以二进制形式进行传输，降低了带宽，但是同时也增加到了代码的复杂度，原本直接获取数据就可以用的，现在需要先将二进制数据转换成正常数据，好在官方提供了对应的js库<em>msgpack5</em>、<em>signalr-protocol-msgpack</em><br>可以通过vs的包管理工具或者npm安装，然后拷贝需要的文件到项目的lib文件夹,比如我的结构是</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">  signalr-protocol-msgpack\n  <span class=\"token operator\">|</span>-msgpack5.js\n  <span class=\"token operator\">|</span>-msgpack5.min.js\n  <span class=\"token operator\">|</span>-signalr-protocol-msgpack.js\n  <span class=\"token operator\">|</span>-signalr-protocol-msgpack.min.js</code></pre>\n<p>前端页面引入这两个js(注意顺序:signalr、msgpack5、signalr-protocol-msgpack)  </p>\n</li>\n<li><p>修改js连接对象，支持上MessagePack</p>\n<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">signalR<span class=\"token punctuation\">.</span>HubConnectionBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">configureLogging</span><span class=\"token punctuation\">(</span>signalR<span class=\"token punctuation\">.</span>LogLevel<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 前端控制台的日志级别，根据需要配置</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">withUrl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:50001/notify-hub'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 连接地址,这个地址是signalr项目的地址</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">withHubProtocol</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">signalR<span class=\"token punctuation\">.</span>protocols<span class=\"token punctuation\">.</span>msgpack<span class=\"token punctuation\">.</span>MessagePackHubProtocol</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 使用Messagepack来解析推送的数据</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">withAutomaticReconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\" spellcheck=\"true\">// 配置重连的时间</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\" spellcheck=\"true\">// 重连的时候触发</span>\n  connection<span class=\"token punctuation\">.</span><span class=\"token function\">onreconnecting</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'----------------------------------signalr-- onreconnecting'</span><span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\" spellcheck=\"true\">//连接关闭的回调</span>\n  connection<span class=\"token punctuation\">.</span><span class=\"token function\">onclose</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--------------------------------signalr-- onclose'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  connection<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'已成功连接到signalr服务器'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n</li>\n</ul>\n<h2 id=\"尚未解决问题\"><a href=\"#尚未解决问题\" class=\"headerlink\" title=\"尚未解决问题\"></a>尚未解决问题</h2><p>发现通过json.net序列化得到的对象，直接传递给MessagePack序列化会报错，没找着解决方法，直接改成字符串传递，然后在前端解析了，有遇到过的大佬欢迎指点下</p>\n<p>至此，MessagePack介绍算结束了，更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/09/22/dotnetcore/signalr/02-type-hub/\">.net core 3.0 Signalr - 02 使用强类型的Hub</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/10/01/dotnetcore/signalr/04-redis/\">.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n<tr>\n<td align=\"left\">MessagePack-CSharp</td>\n<td align=\"left\"><a href=\"https://github.com/neuecc/MessagePack-CSharp\">MessagePack-CSharp</a></td>\n</tr>\n<tr>\n<td align=\"left\">MessagePack</td>\n<td align=\"left\"><a href=\"https://msgpack.org/index.html\">MessagePack</a></td>\n</tr>\n</tbody></table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</p>","more":"<h2 id=\"MessagePack基础介绍\"><a href=\"#MessagePack基础介绍\" class=\"headerlink\" title=\"MessagePack基础介绍\"></a>MessagePack基础介绍</h2><p>Signalr默认使用的是json形式传递数据，但是signalr提供了灵活的扩展，支持MessagePack形式序列化数据，以增加性能降低网络传输的效果，极大的提高响应速度。</p>\n<p>先看一个MessagePack自定义序列化的例子,以一个自定义的实体对象为例，可以使用MessagepackObject标记为序列化的对象，同时定义使用属性名作为key(区分大小写)，同时可以定义忽略某个属性等、以及自定义key等</p>\n<pre><code class=\"C#\">  [MessagePackObject(keyAsPropertyName: true)]\n  public class OffLineData\n  &#123;\n      /// &lt;summary&gt;\n      /// 用户Id\n      /// &lt;/summary&gt;\n      public string UserId &#123; set; get; &#125;\n      /// &lt;summary&gt;\n      /// 连接Id\n      /// &lt;/summary&gt;\n      public string ConnectionId &#123; set; get; &#125;\n      /// &lt;summary&gt;\n      /// 是否该用户的最后一个连接\n      /// &lt;/summary&gt;\n      public bool IsLast &#123; set; get; &#125;\n      [IgnoreMember]\n      public string Test &#123; set;get;&#125;\n  &#125;\n\n  // 比如对象，new OffLineData()&#123;UserId=&quot;1000&quot;,ConnectionId=&quot;AZDEFASDFASDF&quot;,IsLast:true&#125;通过MessagePack序列化后应该会是&#123;UserId:&quot;1000&quot;,ConnectionId:&quot;AZDEFASDFASDF&quot;,IsLast:true&#125;,这个跟常用的json基本相同</code></pre>\n<p>同时MessagePack还可以定义序列化成数组形式，代码如下</p>\n<pre><code class=\"C#\">  [MessagePackObject]\n  public class OffLineData\n    &#123;\n        /// &lt;summary&gt;\n        /// 用户Id\n        /// &lt;/summary&gt;\n        [Key(0)]\n        public string UserId &#123; set; get; &#125;\n        /// &lt;summary&gt;\n        /// 连接Id\n        /// &lt;/summary&gt;\n        [Key(0)]\n        public string ConnectionId &#123; set; get; &#125;\n        /// &lt;summary&gt;\n        /// 是否该用户的最后一个连接\n        /// &lt;/summary&gt;\n        [Key(0)]\n        public bool IsLast &#123; set; get; &#125;\n    &#125;\n\n  // 比如对象，new OffLineData()&#123;UserId=&quot;1000&quot;,ConnectionId=&quot;AZDEFASDFASDF&quot;,IsLast:true&#125;通过MessagePack序列化后应该会是[&quot;10000&quot;,&quot;AZDEFASDFASDF&quot;,true]</code></pre>\n<p>更多MessagePack的内容可以自行结尾的文档，此处不再过多介绍.</p>\n<h2 id=\"为Signalr添加MessagePack支持\"><a href=\"#为Signalr添加MessagePack支持\" class=\"headerlink\" title=\"为Signalr添加MessagePack支持\"></a>为Signalr添加MessagePack支持</h2><ul>\n<li><p>引入需要的Nuget包<br>Microsoft.AspNetCore.SignalR.Protocols.MessagePack  </p>\n</li>\n<li><p>修改之前的ConfigureServices</p>\n<pre><code class=\"C#\">  // 添加Signalr\n  services.AddSignalR(config =&gt;\n  &#123;\n      if (_webEnv.IsDevelopment())\n      &#123;\n          config.EnableDetailedErrors = true;\n      &#125;\n  &#125;)\n  // 支持MessagePack\n  .AddMessagePackProtocol();</code></pre>\n</li>\n<li><p>前端引入messagepack解析库<br>由于MessagePack传输是以二进制形式进行传输，降低了带宽，但是同时也增加到了代码的复杂度，原本直接获取数据就可以用的，现在需要先将二进制数据转换成正常数据，好在官方提供了对应的js库<em>msgpack5</em>、<em>signalr-protocol-msgpack</em><br>可以通过vs的包管理工具或者npm安装，然后拷贝需要的文件到项目的lib文件夹,比如我的结构是</p>\n<pre><code class=\"bash\">  signalr-protocol-msgpack\n  |-msgpack5.js\n  |-msgpack5.min.js\n  |-signalr-protocol-msgpack.js\n  |-signalr-protocol-msgpack.min.js</code></pre>\n<p>前端页面引入这两个js(注意顺序:signalr、msgpack5、signalr-protocol-msgpack)  </p>\n</li>\n<li><p>修改js连接对象，支持上MessagePack</p>\n<pre><code class=\"js\">new signalR.HubConnectionBuilder()\n  .configureLogging(signalR.LogLevel.Error) // 前端控制台的日志级别，根据需要配置\n  .withUrl(&#39;http://localhost:50001/notify-hub&#39;) // 连接地址,这个地址是signalr项目的地址\n  .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol()) // 使用Messagepack来解析推送的数据\n  .withAutomaticReconnect([0, 2000, 5000, 10000, 20000]) // 配置重连的时间\n  .build();\n\n  // 重连的时候触发\n  connection.onreconnecting(function (info) &#123;\n      console.info(&#39;----------------------------------signalr-- onreconnecting&#39;, info);\n  &#125;);\n\n  //连接关闭的回调\n  connection.onclose(function (err) &#123;\n      console.info(&#39;--------------------------------signalr-- onclose&#39;, err);\n  &#125;);\n\n  connection.start().then(function (data) &#123;\n      console.log(&#39;已成功连接到signalr服务器&#39;)\n  &#125;).catch(function (error) &#123;\n      console.error(error.toString());\n  &#125;);\n</code></pre>\n</li>\n</ul>\n<h2 id=\"尚未解决问题\"><a href=\"#尚未解决问题\" class=\"headerlink\" title=\"尚未解决问题\"></a>尚未解决问题</h2><p>发现通过json.net序列化得到的对象，直接传递给MessagePack序列化会报错，没找着解决方法，直接改成字符串传递，然后在前端解析了，有遇到过的大佬欢迎指点下</p>\n<p>至此，MessagePack介绍算结束了，更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/09/22/dotnetcore/signalr/02-type-hub/\">.net core 3.0 Signalr - 02 使用强类型的Hub</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/10/01/dotnetcore/signalr/04-redis/\">.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n<tr>\n<td align=\"left\">MessagePack-CSharp</td>\n<td align=\"left\"><a href=\"https://github.com/neuecc/MessagePack-CSharp\">MessagePack-CSharp</a></td>\n</tr>\n<tr>\n<td align=\"left\">MessagePack</td>\n<td align=\"left\"><a href=\"https://msgpack.org/index.html\">MessagePack</a></td>\n</tr>\n</tbody></table>"},{"title":".net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展","date":"2019-10-01T08:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展\n<!-- more -->\n在实际的系统中，可能需要多台机器部署;然而，Signalr的连接信息是跟站点走的，举个例子  \n推送系统部署了A、B两个服务器，张三访问A服务器，李四访问B服务器，当张三通过A服务器向李四推送的时候，A服务器上是找不到李四的连接信息的，自然也就推送不过了，这个时候就需要有一个统一协调的玩意，signalr支持多种，Azure、Redis等，本节以Redis作为底板，介绍如何在Signalr中使用Redis作为底板来支持横向扩展。\n\n## 引入Redis\n- 先引入NuGet包\nMicrosoft.AspNetCore.SignalR.StackExchangeRedis\n- 修改Startup中的ConfigureServices方法\n  ``` C#\n  var appSection = Configuration.GetSection(\"App\");\n  services.Configure<AppSetting>(option => appSection.Bind(option));\n  var appSetting = appSection.Get<AppSetting>();\n\n  // 添加Signalr\n  services.AddSignalR(config =>\n  {\n      if (_webEnv.IsDevelopment())\n      {\n          config.EnableDetailedErrors = true;\n      }\n  })\n  // 支持MessagePack\n  .AddMessagePackProtocol()\n  // 使用redis做底板 支持横向扩展 Scale-out\n  .AddStackExchangeRedis(o =>\n    {\n        o.ConnectionFactory = async writer =>\n        {\n            var config = new ConfigurationOptions\n            {\n                AbortOnConnectFail = false,\n                ChannelPrefix = \"__signalr_\",\n            };\n            config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n            var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n            connection.ConnectionFailed += (_, e) =>\n            {\n                Console.WriteLine(\"Connection to Redis failed.\");\n            };\n\n            if (connection.IsConnected)\n            {\n                Console.WriteLine(\"connected to Redis.\");\n            }\n            else\n            {\n                Console.WriteLine(\"Did not connect to Redis\");\n            }\n\n            return connection;\n        };\n    });\n  ```\n可以自定义Redis相关配置，此处的appSetting为已经定义好的配置实体，包括了，主要配置、CROS配置、Jwt配置、redis配置等详情如下\n  ``` C#\n  /// <summary>\n  /// 对应appsettings中的App节点的配置信息\n  /// </summary>\n  public class AppSetting\n  {\n      public JwtSetting JwtSetting { set;get;}\n      public RedisCache RedisCache { set;get;}\n      public RedisCache SignalrRedisCache { set; get; }\n      public string CORS { set;get;}\n      /// <summary>\n      /// 是否主站点(用于运行清理任务等)\n      /// </summary>\n      public bool MainSite { set;get;}\n  }\n\n  /// <summary>\n  /// JWT设置\n  /// </summary>\n  public class JwtSetting\n  {\n      /// <summary>\n      /// 发行者 表示token是谁颁发的\n      /// </summary>\n      public string Issuer { set; get; }\n      /// <summary>\n      /// 表示哪些客户端可以使用这个token\n      /// </summary>\n      public string Audience { set; get; }\n      /// <summary>\n      /// 加密的Key 必须大于16位\n      /// </summary>\n      public string SecretKey { set; get; }\n  }\n\n  public class RedisCache\n  {\n      public string ConnectionString { set;get;}\n      public int DatabaseId { set; get; }\n  }\n  ```\n对应的配置文件如下\n  ``` json\n  {\n  \"Logging\": {\n    \"LogLevel\": {\n      \"Default\": \"Debug\",\n      \"System\": \"Information\",\n      \"Microsoft\": \"Information\",\n      \"Microsoft.AspNetCore.SignalR\": \"Trace\",\n      \"Microsoft.AspNetCore.Http.Connections\": \"Trace\"\n    }\n  },\n  \"App\": {\n    \"RedisCache\": {\n      \"ConnectionString\": \"127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000\",\n      \"DatabaseId\": 10\n    },\n    \"SignalrRedisCache\": {\n      \"ConnectionString\": \"127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000\",\n      \"DatabaseId\": 10\n    },\n    \"CORS\": \"https://localhost:60000,http://localhost:60001\",\n    \"MainSite\": true,\n    \"JwtSetting\": {\n      \"Issuer\": \"http://localhost:50000\", //颁发者\n      \"Audience\": \"http://localhost:50000\", //使用者\n      \"SecretKey\": \"Wetrial20196666666\" // key 大于16位\n    }\n  }\n}\n```\n首先，将配置文件跟实体对象映射，下次在其他地方使用的时候可以直接通过DI注入，然后通过AddStackExchangeRedis配置使用redis作为底板\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容](/2019/09/29/dotnetcore/signalr/03-message-pack/) \n|   下一篇  |   [.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联](/2019/10/02/dotnetcore/signalr/05-jwt/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/signalr/redis-backplane?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/04-redis.md","raw":"---\ntitle: .net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展\ndate: '2019-10-01 16:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\n  - .NetCore\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展\n<!-- more -->\n在实际的系统中，可能需要多台机器部署;然而，Signalr的连接信息是跟站点走的，举个例子  \n推送系统部署了A、B两个服务器，张三访问A服务器，李四访问B服务器，当张三通过A服务器向李四推送的时候，A服务器上是找不到李四的连接信息的，自然也就推送不过了，这个时候就需要有一个统一协调的玩意，signalr支持多种，Azure、Redis等，本节以Redis作为底板，介绍如何在Signalr中使用Redis作为底板来支持横向扩展。\n\n## 引入Redis\n- 先引入NuGet包\nMicrosoft.AspNetCore.SignalR.StackExchangeRedis\n- 修改Startup中的ConfigureServices方法\n  ``` C#\n  var appSection = Configuration.GetSection(\"App\");\n  services.Configure<AppSetting>(option => appSection.Bind(option));\n  var appSetting = appSection.Get<AppSetting>();\n\n  // 添加Signalr\n  services.AddSignalR(config =>\n  {\n      if (_webEnv.IsDevelopment())\n      {\n          config.EnableDetailedErrors = true;\n      }\n  })\n  // 支持MessagePack\n  .AddMessagePackProtocol()\n  // 使用redis做底板 支持横向扩展 Scale-out\n  .AddStackExchangeRedis(o =>\n    {\n        o.ConnectionFactory = async writer =>\n        {\n            var config = new ConfigurationOptions\n            {\n                AbortOnConnectFail = false,\n                ChannelPrefix = \"__signalr_\",\n            };\n            config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n            var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n            connection.ConnectionFailed += (_, e) =>\n            {\n                Console.WriteLine(\"Connection to Redis failed.\");\n            };\n\n            if (connection.IsConnected)\n            {\n                Console.WriteLine(\"connected to Redis.\");\n            }\n            else\n            {\n                Console.WriteLine(\"Did not connect to Redis\");\n            }\n\n            return connection;\n        };\n    });\n  ```\n可以自定义Redis相关配置，此处的appSetting为已经定义好的配置实体，包括了，主要配置、CROS配置、Jwt配置、redis配置等详情如下\n  ``` C#\n  /// <summary>\n  /// 对应appsettings中的App节点的配置信息\n  /// </summary>\n  public class AppSetting\n  {\n      public JwtSetting JwtSetting { set;get;}\n      public RedisCache RedisCache { set;get;}\n      public RedisCache SignalrRedisCache { set; get; }\n      public string CORS { set;get;}\n      /// <summary>\n      /// 是否主站点(用于运行清理任务等)\n      /// </summary>\n      public bool MainSite { set;get;}\n  }\n\n  /// <summary>\n  /// JWT设置\n  /// </summary>\n  public class JwtSetting\n  {\n      /// <summary>\n      /// 发行者 表示token是谁颁发的\n      /// </summary>\n      public string Issuer { set; get; }\n      /// <summary>\n      /// 表示哪些客户端可以使用这个token\n      /// </summary>\n      public string Audience { set; get; }\n      /// <summary>\n      /// 加密的Key 必须大于16位\n      /// </summary>\n      public string SecretKey { set; get; }\n  }\n\n  public class RedisCache\n  {\n      public string ConnectionString { set;get;}\n      public int DatabaseId { set; get; }\n  }\n  ```\n对应的配置文件如下\n  ``` json\n  {\n  \"Logging\": {\n    \"LogLevel\": {\n      \"Default\": \"Debug\",\n      \"System\": \"Information\",\n      \"Microsoft\": \"Information\",\n      \"Microsoft.AspNetCore.SignalR\": \"Trace\",\n      \"Microsoft.AspNetCore.Http.Connections\": \"Trace\"\n    }\n  },\n  \"App\": {\n    \"RedisCache\": {\n      \"ConnectionString\": \"127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000\",\n      \"DatabaseId\": 10\n    },\n    \"SignalrRedisCache\": {\n      \"ConnectionString\": \"127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000\",\n      \"DatabaseId\": 10\n    },\n    \"CORS\": \"https://localhost:60000,http://localhost:60001\",\n    \"MainSite\": true,\n    \"JwtSetting\": {\n      \"Issuer\": \"http://localhost:50000\", //颁发者\n      \"Audience\": \"http://localhost:50000\", //使用者\n      \"SecretKey\": \"Wetrial20196666666\" // key 大于16位\n    }\n  }\n}\n```\n首先，将配置文件跟实体对象映射，下次在其他地方使用的时候可以直接通过DI注入，然后通过AddStackExchangeRedis配置使用redis作为底板\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容](/2019/09/29/dotnetcore/signalr/03-message-pack/) \n|   下一篇  |   [.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联](/2019/10/02/dotnetcore/signalr/05-jwt/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/signalr/redis-backplane?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/04-redis","published":1,"updated":"2020-12-29T01:09:09.566Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6wu0042d8v8et4g9svi","content":"<p>.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</p>\n<a id=\"more\"></a>\n<p>在实际的系统中，可能需要多台机器部署;然而，Signalr的连接信息是跟站点走的，举个例子<br>推送系统部署了A、B两个服务器，张三访问A服务器，李四访问B服务器，当张三通过A服务器向李四推送的时候，A服务器上是找不到李四的连接信息的，自然也就推送不过了，这个时候就需要有一个统一协调的玩意，signalr支持多种，Azure、Redis等，本节以Redis作为底板，介绍如何在Signalr中使用Redis作为底板来支持横向扩展。</p>\n<h2 id=\"引入Redis\"><a href=\"#引入Redis\" class=\"headerlink\" title=\"引入Redis\"></a>引入Redis</h2><ul>\n<li><p>先引入NuGet包<br>Microsoft.AspNetCore.SignalR.StackExchangeRedis</p>\n</li>\n<li><p>修改Startup中的ConfigureServices方法</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">var appSection = Configuration.GetSection(\"App\");\nservices.Configure<AppSetting>(option => appSection.Bind(option));\nvar appSetting = appSection.Get<AppSetting>();\n\n// 添加Signalr\nservices.AddSignalR(config =>\n&#123;\n    if (_webEnv.IsDevelopment())\n    &#123;\n        config.EnableDetailedErrors = true;\n    &#125;\n&#125;)\n// 支持MessagePack\n.AddMessagePackProtocol()\n// 使用redis做底板 支持横向扩展 Scale-out\n.AddStackExchangeRedis(o =>\n  &#123;\n      o.ConnectionFactory = async writer =>\n      &#123;\n          var config = new ConfigurationOptions\n          &#123;\n              AbortOnConnectFail = false,\n              ChannelPrefix = \"__signalr_\",\n          &#125;;\n          config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n          var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n          connection.ConnectionFailed += (_, e) =>\n          &#123;\n              Console.WriteLine(\"Connection to Redis failed.\");\n          &#125;;\n\n          if (connection.IsConnected)\n          &#123;\n              Console.WriteLine(\"connected to Redis.\");\n          &#125;\n          else\n          &#123;\n              Console.WriteLine(\"Did not connect to Redis\");\n          &#125;\n\n          return connection;\n      &#125;;\n  &#125;);</code></pre>\n<p>可以自定义Redis相关配置，此处的appSetting为已经定义好的配置实体，包括了，主要配置、CROS配置、Jwt配置、redis配置等详情如下</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">/// <summary>\n/// 对应appsettings中的App节点的配置信息\n/// </summary>\npublic class AppSetting\n&#123;\n    public JwtSetting JwtSetting &#123; set;get;&#125;\n    public RedisCache RedisCache &#123; set;get;&#125;\n    public RedisCache SignalrRedisCache &#123; set; get; &#125;\n    public string CORS &#123; set;get;&#125;\n    /// <summary>\n    /// 是否主站点(用于运行清理任务等)\n    /// </summary>\n    public bool MainSite &#123; set;get;&#125;\n&#125;\n\n/// <summary>\n/// JWT设置\n/// </summary>\npublic class JwtSetting\n&#123;\n    /// <summary>\n    /// 发行者 表示token是谁颁发的\n    /// </summary>\n    public string Issuer &#123; set; get; &#125;\n    /// <summary>\n    /// 表示哪些客户端可以使用这个token\n    /// </summary>\n    public string Audience &#123; set; get; &#125;\n    /// <summary>\n    /// 加密的Key 必须大于16位\n    /// </summary>\n    public string SecretKey &#123; set; get; &#125;\n&#125;\n\npublic class RedisCache\n&#123;\n    public string ConnectionString &#123; set;get;&#125;\n    public int DatabaseId &#123; set; get; &#125;\n&#125;</code></pre>\n<p>对应的配置文件如下</p>\n<pre class=\" language-json\"><code class=\"language-json\">&amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n<span class=\"token property\">\"Logging\"</span><span class=\"token operator\">:</span> &amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">\"LogLevel\"</span><span class=\"token operator\">:</span> &amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">\"Default\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Debug\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"System\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Information\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Microsoft\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Information\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Microsoft.AspNetCore.SignalR\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Trace\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Microsoft.AspNetCore.Http.Connections\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Trace\"</span>\n  &amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span>\n&amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"App\"</span><span class=\"token operator\">:</span> &amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">\"RedisCache\"</span><span class=\"token operator\">:</span> &amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">\"ConnectionString\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"DatabaseId\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span>\n  &amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"SignalrRedisCache\"</span><span class=\"token operator\">:</span> &amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">\"ConnectionString\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"DatabaseId\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span>\n  &amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"CORS\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://localhost:60000,http://localhost:60001\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"MainSite\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"JwtSetting\"</span><span class=\"token operator\">:</span> &amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">\"Issuer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:50000\"</span><span class=\"token punctuation\">,</span> //颁发者\n    <span class=\"token property\">\"Audience\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://localhost:50000\"</span><span class=\"token punctuation\">,</span> //使用者\n    <span class=\"token property\">\"SecretKey\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Wetrial20196666666\"</span> // key 大于<span class=\"token number\">16</span>位\n  &amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span>\n&amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span>\n&amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span></code></pre>\n<p>首先，将配置文件跟实体对象映射，下次在其他地方使用的时候可以直接通过DI注入，然后通过AddStackExchangeRedis配置使用redis作为底板</p>\n</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/09/29/dotnetcore/signalr/03-message-pack/\">.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/10/02/dotnetcore/signalr/05-jwt/\">.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/signalr/redis-backplane?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</p>","more":"<p>在实际的系统中，可能需要多台机器部署;然而，Signalr的连接信息是跟站点走的，举个例子<br>推送系统部署了A、B两个服务器，张三访问A服务器，李四访问B服务器，当张三通过A服务器向李四推送的时候，A服务器上是找不到李四的连接信息的，自然也就推送不过了，这个时候就需要有一个统一协调的玩意，signalr支持多种，Azure、Redis等，本节以Redis作为底板，介绍如何在Signalr中使用Redis作为底板来支持横向扩展。</p>\n<h2 id=\"引入Redis\"><a href=\"#引入Redis\" class=\"headerlink\" title=\"引入Redis\"></a>引入Redis</h2><ul>\n<li><p>先引入NuGet包<br>Microsoft.AspNetCore.SignalR.StackExchangeRedis</p>\n</li>\n<li><p>修改Startup中的ConfigureServices方法</p>\n<pre><code class=\"C#\">var appSection = Configuration.GetSection(&quot;App&quot;);\nservices.Configure&lt;AppSetting&gt;(option =&gt; appSection.Bind(option));\nvar appSetting = appSection.Get&lt;AppSetting&gt;();\n\n// 添加Signalr\nservices.AddSignalR(config =&gt;\n&#123;\n    if (_webEnv.IsDevelopment())\n    &#123;\n        config.EnableDetailedErrors = true;\n    &#125;\n&#125;)\n// 支持MessagePack\n.AddMessagePackProtocol()\n// 使用redis做底板 支持横向扩展 Scale-out\n.AddStackExchangeRedis(o =&gt;\n  &#123;\n      o.ConnectionFactory = async writer =&gt;\n      &#123;\n          var config = new ConfigurationOptions\n          &#123;\n              AbortOnConnectFail = false,\n              ChannelPrefix = &quot;__signalr_&quot;,\n          &#125;;\n          config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n          var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n          connection.ConnectionFailed += (_, e) =&gt;\n          &#123;\n              Console.WriteLine(&quot;Connection to Redis failed.&quot;);\n          &#125;;\n\n          if (connection.IsConnected)\n          &#123;\n              Console.WriteLine(&quot;connected to Redis.&quot;);\n          &#125;\n          else\n          &#123;\n              Console.WriteLine(&quot;Did not connect to Redis&quot;);\n          &#125;\n\n          return connection;\n      &#125;;\n  &#125;);</code></pre>\n<p>可以自定义Redis相关配置，此处的appSetting为已经定义好的配置实体，包括了，主要配置、CROS配置、Jwt配置、redis配置等详情如下</p>\n<pre><code class=\"C#\">/// &lt;summary&gt;\n/// 对应appsettings中的App节点的配置信息\n/// &lt;/summary&gt;\npublic class AppSetting\n&#123;\n    public JwtSetting JwtSetting &#123; set;get;&#125;\n    public RedisCache RedisCache &#123; set;get;&#125;\n    public RedisCache SignalrRedisCache &#123; set; get; &#125;\n    public string CORS &#123; set;get;&#125;\n    /// &lt;summary&gt;\n    /// 是否主站点(用于运行清理任务等)\n    /// &lt;/summary&gt;\n    public bool MainSite &#123; set;get;&#125;\n&#125;\n\n/// &lt;summary&gt;\n/// JWT设置\n/// &lt;/summary&gt;\npublic class JwtSetting\n&#123;\n    /// &lt;summary&gt;\n    /// 发行者 表示token是谁颁发的\n    /// &lt;/summary&gt;\n    public string Issuer &#123; set; get; &#125;\n    /// &lt;summary&gt;\n    /// 表示哪些客户端可以使用这个token\n    /// &lt;/summary&gt;\n    public string Audience &#123; set; get; &#125;\n    /// &lt;summary&gt;\n    /// 加密的Key 必须大于16位\n    /// &lt;/summary&gt;\n    public string SecretKey &#123; set; get; &#125;\n&#125;\n\npublic class RedisCache\n&#123;\n    public string ConnectionString &#123; set;get;&#125;\n    public int DatabaseId &#123; set; get; &#125;\n&#125;</code></pre>\n<p>对应的配置文件如下</p>\n<pre><code class=\"json\">&#123;\n&quot;Logging&quot;: &#123;\n  &quot;LogLevel&quot;: &#123;\n    &quot;Default&quot;: &quot;Debug&quot;,\n    &quot;System&quot;: &quot;Information&quot;,\n    &quot;Microsoft&quot;: &quot;Information&quot;,\n    &quot;Microsoft.AspNetCore.SignalR&quot;: &quot;Trace&quot;,\n    &quot;Microsoft.AspNetCore.Http.Connections&quot;: &quot;Trace&quot;\n  &#125;\n&#125;,\n&quot;App&quot;: &#123;\n  &quot;RedisCache&quot;: &#123;\n    &quot;ConnectionString&quot;: &quot;127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000&quot;,\n    &quot;DatabaseId&quot;: 10\n  &#125;,\n  &quot;SignalrRedisCache&quot;: &#123;\n    &quot;ConnectionString&quot;: &quot;127.0.0.1:6379,password=#####,ssl=false,abortConnect=true,connectTimeout=5000&quot;,\n    &quot;DatabaseId&quot;: 10\n  &#125;,\n  &quot;CORS&quot;: &quot;https://localhost:60000,http://localhost:60001&quot;,\n  &quot;MainSite&quot;: true,\n  &quot;JwtSetting&quot;: &#123;\n    &quot;Issuer&quot;: &quot;http://localhost:50000&quot;, //颁发者\n    &quot;Audience&quot;: &quot;http://localhost:50000&quot;, //使用者\n    &quot;SecretKey&quot;: &quot;Wetrial20196666666&quot; // key 大于16位\n  &#125;\n&#125;\n&#125;</code></pre>\n<p>首先，将配置文件跟实体对象映射，下次在其他地方使用的时候可以直接通过DI注入，然后通过AddStackExchangeRedis配置使用redis作为底板</p>\n</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/09/29/dotnetcore/signalr/03-message-pack/\">.net core 3.0 Signalr - 03 使用MessagePack压缩传输内容</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/10/02/dotnetcore/signalr/05-jwt/\">.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/signalr/redis-backplane?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>"},{"title":".net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联","date":"2019-10-02T10:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联\n<!-- more -->\nSignalr是以Group、Connect为核心来进行推送，比如，给某个组、某个连接来推送，但实际场景中，核心应该是某个组、某个人；然而一个人可以对应多个连接(浏览器多个tab页)；本节就来介绍下自行管理人、组、连接这些关系  \n由于signalr连接的时候不那么方便附带header和cookie(因为推送独立成一个子系统了)，实际实现中采用以url query的形式附带上token，然后服务器端自定义解析token得到用户信息；\n\n## 服务器端实现\n- ConfigureServices中添加服务相关方法，代码如下,完整代码\n  ``` C#\n  public void ConfigureServices(IServiceCollection services)\n  {\n      var appSection = Configuration.GetSection(\"App\");\n      services.Configure<AppSetting>(option => appSection.Bind(option));\n      var appSetting = appSection.Get<AppSetting>();\n\n      services.AddSingleton<SignalrRedisHelper>();\n\n      // services.AddHostedService<ClearBackGroundService>();\n\n      services.AddAuthentication(options =>\n      {\n          options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n          options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n          options.DefaultForbidScheme = JwtBearerDefaults.AuthenticationScheme;\n      })\n      .AddJwtBearer(option =>\n      {\n          option.SecurityTokenValidators.Clear();\n          option.SecurityTokenValidators.Add(new UserTokenValidation()); ;\n\n          option.Events = new JwtBearerEvents()\n          {\n              OnMessageReceived = context =>\n              {\n                  var userId = context.Request.Query[\"userId\"].FirstOrDefault();\n                  if (!string.IsNullOrWhiteSpace(userId))\n                  {\n                      context.Token = userId;\n                  }\n                  return Task.CompletedTask;\n              }\n          };\n      });\n\n      services.AddCors(options => options.AddPolicy(corsPolicy, builder =>\n      {\n          builder\n                .SetIsOriginAllowedToAllowWildcardSubdomains()\n                .WithOrigins(appSetting.CORS.Split(\",\"))\n                .AllowAnyMethod()\n                .AllowCredentials()\n                .AllowAnyHeader()\n                .Build();\n      }));\n\n      services.AddControllers()\n          .AddNewtonsoftJson(options => options.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver())\n          .ConfigureApiBehaviorOptions(options =>\n          {\n              options.InvalidModelStateResponseFactory = context =>\n              {\n                  var result = new BadRequestObjectResult(context.ModelState);\n                  result.ContentTypes.Add(MediaTypeNames.Application.Json);\n                  // result.ContentTypes.Add(MediaTypeNames.Application.Xml);\n\n                  return result;\n              };\n          })\n          .SetCompatibilityVersion(CompatibilityVersion.Version_3_0);\n\n      // 添加Signalr\n      services.AddSignalR(config =>\n      {\n          if (_webEnv.IsDevelopment())\n          {\n              config.EnableDetailedErrors = true;\n          }\n      })\n      // 支持MessagePack\n      .AddMessagePackProtocol()\n      // 使用redis做底板 支持横向扩展 Scale-out\n      .AddStackExchangeRedis(o =>\n        {\n            o.ConnectionFactory = async writer =>\n            {\n                var config = new ConfigurationOptions\n                {\n                    AbortOnConnectFail = false,\n                    // Password = \"changeme\",\n                    ChannelPrefix = \"__signalr_\",\n                };\n                //config.EndPoints.Add(IPAddress.Loopback, 0);\n                //config.SetDefaultPorts();\n                config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n                var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n                connection.ConnectionFailed += (_, e) =>\n                {\n                    Console.WriteLine(\"Connection to Redis failed.\");\n                };\n\n                if (connection.IsConnected)\n                {\n                    Console.WriteLine(\"connected to Redis.\");\n                }\n                else\n                {\n                    Console.WriteLine(\"Did not connect to Redis\");\n                }\n\n                return connection;\n            };\n        });\n  }\n  ```\n其中，SignalrRedisHelper 为redis辅助方法，[详情请参见](https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/SignalrRedisHelper.cs)  \nUserTokenValidation 为自定义token解析方法，[详情请参见](https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/UserTokenValidation.cs),由于历史遗留问题，此处直接使用了userId，建议的做法是传递jwttoken，然后服务器端解析jwt token得到用户信息    \n\n## Hub中跟用户关联\n在Hub中通过Context.User.Identity.Name可以获取到解析的值，通过这种关系来跟用户关联上，当然，也可以自定义修改使用其他信息，比如Email或其他自定义的名称，具体请google\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展](/2019/10/01/dotnetcore/signalr/04-redis/) \n|   下一篇  |   [.net core 3.0 Signalr - 06 业务实现-业务分析](/2019/10/03/dotnetcore/signalr/06-analysis/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/05-jwt.md","raw":"---\ntitle: .net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联\ndate: '2019-10-02 18:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\n  - .NetCore\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联\n<!-- more -->\nSignalr是以Group、Connect为核心来进行推送，比如，给某个组、某个连接来推送，但实际场景中，核心应该是某个组、某个人；然而一个人可以对应多个连接(浏览器多个tab页)；本节就来介绍下自行管理人、组、连接这些关系  \n由于signalr连接的时候不那么方便附带header和cookie(因为推送独立成一个子系统了)，实际实现中采用以url query的形式附带上token，然后服务器端自定义解析token得到用户信息；\n\n## 服务器端实现\n- ConfigureServices中添加服务相关方法，代码如下,完整代码\n  ``` C#\n  public void ConfigureServices(IServiceCollection services)\n  {\n      var appSection = Configuration.GetSection(\"App\");\n      services.Configure<AppSetting>(option => appSection.Bind(option));\n      var appSetting = appSection.Get<AppSetting>();\n\n      services.AddSingleton<SignalrRedisHelper>();\n\n      // services.AddHostedService<ClearBackGroundService>();\n\n      services.AddAuthentication(options =>\n      {\n          options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n          options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n          options.DefaultForbidScheme = JwtBearerDefaults.AuthenticationScheme;\n      })\n      .AddJwtBearer(option =>\n      {\n          option.SecurityTokenValidators.Clear();\n          option.SecurityTokenValidators.Add(new UserTokenValidation()); ;\n\n          option.Events = new JwtBearerEvents()\n          {\n              OnMessageReceived = context =>\n              {\n                  var userId = context.Request.Query[\"userId\"].FirstOrDefault();\n                  if (!string.IsNullOrWhiteSpace(userId))\n                  {\n                      context.Token = userId;\n                  }\n                  return Task.CompletedTask;\n              }\n          };\n      });\n\n      services.AddCors(options => options.AddPolicy(corsPolicy, builder =>\n      {\n          builder\n                .SetIsOriginAllowedToAllowWildcardSubdomains()\n                .WithOrigins(appSetting.CORS.Split(\",\"))\n                .AllowAnyMethod()\n                .AllowCredentials()\n                .AllowAnyHeader()\n                .Build();\n      }));\n\n      services.AddControllers()\n          .AddNewtonsoftJson(options => options.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver())\n          .ConfigureApiBehaviorOptions(options =>\n          {\n              options.InvalidModelStateResponseFactory = context =>\n              {\n                  var result = new BadRequestObjectResult(context.ModelState);\n                  result.ContentTypes.Add(MediaTypeNames.Application.Json);\n                  // result.ContentTypes.Add(MediaTypeNames.Application.Xml);\n\n                  return result;\n              };\n          })\n          .SetCompatibilityVersion(CompatibilityVersion.Version_3_0);\n\n      // 添加Signalr\n      services.AddSignalR(config =>\n      {\n          if (_webEnv.IsDevelopment())\n          {\n              config.EnableDetailedErrors = true;\n          }\n      })\n      // 支持MessagePack\n      .AddMessagePackProtocol()\n      // 使用redis做底板 支持横向扩展 Scale-out\n      .AddStackExchangeRedis(o =>\n        {\n            o.ConnectionFactory = async writer =>\n            {\n                var config = new ConfigurationOptions\n                {\n                    AbortOnConnectFail = false,\n                    // Password = \"changeme\",\n                    ChannelPrefix = \"__signalr_\",\n                };\n                //config.EndPoints.Add(IPAddress.Loopback, 0);\n                //config.SetDefaultPorts();\n                config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n                var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n                connection.ConnectionFailed += (_, e) =>\n                {\n                    Console.WriteLine(\"Connection to Redis failed.\");\n                };\n\n                if (connection.IsConnected)\n                {\n                    Console.WriteLine(\"connected to Redis.\");\n                }\n                else\n                {\n                    Console.WriteLine(\"Did not connect to Redis\");\n                }\n\n                return connection;\n            };\n        });\n  }\n  ```\n其中，SignalrRedisHelper 为redis辅助方法，[详情请参见](https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/SignalrRedisHelper.cs)  \nUserTokenValidation 为自定义token解析方法，[详情请参见](https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/UserTokenValidation.cs),由于历史遗留问题，此处直接使用了userId，建议的做法是传递jwttoken，然后服务器端解析jwt token得到用户信息    \n\n## Hub中跟用户关联\n在Hub中通过Context.User.Identity.Name可以获取到解析的值，通过这种关系来跟用户关联上，当然，也可以自定义修改使用其他信息，比如Email或其他自定义的名称，具体请google\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展](/2019/10/01/dotnetcore/signalr/04-redis/) \n|   下一篇  |   [.net core 3.0 Signalr - 06 业务实现-业务分析](/2019/10/03/dotnetcore/signalr/06-analysis/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/05-jwt","published":1,"updated":"2020-12-29T01:09:09.587Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6wv0043d8v8hzgocuxh","content":"<p>.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</p>\n<a id=\"more\"></a>\n<p>Signalr是以Group、Connect为核心来进行推送，比如，给某个组、某个连接来推送，但实际场景中，核心应该是某个组、某个人；然而一个人可以对应多个连接(浏览器多个tab页)；本节就来介绍下自行管理人、组、连接这些关系<br>由于signalr连接的时候不那么方便附带header和cookie(因为推送独立成一个子系统了)，实际实现中采用以url query的形式附带上token，然后服务器端自定义解析token得到用户信息；</p>\n<h2 id=\"服务器端实现\"><a href=\"#服务器端实现\" class=\"headerlink\" title=\"服务器端实现\"></a>服务器端实现</h2><ul>\n<li><p>ConfigureServices中添加服务相关方法，代码如下,完整代码</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">public void ConfigureServices(IServiceCollection services)\n&#123;\n    var appSection = Configuration.GetSection(\"App\");\n    services.Configure<AppSetting>(option => appSection.Bind(option));\n    var appSetting = appSection.Get<AppSetting>();\n\n    services.AddSingleton<SignalrRedisHelper>();\n\n    // services.AddHostedService<ClearBackGroundService>();\n\n    services.AddAuthentication(options =>\n    &#123;\n        options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n        options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n        options.DefaultForbidScheme = JwtBearerDefaults.AuthenticationScheme;\n    &#125;)\n    .AddJwtBearer(option =>\n    &#123;\n        option.SecurityTokenValidators.Clear();\n        option.SecurityTokenValidators.Add(new UserTokenValidation()); ;\n\n        option.Events = new JwtBearerEvents()\n        &#123;\n            OnMessageReceived = context =>\n            &#123;\n                var userId = context.Request.Query[\"userId\"].FirstOrDefault();\n                if (!string.IsNullOrWhiteSpace(userId))\n                &#123;\n                    context.Token = userId;\n                &#125;\n                return Task.CompletedTask;\n            &#125;\n        &#125;;\n    &#125;);\n\n    services.AddCors(options => options.AddPolicy(corsPolicy, builder =>\n    &#123;\n        builder\n              .SetIsOriginAllowedToAllowWildcardSubdomains()\n              .WithOrigins(appSetting.CORS.Split(\",\"))\n              .AllowAnyMethod()\n              .AllowCredentials()\n              .AllowAnyHeader()\n              .Build();\n    &#125;));\n\n    services.AddControllers()\n        .AddNewtonsoftJson(options => options.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver())\n        .ConfigureApiBehaviorOptions(options =>\n        &#123;\n            options.InvalidModelStateResponseFactory = context =>\n            &#123;\n                var result = new BadRequestObjectResult(context.ModelState);\n                result.ContentTypes.Add(MediaTypeNames.Application.Json);\n                // result.ContentTypes.Add(MediaTypeNames.Application.Xml);\n\n                return result;\n            &#125;;\n        &#125;)\n        .SetCompatibilityVersion(CompatibilityVersion.Version_3_0);\n\n    // 添加Signalr\n    services.AddSignalR(config =>\n    &#123;\n        if (_webEnv.IsDevelopment())\n        &#123;\n            config.EnableDetailedErrors = true;\n        &#125;\n    &#125;)\n    // 支持MessagePack\n    .AddMessagePackProtocol()\n    // 使用redis做底板 支持横向扩展 Scale-out\n    .AddStackExchangeRedis(o =>\n      &#123;\n          o.ConnectionFactory = async writer =>\n          &#123;\n              var config = new ConfigurationOptions\n              &#123;\n                  AbortOnConnectFail = false,\n                  // Password = \"changeme\",\n                  ChannelPrefix = \"__signalr_\",\n              &#125;;\n              //config.EndPoints.Add(IPAddress.Loopback, 0);\n              //config.SetDefaultPorts();\n              config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n              var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n              connection.ConnectionFailed += (_, e) =>\n              &#123;\n                  Console.WriteLine(\"Connection to Redis failed.\");\n              &#125;;\n\n              if (connection.IsConnected)\n              &#123;\n                  Console.WriteLine(\"connected to Redis.\");\n              &#125;\n              else\n              &#123;\n                  Console.WriteLine(\"Did not connect to Redis\");\n              &#125;\n\n              return connection;\n          &#125;;\n      &#125;);\n&#125;</code></pre>\n<p>其中，SignalrRedisHelper 为redis辅助方法，<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/SignalrRedisHelper.cs\">详情请参见</a><br>UserTokenValidation 为自定义token解析方法，<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/UserTokenValidation.cs\">详情请参见</a>,由于历史遗留问题，此处直接使用了userId，建议的做法是传递jwttoken，然后服务器端解析jwt token得到用户信息    </p>\n</li>\n</ul>\n<h2 id=\"Hub中跟用户关联\"><a href=\"#Hub中跟用户关联\" class=\"headerlink\" title=\"Hub中跟用户关联\"></a>Hub中跟用户关联</h2><p>在Hub中通过Context.User.Identity.Name可以获取到解析的值，通过这种关系来跟用户关联上，当然，也可以自定义修改使用其他信息，比如Email或其他自定义的名称，具体请google</p>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/10/01/dotnetcore/signalr/04-redis/\">.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/10/03/dotnetcore/signalr/06-analysis/\">.net core 3.0 Signalr - 06 业务实现-业务分析</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</p>","more":"<p>Signalr是以Group、Connect为核心来进行推送，比如，给某个组、某个连接来推送，但实际场景中，核心应该是某个组、某个人；然而一个人可以对应多个连接(浏览器多个tab页)；本节就来介绍下自行管理人、组、连接这些关系<br>由于signalr连接的时候不那么方便附带header和cookie(因为推送独立成一个子系统了)，实际实现中采用以url query的形式附带上token，然后服务器端自定义解析token得到用户信息；</p>\n<h2 id=\"服务器端实现\"><a href=\"#服务器端实现\" class=\"headerlink\" title=\"服务器端实现\"></a>服务器端实现</h2><ul>\n<li><p>ConfigureServices中添加服务相关方法，代码如下,完整代码</p>\n<pre><code class=\"C#\">public void ConfigureServices(IServiceCollection services)\n&#123;\n    var appSection = Configuration.GetSection(&quot;App&quot;);\n    services.Configure&lt;AppSetting&gt;(option =&gt; appSection.Bind(option));\n    var appSetting = appSection.Get&lt;AppSetting&gt;();\n\n    services.AddSingleton&lt;SignalrRedisHelper&gt;();\n\n    // services.AddHostedService&lt;ClearBackGroundService&gt;();\n\n    services.AddAuthentication(options =&gt;\n    &#123;\n        options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n        options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n        options.DefaultForbidScheme = JwtBearerDefaults.AuthenticationScheme;\n    &#125;)\n    .AddJwtBearer(option =&gt;\n    &#123;\n        option.SecurityTokenValidators.Clear();\n        option.SecurityTokenValidators.Add(new UserTokenValidation()); ;\n\n        option.Events = new JwtBearerEvents()\n        &#123;\n            OnMessageReceived = context =&gt;\n            &#123;\n                var userId = context.Request.Query[&quot;userId&quot;].FirstOrDefault();\n                if (!string.IsNullOrWhiteSpace(userId))\n                &#123;\n                    context.Token = userId;\n                &#125;\n                return Task.CompletedTask;\n            &#125;\n        &#125;;\n    &#125;);\n\n    services.AddCors(options =&gt; options.AddPolicy(corsPolicy, builder =&gt;\n    &#123;\n        builder\n              .SetIsOriginAllowedToAllowWildcardSubdomains()\n              .WithOrigins(appSetting.CORS.Split(&quot;,&quot;))\n              .AllowAnyMethod()\n              .AllowCredentials()\n              .AllowAnyHeader()\n              .Build();\n    &#125;));\n\n    services.AddControllers()\n        .AddNewtonsoftJson(options =&gt; options.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver())\n        .ConfigureApiBehaviorOptions(options =&gt;\n        &#123;\n            options.InvalidModelStateResponseFactory = context =&gt;\n            &#123;\n                var result = new BadRequestObjectResult(context.ModelState);\n                result.ContentTypes.Add(MediaTypeNames.Application.Json);\n                // result.ContentTypes.Add(MediaTypeNames.Application.Xml);\n\n                return result;\n            &#125;;\n        &#125;)\n        .SetCompatibilityVersion(CompatibilityVersion.Version_3_0);\n\n    // 添加Signalr\n    services.AddSignalR(config =&gt;\n    &#123;\n        if (_webEnv.IsDevelopment())\n        &#123;\n            config.EnableDetailedErrors = true;\n        &#125;\n    &#125;)\n    // 支持MessagePack\n    .AddMessagePackProtocol()\n    // 使用redis做底板 支持横向扩展 Scale-out\n    .AddStackExchangeRedis(o =&gt;\n      &#123;\n          o.ConnectionFactory = async writer =&gt;\n          &#123;\n              var config = new ConfigurationOptions\n              &#123;\n                  AbortOnConnectFail = false,\n                  // Password = &quot;changeme&quot;,\n                  ChannelPrefix = &quot;__signalr_&quot;,\n              &#125;;\n              //config.EndPoints.Add(IPAddress.Loopback, 0);\n              //config.SetDefaultPorts();\n              config.DefaultDatabase = appSetting.SignalrRedisCache.DatabaseId;\n              var connection = await ConnectionMultiplexer.ConnectAsync(appSetting.SignalrRedisCache.ConnectionString, writer);\n              connection.ConnectionFailed += (_, e) =&gt;\n              &#123;\n                  Console.WriteLine(&quot;Connection to Redis failed.&quot;);\n              &#125;;\n\n              if (connection.IsConnected)\n              &#123;\n                  Console.WriteLine(&quot;connected to Redis.&quot;);\n              &#125;\n              else\n              &#123;\n                  Console.WriteLine(&quot;Did not connect to Redis&quot;);\n              &#125;\n\n              return connection;\n          &#125;;\n      &#125;);\n&#125;</code></pre>\n<p>其中，SignalrRedisHelper 为redis辅助方法，<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/SignalrRedisHelper.cs\">详情请参见</a><br>UserTokenValidation 为自定义token解析方法，<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/Core.Signalr.Template.Web/Cores/UserTokenValidation.cs\">详情请参见</a>,由于历史遗留问题，此处直接使用了userId，建议的做法是传递jwttoken，然后服务器端解析jwt token得到用户信息    </p>\n</li>\n</ul>\n<h2 id=\"Hub中跟用户关联\"><a href=\"#Hub中跟用户关联\" class=\"headerlink\" title=\"Hub中跟用户关联\"></a>Hub中跟用户关联</h2><p>在Hub中通过Context.User.Identity.Name可以获取到解析的值，通过这种关系来跟用户关联上，当然，也可以自定义修改使用其他信息，比如Email或其他自定义的名称，具体请google</p>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/10/01/dotnetcore/signalr/04-redis/\">.net core 3.0 Signalr - 04 使用Redis做底板来支持横向扩展</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/10/03/dotnetcore/signalr/06-analysis/\">.net core 3.0 Signalr - 06 业务实现-业务分析</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>"},{"title":".net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接","date":"2019-10-04T12:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接\n<!-- more -->\n## Hub的管理\n- 重写OnConnectedAsync\n从连接信息中获取UserId、Groups,ConnectId，并实现这三者的关系，存放于redis中\n[代码请查看](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Server/Hubs/NotifyHub.cs)\n  ``` C#\n  using CTS.Signalr.Server.Cores;\n  using CTS.Signalr.Server.Dtos;\n  using Microsoft.AspNetCore.Authorization;\n  using Microsoft.AspNetCore.SignalR;\n  using Microsoft.Extensions.Logging;\n  using System;\n  using System.Linq;\n  using System.Threading.Tasks;\n\n  namespace CTS.Signalr.Server.Hubs\n  {\n      /// <summary>\n      /// 服务端接口\n      /// </summary>\n      public interface IServerNotifyHub\n      {\n\n      }\n\n      /// <summary>\n      /// 客户端使用的接口\n      /// </summary>\n      public interface IClientNotifyHub\n      {\n          Task OnNotify(object data);\n\n          Task OnLine(object data);\n\n          Task OffLine(object data);\n      }\n\n\n      [Authorize]\n      public class NotifyHub : Hub<IClientNotifyHub>,IServerNotifyHub\n      {\n          private readonly SignalrRedisHelper _signalrRedisHelper;\n          private readonly ILogger _logger;\n\n          public NotifyHub(SignalrRedisHelper signalrRedisHelper, ILogger<NotifyHub> logger)\n          {\n              _signalrRedisHelper = signalrRedisHelper;\n              _logger = logger;\n          }\n\n          public override async Task OnConnectedAsync()\n          {\n              //await Clients.All.OnNotify(new { UserId= Context.User.Identity.Name, Name=Context.User.Identity.Name, ConnectId = Context.ConnectionId });\n              var userId= Context.User.Identity.Name;\n              var groups=Context.GetHttpContext().Request.Query[\"group\"].FirstOrDefault();\n              _logger.LogDebug($\"OnConnectedAsync----userId:{userId},groups:{groups},connectionId:{ Context.ConnectionId}\");\n              if (!string.IsNullOrWhiteSpace(userId))\n              {\n                  await _signalrRedisHelper.AddConnectForUserAsync(userId, Context.ConnectionId);\n                  await JoinToGroup(userId, Context.ConnectionId, groups?.Split(','));\n                  await DealOnLineNotify(userId, Context.ConnectionId);\n              }\n              await base.OnConnectedAsync();\n          }\n\n          public override async Task OnDisconnectedAsync(Exception exception)\n          {\n              var userId = Context.User.Identity.Name;\n              var groups = Context.GetHttpContext().Request.Query[\"group\"].FirstOrDefault();\n              _logger.LogDebug($\"OnDisconnectedAsync----userId:{userId},groups:{groups},connectionId:{ Context.ConnectionId}\");\n              if (!string.IsNullOrWhiteSpace(userId))\n              {\n                  await _signalrRedisHelper.RemoveConnectForUserAsync(userId, Context.ConnectionId);\n                  await DealOffLineNotify(userId,Context.ConnectionId);\n              }\n              await LeaveFromGroup(Context.ConnectionId, groups?.Split(','));\n              await base.OnDisconnectedAsync(exception);\n          }\n\n          /// <summary>\n          /// 加入组\n          /// </summary>\n          /// <param name=\"groupName\"></param>\n          /// <returns></returns>\n          private async Task JoinToGroup(string userId,string connectionId,params string[] groups)\n          {\n              if (!string.IsNullOrWhiteSpace(userId)&& groups!=null&&groups.Length>0)\n              {\n                  foreach (var group in groups)\n                  {\n                      await Groups.AddToGroupAsync(connectionId, group);\n                      await _signalrRedisHelper.AddUserForGroupAsync(group, connectionId, userId);\n\n                      // await Clients.Group(group).OnJoinGroup(new { ConnectId = connectionId, UserId = userId, GroupName = group });\n                  }\n              }\n          }\n\n          /// <summary>\n          /// 从组中移除\n          /// </summary>\n          /// <param name=\"groupName\"></param>\n          /// <returns></returns>\n          private async Task LeaveFromGroup(string connectionId,params string[] groups)\n          {\n              if (groups != null && groups.Length > 0)\n              {\n                  foreach (var group in groups)\n                  {\n                      await Groups.RemoveFromGroupAsync(connectionId, group);\n                      await _signalrRedisHelper.RemoveConnectFromGroupAsync(group,connectionId);\n                      // await Clients.Group(group).OnLeaveGroup(new { ConnectId = connectionId, GroupName = group });\n                  }\n              }\n          }\n\n          /// <summary>\n          /// 处理上线通知(只有用户第一个连接才通知)\n          /// </summary>\n          /// <param name=\"userId\"></param>\n          /// <param name=\"connectionId\"></param>\n          /// <returns></returns>\n          private async Task DealOnLineNotify(string userId,string connectionId) \n          {\n              var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n              await Clients.All.OnLine(new OnLineData()\n              {\n                  UserId = userId,\n                  ConnectionId = connectionId,\n                  IsFirst = userConnectCount == 1\n              });\n          }\n\n          /// <summary>\n          /// 处理下线通知(只有当用户一个连接都没了 才算下线)\n          /// </summary>\n          /// <param name=\"userId\"></param>\n          /// <param name=\"connectionId\"></param>\n          /// <returns></returns>\n          private async Task DealOffLineNotify(string userId,string connectionId)\n          {\n              var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n              await Clients.All.OffLine(new OffLineData()\n              {\n                  UserId = userId,\n                  ConnectionId = connectionId,\n                  IsLast = userConnectCount == 0\n              });\n          }\n      }\n  }\n\n  ```\n\n## 提供给业务系统调用的API\n- [POST] api/notify/post \napplication/json形式 提交，数据格式如下\n  ``` json\n  {\n    GroupIds:'', // [可空] 组id集合，多个用,隔开\n    UserIds:'',// [可空] 用户id集合，多个用,隔开\n    ExcludeUsers:boolean, // 是否排除用户列表中的用户\n    NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n  }\n  ```\n  * 有GroupIds\n    * ExcludeUsers=true\n      推送给指定的组中所有用户(排除掉UserIds部分)\n\n    * ExcludeUsers=false\n      推送给组中指定(UserIds中指定的)的这些用户\n\n  * 无GroupIds\n    * ExcludeUsers=true\n      推送给当前所有连接(排除掉UserIds部分的用户)\n\n    * ExcludeUsers=false\n      推送给指定用户(UserIds中指定的用户)\n\n- [POST] api/notify/postConnects  \napplication/json提交，数据格式如下\n  ``` json\n  {\n    Connects:'', // 连接Id集合，多个用，隔开\n    NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n  }\n  ```\n  * 有UserId\n    * ExcludeConnectId=true\n      给改用户除指定的ConnectId外的所有连接端推送\n    * ExcludeConnectId=false\n      跟没指定UserId一致\n  * 无UserId\n    给指定连接Id推送\n\n- [GET] api/users  \n获取在线用户Id列表\n\n- [GET] api/groups \n获取在线组列表\n\n\n## 增加日志记录\n为了方便分析和定位问题，使用log4net来作为日志记录器。\n- nuget 安装log4net\nnuget 搜索 log4net，安装\n- Config中配置  \n在Config中注入ILoggerFactory，然后使用添加Log4Net,代码如下所示\n``` C#\npublic void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)\n{\n    if (env.IsDevelopment())\n    {\n        app.UseDeveloperExceptionPage();\n    }\n    app.UseHsts();\n\n    loggerFactory.AddLog4Net();\n    ...\n}\n```\n- 添加log4net配置文件  \n更多配置请自行查找log4net官方配置文档\n``` xml\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<!--LOG4日志级别 \n    0：TRACE；记录一些对程序员调试问题有帮助的信息, 其中可能包含一些敏感信息, 所以应该避免在生产环境中启用Trace日志。\n    1：DEBUG；记录一些在开发和调试阶段有用的短时变量(Short-term usefulness), 所以除非为了临时排除生产环境的故障，开发人员应该尽量避免在生产环境中启用Debug日志。\n    2：INFO；信息日志，记录应用程序的一些流程, 例如，记录当前api请求的url，请求参数等。\n    3：WARN；警告日志；记录应用程序中发生的不正常或者未预期的事件信息。这些信息中可能包含错误消息或者错误产生的条件, 例如, 文件未找到，用户不存在。\n    4：ERROR；错误日志；记录应用程序中某个操作产生的错误和异常信息，如对空值进行操作等。\n    5：FATAL；毁灭性错误；记录一些需要立刻修复的问题。例如数据丢失，磁盘空间不足。\ntrace<debug<info<warn<error<fatal -->\n<log4net>\n  <appender name=\"ErrorRollingFileAppender\" type=\"log4net.Appender.RollingFileAppender\">\n    <file value=\"AppData\\\\logs\\\\\" />\n    <appendToFile value=\"true\" />\n    <rollingStyle value=\"Date\"/>\n    <datePattern value=\"yyyy-MM-dd-'error.log'\"/>\n    <maxSizeRollBackups value=\"100\" />\n    <staticLogFileName value=\"false\" />\n    <encoding value=\"utf-8\" />\n    <layout type=\"log4net.Layout.PatternLayout\">\n      <conversionPattern value=\"%-5level %date [%-5.5thread] %-40.40logger - %message%newline\" />\n    </layout>\n    <filter type=\"log4net.Filter.LevelRangeFilter\">\n      <levelMin value=\"ERROR\" />\n      <levelMax value=\"FATAL\" />\n    </filter>\n  </appender>\n\n  <root>\n    <level value=\"All\" />\n    <appender-ref ref=\"ErrorRollingFileAppender\" />\n  </root>\n</log4net>\n```\n至此，log4net配置完毕\n\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |  [.net core 3.0 Signalr - 06 业务实现-业务分析](/2019/10/03/dotnetcore/signalr/06-analysis/) \n|   下一篇  |   [.net core 3.0 Signalr - 08 业务实现-客户端demo](/2019/10/05/dotnetcore/signalr/08-clientdemo/)  \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/07-self-manager.md","raw":"---\ntitle: .net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接\ndate: '2019-10-04 20:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\n  - .NetCore\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接\n<!-- more -->\n## Hub的管理\n- 重写OnConnectedAsync\n从连接信息中获取UserId、Groups,ConnectId，并实现这三者的关系，存放于redis中\n[代码请查看](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Server/Hubs/NotifyHub.cs)\n  ``` C#\n  using CTS.Signalr.Server.Cores;\n  using CTS.Signalr.Server.Dtos;\n  using Microsoft.AspNetCore.Authorization;\n  using Microsoft.AspNetCore.SignalR;\n  using Microsoft.Extensions.Logging;\n  using System;\n  using System.Linq;\n  using System.Threading.Tasks;\n\n  namespace CTS.Signalr.Server.Hubs\n  {\n      /// <summary>\n      /// 服务端接口\n      /// </summary>\n      public interface IServerNotifyHub\n      {\n\n      }\n\n      /// <summary>\n      /// 客户端使用的接口\n      /// </summary>\n      public interface IClientNotifyHub\n      {\n          Task OnNotify(object data);\n\n          Task OnLine(object data);\n\n          Task OffLine(object data);\n      }\n\n\n      [Authorize]\n      public class NotifyHub : Hub<IClientNotifyHub>,IServerNotifyHub\n      {\n          private readonly SignalrRedisHelper _signalrRedisHelper;\n          private readonly ILogger _logger;\n\n          public NotifyHub(SignalrRedisHelper signalrRedisHelper, ILogger<NotifyHub> logger)\n          {\n              _signalrRedisHelper = signalrRedisHelper;\n              _logger = logger;\n          }\n\n          public override async Task OnConnectedAsync()\n          {\n              //await Clients.All.OnNotify(new { UserId= Context.User.Identity.Name, Name=Context.User.Identity.Name, ConnectId = Context.ConnectionId });\n              var userId= Context.User.Identity.Name;\n              var groups=Context.GetHttpContext().Request.Query[\"group\"].FirstOrDefault();\n              _logger.LogDebug($\"OnConnectedAsync----userId:{userId},groups:{groups},connectionId:{ Context.ConnectionId}\");\n              if (!string.IsNullOrWhiteSpace(userId))\n              {\n                  await _signalrRedisHelper.AddConnectForUserAsync(userId, Context.ConnectionId);\n                  await JoinToGroup(userId, Context.ConnectionId, groups?.Split(','));\n                  await DealOnLineNotify(userId, Context.ConnectionId);\n              }\n              await base.OnConnectedAsync();\n          }\n\n          public override async Task OnDisconnectedAsync(Exception exception)\n          {\n              var userId = Context.User.Identity.Name;\n              var groups = Context.GetHttpContext().Request.Query[\"group\"].FirstOrDefault();\n              _logger.LogDebug($\"OnDisconnectedAsync----userId:{userId},groups:{groups},connectionId:{ Context.ConnectionId}\");\n              if (!string.IsNullOrWhiteSpace(userId))\n              {\n                  await _signalrRedisHelper.RemoveConnectForUserAsync(userId, Context.ConnectionId);\n                  await DealOffLineNotify(userId,Context.ConnectionId);\n              }\n              await LeaveFromGroup(Context.ConnectionId, groups?.Split(','));\n              await base.OnDisconnectedAsync(exception);\n          }\n\n          /// <summary>\n          /// 加入组\n          /// </summary>\n          /// <param name=\"groupName\"></param>\n          /// <returns></returns>\n          private async Task JoinToGroup(string userId,string connectionId,params string[] groups)\n          {\n              if (!string.IsNullOrWhiteSpace(userId)&& groups!=null&&groups.Length>0)\n              {\n                  foreach (var group in groups)\n                  {\n                      await Groups.AddToGroupAsync(connectionId, group);\n                      await _signalrRedisHelper.AddUserForGroupAsync(group, connectionId, userId);\n\n                      // await Clients.Group(group).OnJoinGroup(new { ConnectId = connectionId, UserId = userId, GroupName = group });\n                  }\n              }\n          }\n\n          /// <summary>\n          /// 从组中移除\n          /// </summary>\n          /// <param name=\"groupName\"></param>\n          /// <returns></returns>\n          private async Task LeaveFromGroup(string connectionId,params string[] groups)\n          {\n              if (groups != null && groups.Length > 0)\n              {\n                  foreach (var group in groups)\n                  {\n                      await Groups.RemoveFromGroupAsync(connectionId, group);\n                      await _signalrRedisHelper.RemoveConnectFromGroupAsync(group,connectionId);\n                      // await Clients.Group(group).OnLeaveGroup(new { ConnectId = connectionId, GroupName = group });\n                  }\n              }\n          }\n\n          /// <summary>\n          /// 处理上线通知(只有用户第一个连接才通知)\n          /// </summary>\n          /// <param name=\"userId\"></param>\n          /// <param name=\"connectionId\"></param>\n          /// <returns></returns>\n          private async Task DealOnLineNotify(string userId,string connectionId) \n          {\n              var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n              await Clients.All.OnLine(new OnLineData()\n              {\n                  UserId = userId,\n                  ConnectionId = connectionId,\n                  IsFirst = userConnectCount == 1\n              });\n          }\n\n          /// <summary>\n          /// 处理下线通知(只有当用户一个连接都没了 才算下线)\n          /// </summary>\n          /// <param name=\"userId\"></param>\n          /// <param name=\"connectionId\"></param>\n          /// <returns></returns>\n          private async Task DealOffLineNotify(string userId,string connectionId)\n          {\n              var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n              await Clients.All.OffLine(new OffLineData()\n              {\n                  UserId = userId,\n                  ConnectionId = connectionId,\n                  IsLast = userConnectCount == 0\n              });\n          }\n      }\n  }\n\n  ```\n\n## 提供给业务系统调用的API\n- [POST] api/notify/post \napplication/json形式 提交，数据格式如下\n  ``` json\n  {\n    GroupIds:'', // [可空] 组id集合，多个用,隔开\n    UserIds:'',// [可空] 用户id集合，多个用,隔开\n    ExcludeUsers:boolean, // 是否排除用户列表中的用户\n    NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n  }\n  ```\n  * 有GroupIds\n    * ExcludeUsers=true\n      推送给指定的组中所有用户(排除掉UserIds部分)\n\n    * ExcludeUsers=false\n      推送给组中指定(UserIds中指定的)的这些用户\n\n  * 无GroupIds\n    * ExcludeUsers=true\n      推送给当前所有连接(排除掉UserIds部分的用户)\n\n    * ExcludeUsers=false\n      推送给指定用户(UserIds中指定的用户)\n\n- [POST] api/notify/postConnects  \napplication/json提交，数据格式如下\n  ``` json\n  {\n    Connects:'', // 连接Id集合，多个用，隔开\n    NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n  }\n  ```\n  * 有UserId\n    * ExcludeConnectId=true\n      给改用户除指定的ConnectId外的所有连接端推送\n    * ExcludeConnectId=false\n      跟没指定UserId一致\n  * 无UserId\n    给指定连接Id推送\n\n- [GET] api/users  \n获取在线用户Id列表\n\n- [GET] api/groups \n获取在线组列表\n\n\n## 增加日志记录\n为了方便分析和定位问题，使用log4net来作为日志记录器。\n- nuget 安装log4net\nnuget 搜索 log4net，安装\n- Config中配置  \n在Config中注入ILoggerFactory，然后使用添加Log4Net,代码如下所示\n``` C#\npublic void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)\n{\n    if (env.IsDevelopment())\n    {\n        app.UseDeveloperExceptionPage();\n    }\n    app.UseHsts();\n\n    loggerFactory.AddLog4Net();\n    ...\n}\n```\n- 添加log4net配置文件  \n更多配置请自行查找log4net官方配置文档\n``` xml\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<!--LOG4日志级别 \n    0：TRACE；记录一些对程序员调试问题有帮助的信息, 其中可能包含一些敏感信息, 所以应该避免在生产环境中启用Trace日志。\n    1：DEBUG；记录一些在开发和调试阶段有用的短时变量(Short-term usefulness), 所以除非为了临时排除生产环境的故障，开发人员应该尽量避免在生产环境中启用Debug日志。\n    2：INFO；信息日志，记录应用程序的一些流程, 例如，记录当前api请求的url，请求参数等。\n    3：WARN；警告日志；记录应用程序中发生的不正常或者未预期的事件信息。这些信息中可能包含错误消息或者错误产生的条件, 例如, 文件未找到，用户不存在。\n    4：ERROR；错误日志；记录应用程序中某个操作产生的错误和异常信息，如对空值进行操作等。\n    5：FATAL；毁灭性错误；记录一些需要立刻修复的问题。例如数据丢失，磁盘空间不足。\ntrace<debug<info<warn<error<fatal -->\n<log4net>\n  <appender name=\"ErrorRollingFileAppender\" type=\"log4net.Appender.RollingFileAppender\">\n    <file value=\"AppData\\\\logs\\\\\" />\n    <appendToFile value=\"true\" />\n    <rollingStyle value=\"Date\"/>\n    <datePattern value=\"yyyy-MM-dd-'error.log'\"/>\n    <maxSizeRollBackups value=\"100\" />\n    <staticLogFileName value=\"false\" />\n    <encoding value=\"utf-8\" />\n    <layout type=\"log4net.Layout.PatternLayout\">\n      <conversionPattern value=\"%-5level %date [%-5.5thread] %-40.40logger - %message%newline\" />\n    </layout>\n    <filter type=\"log4net.Filter.LevelRangeFilter\">\n      <levelMin value=\"ERROR\" />\n      <levelMax value=\"FATAL\" />\n    </filter>\n  </appender>\n\n  <root>\n    <level value=\"All\" />\n    <appender-ref ref=\"ErrorRollingFileAppender\" />\n  </root>\n</log4net>\n```\n至此，log4net配置完毕\n\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |  [.net core 3.0 Signalr - 06 业务实现-业务分析](/2019/10/03/dotnetcore/signalr/06-analysis/) \n|   下一篇  |   [.net core 3.0 Signalr - 08 业务实现-客户端demo](/2019/10/05/dotnetcore/signalr/08-clientdemo/)  \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/07-self-manager","published":1,"updated":"2020-12-29T01:09:09.535Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6x00047d8v8at9v0xvz","content":"<p>.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</p>\n<a id=\"more\"></a>\n<h2 id=\"Hub的管理\"><a href=\"#Hub的管理\" class=\"headerlink\" title=\"Hub的管理\"></a>Hub的管理</h2><ul>\n<li><p>重写OnConnectedAsync<br>从连接信息中获取UserId、Groups,ConnectId，并实现这三者的关系，存放于redis中<br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Server/Hubs/NotifyHub.cs\">代码请查看</a></p>\n<pre class=\" language-C#\"><code class=\"language-C#\">using CTS.Signalr.Server.Cores;\nusing CTS.Signalr.Server.Dtos;\nusing Microsoft.AspNetCore.Authorization;\nusing Microsoft.AspNetCore.SignalR;\nusing Microsoft.Extensions.Logging;\nusing System;\nusing System.Linq;\nusing System.Threading.Tasks;\n\nnamespace CTS.Signalr.Server.Hubs\n&#123;\n    /// <summary>\n    /// 服务端接口\n    /// </summary>\n    public interface IServerNotifyHub\n    &#123;\n\n    &#125;\n\n    /// <summary>\n    /// 客户端使用的接口\n    /// </summary>\n    public interface IClientNotifyHub\n    &#123;\n        Task OnNotify(object data);\n\n        Task OnLine(object data);\n\n        Task OffLine(object data);\n    &#125;\n\n</code></pre>\n</li>\n</ul>\n<pre><code>  [Authorize]\n  public class NotifyHub : Hub&lt;IClientNotifyHub&gt;,IServerNotifyHub\n  &#123;\n      private readonly SignalrRedisHelper _signalrRedisHelper;\n      private readonly ILogger _logger;\n\n      public NotifyHub(SignalrRedisHelper signalrRedisHelper, ILogger&lt;NotifyHub&gt; logger)\n      &#123;\n          _signalrRedisHelper = signalrRedisHelper;\n          _logger = logger;\n      &#125;\n\n      public override async Task OnConnectedAsync()\n      &#123;\n          //await Clients.All.OnNotify(new &#123; UserId= Context.User.Identity.Name, Name=Context.User.Identity.Name, ConnectId = Context.ConnectionId &#125;);\n          var userId= Context.User.Identity.Name;\n          var groups=Context.GetHttpContext().Request.Query[&quot;group&quot;].FirstOrDefault();\n          _logger.LogDebug($&quot;OnConnectedAsync----userId:&#123;userId&#125;,groups:&#123;groups&#125;,connectionId:&#123; Context.ConnectionId&#125;&quot;);\n          if (!string.IsNullOrWhiteSpace(userId))\n          &#123;\n              await _signalrRedisHelper.AddConnectForUserAsync(userId, Context.ConnectionId);\n              await JoinToGroup(userId, Context.ConnectionId, groups?.Split(&#39;,&#39;));\n              await DealOnLineNotify(userId, Context.ConnectionId);\n          &#125;\n          await base.OnConnectedAsync();\n      &#125;\n\n      public override async Task OnDisconnectedAsync(Exception exception)\n      &#123;\n          var userId = Context.User.Identity.Name;\n          var groups = Context.GetHttpContext().Request.Query[&quot;group&quot;].FirstOrDefault();\n          _logger.LogDebug($&quot;OnDisconnectedAsync----userId:&#123;userId&#125;,groups:&#123;groups&#125;,connectionId:&#123; Context.ConnectionId&#125;&quot;);\n          if (!string.IsNullOrWhiteSpace(userId))\n          &#123;\n              await _signalrRedisHelper.RemoveConnectForUserAsync(userId, Context.ConnectionId);\n              await DealOffLineNotify(userId,Context.ConnectionId);\n          &#125;\n          await LeaveFromGroup(Context.ConnectionId, groups?.Split(&#39;,&#39;));\n          await base.OnDisconnectedAsync(exception);\n      &#125;\n\n      /// &lt;summary&gt;\n      /// 加入组\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;groupName&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task JoinToGroup(string userId,string connectionId,params string[] groups)\n      &#123;\n          if (!string.IsNullOrWhiteSpace(userId)&amp;&amp; groups!=null&amp;&amp;groups.Length&gt;0)\n          &#123;\n              foreach (var group in groups)\n              &#123;\n                  await Groups.AddToGroupAsync(connectionId, group);\n                  await _signalrRedisHelper.AddUserForGroupAsync(group, connectionId, userId);\n\n                  // await Clients.Group(group).OnJoinGroup(new &#123; ConnectId = connectionId, UserId = userId, GroupName = group &#125;);\n              &#125;\n          &#125;\n      &#125;\n\n      /// &lt;summary&gt;\n      /// 从组中移除\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;groupName&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task LeaveFromGroup(string connectionId,params string[] groups)\n      &#123;\n          if (groups != null &amp;&amp; groups.Length &gt; 0)\n          &#123;\n              foreach (var group in groups)\n              &#123;\n                  await Groups.RemoveFromGroupAsync(connectionId, group);\n                  await _signalrRedisHelper.RemoveConnectFromGroupAsync(group,connectionId);\n                  // await Clients.Group(group).OnLeaveGroup(new &#123; ConnectId = connectionId, GroupName = group &#125;);\n              &#125;\n          &#125;\n      &#125;\n\n      /// &lt;summary&gt;\n      /// 处理上线通知(只有用户第一个连接才通知)\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;userId&quot;&gt;&lt;/param&gt;\n      /// &lt;param name=&quot;connectionId&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task DealOnLineNotify(string userId,string connectionId) \n      &#123;\n          var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n          await Clients.All.OnLine(new OnLineData()\n          &#123;\n              UserId = userId,\n              ConnectionId = connectionId,\n              IsFirst = userConnectCount == 1\n          &#125;);\n      &#125;\n\n      /// &lt;summary&gt;\n      /// 处理下线通知(只有当用户一个连接都没了 才算下线)\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;userId&quot;&gt;&lt;/param&gt;\n      /// &lt;param name=&quot;connectionId&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task DealOffLineNotify(string userId,string connectionId)\n      &#123;\n          var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n          await Clients.All.OffLine(new OffLineData()\n          &#123;\n              UserId = userId,\n              ConnectionId = connectionId,\n              IsLast = userConnectCount == 0\n          &#125;);\n      &#125;\n  &#125;</code></pre>\n<p>  }</p>\n<pre><code>\n## 提供给业务系统调用的API\n- [POST] api/notify/post \napplication/json形式 提交，数据格式如下\n``` json\n&#123;\n  GroupIds:&#39;&#39;, // [可空] 组id集合，多个用,隔开\n  UserIds:&#39;&#39;,// [可空] 用户id集合，多个用,隔开\n  ExcludeUsers:boolean, // 是否排除用户列表中的用户\n  NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n&#125;</code></pre>\n<ul>\n<li><p>有GroupIds</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给指定的组中所有用户(排除掉UserIds部分)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给组中指定(UserIds中指定的)的这些用户</p>\n</li>\n</ul>\n</li>\n<li><p>无GroupIds</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给当前所有连接(排除掉UserIds部分的用户)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给指定用户(UserIds中指定的用户)</p>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>[POST] api/notify/postConnects<br>application/json提交，数据格式如下</p>\n<pre class=\" language-json\"><code class=\"language-json\">&amp;#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n  Connects<span class=\"token operator\">:</span>''<span class=\"token punctuation\">,</span> // 连接Id集合，多个用，隔开\n  NotifyObj<span class=\"token operator\">:</span>Object // 通知的对象，任意类型(总大小不要超过36k<span class=\"token punctuation\">)</span>\n&amp;#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span></code></pre>\n<ul>\n<li>有UserId<ul>\n<li>ExcludeConnectId=true<br>给改用户除指定的ConnectId外的所有连接端推送</li>\n<li>ExcludeConnectId=false<br>跟没指定UserId一致</li>\n</ul>\n</li>\n<li>无UserId<br>给指定连接Id推送</li>\n</ul>\n</li>\n<li><p>[GET] api/users<br>获取在线用户Id列表</p>\n</li>\n<li><p>[GET] api/groups<br>获取在线组列表</p>\n</li>\n</ul>\n<h2 id=\"增加日志记录\"><a href=\"#增加日志记录\" class=\"headerlink\" title=\"增加日志记录\"></a>增加日志记录</h2><p>为了方便分析和定位问题，使用log4net来作为日志记录器。</p>\n<ul>\n<li><p>nuget 安装log4net<br>nuget 搜索 log4net，安装</p>\n</li>\n<li><p>Config中配置<br>在Config中注入ILoggerFactory，然后使用添加Log4Net,代码如下所示</p>\n<pre class=\" language-C#\"><code class=\"language-C#\">public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)\n&#123;\n  if (env.IsDevelopment())\n  &#123;\n      app.UseDeveloperExceptionPage();\n  &#125;\n  app.UseHsts();\n\n  loggerFactory.AddLog4Net();\n  ...\n&#125;</code></pre>\n</li>\n<li><p>添加log4net配置文件<br>更多配置请自行查找log4net官方配置文档</p>\n<pre class=\" language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?></span>\n<span class=\"token comment\" spellcheck=\"true\">&lt;!--LOG4日志级别 \n  0：TRACE；记录一些对程序员调试问题有帮助的信息, 其中可能包含一些敏感信息, 所以应该避免在生产环境中启用Trace日志。\n  1：DEBUG；记录一些在开发和调试阶段有用的短时变量(Short-term usefulness), 所以除非为了临时排除生产环境的故障，开发人员应该尽量避免在生产环境中启用Debug日志。\n  2：INFO；信息日志，记录应用程序的一些流程, 例如，记录当前api请求的url，请求参数等。\n  3：WARN；警告日志；记录应用程序中发生的不正常或者未预期的事件信息。这些信息中可能包含错误消息或者错误产生的条件, 例如, 文件未找到，用户不存在。\n  4：ERROR；错误日志；记录应用程序中某个操作产生的错误和异常信息，如对空值进行操作等。\n  5：FATAL；毁灭性错误；记录一些需要立刻修复的问题。例如数据丢失，磁盘空间不足。\ntrace&lt;debug&lt;info&lt;warn&lt;error&lt;fatal --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>log4net</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ErrorRollingFileAppender<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>log4net.Appender.RollingFileAppender<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>file</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>AppData\\\\logs\\\\<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appendToFile</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rollingStyle</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Date<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>datePattern</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>yyyy-MM-dd-<span class=\"token punctuation\">'</span>error.log<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maxSizeRollBackups</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>staticLogFileName</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoding</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>layout</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>log4net.Layout.PatternLayout<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>conversionPattern</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>%-5level %date [%-5.5thread] %-40.40logger - %message%newline<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>layout</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>filter</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>log4net.Filter.LevelRangeFilter<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>levelMin</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ERROR<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>levelMax</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>FATAL<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>filter</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>appender</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>root</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>level</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>All<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender-ref</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ErrorRollingFileAppender<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>root</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>log4net</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>至此，log4net配置完毕</p>\n</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/10/03/dotnetcore/signalr/06-analysis/\">.net core 3.0 Signalr - 06 业务实现-业务分析</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/10/05/dotnetcore/signalr/08-clientdemo/\">.net core 3.0 Signalr - 08 业务实现-客户端demo</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</p>","more":"<h2 id=\"Hub的管理\"><a href=\"#Hub的管理\" class=\"headerlink\" title=\"Hub的管理\"></a>Hub的管理</h2><ul>\n<li><p>重写OnConnectedAsync<br>从连接信息中获取UserId、Groups,ConnectId，并实现这三者的关系，存放于redis中<br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Server/Hubs/NotifyHub.cs\">代码请查看</a></p>\n<pre><code class=\"C#\">using CTS.Signalr.Server.Cores;\nusing CTS.Signalr.Server.Dtos;\nusing Microsoft.AspNetCore.Authorization;\nusing Microsoft.AspNetCore.SignalR;\nusing Microsoft.Extensions.Logging;\nusing System;\nusing System.Linq;\nusing System.Threading.Tasks;\n\nnamespace CTS.Signalr.Server.Hubs\n&#123;\n    /// &lt;summary&gt;\n    /// 服务端接口\n    /// &lt;/summary&gt;\n    public interface IServerNotifyHub\n    &#123;\n\n    &#125;\n\n    /// &lt;summary&gt;\n    /// 客户端使用的接口\n    /// &lt;/summary&gt;\n    public interface IClientNotifyHub\n    &#123;\n        Task OnNotify(object data);\n\n        Task OnLine(object data);\n\n        Task OffLine(object data);\n    &#125;\n\n</code></pre>\n</li>\n</ul>\n<pre><code>  [Authorize]\n  public class NotifyHub : Hub&lt;IClientNotifyHub&gt;,IServerNotifyHub\n  &#123;\n      private readonly SignalrRedisHelper _signalrRedisHelper;\n      private readonly ILogger _logger;\n\n      public NotifyHub(SignalrRedisHelper signalrRedisHelper, ILogger&lt;NotifyHub&gt; logger)\n      &#123;\n          _signalrRedisHelper = signalrRedisHelper;\n          _logger = logger;\n      &#125;\n\n      public override async Task OnConnectedAsync()\n      &#123;\n          //await Clients.All.OnNotify(new &#123; UserId= Context.User.Identity.Name, Name=Context.User.Identity.Name, ConnectId = Context.ConnectionId &#125;);\n          var userId= Context.User.Identity.Name;\n          var groups=Context.GetHttpContext().Request.Query[&quot;group&quot;].FirstOrDefault();\n          _logger.LogDebug($&quot;OnConnectedAsync----userId:&#123;userId&#125;,groups:&#123;groups&#125;,connectionId:&#123; Context.ConnectionId&#125;&quot;);\n          if (!string.IsNullOrWhiteSpace(userId))\n          &#123;\n              await _signalrRedisHelper.AddConnectForUserAsync(userId, Context.ConnectionId);\n              await JoinToGroup(userId, Context.ConnectionId, groups?.Split(&#39;,&#39;));\n              await DealOnLineNotify(userId, Context.ConnectionId);\n          &#125;\n          await base.OnConnectedAsync();\n      &#125;\n\n      public override async Task OnDisconnectedAsync(Exception exception)\n      &#123;\n          var userId = Context.User.Identity.Name;\n          var groups = Context.GetHttpContext().Request.Query[&quot;group&quot;].FirstOrDefault();\n          _logger.LogDebug($&quot;OnDisconnectedAsync----userId:&#123;userId&#125;,groups:&#123;groups&#125;,connectionId:&#123; Context.ConnectionId&#125;&quot;);\n          if (!string.IsNullOrWhiteSpace(userId))\n          &#123;\n              await _signalrRedisHelper.RemoveConnectForUserAsync(userId, Context.ConnectionId);\n              await DealOffLineNotify(userId,Context.ConnectionId);\n          &#125;\n          await LeaveFromGroup(Context.ConnectionId, groups?.Split(&#39;,&#39;));\n          await base.OnDisconnectedAsync(exception);\n      &#125;\n\n      /// &lt;summary&gt;\n      /// 加入组\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;groupName&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task JoinToGroup(string userId,string connectionId,params string[] groups)\n      &#123;\n          if (!string.IsNullOrWhiteSpace(userId)&amp;&amp; groups!=null&amp;&amp;groups.Length&gt;0)\n          &#123;\n              foreach (var group in groups)\n              &#123;\n                  await Groups.AddToGroupAsync(connectionId, group);\n                  await _signalrRedisHelper.AddUserForGroupAsync(group, connectionId, userId);\n\n                  // await Clients.Group(group).OnJoinGroup(new &#123; ConnectId = connectionId, UserId = userId, GroupName = group &#125;);\n              &#125;\n          &#125;\n      &#125;\n\n      /// &lt;summary&gt;\n      /// 从组中移除\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;groupName&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task LeaveFromGroup(string connectionId,params string[] groups)\n      &#123;\n          if (groups != null &amp;&amp; groups.Length &gt; 0)\n          &#123;\n              foreach (var group in groups)\n              &#123;\n                  await Groups.RemoveFromGroupAsync(connectionId, group);\n                  await _signalrRedisHelper.RemoveConnectFromGroupAsync(group,connectionId);\n                  // await Clients.Group(group).OnLeaveGroup(new &#123; ConnectId = connectionId, GroupName = group &#125;);\n              &#125;\n          &#125;\n      &#125;\n\n      /// &lt;summary&gt;\n      /// 处理上线通知(只有用户第一个连接才通知)\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;userId&quot;&gt;&lt;/param&gt;\n      /// &lt;param name=&quot;connectionId&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task DealOnLineNotify(string userId,string connectionId) \n      &#123;\n          var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n          await Clients.All.OnLine(new OnLineData()\n          &#123;\n              UserId = userId,\n              ConnectionId = connectionId,\n              IsFirst = userConnectCount == 1\n          &#125;);\n      &#125;\n\n      /// &lt;summary&gt;\n      /// 处理下线通知(只有当用户一个连接都没了 才算下线)\n      /// &lt;/summary&gt;\n      /// &lt;param name=&quot;userId&quot;&gt;&lt;/param&gt;\n      /// &lt;param name=&quot;connectionId&quot;&gt;&lt;/param&gt;\n      /// &lt;returns&gt;&lt;/returns&gt;\n      private async Task DealOffLineNotify(string userId,string connectionId)\n      &#123;\n          var userConnectCount = await _signalrRedisHelper.GetConnectsCountByUserAsync(userId);\n          await Clients.All.OffLine(new OffLineData()\n          &#123;\n              UserId = userId,\n              ConnectionId = connectionId,\n              IsLast = userConnectCount == 0\n          &#125;);\n      &#125;\n  &#125;</code></pre>\n<p>  }</p>\n<pre><code>\n## 提供给业务系统调用的API\n- [POST] api/notify/post \napplication/json形式 提交，数据格式如下\n``` json\n&#123;\n  GroupIds:&#39;&#39;, // [可空] 组id集合，多个用,隔开\n  UserIds:&#39;&#39;,// [可空] 用户id集合，多个用,隔开\n  ExcludeUsers:boolean, // 是否排除用户列表中的用户\n  NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n&#125;</code></pre>\n<ul>\n<li><p>有GroupIds</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给指定的组中所有用户(排除掉UserIds部分)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给组中指定(UserIds中指定的)的这些用户</p>\n</li>\n</ul>\n</li>\n<li><p>无GroupIds</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给当前所有连接(排除掉UserIds部分的用户)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给指定用户(UserIds中指定的用户)</p>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>[POST] api/notify/postConnects<br>application/json提交，数据格式如下</p>\n<pre><code class=\"json\">&#123;\n  Connects:&#39;&#39;, // 连接Id集合，多个用，隔开\n  NotifyObj:Object // 通知的对象，任意类型(总大小不要超过36k)\n&#125;</code></pre>\n<ul>\n<li>有UserId<ul>\n<li>ExcludeConnectId=true<br>给改用户除指定的ConnectId外的所有连接端推送</li>\n<li>ExcludeConnectId=false<br>跟没指定UserId一致</li>\n</ul>\n</li>\n<li>无UserId<br>给指定连接Id推送</li>\n</ul>\n</li>\n<li><p>[GET] api/users<br>获取在线用户Id列表</p>\n</li>\n<li><p>[GET] api/groups<br>获取在线组列表</p>\n</li>\n</ul>\n<h2 id=\"增加日志记录\"><a href=\"#增加日志记录\" class=\"headerlink\" title=\"增加日志记录\"></a>增加日志记录</h2><p>为了方便分析和定位问题，使用log4net来作为日志记录器。</p>\n<ul>\n<li><p>nuget 安装log4net<br>nuget 搜索 log4net，安装</p>\n</li>\n<li><p>Config中配置<br>在Config中注入ILoggerFactory，然后使用添加Log4Net,代码如下所示</p>\n<pre><code class=\"C#\">public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)\n&#123;\n  if (env.IsDevelopment())\n  &#123;\n      app.UseDeveloperExceptionPage();\n  &#125;\n  app.UseHsts();\n\n  loggerFactory.AddLog4Net();\n  ...\n&#125;</code></pre>\n</li>\n<li><p>添加log4net配置文件<br>更多配置请自行查找log4net官方配置文档</p>\n<pre><code class=\"xml\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;\n&lt;!--LOG4日志级别 \n  0：TRACE；记录一些对程序员调试问题有帮助的信息, 其中可能包含一些敏感信息, 所以应该避免在生产环境中启用Trace日志。\n  1：DEBUG；记录一些在开发和调试阶段有用的短时变量(Short-term usefulness), 所以除非为了临时排除生产环境的故障，开发人员应该尽量避免在生产环境中启用Debug日志。\n  2：INFO；信息日志，记录应用程序的一些流程, 例如，记录当前api请求的url，请求参数等。\n  3：WARN；警告日志；记录应用程序中发生的不正常或者未预期的事件信息。这些信息中可能包含错误消息或者错误产生的条件, 例如, 文件未找到，用户不存在。\n  4：ERROR；错误日志；记录应用程序中某个操作产生的错误和异常信息，如对空值进行操作等。\n  5：FATAL；毁灭性错误；记录一些需要立刻修复的问题。例如数据丢失，磁盘空间不足。\ntrace&lt;debug&lt;info&lt;warn&lt;error&lt;fatal --&gt;\n&lt;log4net&gt;\n&lt;appender name=&quot;ErrorRollingFileAppender&quot; type=&quot;log4net.Appender.RollingFileAppender&quot;&gt;\n  &lt;file value=&quot;AppData\\\\logs\\\\&quot; /&gt;\n  &lt;appendToFile value=&quot;true&quot; /&gt;\n  &lt;rollingStyle value=&quot;Date&quot;/&gt;\n  &lt;datePattern value=&quot;yyyy-MM-dd-&#39;error.log&#39;&quot;/&gt;\n  &lt;maxSizeRollBackups value=&quot;100&quot; /&gt;\n  &lt;staticLogFileName value=&quot;false&quot; /&gt;\n  &lt;encoding value=&quot;utf-8&quot; /&gt;\n  &lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;\n    &lt;conversionPattern value=&quot;%-5level %date [%-5.5thread] %-40.40logger - %message%newline&quot; /&gt;\n  &lt;/layout&gt;\n  &lt;filter type=&quot;log4net.Filter.LevelRangeFilter&quot;&gt;\n    &lt;levelMin value=&quot;ERROR&quot; /&gt;\n    &lt;levelMax value=&quot;FATAL&quot; /&gt;\n  &lt;/filter&gt;\n&lt;/appender&gt;\n\n&lt;root&gt;\n  &lt;level value=&quot;All&quot; /&gt;\n  &lt;appender-ref ref=&quot;ErrorRollingFileAppender&quot; /&gt;\n&lt;/root&gt;\n&lt;/log4net&gt;</code></pre>\n<p>至此，log4net配置完毕</p>\n</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/10/03/dotnetcore/signalr/06-analysis/\">.net core 3.0 Signalr - 06 业务实现-业务分析</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/10/05/dotnetcore/signalr/08-clientdemo/\">.net core 3.0 Signalr - 08 业务实现-客户端demo</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>"},{"title":".net core 3.0 Signalr - 06 业务实现-业务分析","date":"2019-10-03T12:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 06 业务实现-业务分析\n<!-- more -->\n\n## 业务需求\n1. 人-项目关系\n一个人可以属于多个项目，一个项目可以有多个人加入，通知的时候，可以通知项目内的所有人，也可以通知部分人或者某个责任人。\n2. 登录互斥\n同一个人不允许登录两次(不同浏览器或者不同电脑登)，后面登录的会将前面登录的人挤下线。\n3. 聊天\n可以私聊、也可以创建群聊、上线通知(多个连接的情况)\n4. 文件下载\n用户在界面上选择了多个文件，然后选择批量打包下载，后端后台线程进行压缩、压缩完成后通过signalr通知该用户(的某个连接,比如当前用户开了多个tab页，应该只能推送给操作的那个tab页)\n\n## 功能设计\n> 名词解释: 业务系统:具体业务功能的系统     推送系统:实际的Signalr系统，跟业务系统分开部署\n1. 将推送单独成一个子系统；支持单独部署，可一台服务器也可以多台，通过redis作为底板来分发到服务器\n2. 推送子系统端自定义管理用户、连接、组，业务系统调用的时候\n3. 推送系统开发一个api，给业务系统直接调用(当然这不是最佳选择，可以通过消息队列，支持重试、优先级等，性能会比http形式好很多)\n业务系统调用推送系统的时候传递参数包括，组、用户、推送数据对象，比如如下代码  \n  ``` C#\n  var send = new Send()\n  {\n      // 推送的组，多个用,隔开\n      GroupId = GroupId,\n      // 关联的UserId 多个用,隔开\n      UserIds= UserIds,\n      // 是否排除用户\n      ExcludeUsers=ExcludeUsers,\n      // 实际推送的对象\n      NotifyObj = new NotifyObj()\n      {\n          Data = Data,\n          NotifyType = NotifyType,\n          OpType= OpType\n      },\n  };\n  ``` \n* 有GroupId\n  * ExcludeUsers=true\n    推送给指定的组中所有用户(排除掉UserIds部分)\n\n  * ExcludeUsers=false\n    推送给组中指定(UserIds中指定的)的这些用户\n\n* 无GroupId\n  * ExcludeUsers=true\n    推送给当前所有连接(排除掉UserIds部分的用户)\n\n  * ExcludeUsers=false\n    推送给指定用户(UserIds中指定的用户)\n\n## 架构设计\n1. 组、用户、连接的关系\n- 用户:[连接Id]\n一个用户用多个连接、以Set形式存redis中\n- 组:[连接Id:用户Id]\n以Redis中的Hash格式存储，以Group为Key，以连接Id为Name，以UserId为值，一个用户在组中可能多个连接(开多个浏览器tab页),这样设计的好处是可以满足以下的几种情况\n  * 给某个人推送\n  从redis中直接根据该用户的UserId查询该用户的所有连接，然后通过连接推送即可\n  * 给某个组推送\n  从redis中根据组名查询出所有的连接Id，通过连接直接推送\n  * 给某个组中的某些人推\n  这个时候不能根据人查连接Id，需要先根据组得到组中的人、连接Id，然后只给组中这些人对应的连接推送\n  * 用户上线的时候\n  在redis中存储一份用户与连接的关系；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id\n  * 用户再开一个浏览器tab页\n  在redis中该用户对应的连接中增加新的连接Id；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id(因为是一连接Id为name的，然而连接Id是不重复的，所以是可以存着同一个组、同一个用户不同连接这种情况的)\n  * 用户退出页面\n  在redis中找到该用户，从redis中删除改用户的找个连接Id，组的情况同样处理\n  * 给某个用户的某个连接Id推送\n  比如:用户点击打包下载，服务器端后台线程进行打包、压缩，完成后推送给指定的连接Id，前端界面再进行处理下载\n\n至此，业务分析完毕，更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联](/2019/10/02/dotnetcore/signalr/05-jwt/) \n|   下一篇  |   [.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接](/2019/10/04/dotnetcore/signalr/07-self-manager/)  \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/06-analysis.md","raw":"---\ntitle: .net core 3.0 Signalr - 06 业务实现-业务分析\ndate: '2019-10-03 20:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\n  - .NetCore\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 06 业务实现-业务分析\n<!-- more -->\n\n## 业务需求\n1. 人-项目关系\n一个人可以属于多个项目，一个项目可以有多个人加入，通知的时候，可以通知项目内的所有人，也可以通知部分人或者某个责任人。\n2. 登录互斥\n同一个人不允许登录两次(不同浏览器或者不同电脑登)，后面登录的会将前面登录的人挤下线。\n3. 聊天\n可以私聊、也可以创建群聊、上线通知(多个连接的情况)\n4. 文件下载\n用户在界面上选择了多个文件，然后选择批量打包下载，后端后台线程进行压缩、压缩完成后通过signalr通知该用户(的某个连接,比如当前用户开了多个tab页，应该只能推送给操作的那个tab页)\n\n## 功能设计\n> 名词解释: 业务系统:具体业务功能的系统     推送系统:实际的Signalr系统，跟业务系统分开部署\n1. 将推送单独成一个子系统；支持单独部署，可一台服务器也可以多台，通过redis作为底板来分发到服务器\n2. 推送子系统端自定义管理用户、连接、组，业务系统调用的时候\n3. 推送系统开发一个api，给业务系统直接调用(当然这不是最佳选择，可以通过消息队列，支持重试、优先级等，性能会比http形式好很多)\n业务系统调用推送系统的时候传递参数包括，组、用户、推送数据对象，比如如下代码  \n  ``` C#\n  var send = new Send()\n  {\n      // 推送的组，多个用,隔开\n      GroupId = GroupId,\n      // 关联的UserId 多个用,隔开\n      UserIds= UserIds,\n      // 是否排除用户\n      ExcludeUsers=ExcludeUsers,\n      // 实际推送的对象\n      NotifyObj = new NotifyObj()\n      {\n          Data = Data,\n          NotifyType = NotifyType,\n          OpType= OpType\n      },\n  };\n  ``` \n* 有GroupId\n  * ExcludeUsers=true\n    推送给指定的组中所有用户(排除掉UserIds部分)\n\n  * ExcludeUsers=false\n    推送给组中指定(UserIds中指定的)的这些用户\n\n* 无GroupId\n  * ExcludeUsers=true\n    推送给当前所有连接(排除掉UserIds部分的用户)\n\n  * ExcludeUsers=false\n    推送给指定用户(UserIds中指定的用户)\n\n## 架构设计\n1. 组、用户、连接的关系\n- 用户:[连接Id]\n一个用户用多个连接、以Set形式存redis中\n- 组:[连接Id:用户Id]\n以Redis中的Hash格式存储，以Group为Key，以连接Id为Name，以UserId为值，一个用户在组中可能多个连接(开多个浏览器tab页),这样设计的好处是可以满足以下的几种情况\n  * 给某个人推送\n  从redis中直接根据该用户的UserId查询该用户的所有连接，然后通过连接推送即可\n  * 给某个组推送\n  从redis中根据组名查询出所有的连接Id，通过连接直接推送\n  * 给某个组中的某些人推\n  这个时候不能根据人查连接Id，需要先根据组得到组中的人、连接Id，然后只给组中这些人对应的连接推送\n  * 用户上线的时候\n  在redis中存储一份用户与连接的关系；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id\n  * 用户再开一个浏览器tab页\n  在redis中该用户对应的连接中增加新的连接Id；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id(因为是一连接Id为name的，然而连接Id是不重复的，所以是可以存着同一个组、同一个用户不同连接这种情况的)\n  * 用户退出页面\n  在redis中找到该用户，从redis中删除改用户的找个连接Id，组的情况同样处理\n  * 给某个用户的某个连接Id推送\n  比如:用户点击打包下载，服务器端后台线程进行打包、压缩，完成后推送给指定的连接Id，前端界面再进行处理下载\n\n至此，业务分析完毕，更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |   [.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联](/2019/10/02/dotnetcore/signalr/05-jwt/) \n|   下一篇  |   [.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接](/2019/10/04/dotnetcore/signalr/07-self-manager/)  \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/06-analysis","published":1,"updated":"2020-12-29T01:09:09.535Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6x20048d8v8ciw7g9or","content":"<p>.net core 3.0 Signalr - 06 业务实现-业务分析</p>\n<a id=\"more\"></a>\n\n<h2 id=\"业务需求\"><a href=\"#业务需求\" class=\"headerlink\" title=\"业务需求\"></a>业务需求</h2><ol>\n<li>人-项目关系<br>一个人可以属于多个项目，一个项目可以有多个人加入，通知的时候，可以通知项目内的所有人，也可以通知部分人或者某个责任人。</li>\n<li>登录互斥<br>同一个人不允许登录两次(不同浏览器或者不同电脑登)，后面登录的会将前面登录的人挤下线。</li>\n<li>聊天<br>可以私聊、也可以创建群聊、上线通知(多个连接的情况)</li>\n<li>文件下载<br>用户在界面上选择了多个文件，然后选择批量打包下载，后端后台线程进行压缩、压缩完成后通过signalr通知该用户(的某个连接,比如当前用户开了多个tab页，应该只能推送给操作的那个tab页)</li>\n</ol>\n<h2 id=\"功能设计\"><a href=\"#功能设计\" class=\"headerlink\" title=\"功能设计\"></a>功能设计</h2><blockquote>\n<p>名词解释: 业务系统:具体业务功能的系统     推送系统:实际的Signalr系统，跟业务系统分开部署</p>\n</blockquote>\n<ol>\n<li>将推送单独成一个子系统；支持单独部署，可一台服务器也可以多台，通过redis作为底板来分发到服务器</li>\n<li>推送子系统端自定义管理用户、连接、组，业务系统调用的时候</li>\n<li>推送系统开发一个api，给业务系统直接调用(当然这不是最佳选择，可以通过消息队列，支持重试、优先级等，性能会比http形式好很多)<br>业务系统调用推送系统的时候传递参数包括，组、用户、推送数据对象，比如如下代码  <pre class=\" language-C#\"><code class=\"language-C#\">var send = new Send()\n&#123;\n   // 推送的组，多个用,隔开\n   GroupId = GroupId,\n   // 关联的UserId 多个用,隔开\n   UserIds= UserIds,\n   // 是否排除用户\n   ExcludeUsers=ExcludeUsers,\n   // 实际推送的对象\n   NotifyObj = new NotifyObj()\n   &#123;\n       Data = Data,\n       NotifyType = NotifyType,\n       OpType= OpType\n   &#125;,\n&#125;;</code></pre>\n</li>\n</ol>\n<ul>\n<li><p>有GroupId</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给指定的组中所有用户(排除掉UserIds部分)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给组中指定(UserIds中指定的)的这些用户</p>\n</li>\n</ul>\n</li>\n<li><p>无GroupId</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给当前所有连接(排除掉UserIds部分的用户)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给指定用户(UserIds中指定的用户)</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"架构设计\"><a href=\"#架构设计\" class=\"headerlink\" title=\"架构设计\"></a>架构设计</h2><ol>\n<li>组、用户、连接的关系</li>\n</ol>\n<ul>\n<li>用户:[连接Id]<br>一个用户用多个连接、以Set形式存redis中</li>\n<li>组:[连接Id:用户Id]<br>以Redis中的Hash格式存储，以Group为Key，以连接Id为Name，以UserId为值，一个用户在组中可能多个连接(开多个浏览器tab页),这样设计的好处是可以满足以下的几种情况<ul>\n<li>给某个人推送<br>从redis中直接根据该用户的UserId查询该用户的所有连接，然后通过连接推送即可</li>\n<li>给某个组推送<br>从redis中根据组名查询出所有的连接Id，通过连接直接推送</li>\n<li>给某个组中的某些人推<br>这个时候不能根据人查连接Id，需要先根据组得到组中的人、连接Id，然后只给组中这些人对应的连接推送</li>\n<li>用户上线的时候<br>在redis中存储一份用户与连接的关系；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id</li>\n<li>用户再开一个浏览器tab页<br>在redis中该用户对应的连接中增加新的连接Id；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id(因为是一连接Id为name的，然而连接Id是不重复的，所以是可以存着同一个组、同一个用户不同连接这种情况的)</li>\n<li>用户退出页面<br>在redis中找到该用户，从redis中删除改用户的找个连接Id，组的情况同样处理</li>\n<li>给某个用户的某个连接Id推送<br>比如:用户点击打包下载，服务器端后台线程进行打包、压缩，完成后推送给指定的连接Id，前端界面再进行处理下载</li>\n</ul>\n</li>\n</ul>\n<p>至此，业务分析完毕，更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/10/02/dotnetcore/signalr/05-jwt/\">.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/10/04/dotnetcore/signalr/07-self-manager/\">.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 06 业务实现-业务分析</p>","more":"<h2 id=\"业务需求\"><a href=\"#业务需求\" class=\"headerlink\" title=\"业务需求\"></a>业务需求</h2><ol>\n<li>人-项目关系<br>一个人可以属于多个项目，一个项目可以有多个人加入，通知的时候，可以通知项目内的所有人，也可以通知部分人或者某个责任人。</li>\n<li>登录互斥<br>同一个人不允许登录两次(不同浏览器或者不同电脑登)，后面登录的会将前面登录的人挤下线。</li>\n<li>聊天<br>可以私聊、也可以创建群聊、上线通知(多个连接的情况)</li>\n<li>文件下载<br>用户在界面上选择了多个文件，然后选择批量打包下载，后端后台线程进行压缩、压缩完成后通过signalr通知该用户(的某个连接,比如当前用户开了多个tab页，应该只能推送给操作的那个tab页)</li>\n</ol>\n<h2 id=\"功能设计\"><a href=\"#功能设计\" class=\"headerlink\" title=\"功能设计\"></a>功能设计</h2><blockquote>\n<p>名词解释: 业务系统:具体业务功能的系统     推送系统:实际的Signalr系统，跟业务系统分开部署</p>\n</blockquote>\n<ol>\n<li>将推送单独成一个子系统；支持单独部署，可一台服务器也可以多台，通过redis作为底板来分发到服务器</li>\n<li>推送子系统端自定义管理用户、连接、组，业务系统调用的时候</li>\n<li>推送系统开发一个api，给业务系统直接调用(当然这不是最佳选择，可以通过消息队列，支持重试、优先级等，性能会比http形式好很多)<br>业务系统调用推送系统的时候传递参数包括，组、用户、推送数据对象，比如如下代码  <pre><code class=\"C#\">var send = new Send()\n&#123;\n   // 推送的组，多个用,隔开\n   GroupId = GroupId,\n   // 关联的UserId 多个用,隔开\n   UserIds= UserIds,\n   // 是否排除用户\n   ExcludeUsers=ExcludeUsers,\n   // 实际推送的对象\n   NotifyObj = new NotifyObj()\n   &#123;\n       Data = Data,\n       NotifyType = NotifyType,\n       OpType= OpType\n   &#125;,\n&#125;;</code></pre>\n</li>\n</ol>\n<ul>\n<li><p>有GroupId</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给指定的组中所有用户(排除掉UserIds部分)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给组中指定(UserIds中指定的)的这些用户</p>\n</li>\n</ul>\n</li>\n<li><p>无GroupId</p>\n<ul>\n<li><p>ExcludeUsers=true<br>推送给当前所有连接(排除掉UserIds部分的用户)</p>\n</li>\n<li><p>ExcludeUsers=false<br>推送给指定用户(UserIds中指定的用户)</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"架构设计\"><a href=\"#架构设计\" class=\"headerlink\" title=\"架构设计\"></a>架构设计</h2><ol>\n<li>组、用户、连接的关系</li>\n</ol>\n<ul>\n<li>用户:[连接Id]<br>一个用户用多个连接、以Set形式存redis中</li>\n<li>组:[连接Id:用户Id]<br>以Redis中的Hash格式存储，以Group为Key，以连接Id为Name，以UserId为值，一个用户在组中可能多个连接(开多个浏览器tab页),这样设计的好处是可以满足以下的几种情况<ul>\n<li>给某个人推送<br>从redis中直接根据该用户的UserId查询该用户的所有连接，然后通过连接推送即可</li>\n<li>给某个组推送<br>从redis中根据组名查询出所有的连接Id，通过连接直接推送</li>\n<li>给某个组中的某些人推<br>这个时候不能根据人查连接Id，需要先根据组得到组中的人、连接Id，然后只给组中这些人对应的连接推送</li>\n<li>用户上线的时候<br>在redis中存储一份用户与连接的关系；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id</li>\n<li>用户再开一个浏览器tab页<br>在redis中该用户对应的连接中增加新的连接Id；如果有组的情况，同时以Hash形式存储组、连接Id、用户Id(因为是一连接Id为name的，然而连接Id是不重复的，所以是可以存着同一个组、同一个用户不同连接这种情况的)</li>\n<li>用户退出页面<br>在redis中找到该用户，从redis中删除改用户的找个连接Id，组的情况同样处理</li>\n<li>给某个用户的某个连接Id推送<br>比如:用户点击打包下载，服务器端后台线程进行打包、压缩，完成后推送给指定的连接Id，前端界面再进行处理下载</li>\n</ul>\n</li>\n</ul>\n<p>至此，业务分析完毕，更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/10/02/dotnetcore/signalr/05-jwt/\">.net core 3.0 Signalr - 05 使用jwt将用户跟signalr关联</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/10/04/dotnetcore/signalr/07-self-manager/\">.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>"},{"title":".net core 3.0 Signalr - 08 业务实现-客户端demo","date":"2019-10-05T12:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 08 业务实现-客户端demo\n<!-- more -->\n由于signalr作为一个单独的推送系统，跟业务系统是分离开的，所以此处模拟一个业务系统，新建一个.net core app项目\n\n## 模拟实现一个登录功能  \n我们的登录很简单，当进入系统，如果检测到用户未登录则跳转到登录页面，用户只需要输入用户名点击登录即算登录成功  \n- 配置ConfigServices方法 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L41-L47)\n  ``` C#\n  services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme)\n  .AddCookie(CookieAuthenticationDefaults.AuthenticationScheme, cookieOption =>\n  {\n      cookieOption.LoginPath = \"/Account/Login\";\n      cookieOption.AccessDeniedPath = \"/Account/Login\";\n  });\n  ```\n- 配置Config方法，配置认证、授权的请求管道 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L73-L74)\n  ``` C#\n  app.UseRouting();\n  app.UseAuthentication();\n  app.UseAuthorization();\n  ```\n- 接收登录的post请求，写cookie，跳转 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Controllers/AccountController.cs#L33-L59)\n\n## 前端页面实现\n首先在Layout页面引入需要的js文件(vue、signalr、msgpack5、signalr-protocol-msgpack)   [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Shared/_Layout.cshtml#L78-L81)  \n\n### 封装signalr连接相关js\nsignalr客户端js的操作就是，创建连接、监听推送,封装后端js如下   [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/wwwroot/js/initSignalr.js)  \n``` js\n/**\n * 初始化连接\n * @param {object} option 参数\n * @param {string} option.url 连接的url地址\n * @param {string} option.loggingLevel 日志级别,默认为 Error\n * @param {number} option.delay 延迟连接 默认为3000毫秒\n * @param {function} option.onStarted 启动时触发\n * @param {function} option.onLine 启动时触发\n * @param {function} option.offLine 启动时触发\n * @returns {object} 连接的实例\n */\nfunction initSignalr(option) {\n    var config = Object.assign(true, {\n        loggingLevel: signalR.LogLevel.Error,\n        delay: 3000,\n        url: ''\n    }, option);\n\n    var connection = new signalR.HubConnectionBuilder()\n        .configureLogging(config.loggingLevel)\n        .withUrl(config.url, {\n            accessTokenFactory: option.accessTokenFactory\n        })\n        .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol())\n        .withAutomaticReconnect([0, 2000, 5000, 10000, 20000])\n        .build();\n\n    connection.onreconnecting(function (info) {\n        console.info('----------------------------------signalr-- onreconnecting', info);\n    });\n\n    connection.onclose(function (err) {\n        console.info('--------------------------------signalr-- onclose', err);\n    });\n\n    connection.on('OnNotify', config.onNotify);\n\n    connection.on('OnLine', config.onLine);\n\n    connection.on('OffLine', config.offLine);\n\n    setTimeout(function () {\n        connection.start().then(function (data) {\n            option.onStarted && option.onStarted(data);\n        }).catch(function (error) {\n            console.error(error.toString());\n        });\n    }, option.delay);\n\n    return connection;\n}\n```\n\n### 调用封装的js初始化连接 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L183)  \n- 然后在Home/Index.cshtml中引入上面的js  \n- 在页面加载完后，调用初始化(案例中使用了vue)  \n在进入页面后会弹窗让用户输入加入的组，可以不输入也可以多个 \n  ``` js\n  function initConnect() {\n    $(\"#collectionUserInfo\").modal({\n        keyboard: false,\n        show: true,\n        backdrop: 'static'\n    })\n\n    $('#collectionUserInfo').on('hidden.bs.modal', function () {\n        var groups = $(\"#groups\").val()||'';\n        connect=initSignalr({\n            delay: 0,\n            url:`${notifyUrl}notify-hub?userId=${vm.userInfo.userName}&group=${groups}`,\n            loggingLevel: signalR.LogLevel.Error,\n            onNotify: dealNotify,\n            onLine: function (data) {\n                if (data.IsFirst) {\n                    getOnlineUsers();\n                }\n                getOnlineGroups();\n                vm.logs.push(`新连接上线：${JSON.stringify(data)}`);\n            },\n            offLine: function (data) {\n                if (data.IsLast) {\n                    getOnlineUsers();\n                }\n                getOnlineGroups();\n                vm.logs.push(`连接下线：${JSON.stringify(data)}`);\n            },\n            onStarted: function () {\n                getOnlineUsers();\n                getOnlineGroups();\n                vm.$set(vm.userInfo, 'connectionId', connect.connectionId);\n                vm.$set(vm.userInfo, 'groups', groups);\n                vm.logs.push('连接成功');\n            }\n        });\n    })\n    }\n  ```\nonNotify方法，如果仔细的话会看到里面的onNotify方法，所有的推送最终都会调用到该方法来进行分发。[查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L200)   \noffLine，当有客户端下线的时候会触发，data里面包含有用户Id、连接Id、是否该用户的最后一个连接,可根据需要使用[查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L201-L207)   \nonLine,当用户连接的时候会触发，data里面包含有用户Id、连接Id、是否该用户的第一个连接(用于用户上线后的逻辑处理)，可根据需要使用  [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L208-L214)   \nonStarted，当成功连接后触发，可用于做一些连接后的业务逻辑处理，可根据需要使用 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L215-L221)  \n\n### 获取当前用户信息、在线列表 \n在用户连接成功后，获取当前在线用户、用户组、当前用户信息,并设置到vue的data中 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L216-L217)  \n\n### 模拟一个任务分配\n在项目中心中，点击\"模拟推送待办\"按钮，将会向当前用户所在组中推送一条代码消息，可以登录不同账号、开多个tab页体验 \n点击事件代码位置 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L132-L141) \n``` js\nassignTaskToUser: function () {\n    var that = this;\n    $.ajax({\n        type: 'POST',\n        url: '/api/ServerProxy/AssignTaskToUser',\n        data: {\n            groups:that.userInfo.groups\n        }\n    })\n},\n```\n对应的推送解析代码 \n> 首先当有推送过来的时候，会首先进到onNotify方法，然后根据不同类型在分配到不同的js方法中  \n[查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L268-L279)   \n效果图  \n![20190927212304.png](http://qiniu.xxgtalk.cn/blog/images/20190927212304.png)\n\n### 模拟发送消息\n消息发送，可以选定组、人进行消息发送  \n[发送端代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L145-L157)  \n[解析端](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L281-L290)\n\n### 登录互斥\n登录互斥是指，当一个账号在A电脑登录，然后再在B电脑登录，最后的登录会排斥掉开始的登录，即，将A上的挤下线  \n首先用谷歌浏览器登录，输入用户名：xiexingen，然后连接  \n接着使用360急速浏览器登录，输入用户名:xiexingen 这个时候会发现谷歌浏览器中的登录已经退出，如图\n![20190927213637.png](http://qiniu.xxgtalk.cn/blog/images/20190927213637.png)\n> 必要条件: 不同浏览器、同一用户,比如:同一个浏览器，不同tab就不算(能共用cookie)\n\n### 文件下载(指定连接推送)\n文件下载的场景，用户在操作页面上选择了上千个文件，然后点击打包下载，这个时候可能需要很久时间才反应回来，那么这段时间如果让用户一直等待显然不妥，所以，当用户点击打包下载的时候，后端启用一个后台线程去打包、压缩，然后立即返回；用户可以继续操作，当服务器端打包好后推送给用户端，用户点击下载即可。\n此处分两种情况  \n1. 单连接推送\n用户开了多个tab页，在其中一个上下载文件，如果后端推送的时候，直接给该用户推，显然不妥；正确的做法一个是只给操作的那个tab页推，这就需要，调用服务器端业务api的时候，需要把当前tab页对应的连接id发送到服务器端，服务器端处理完业务后，调用推送服务器，告诉推送服务器只推我给你的这个连接的客户端，这样就能指定连接推送。\n2. 单用户排除某个连接的其他连接推送  \n这种情况比较少见，告诉推送服务器，给这个用户，除了某个连接外的其他所有连接推送\n\n模拟操作  \n点击第一个图中的\"打包下载文件\" 按钮，当前页面会受到文件下载的推送  \n在点击图二中的\"推送当前用户其他页面更新操作\"按钮，会发现出了当前tab页外，其他tab也都收到了推送消息，如下图\n![20190927214530.png](http://qiniu.xxgtalk.cn/blog/images/20190927214530.png)\n\n至此，signalr相关文章算是到此结束了，下一篇谈谈个人的一点心得以及里面存着的一些问题。\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |  [.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接](/2019/10/04/dotnetcore/signalr/07-self-manager/) \n|   下一篇  |   [.net core 3.0 Signalr - 09 待改进&交流](/2019/10/05/dotnetcore/signalr/09-todo/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/08-clientdemo.md","raw":"---\ntitle: .net core 3.0 Signalr - 08 业务实现-客户端demo\ndate: '2019-10-05 20:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\n  - .NetCore\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 08 业务实现-客户端demo\n<!-- more -->\n由于signalr作为一个单独的推送系统，跟业务系统是分离开的，所以此处模拟一个业务系统，新建一个.net core app项目\n\n## 模拟实现一个登录功能  \n我们的登录很简单，当进入系统，如果检测到用户未登录则跳转到登录页面，用户只需要输入用户名点击登录即算登录成功  \n- 配置ConfigServices方法 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L41-L47)\n  ``` C#\n  services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme)\n  .AddCookie(CookieAuthenticationDefaults.AuthenticationScheme, cookieOption =>\n  {\n      cookieOption.LoginPath = \"/Account/Login\";\n      cookieOption.AccessDeniedPath = \"/Account/Login\";\n  });\n  ```\n- 配置Config方法，配置认证、授权的请求管道 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L73-L74)\n  ``` C#\n  app.UseRouting();\n  app.UseAuthentication();\n  app.UseAuthorization();\n  ```\n- 接收登录的post请求，写cookie，跳转 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Controllers/AccountController.cs#L33-L59)\n\n## 前端页面实现\n首先在Layout页面引入需要的js文件(vue、signalr、msgpack5、signalr-protocol-msgpack)   [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Shared/_Layout.cshtml#L78-L81)  \n\n### 封装signalr连接相关js\nsignalr客户端js的操作就是，创建连接、监听推送,封装后端js如下   [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/wwwroot/js/initSignalr.js)  \n``` js\n/**\n * 初始化连接\n * @param {object} option 参数\n * @param {string} option.url 连接的url地址\n * @param {string} option.loggingLevel 日志级别,默认为 Error\n * @param {number} option.delay 延迟连接 默认为3000毫秒\n * @param {function} option.onStarted 启动时触发\n * @param {function} option.onLine 启动时触发\n * @param {function} option.offLine 启动时触发\n * @returns {object} 连接的实例\n */\nfunction initSignalr(option) {\n    var config = Object.assign(true, {\n        loggingLevel: signalR.LogLevel.Error,\n        delay: 3000,\n        url: ''\n    }, option);\n\n    var connection = new signalR.HubConnectionBuilder()\n        .configureLogging(config.loggingLevel)\n        .withUrl(config.url, {\n            accessTokenFactory: option.accessTokenFactory\n        })\n        .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol())\n        .withAutomaticReconnect([0, 2000, 5000, 10000, 20000])\n        .build();\n\n    connection.onreconnecting(function (info) {\n        console.info('----------------------------------signalr-- onreconnecting', info);\n    });\n\n    connection.onclose(function (err) {\n        console.info('--------------------------------signalr-- onclose', err);\n    });\n\n    connection.on('OnNotify', config.onNotify);\n\n    connection.on('OnLine', config.onLine);\n\n    connection.on('OffLine', config.offLine);\n\n    setTimeout(function () {\n        connection.start().then(function (data) {\n            option.onStarted && option.onStarted(data);\n        }).catch(function (error) {\n            console.error(error.toString());\n        });\n    }, option.delay);\n\n    return connection;\n}\n```\n\n### 调用封装的js初始化连接 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L183)  \n- 然后在Home/Index.cshtml中引入上面的js  \n- 在页面加载完后，调用初始化(案例中使用了vue)  \n在进入页面后会弹窗让用户输入加入的组，可以不输入也可以多个 \n  ``` js\n  function initConnect() {\n    $(\"#collectionUserInfo\").modal({\n        keyboard: false,\n        show: true,\n        backdrop: 'static'\n    })\n\n    $('#collectionUserInfo').on('hidden.bs.modal', function () {\n        var groups = $(\"#groups\").val()||'';\n        connect=initSignalr({\n            delay: 0,\n            url:`${notifyUrl}notify-hub?userId=${vm.userInfo.userName}&group=${groups}`,\n            loggingLevel: signalR.LogLevel.Error,\n            onNotify: dealNotify,\n            onLine: function (data) {\n                if (data.IsFirst) {\n                    getOnlineUsers();\n                }\n                getOnlineGroups();\n                vm.logs.push(`新连接上线：${JSON.stringify(data)}`);\n            },\n            offLine: function (data) {\n                if (data.IsLast) {\n                    getOnlineUsers();\n                }\n                getOnlineGroups();\n                vm.logs.push(`连接下线：${JSON.stringify(data)}`);\n            },\n            onStarted: function () {\n                getOnlineUsers();\n                getOnlineGroups();\n                vm.$set(vm.userInfo, 'connectionId', connect.connectionId);\n                vm.$set(vm.userInfo, 'groups', groups);\n                vm.logs.push('连接成功');\n            }\n        });\n    })\n    }\n  ```\nonNotify方法，如果仔细的话会看到里面的onNotify方法，所有的推送最终都会调用到该方法来进行分发。[查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L200)   \noffLine，当有客户端下线的时候会触发，data里面包含有用户Id、连接Id、是否该用户的最后一个连接,可根据需要使用[查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L201-L207)   \nonLine,当用户连接的时候会触发，data里面包含有用户Id、连接Id、是否该用户的第一个连接(用于用户上线后的逻辑处理)，可根据需要使用  [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L208-L214)   \nonStarted，当成功连接后触发，可用于做一些连接后的业务逻辑处理，可根据需要使用 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L215-L221)  \n\n### 获取当前用户信息、在线列表 \n在用户连接成功后，获取当前在线用户、用户组、当前用户信息,并设置到vue的data中 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L216-L217)  \n\n### 模拟一个任务分配\n在项目中心中，点击\"模拟推送待办\"按钮，将会向当前用户所在组中推送一条代码消息，可以登录不同账号、开多个tab页体验 \n点击事件代码位置 [查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L132-L141) \n``` js\nassignTaskToUser: function () {\n    var that = this;\n    $.ajax({\n        type: 'POST',\n        url: '/api/ServerProxy/AssignTaskToUser',\n        data: {\n            groups:that.userInfo.groups\n        }\n    })\n},\n```\n对应的推送解析代码 \n> 首先当有推送过来的时候，会首先进到onNotify方法，然后根据不同类型在分配到不同的js方法中  \n[查看代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L268-L279)   \n效果图  \n![20190927212304.png](http://qiniu.xxgtalk.cn/blog/images/20190927212304.png)\n\n### 模拟发送消息\n消息发送，可以选定组、人进行消息发送  \n[发送端代码](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L145-L157)  \n[解析端](https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L281-L290)\n\n### 登录互斥\n登录互斥是指，当一个账号在A电脑登录，然后再在B电脑登录，最后的登录会排斥掉开始的登录，即，将A上的挤下线  \n首先用谷歌浏览器登录，输入用户名：xiexingen，然后连接  \n接着使用360急速浏览器登录，输入用户名:xiexingen 这个时候会发现谷歌浏览器中的登录已经退出，如图\n![20190927213637.png](http://qiniu.xxgtalk.cn/blog/images/20190927213637.png)\n> 必要条件: 不同浏览器、同一用户,比如:同一个浏览器，不同tab就不算(能共用cookie)\n\n### 文件下载(指定连接推送)\n文件下载的场景，用户在操作页面上选择了上千个文件，然后点击打包下载，这个时候可能需要很久时间才反应回来，那么这段时间如果让用户一直等待显然不妥，所以，当用户点击打包下载的时候，后端启用一个后台线程去打包、压缩，然后立即返回；用户可以继续操作，当服务器端打包好后推送给用户端，用户点击下载即可。\n此处分两种情况  \n1. 单连接推送\n用户开了多个tab页，在其中一个上下载文件，如果后端推送的时候，直接给该用户推，显然不妥；正确的做法一个是只给操作的那个tab页推，这就需要，调用服务器端业务api的时候，需要把当前tab页对应的连接id发送到服务器端，服务器端处理完业务后，调用推送服务器，告诉推送服务器只推我给你的这个连接的客户端，这样就能指定连接推送。\n2. 单用户排除某个连接的其他连接推送  \n这种情况比较少见，告诉推送服务器，给这个用户，除了某个连接外的其他所有连接推送\n\n模拟操作  \n点击第一个图中的\"打包下载文件\" 按钮，当前页面会受到文件下载的推送  \n在点击图二中的\"推送当前用户其他页面更新操作\"按钮，会发现出了当前tab页外，其他tab也都收到了推送消息，如下图\n![20190927214530.png](http://qiniu.xxgtalk.cn/blog/images/20190927214530.png)\n\n至此，signalr相关文章算是到此结束了，下一篇谈谈个人的一点心得以及里面存着的一些问题。\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |  [.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接](/2019/10/04/dotnetcore/signalr/07-self-manager/) \n|   下一篇  |   [.net core 3.0 Signalr - 09 待改进&交流](/2019/10/05/dotnetcore/signalr/09-todo/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/08-clientdemo","published":1,"updated":"2020-12-29T01:09:09.535Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6x5004cd8v8elcv21bu","content":"<p>.net core 3.0 Signalr - 08 业务实现-客户端demo</p>\n<a id=\"more\"></a>\n<p>由于signalr作为一个单独的推送系统，跟业务系统是分离开的，所以此处模拟一个业务系统，新建一个.net core app项目</p>\n<h2 id=\"模拟实现一个登录功能\"><a href=\"#模拟实现一个登录功能\" class=\"headerlink\" title=\"模拟实现一个登录功能\"></a>模拟实现一个登录功能</h2><p>我们的登录很简单，当进入系统，如果检测到用户未登录则跳转到登录页面，用户只需要输入用户名点击登录即算登录成功  </p>\n<ul>\n<li>配置ConfigServices方法 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L41-L47\">查看代码</a><pre class=\" language-C#\"><code class=\"language-C#\">services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme)\n.AddCookie(CookieAuthenticationDefaults.AuthenticationScheme, cookieOption =>\n&#123;\n    cookieOption.LoginPath = \"/Account/Login\";\n    cookieOption.AccessDeniedPath = \"/Account/Login\";\n&#125;);</code></pre>\n</li>\n<li>配置Config方法，配置认证、授权的请求管道 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L73-L74\">查看代码</a><pre class=\" language-C#\"><code class=\"language-C#\">app.UseRouting();\napp.UseAuthentication();\napp.UseAuthorization();</code></pre>\n</li>\n<li>接收登录的post请求，写cookie，跳转 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Controllers/AccountController.cs#L33-L59\">查看代码</a></li>\n</ul>\n<h2 id=\"前端页面实现\"><a href=\"#前端页面实现\" class=\"headerlink\" title=\"前端页面实现\"></a>前端页面实现</h2><p>首先在Layout页面引入需要的js文件(vue、signalr、msgpack5、signalr-protocol-msgpack)   <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Shared/_Layout.cshtml#L78-L81\">查看代码</a>  </p>\n<h3 id=\"封装signalr连接相关js\"><a href=\"#封装signalr连接相关js\" class=\"headerlink\" title=\"封装signalr连接相关js\"></a>封装signalr连接相关js</h3><p>signalr客户端js的操作就是，创建连接、监听推送,封装后端js如下   <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/wwwroot/js/initSignalr.js\">查看代码</a>  </p>\n<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token comment\" spellcheck=\"true\">/**\n * 初始化连接\n * @param &amp;#123;object&amp;#125; option 参数\n * @param &amp;#123;string&amp;#125; option.url 连接的url地址\n * @param &amp;#123;string&amp;#125; option.loggingLevel 日志级别,默认为 Error\n * @param &amp;#123;number&amp;#125; option.delay 延迟连接 默认为3000毫秒\n * @param &amp;#123;function&amp;#125; option.onStarted 启动时触发\n * @param &amp;#123;function&amp;#125; option.onLine 启动时触发\n * @param &amp;#123;function&amp;#125; option.offLine 启动时触发\n * @returns &amp;#123;object&amp;#125; 连接的实例\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">initSignalr</span><span class=\"token punctuation\">(</span>option<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> config <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n        loggingLevel<span class=\"token punctuation\">:</span> signalR<span class=\"token punctuation\">.</span>LogLevel<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">,</span>\n        delay<span class=\"token punctuation\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n        url<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span>\n    <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span> option<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">var</span> connection <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">signalR<span class=\"token punctuation\">.</span>HubConnectionBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">configureLogging</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>loggingLevel<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">withUrl</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n            accessTokenFactory<span class=\"token punctuation\">:</span> option<span class=\"token punctuation\">.</span>accessTokenFactory\n        <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">withHubProtocol</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">signalR<span class=\"token punctuation\">.</span>protocols<span class=\"token punctuation\">.</span>msgpack<span class=\"token punctuation\">.</span>MessagePackHubProtocol</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">withAutomaticReconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">onreconnecting</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'----------------------------------signalr-- onreconnecting'</span><span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">onclose</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--------------------------------signalr-- onclose'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'OnNotify'</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">.</span>onNotify<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'OnLine'</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">.</span>onLine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'OffLine'</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">.</span>offLine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n        connection<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n            option<span class=\"token punctuation\">.</span>onStarted <span class=\"token operator\">&amp;&amp;</span> option<span class=\"token punctuation\">.</span><span class=\"token function\">onStarted</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span> option<span class=\"token punctuation\">.</span>delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> connection<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span></code></pre>\n<h3 id=\"调用封装的js初始化连接-查看代码\"><a href=\"#调用封装的js初始化连接-查看代码\" class=\"headerlink\" title=\"调用封装的js初始化连接 查看代码\"></a>调用封装的js初始化连接 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L183\">查看代码</a></h3><ul>\n<li><p>然后在Home/Index.cshtml中引入上面的js  </p>\n</li>\n<li><p>在页面加载完后，调用初始化(案例中使用了vue)<br>在进入页面后会弹窗让用户输入加入的组，可以不输入也可以多个 </p>\n<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">initConnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#collectionUserInfo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">modal</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      keyboard<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      show<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      backdrop<span class=\"token punctuation\">:</span> <span class=\"token string\">'static'</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#collectionUserInfo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hidden.bs.modal'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">var</span> groups <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#groups\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span><span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n      connect<span class=\"token operator\">=</span><span class=\"token function\">initSignalr</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n          delay<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n          url<span class=\"token punctuation\">:</span><span class=\"token template-string\"><span class=\"token string\">`$&amp;#123;notifyUrl&amp;#125;notify-hub?userId=$&amp;#123;vm.userInfo.userName&amp;#125;&amp;group=$&amp;#123;groups&amp;#125;`</span></span><span class=\"token punctuation\">,</span>\n          loggingLevel<span class=\"token punctuation\">:</span> signalR<span class=\"token punctuation\">.</span>LogLevel<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">,</span>\n          onNotify<span class=\"token punctuation\">:</span> dealNotify<span class=\"token punctuation\">,</span>\n          onLine<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>IsFirst<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n                  <span class=\"token function\">getOnlineUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span>\n              <span class=\"token function\">getOnlineGroups</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              vm<span class=\"token punctuation\">.</span>logs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`新连接上线：$&amp;#123;JSON.stringify(data)&amp;#125;`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>\n          offLine<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n              <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>IsLast<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n                  <span class=\"token function\">getOnlineUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span>\n              <span class=\"token function\">getOnlineGroups</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              vm<span class=\"token punctuation\">.</span>logs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`连接下线：$&amp;#123;JSON.stringify(data)&amp;#125;`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>\n          onStarted<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n              <span class=\"token function\">getOnlineUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token function\">getOnlineGroups</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              vm<span class=\"token punctuation\">.</span>$<span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">.</span>userInfo<span class=\"token punctuation\">,</span> <span class=\"token string\">'connectionId'</span><span class=\"token punctuation\">,</span> connect<span class=\"token punctuation\">.</span>connectionId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              vm<span class=\"token punctuation\">.</span>$<span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>vm<span class=\"token punctuation\">.</span>userInfo<span class=\"token punctuation\">,</span> <span class=\"token string\">'groups'</span><span class=\"token punctuation\">,</span> groups<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              vm<span class=\"token punctuation\">.</span>logs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'连接成功'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span>\n      <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span></code></pre>\n<p>onNotify方法，如果仔细的话会看到里面的onNotify方法，所有的推送最终都会调用到该方法来进行分发。<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L200\">查看代码</a><br>offLine，当有客户端下线的时候会触发，data里面包含有用户Id、连接Id、是否该用户的最后一个连接,可根据需要使用<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L201-L207\">查看代码</a><br>onLine,当用户连接的时候会触发，data里面包含有用户Id、连接Id、是否该用户的第一个连接(用于用户上线后的逻辑处理)，可根据需要使用  <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L208-L214\">查看代码</a><br>onStarted，当成功连接后触发，可用于做一些连接后的业务逻辑处理，可根据需要使用 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L215-L221\">查看代码</a>  </p>\n</li>\n</ul>\n<h3 id=\"获取当前用户信息、在线列表\"><a href=\"#获取当前用户信息、在线列表\" class=\"headerlink\" title=\"获取当前用户信息、在线列表\"></a>获取当前用户信息、在线列表</h3><p>在用户连接成功后，获取当前在线用户、用户组、当前用户信息,并设置到vue的data中 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L216-L217\">查看代码</a>  </p>\n<h3 id=\"模拟一个任务分配\"><a href=\"#模拟一个任务分配\" class=\"headerlink\" title=\"模拟一个任务分配\"></a>模拟一个任务分配</h3><p>在项目中心中，点击”模拟推送待办”按钮，将会向当前用户所在组中推送一条代码消息，可以登录不同账号、开多个tab页体验<br>点击事件代码位置 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L132-L141\">查看代码</a> </p>\n<pre class=\" language-js\"><code class=\"language-js\">assignTaskToUser<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> that <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    $<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n        type<span class=\"token punctuation\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n        url<span class=\"token punctuation\">:</span> <span class=\"token string\">'/api/ServerProxy/AssignTaskToUser'</span><span class=\"token punctuation\">,</span>\n        data<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n            groups<span class=\"token punctuation\">:</span>that<span class=\"token punctuation\">.</span>userInfo<span class=\"token punctuation\">.</span>groups\n        <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span></code></pre>\n<p>对应的推送解析代码 </p>\n<blockquote>\n<p>首先当有推送过来的时候，会首先进到onNotify方法，然后根据不同类型在分配到不同的js方法中<br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L268-L279\">查看代码</a><br>效果图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190927212304.png\" alt=\"20190927212304.png\"></p>\n</blockquote>\n<h3 id=\"模拟发送消息\"><a href=\"#模拟发送消息\" class=\"headerlink\" title=\"模拟发送消息\"></a>模拟发送消息</h3><p>消息发送，可以选定组、人进行消息发送<br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L145-L157\">发送端代码</a><br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L281-L290\">解析端</a></p>\n<h3 id=\"登录互斥\"><a href=\"#登录互斥\" class=\"headerlink\" title=\"登录互斥\"></a>登录互斥</h3><p>登录互斥是指，当一个账号在A电脑登录，然后再在B电脑登录，最后的登录会排斥掉开始的登录，即，将A上的挤下线<br>首先用谷歌浏览器登录，输入用户名：xiexingen，然后连接<br>接着使用360急速浏览器登录，输入用户名:xiexingen 这个时候会发现谷歌浏览器中的登录已经退出，如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190927213637.png\" alt=\"20190927213637.png\"></p>\n<blockquote>\n<p>必要条件: 不同浏览器、同一用户,比如:同一个浏览器，不同tab就不算(能共用cookie)</p>\n</blockquote>\n<h3 id=\"文件下载-指定连接推送\"><a href=\"#文件下载-指定连接推送\" class=\"headerlink\" title=\"文件下载(指定连接推送)\"></a>文件下载(指定连接推送)</h3><p>文件下载的场景，用户在操作页面上选择了上千个文件，然后点击打包下载，这个时候可能需要很久时间才反应回来，那么这段时间如果让用户一直等待显然不妥，所以，当用户点击打包下载的时候，后端启用一个后台线程去打包、压缩，然后立即返回；用户可以继续操作，当服务器端打包好后推送给用户端，用户点击下载即可。<br>此处分两种情况  </p>\n<ol>\n<li>单连接推送<br>用户开了多个tab页，在其中一个上下载文件，如果后端推送的时候，直接给该用户推，显然不妥；正确的做法一个是只给操作的那个tab页推，这就需要，调用服务器端业务api的时候，需要把当前tab页对应的连接id发送到服务器端，服务器端处理完业务后，调用推送服务器，告诉推送服务器只推我给你的这个连接的客户端，这样就能指定连接推送。</li>\n<li>单用户排除某个连接的其他连接推送<br>这种情况比较少见，告诉推送服务器，给这个用户，除了某个连接外的其他所有连接推送</li>\n</ol>\n<p>模拟操作<br>点击第一个图中的”打包下载文件” 按钮，当前页面会受到文件下载的推送<br>在点击图二中的”推送当前用户其他页面更新操作”按钮，会发现出了当前tab页外，其他tab也都收到了推送消息，如下图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190927214530.png\" alt=\"20190927214530.png\"></p>\n<p>至此，signalr相关文章算是到此结束了，下一篇谈谈个人的一点心得以及里面存着的一些问题。</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/10/04/dotnetcore/signalr/07-self-manager/\">.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/10/05/dotnetcore/signalr/09-todo/\">.net core 3.0 Signalr - 09 待改进&amp;交流</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 08 业务实现-客户端demo</p>","more":"<p>由于signalr作为一个单独的推送系统，跟业务系统是分离开的，所以此处模拟一个业务系统，新建一个.net core app项目</p>\n<h2 id=\"模拟实现一个登录功能\"><a href=\"#模拟实现一个登录功能\" class=\"headerlink\" title=\"模拟实现一个登录功能\"></a>模拟实现一个登录功能</h2><p>我们的登录很简单，当进入系统，如果检测到用户未登录则跳转到登录页面，用户只需要输入用户名点击登录即算登录成功  </p>\n<ul>\n<li>配置ConfigServices方法 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L41-L47\">查看代码</a><pre><code class=\"C#\">services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme)\n.AddCookie(CookieAuthenticationDefaults.AuthenticationScheme, cookieOption =&gt;\n&#123;\n    cookieOption.LoginPath = &quot;/Account/Login&quot;;\n    cookieOption.AccessDeniedPath = &quot;/Account/Login&quot;;\n&#125;);</code></pre>\n</li>\n<li>配置Config方法，配置认证、授权的请求管道 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Startup.cs#L73-L74\">查看代码</a><pre><code class=\"C#\">app.UseRouting();\napp.UseAuthentication();\napp.UseAuthorization();</code></pre>\n</li>\n<li>接收登录的post请求，写cookie，跳转 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Controllers/AccountController.cs#L33-L59\">查看代码</a></li>\n</ul>\n<h2 id=\"前端页面实现\"><a href=\"#前端页面实现\" class=\"headerlink\" title=\"前端页面实现\"></a>前端页面实现</h2><p>首先在Layout页面引入需要的js文件(vue、signalr、msgpack5、signalr-protocol-msgpack)   <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Shared/_Layout.cshtml#L78-L81\">查看代码</a>  </p>\n<h3 id=\"封装signalr连接相关js\"><a href=\"#封装signalr连接相关js\" class=\"headerlink\" title=\"封装signalr连接相关js\"></a>封装signalr连接相关js</h3><p>signalr客户端js的操作就是，创建连接、监听推送,封装后端js如下   <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/wwwroot/js/initSignalr.js\">查看代码</a>  </p>\n<pre><code class=\"js\">/**\n * 初始化连接\n * @param &#123;object&#125; option 参数\n * @param &#123;string&#125; option.url 连接的url地址\n * @param &#123;string&#125; option.loggingLevel 日志级别,默认为 Error\n * @param &#123;number&#125; option.delay 延迟连接 默认为3000毫秒\n * @param &#123;function&#125; option.onStarted 启动时触发\n * @param &#123;function&#125; option.onLine 启动时触发\n * @param &#123;function&#125; option.offLine 启动时触发\n * @returns &#123;object&#125; 连接的实例\n */\nfunction initSignalr(option) &#123;\n    var config = Object.assign(true, &#123;\n        loggingLevel: signalR.LogLevel.Error,\n        delay: 3000,\n        url: &#39;&#39;\n    &#125;, option);\n\n    var connection = new signalR.HubConnectionBuilder()\n        .configureLogging(config.loggingLevel)\n        .withUrl(config.url, &#123;\n            accessTokenFactory: option.accessTokenFactory\n        &#125;)\n        .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol())\n        .withAutomaticReconnect([0, 2000, 5000, 10000, 20000])\n        .build();\n\n    connection.onreconnecting(function (info) &#123;\n        console.info(&#39;----------------------------------signalr-- onreconnecting&#39;, info);\n    &#125;);\n\n    connection.onclose(function (err) &#123;\n        console.info(&#39;--------------------------------signalr-- onclose&#39;, err);\n    &#125;);\n\n    connection.on(&#39;OnNotify&#39;, config.onNotify);\n\n    connection.on(&#39;OnLine&#39;, config.onLine);\n\n    connection.on(&#39;OffLine&#39;, config.offLine);\n\n    setTimeout(function () &#123;\n        connection.start().then(function (data) &#123;\n            option.onStarted &amp;&amp; option.onStarted(data);\n        &#125;).catch(function (error) &#123;\n            console.error(error.toString());\n        &#125;);\n    &#125;, option.delay);\n\n    return connection;\n&#125;</code></pre>\n<h3 id=\"调用封装的js初始化连接-查看代码\"><a href=\"#调用封装的js初始化连接-查看代码\" class=\"headerlink\" title=\"调用封装的js初始化连接 查看代码\"></a>调用封装的js初始化连接 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L183\">查看代码</a></h3><ul>\n<li><p>然后在Home/Index.cshtml中引入上面的js  </p>\n</li>\n<li><p>在页面加载完后，调用初始化(案例中使用了vue)<br>在进入页面后会弹窗让用户输入加入的组，可以不输入也可以多个 </p>\n<pre><code class=\"js\">function initConnect() &#123;\n  $(&quot;#collectionUserInfo&quot;).modal(&#123;\n      keyboard: false,\n      show: true,\n      backdrop: &#39;static&#39;\n  &#125;)\n\n  $(&#39;#collectionUserInfo&#39;).on(&#39;hidden.bs.modal&#39;, function () &#123;\n      var groups = $(&quot;#groups&quot;).val()||&#39;&#39;;\n      connect=initSignalr(&#123;\n          delay: 0,\n          url:`$&#123;notifyUrl&#125;notify-hub?userId=$&#123;vm.userInfo.userName&#125;&amp;group=$&#123;groups&#125;`,\n          loggingLevel: signalR.LogLevel.Error,\n          onNotify: dealNotify,\n          onLine: function (data) &#123;\n              if (data.IsFirst) &#123;\n                  getOnlineUsers();\n              &#125;\n              getOnlineGroups();\n              vm.logs.push(`新连接上线：$&#123;JSON.stringify(data)&#125;`);\n          &#125;,\n          offLine: function (data) &#123;\n              if (data.IsLast) &#123;\n                  getOnlineUsers();\n              &#125;\n              getOnlineGroups();\n              vm.logs.push(`连接下线：$&#123;JSON.stringify(data)&#125;`);\n          &#125;,\n          onStarted: function () &#123;\n              getOnlineUsers();\n              getOnlineGroups();\n              vm.$set(vm.userInfo, &#39;connectionId&#39;, connect.connectionId);\n              vm.$set(vm.userInfo, &#39;groups&#39;, groups);\n              vm.logs.push(&#39;连接成功&#39;);\n          &#125;\n      &#125;);\n  &#125;)\n  &#125;</code></pre>\n<p>onNotify方法，如果仔细的话会看到里面的onNotify方法，所有的推送最终都会调用到该方法来进行分发。<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L200\">查看代码</a><br>offLine，当有客户端下线的时候会触发，data里面包含有用户Id、连接Id、是否该用户的最后一个连接,可根据需要使用<a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L201-L207\">查看代码</a><br>onLine,当用户连接的时候会触发，data里面包含有用户Id、连接Id、是否该用户的第一个连接(用于用户上线后的逻辑处理)，可根据需要使用  <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L208-L214\">查看代码</a><br>onStarted，当成功连接后触发，可用于做一些连接后的业务逻辑处理，可根据需要使用 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L215-L221\">查看代码</a>  </p>\n</li>\n</ul>\n<h3 id=\"获取当前用户信息、在线列表\"><a href=\"#获取当前用户信息、在线列表\" class=\"headerlink\" title=\"获取当前用户信息、在线列表\"></a>获取当前用户信息、在线列表</h3><p>在用户连接成功后，获取当前在线用户、用户组、当前用户信息,并设置到vue的data中 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L216-L217\">查看代码</a>  </p>\n<h3 id=\"模拟一个任务分配\"><a href=\"#模拟一个任务分配\" class=\"headerlink\" title=\"模拟一个任务分配\"></a>模拟一个任务分配</h3><p>在项目中心中，点击”模拟推送待办”按钮，将会向当前用户所在组中推送一条代码消息，可以登录不同账号、开多个tab页体验<br>点击事件代码位置 <a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L132-L141\">查看代码</a> </p>\n<pre><code class=\"js\">assignTaskToUser: function () &#123;\n    var that = this;\n    $.ajax(&#123;\n        type: &#39;POST&#39;,\n        url: &#39;/api/ServerProxy/AssignTaskToUser&#39;,\n        data: &#123;\n            groups:that.userInfo.groups\n        &#125;\n    &#125;)\n&#125;,</code></pre>\n<p>对应的推送解析代码 </p>\n<blockquote>\n<p>首先当有推送过来的时候，会首先进到onNotify方法，然后根据不同类型在分配到不同的js方法中<br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L268-L279\">查看代码</a><br>效果图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190927212304.png\" alt=\"20190927212304.png\"></p>\n</blockquote>\n<h3 id=\"模拟发送消息\"><a href=\"#模拟发送消息\" class=\"headerlink\" title=\"模拟发送消息\"></a>模拟发送消息</h3><p>消息发送，可以选定组、人进行消息发送<br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L145-L157\">发送端代码</a><br><a href=\"https://github.com/xiexingen/CTS.Signalr/blob/master/CTS.Signalr.Client/Views/Home/Index.cshtml#L281-L290\">解析端</a></p>\n<h3 id=\"登录互斥\"><a href=\"#登录互斥\" class=\"headerlink\" title=\"登录互斥\"></a>登录互斥</h3><p>登录互斥是指，当一个账号在A电脑登录，然后再在B电脑登录，最后的登录会排斥掉开始的登录，即，将A上的挤下线<br>首先用谷歌浏览器登录，输入用户名：xiexingen，然后连接<br>接着使用360急速浏览器登录，输入用户名:xiexingen 这个时候会发现谷歌浏览器中的登录已经退出，如图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190927213637.png\" alt=\"20190927213637.png\"></p>\n<blockquote>\n<p>必要条件: 不同浏览器、同一用户,比如:同一个浏览器，不同tab就不算(能共用cookie)</p>\n</blockquote>\n<h3 id=\"文件下载-指定连接推送\"><a href=\"#文件下载-指定连接推送\" class=\"headerlink\" title=\"文件下载(指定连接推送)\"></a>文件下载(指定连接推送)</h3><p>文件下载的场景，用户在操作页面上选择了上千个文件，然后点击打包下载，这个时候可能需要很久时间才反应回来，那么这段时间如果让用户一直等待显然不妥，所以，当用户点击打包下载的时候，后端启用一个后台线程去打包、压缩，然后立即返回；用户可以继续操作，当服务器端打包好后推送给用户端，用户点击下载即可。<br>此处分两种情况  </p>\n<ol>\n<li>单连接推送<br>用户开了多个tab页，在其中一个上下载文件，如果后端推送的时候，直接给该用户推，显然不妥；正确的做法一个是只给操作的那个tab页推，这就需要，调用服务器端业务api的时候，需要把当前tab页对应的连接id发送到服务器端，服务器端处理完业务后，调用推送服务器，告诉推送服务器只推我给你的这个连接的客户端，这样就能指定连接推送。</li>\n<li>单用户排除某个连接的其他连接推送<br>这种情况比较少见，告诉推送服务器，给这个用户，除了某个连接外的其他所有连接推送</li>\n</ol>\n<p>模拟操作<br>点击第一个图中的”打包下载文件” 按钮，当前页面会受到文件下载的推送<br>在点击图二中的”推送当前用户其他页面更新操作”按钮，会发现出了当前tab页外，其他tab也都收到了推送消息，如下图<br><img src=\"http://qiniu.xxgtalk.cn/blog/images/20190927214530.png\" alt=\"20190927214530.png\"></p>\n<p>至此，signalr相关文章算是到此结束了，下一篇谈谈个人的一点心得以及里面存着的一些问题。</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/10/04/dotnetcore/signalr/07-self-manager/\">.net core 3.0 Signalr - 07 业务实现-服务端 自定义管理组、用户、连接</a></td>\n</tr>\n<tr>\n<td align=\"left\">下一篇</td>\n<td align=\"left\"><a href=\"/2019/10/05/dotnetcore/signalr/09-todo/\">.net core 3.0 Signalr - 09 待改进&amp;交流</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>"},{"title":".net core 3.0 Signalr - 09 待改进&交流","date":"2019-10-05T12:34:10.000Z","abbrlink":61069,"_content":"\n.net core 3.0 Signalr - 09 待改进&交流\n<!-- more -->\n\n## 个人心得\n写博客真的比写代码累，膜拜那些坚持写博客的大佬！  \n有时候零散的片段比较多，没写之前感觉有千千万万要写的东西，实际写的时候发现， 好像这个没啥说的，然后就帖了个图，或者一笔带过了\n\n## 待改进&交流\n- 使用消息队列替换目前的api调用形式，同时消息队列支持定义推送优先级\n- 使用polly来重试失败的调用\n- 将连接中传递的userId改成token\n- 多个客户端同时关闭，IsLast不准确\n- 服务器端需要有定时任务去清除redis中的无效数据(看造化)\n- 连接的监控\n- 连接的并发数量测试\n\n\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |  [.net core 3.0 Signalr - 08 业务实现-客户端demo](/2019/10/05/dotnetcore/signalr/08-clientdemo/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","source":"_posts/dotnetcore/signalr/09-todo.md","raw":"---\ntitle: .net core 3.0 Signalr - 09 待改进&交流\ndate: '2019-10-05 20:34:10'\ncategories:\n  - .NetCore\ntags:\n  - Signalr\n  - .NetCore\nabbrlink: 61069\n---\n\n.net core 3.0 Signalr - 09 待改进&交流\n<!-- more -->\n\n## 个人心得\n写博客真的比写代码累，膜拜那些坚持写博客的大佬！  \n有时候零散的片段比较多，没写之前感觉有千千万万要写的东西，实际写的时候发现， 好像这个没啥说的，然后就帖了个图，或者一笔带过了\n\n## 待改进&交流\n- 使用消息队列替换目前的api调用形式，同时消息队列支持定义推送优先级\n- 使用polly来重试失败的调用\n- 将连接中传递的userId改成token\n- 多个客户端同时关闭，IsLast不准确\n- 服务器端需要有定时任务去清除redis中的无效数据(看造化)\n- 连接的监控\n- 连接的并发数量测试\n\n\n\n更多内容请通过快速导航查看下一篇\n\n## 快速导航\n\n|   标题    |   内容 \n|   :---    |   :--- \n|   索引    |   [.net core 3.0 Signalr - 实现一个业务推送系统](/2019/09/20/dotnetcore/signalr/00-introduct/) \n|   上一篇  |  [.net core 3.0 Signalr - 08 业务实现-客户端demo](/2019/10/05/dotnetcore/signalr/08-clientdemo/) \n|   源码地址  |   [源码](https://github.com/xiexingen/CTS.Signalr) \n|   官方文档  |   [官方文档](https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0) \n","slug":"dotnetcore/signalr/09-todo","published":1,"updated":"2020-12-29T01:09:09.535Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6x7004fd8v89vqe5q4e","content":"<p>.net core 3.0 Signalr - 09 待改进&amp;交流</p>\n<a id=\"more\"></a>\n\n<h2 id=\"个人心得\"><a href=\"#个人心得\" class=\"headerlink\" title=\"个人心得\"></a>个人心得</h2><p>写博客真的比写代码累，膜拜那些坚持写博客的大佬！<br>有时候零散的片段比较多，没写之前感觉有千千万万要写的东西，实际写的时候发现， 好像这个没啥说的，然后就帖了个图，或者一笔带过了</p>\n<h2 id=\"待改进-amp-交流\"><a href=\"#待改进-amp-交流\" class=\"headerlink\" title=\"待改进&amp;交流\"></a>待改进&amp;交流</h2><ul>\n<li>使用消息队列替换目前的api调用形式，同时消息队列支持定义推送优先级</li>\n<li>使用polly来重试失败的调用</li>\n<li>将连接中传递的userId改成token</li>\n<li>多个客户端同时关闭，IsLast不准确</li>\n<li>服务器端需要有定时任务去清除redis中的无效数据(看造化)</li>\n<li>连接的监控</li>\n<li>连接的并发数量测试</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/10/05/dotnetcore/signalr/08-clientdemo/\">.net core 3.0 Signalr - 08 业务实现-客户端demo</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>.net core 3.0 Signalr - 09 待改进&amp;交流</p>","more":"<h2 id=\"个人心得\"><a href=\"#个人心得\" class=\"headerlink\" title=\"个人心得\"></a>个人心得</h2><p>写博客真的比写代码累，膜拜那些坚持写博客的大佬！<br>有时候零散的片段比较多，没写之前感觉有千千万万要写的东西，实际写的时候发现， 好像这个没啥说的，然后就帖了个图，或者一笔带过了</p>\n<h2 id=\"待改进-amp-交流\"><a href=\"#待改进-amp-交流\" class=\"headerlink\" title=\"待改进&amp;交流\"></a>待改进&amp;交流</h2><ul>\n<li>使用消息队列替换目前的api调用形式，同时消息队列支持定义推送优先级</li>\n<li>使用polly来重试失败的调用</li>\n<li>将连接中传递的userId改成token</li>\n<li>多个客户端同时关闭，IsLast不准确</li>\n<li>服务器端需要有定时任务去清除redis中的无效数据(看造化)</li>\n<li>连接的监控</li>\n<li>连接的并发数量测试</li>\n</ul>\n<p>更多内容请通过快速导航查看下一篇</p>\n<h2 id=\"快速导航\"><a href=\"#快速导航\" class=\"headerlink\" title=\"快速导航\"></a>快速导航</h2><table>\n<thead>\n<tr>\n<th align=\"left\">标题</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">索引</td>\n<td align=\"left\"><a href=\"/2019/09/20/dotnetcore/signalr/00-introduct/\">.net core 3.0 Signalr - 实现一个业务推送系统</a></td>\n</tr>\n<tr>\n<td align=\"left\">上一篇</td>\n<td align=\"left\"><a href=\"/2019/10/05/dotnetcore/signalr/08-clientdemo/\">.net core 3.0 Signalr - 08 业务实现-客户端demo</a></td>\n</tr>\n<tr>\n<td align=\"left\">源码地址</td>\n<td align=\"left\"><a href=\"https://github.com/xiexingen/CTS.Signalr\">源码</a></td>\n</tr>\n<tr>\n<td align=\"left\">官方文档</td>\n<td align=\"left\"><a href=\"https://docs.microsoft.com/zh-CN/aspnet/core/?view=aspnetcore-3.0\">官方文档</a></td>\n</tr>\n</tbody></table>"},{"title":"React资料收集","abbrlink":14655,"date":"2018-08-01T01:10:10.000Z","_content":"\nReact资料收集\n<!-- more -->\n\n##### 开发工具\nvscode、Rekit\n##### ESLint \neslint-config-airbnb  最最最完整的javascript eslint规则\n##### Prettier\n代码格式化工具,vscode支持 安装插件 添加.prettier文件\n##### React DevTool、Redux DevTool\nchrome浏览器插件\n##### 单元测试相关\n1. Jest:Facebook开源的JS单元测试狂阿基\n2. JS DOM浏览器环境的NodeJS模拟\n3. Enzyme:React组件渲染和测试\n4. nock:模拟http请求\n5. sinon：函数模拟和调用跟踪\n6. istanbul:单元测试覆盖率\n\n\n> [其他请查看](/2018/09/13/tools/collections/)","source":"_posts/front/react/collection.md","raw":"---\ntitle: React资料收集\ncategories:\n  - React\ntags:\n  - 前端\n  - React\nabbrlink: 14655\ndate: 2018-08-01 09:10:10\n---\n\nReact资料收集\n<!-- more -->\n\n##### 开发工具\nvscode、Rekit\n##### ESLint \neslint-config-airbnb  最最最完整的javascript eslint规则\n##### Prettier\n代码格式化工具,vscode支持 安装插件 添加.prettier文件\n##### React DevTool、Redux DevTool\nchrome浏览器插件\n##### 单元测试相关\n1. Jest:Facebook开源的JS单元测试狂阿基\n2. JS DOM浏览器环境的NodeJS模拟\n3. Enzyme:React组件渲染和测试\n4. nock:模拟http请求\n5. sinon：函数模拟和调用跟踪\n6. istanbul:单元测试覆盖率\n\n\n> [其他请查看](/2018/09/13/tools/collections/)","slug":"front/react/collection","published":1,"updated":"2020-12-28T00:55:28.067Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6x9004kd8v81zncbmse","content":"<p>React资料收集</p>\n<a id=\"more\"></a>\n\n<h5 id=\"开发工具\"><a href=\"#开发工具\" class=\"headerlink\" title=\"开发工具\"></a>开发工具</h5><p>vscode、Rekit</p>\n<h5 id=\"ESLint\"><a href=\"#ESLint\" class=\"headerlink\" title=\"ESLint\"></a>ESLint</h5><p>eslint-config-airbnb  最最最完整的javascript eslint规则</p>\n<h5 id=\"Prettier\"><a href=\"#Prettier\" class=\"headerlink\" title=\"Prettier\"></a>Prettier</h5><p>代码格式化工具,vscode支持 安装插件 添加.prettier文件</p>\n<h5 id=\"React-DevTool、Redux-DevTool\"><a href=\"#React-DevTool、Redux-DevTool\" class=\"headerlink\" title=\"React DevTool、Redux DevTool\"></a>React DevTool、Redux DevTool</h5><p>chrome浏览器插件</p>\n<h5 id=\"单元测试相关\"><a href=\"#单元测试相关\" class=\"headerlink\" title=\"单元测试相关\"></a>单元测试相关</h5><ol>\n<li>Jest:Facebook开源的JS单元测试狂阿基</li>\n<li>JS DOM浏览器环境的NodeJS模拟</li>\n<li>Enzyme:React组件渲染和测试</li>\n<li>nock:模拟http请求</li>\n<li>sinon：函数模拟和调用跟踪</li>\n<li>istanbul:单元测试覆盖率</li>\n</ol>\n<blockquote>\n<p><a href=\"/2018/09/13/tools/collections/\">其他请查看</a></p>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>React资料收集</p>","more":"<h5 id=\"开发工具\"><a href=\"#开发工具\" class=\"headerlink\" title=\"开发工具\"></a>开发工具</h5><p>vscode、Rekit</p>\n<h5 id=\"ESLint\"><a href=\"#ESLint\" class=\"headerlink\" title=\"ESLint\"></a>ESLint</h5><p>eslint-config-airbnb  最最最完整的javascript eslint规则</p>\n<h5 id=\"Prettier\"><a href=\"#Prettier\" class=\"headerlink\" title=\"Prettier\"></a>Prettier</h5><p>代码格式化工具,vscode支持 安装插件 添加.prettier文件</p>\n<h5 id=\"React-DevTool、Redux-DevTool\"><a href=\"#React-DevTool、Redux-DevTool\" class=\"headerlink\" title=\"React DevTool、Redux DevTool\"></a>React DevTool、Redux DevTool</h5><p>chrome浏览器插件</p>\n<h5 id=\"单元测试相关\"><a href=\"#单元测试相关\" class=\"headerlink\" title=\"单元测试相关\"></a>单元测试相关</h5><ol>\n<li>Jest:Facebook开源的JS单元测试狂阿基</li>\n<li>JS DOM浏览器环境的NodeJS模拟</li>\n<li>Enzyme:React组件渲染和测试</li>\n<li>nock:模拟http请求</li>\n<li>sinon：函数模拟和调用跟踪</li>\n<li>istanbul:单元测试覆盖率</li>\n</ol>\n<blockquote>\n<p><a href=\"/2018/09/13/tools/collections/\">其他请查看</a></p>\n</blockquote>"},{"title":"vscode下调试es6编写的npm包","comments":0,"abbrlink":100,"date":"2018-09-22T13:10:10.000Z","img":null,"_content":"\n0. 前置条件 安装好node环境\n1. 创建一个文件夹  执行npm init 更具需要选择\n2. 通过yarn安装babel-preset-es2015 (也可以通过npm等)\n```\nyarn add -d babel-cli babel-preset-es2015 //安装babel-cli与babel-preset-es2015\nyarn add -d babel-preset-stage-1 //支持babel-preset-stage-1\n//yarn add -d babel-preset-react //如果需要支持react\n//yarn add -d babel-plugin-transform-object-assign //适用于Object.assign()\n//yarn add -d babel-plugin-transform-object-rest-spread //适用于展开运算符\n```\n3. 在package.json文件夹中添加一个scripts 如下所示:\n```\nscripts: {\n    \"build\": \"babel src --watch --source-maps --presets=es2015,stage-1 --out-dir dist\" //切记 --source-maps一定要加上\n}\n```\n4. 跟目录下添加.babelrc 内容如下\n```\n{\n    \"presets\": [\n        \"es2015\"\n        //,\"react\" //如果有使用react\n    ]\n    //,\n    //\"plugins\":[\n    //    \"transform-object-assign\", //适用于Object.assign()\n    //    \"transform-object-rest-spread\" //适用于展开运算符 ...\n    //]\n}\n```\n5. 编写自己的代码，整体项目结构如下  \n|-src  \n&emsp;|--cores  \n&emsp;&emsp;|--math.js  --被引用的js文件  \n&emsp;|--index.js   --主入口js文件 \n|.babelrc  \n|.package.json  \n6. 切到vscode左侧的调试窗口，点击添加配置  \n这个时候会生成一个launch.json文件，修改内容如下\n```\n{\n    // 使用 IntelliSense 了解相关属性。 \n    // 悬停以查看现有属性的描述。\n    // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"type\": \"node\",\n            \"request\": \"launch\",\n            \"name\": \"Launch App.js\",\n            \"program\": \"${workspaceRoot}/src/index.js\",\n            \"outFiles\": [\n                \"${workspaceRoot}/dist/**/*.js\"\n            ]\n        }\n    ]\n}\n```\n7. 先生成在运行调试\nnpm run build会生成一个dist目录，然后点击调试上的运行按钮 执行调试","source":"_posts/front/other/VSCodeDebug.md","raw":"---\ntitle: vscode下调试es6编写的npm包\ncategories:\n  - 前端-其他\ntags:\n  - 前端-其他\ncomments: false\nabbrlink: 100\ndate: 2018-09-22 21:10:10\nimg:\n---\n\n0. 前置条件 安装好node环境\n1. 创建一个文件夹  执行npm init 更具需要选择\n2. 通过yarn安装babel-preset-es2015 (也可以通过npm等)\n```\nyarn add -d babel-cli babel-preset-es2015 //安装babel-cli与babel-preset-es2015\nyarn add -d babel-preset-stage-1 //支持babel-preset-stage-1\n//yarn add -d babel-preset-react //如果需要支持react\n//yarn add -d babel-plugin-transform-object-assign //适用于Object.assign()\n//yarn add -d babel-plugin-transform-object-rest-spread //适用于展开运算符\n```\n3. 在package.json文件夹中添加一个scripts 如下所示:\n```\nscripts: {\n    \"build\": \"babel src --watch --source-maps --presets=es2015,stage-1 --out-dir dist\" //切记 --source-maps一定要加上\n}\n```\n4. 跟目录下添加.babelrc 内容如下\n```\n{\n    \"presets\": [\n        \"es2015\"\n        //,\"react\" //如果有使用react\n    ]\n    //,\n    //\"plugins\":[\n    //    \"transform-object-assign\", //适用于Object.assign()\n    //    \"transform-object-rest-spread\" //适用于展开运算符 ...\n    //]\n}\n```\n5. 编写自己的代码，整体项目结构如下  \n|-src  \n&emsp;|--cores  \n&emsp;&emsp;|--math.js  --被引用的js文件  \n&emsp;|--index.js   --主入口js文件 \n|.babelrc  \n|.package.json  \n6. 切到vscode左侧的调试窗口，点击添加配置  \n这个时候会生成一个launch.json文件，修改内容如下\n```\n{\n    // 使用 IntelliSense 了解相关属性。 \n    // 悬停以查看现有属性的描述。\n    // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"type\": \"node\",\n            \"request\": \"launch\",\n            \"name\": \"Launch App.js\",\n            \"program\": \"${workspaceRoot}/src/index.js\",\n            \"outFiles\": [\n                \"${workspaceRoot}/dist/**/*.js\"\n            ]\n        }\n    ]\n}\n```\n7. 先生成在运行调试\nnpm run build会生成一个dist目录，然后点击调试上的运行按钮 执行调试","slug":"front/other/VSCodeDebug","published":1,"updated":"2020-12-28T00:55:28.067Z","layout":"post","photos":[],"link":"","_id":"ckj9at6xa004nd8v8caegfucl","content":"<ol start=\"0\">\n<li>前置条件 安装好node环境</li>\n<li>创建一个文件夹  执行npm init 更具需要选择</li>\n<li>通过yarn安装babel-preset-es2015 (也可以通过npm等)<pre><code>yarn add -d babel-cli babel-preset-es2015 //安装babel-cli与babel-preset-es2015\nyarn add -d babel-preset-stage-1 //支持babel-preset-stage-1\n//yarn add -d babel-preset-react //如果需要支持react\n//yarn add -d babel-plugin-transform-object-assign //适用于Object.assign()\n//yarn add -d babel-plugin-transform-object-rest-spread //适用于展开运算符</code></pre>\n</li>\n<li>在package.json文件夹中添加一个scripts 如下所示:<pre><code>scripts: &#123;\n &quot;build&quot;: &quot;babel src --watch --source-maps --presets=es2015,stage-1 --out-dir dist&quot; //切记 --source-maps一定要加上\n&#125;</code></pre>\n</li>\n<li>跟目录下添加.babelrc 内容如下<pre><code>&#123;\n &quot;presets&quot;: [\n     &quot;es2015&quot;\n     //,&quot;react&quot; //如果有使用react\n ]\n //,\n //&quot;plugins&quot;:[\n //    &quot;transform-object-assign&quot;, //适用于Object.assign()\n //    &quot;transform-object-rest-spread&quot; //适用于展开运算符 ...\n //]\n&#125;</code></pre>\n</li>\n<li>编写自己的代码，整体项目结构如下<br>|-src<br>&emsp;|–cores<br>&emsp;&emsp;|–math.js  –被引用的js文件<br>&emsp;|–index.js   –主入口js文件<br>|.babelrc<br>|.package.json  </li>\n<li>切到vscode左侧的调试窗口，点击添加配置<br>这个时候会生成一个launch.json文件，修改内容如下<pre><code>&#123;\n // 使用 IntelliSense 了解相关属性。 \n // 悬停以查看现有属性的描述。\n // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387\n &quot;version&quot;: &quot;0.2.0&quot;,\n &quot;configurations&quot;: [\n     &#123;\n         &quot;type&quot;: &quot;node&quot;,\n         &quot;request&quot;: &quot;launch&quot;,\n         &quot;name&quot;: &quot;Launch App.js&quot;,\n         &quot;program&quot;: &quot;$&#123;workspaceRoot&#125;/src/index.js&quot;,\n         &quot;outFiles&quot;: [\n             &quot;$&#123;workspaceRoot&#125;/dist/**/*.js&quot;\n         ]\n     &#125;\n ]\n&#125;</code></pre>\n</li>\n<li>先生成在运行调试<br>npm run build会生成一个dist目录，然后点击调试上的运行按钮 执行调试</li>\n</ol>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"","more":"<ol start=\"0\">\n<li>前置条件 安装好node环境</li>\n<li>创建一个文件夹  执行npm init 更具需要选择</li>\n<li>通过yarn安装babel-preset-es2015 (也可以通过npm等)<pre><code>yarn add -d babel-cli babel-preset-es2015 //安装babel-cli与babel-preset-es2015\nyarn add -d babel-preset-stage-1 //支持babel-preset-stage-1\n//yarn add -d babel-preset-react //如果需要支持react\n//yarn add -d babel-plugin-transform-object-assign //适用于Object.assign()\n//yarn add -d babel-plugin-transform-object-rest-spread //适用于展开运算符</code></pre>\n</li>\n<li>在package.json文件夹中添加一个scripts 如下所示:<pre><code>scripts: &#123;\n &quot;build&quot;: &quot;babel src --watch --source-maps --presets=es2015,stage-1 --out-dir dist&quot; //切记 --source-maps一定要加上\n&#125;</code></pre>\n</li>\n<li>跟目录下添加.babelrc 内容如下<pre><code>&#123;\n &quot;presets&quot;: [\n     &quot;es2015&quot;\n     //,&quot;react&quot; //如果有使用react\n ]\n //,\n //&quot;plugins&quot;:[\n //    &quot;transform-object-assign&quot;, //适用于Object.assign()\n //    &quot;transform-object-rest-spread&quot; //适用于展开运算符 ...\n //]\n&#125;</code></pre>\n</li>\n<li>编写自己的代码，整体项目结构如下<br>|-src<br>&emsp;|–cores<br>&emsp;&emsp;|–math.js  –被引用的js文件<br>&emsp;|–index.js   –主入口js文件<br>|.babelrc<br>|.package.json  </li>\n<li>切到vscode左侧的调试窗口，点击添加配置<br>这个时候会生成一个launch.json文件，修改内容如下<pre><code>&#123;\n // 使用 IntelliSense 了解相关属性。 \n // 悬停以查看现有属性的描述。\n // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387\n &quot;version&quot;: &quot;0.2.0&quot;,\n &quot;configurations&quot;: [\n     &#123;\n         &quot;type&quot;: &quot;node&quot;,\n         &quot;request&quot;: &quot;launch&quot;,\n         &quot;name&quot;: &quot;Launch App.js&quot;,\n         &quot;program&quot;: &quot;$&#123;workspaceRoot&#125;/src/index.js&quot;,\n         &quot;outFiles&quot;: [\n             &quot;$&#123;workspaceRoot&#125;/dist/**/*.js&quot;\n         ]\n     &#125;\n ]\n&#125;</code></pre>\n</li>\n<li>先生成在运行调试<br>npm run build会生成一个dist目录，然后点击调试上的运行按钮 执行调试</li>\n</ol>\n"},{"title":"React社区精选组件","abbrlink":4184,"date":"2018-12-10T01:10:10.000Z","_content":"\nReactReact社区精选组件\n<!-- more -->\n\n其他地址：https://ant.design/docs/react/recommendation-cn\n| 类型 | 推荐组件 | 描述\n| :--- | :--- | :---\n|滚动条 |[react-perfect-scrollbar](https://github.com/goldenyz/react-perfect-scrollbar) [reactScrollbar](https://github.com/souhe/reactScrollbar)  | 虚拟滚动条\n|图片缩放|[react-viewer](https://github.com/infeng/react-viewer) | 图片缩放\n|媒体查询|[react-media](https://github.com/ReactTraining/react-media)|媒体查询\n|标题修改|[react-document-title](https://github.com/gaearon/react-document-title)| 修改标题\n|浏览器存储|[store](https://github.com/marcuswestin/store.js) | 浏览器存储技术\n|pdf|[react-pdf](https://github.com/diegomura/react-pdf) | pdf\n|react-virtualized|[react-virtualized](https://github.com/bvaughn/react-virtualized) | 大数据渲染\n\n\n\n#### 其他类型\n| 类型 | 推荐组件 | 描述\n| :--- | :--- | :---\n|生成pdf |[jsPDF](https://github.com/MrRio/jsPDF?utm_source=gold_browser_extension)  | 前端生成pdf\n|谷歌浏览器API |[puppeteer](https://github.com/GoogleChrome/puppeteer)  | 可以用来写爬虫 一个无界面的谷歌浏览器","source":"_posts/front/react/components.md","raw":"---\ntitle: React社区精选组件\ncategories:\n  - React\ntags:\n  - 前端\n  - React\nabbrlink: 4184\ndate: 2018-12-10 09:10:10\n---\n\nReactReact社区精选组件\n<!-- more -->\n\n其他地址：https://ant.design/docs/react/recommendation-cn\n| 类型 | 推荐组件 | 描述\n| :--- | :--- | :---\n|滚动条 |[react-perfect-scrollbar](https://github.com/goldenyz/react-perfect-scrollbar) [reactScrollbar](https://github.com/souhe/reactScrollbar)  | 虚拟滚动条\n|图片缩放|[react-viewer](https://github.com/infeng/react-viewer) | 图片缩放\n|媒体查询|[react-media](https://github.com/ReactTraining/react-media)|媒体查询\n|标题修改|[react-document-title](https://github.com/gaearon/react-document-title)| 修改标题\n|浏览器存储|[store](https://github.com/marcuswestin/store.js) | 浏览器存储技术\n|pdf|[react-pdf](https://github.com/diegomura/react-pdf) | pdf\n|react-virtualized|[react-virtualized](https://github.com/bvaughn/react-virtualized) | 大数据渲染\n\n\n\n#### 其他类型\n| 类型 | 推荐组件 | 描述\n| :--- | :--- | :---\n|生成pdf |[jsPDF](https://github.com/MrRio/jsPDF?utm_source=gold_browser_extension)  | 前端生成pdf\n|谷歌浏览器API |[puppeteer](https://github.com/GoogleChrome/puppeteer)  | 可以用来写爬虫 一个无界面的谷歌浏览器","slug":"front/react/components","published":1,"updated":"2020-12-28T00:55:28.068Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6xd004rd8v84gbi1p31","content":"<p>ReactReact社区精选组件</p>\n<a id=\"more\"></a>\n\n<p>其他地址：<a href=\"https://ant.design/docs/react/recommendation-cn\">https://ant.design/docs/react/recommendation-cn</a><br>| 类型 | 推荐组件 | 描述<br>| :— | :— | :—<br>|滚动条 |<a href=\"https://github.com/goldenyz/react-perfect-scrollbar\">react-perfect-scrollbar</a> <a href=\"https://github.com/souhe/reactScrollbar\">reactScrollbar</a>  | 虚拟滚动条<br>|图片缩放|<a href=\"https://github.com/infeng/react-viewer\">react-viewer</a> | 图片缩放<br>|媒体查询|<a href=\"https://github.com/ReactTraining/react-media\">react-media</a>|媒体查询<br>|标题修改|<a href=\"https://github.com/gaearon/react-document-title\">react-document-title</a>| 修改标题<br>|浏览器存储|<a href=\"https://github.com/marcuswestin/store.js\">store</a> | 浏览器存储技术<br>|pdf|<a href=\"https://github.com/diegomura/react-pdf\">react-pdf</a> | pdf<br>|react-virtualized|<a href=\"https://github.com/bvaughn/react-virtualized\">react-virtualized</a> | 大数据渲染</p>\n<h4 id=\"其他类型\"><a href=\"#其他类型\" class=\"headerlink\" title=\"其他类型\"></a>其他类型</h4><table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">推荐组件</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">生成pdf</td>\n<td align=\"left\"><a href=\"https://github.com/MrRio/jsPDF?utm_source=gold_browser_extension\">jsPDF</a></td>\n<td align=\"left\">前端生成pdf</td>\n</tr>\n<tr>\n<td align=\"left\">谷歌浏览器API</td>\n<td align=\"left\"><a href=\"https://github.com/GoogleChrome/puppeteer\">puppeteer</a></td>\n<td align=\"left\">可以用来写爬虫 一个无界面的谷歌浏览器</td>\n</tr>\n</tbody></table>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>ReactReact社区精选组件</p>","more":"<p>其他地址：<a href=\"https://ant.design/docs/react/recommendation-cn\">https://ant.design/docs/react/recommendation-cn</a><br>| 类型 | 推荐组件 | 描述<br>| :— | :— | :—<br>|滚动条 |<a href=\"https://github.com/goldenyz/react-perfect-scrollbar\">react-perfect-scrollbar</a> <a href=\"https://github.com/souhe/reactScrollbar\">reactScrollbar</a>  | 虚拟滚动条<br>|图片缩放|<a href=\"https://github.com/infeng/react-viewer\">react-viewer</a> | 图片缩放<br>|媒体查询|<a href=\"https://github.com/ReactTraining/react-media\">react-media</a>|媒体查询<br>|标题修改|<a href=\"https://github.com/gaearon/react-document-title\">react-document-title</a>| 修改标题<br>|浏览器存储|<a href=\"https://github.com/marcuswestin/store.js\">store</a> | 浏览器存储技术<br>|pdf|<a href=\"https://github.com/diegomura/react-pdf\">react-pdf</a> | pdf<br>|react-virtualized|<a href=\"https://github.com/bvaughn/react-virtualized\">react-virtualized</a> | 大数据渲染</p>\n<h4 id=\"其他类型\"><a href=\"#其他类型\" class=\"headerlink\" title=\"其他类型\"></a>其他类型</h4><table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">推荐组件</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">生成pdf</td>\n<td align=\"left\"><a href=\"https://github.com/MrRio/jsPDF?utm_source=gold_browser_extension\">jsPDF</a></td>\n<td align=\"left\">前端生成pdf</td>\n</tr>\n<tr>\n<td align=\"left\">谷歌浏览器API</td>\n<td align=\"left\"><a href=\"https://github.com/GoogleChrome/puppeteer\">puppeteer</a></td>\n<td align=\"left\">可以用来写爬虫 一个无界面的谷歌浏览器</td>\n</tr>\n</tbody></table>"},{"title":"使用umi-library来打包组件","abbrlink":53720,"date":"2019-04-02T13:35:10.000Z","_content":"\n通过umi-library将自己的组件打包成各种类型的包...\n<!-- more -->\n\n# 文件格式说明 \n### esm 用途\nes6语法格式(也叫AMD)，主要用在浏览器中 export default ...；可以做 tree-shaking(打包成一个文件，但是项目中使用时只引入需要的那一部分) \n### cjs 用途\nes5的语法(也叫CommonJS)，目前主要给node用； module.exports=...\n### umd 用途\n兼容esm和cjs，先判断是否支持node模块module.exports\n\n# 步骤  \n1. 安装umi-library  \n    ``` node\n    yarn add umi-library -D\n    ```\n2. 配置.umirc.library.js文件\n    ``` js\n    export default {\n    // 使用babel方式打包 将按照源代码的文件目录进行打包，默认为rollup方式(将文件合并成一个)\n    esm: 'babel', \n    cjs: 'babel',\n    autoprefixer: {\n        browsers: ['ie>8', 'Safari >= 6'],\n    },\n    extraBabelPlugins: [\n        [\n        'babel-plugin-import',\n        {\n            libraryName: 'antd',\n            libraryDirectory: 'es',\n            style: true,\n        },\n        ],\n    ],\n    };\n    ```\n3. 执行打包\n可以参考github项目 https://github.com/wetrial/wetrial\n\n> umi-library[地址](https://github.com/umijs/umi/tree/master/packages/umi-library)","source":"_posts/front/react/umi-library-self.md","raw":"---\ntitle: 使用umi-library来打包组件\ncategories:\n  - React\ntags:\n  - 前端\n  - React\n  - umi\nabbrlink: 53720\ndate: 2019-04-02 21:35:10\n---\n\n通过umi-library将自己的组件打包成各种类型的包...\n<!-- more -->\n\n# 文件格式说明 \n### esm 用途\nes6语法格式(也叫AMD)，主要用在浏览器中 export default ...；可以做 tree-shaking(打包成一个文件，但是项目中使用时只引入需要的那一部分) \n### cjs 用途\nes5的语法(也叫CommonJS)，目前主要给node用； module.exports=...\n### umd 用途\n兼容esm和cjs，先判断是否支持node模块module.exports\n\n# 步骤  \n1. 安装umi-library  \n    ``` node\n    yarn add umi-library -D\n    ```\n2. 配置.umirc.library.js文件\n    ``` js\n    export default {\n    // 使用babel方式打包 将按照源代码的文件目录进行打包，默认为rollup方式(将文件合并成一个)\n    esm: 'babel', \n    cjs: 'babel',\n    autoprefixer: {\n        browsers: ['ie>8', 'Safari >= 6'],\n    },\n    extraBabelPlugins: [\n        [\n        'babel-plugin-import',\n        {\n            libraryName: 'antd',\n            libraryDirectory: 'es',\n            style: true,\n        },\n        ],\n    ],\n    };\n    ```\n3. 执行打包\n可以参考github项目 https://github.com/wetrial/wetrial\n\n> umi-library[地址](https://github.com/umijs/umi/tree/master/packages/umi-library)","slug":"front/react/umi-library-self","published":1,"updated":"2020-12-28T00:55:28.069Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6xf004ud8v867n72hie","content":"<p>通过umi-library将自己的组件打包成各种类型的包…</p>\n<a id=\"more\"></a>\n\n<h1 id=\"文件格式说明\"><a href=\"#文件格式说明\" class=\"headerlink\" title=\"文件格式说明\"></a>文件格式说明</h1><h3 id=\"esm-用途\"><a href=\"#esm-用途\" class=\"headerlink\" title=\"esm 用途\"></a>esm 用途</h3><p>es6语法格式(也叫AMD)，主要用在浏览器中 export default …；可以做 tree-shaking(打包成一个文件，但是项目中使用时只引入需要的那一部分) </p>\n<h3 id=\"cjs-用途\"><a href=\"#cjs-用途\" class=\"headerlink\" title=\"cjs 用途\"></a>cjs 用途</h3><p>es5的语法(也叫CommonJS)，目前主要给node用； module.exports=…</p>\n<h3 id=\"umd-用途\"><a href=\"#umd-用途\" class=\"headerlink\" title=\"umd 用途\"></a>umd 用途</h3><p>兼容esm和cjs，先判断是否支持node模块module.exports</p>\n<h1 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h1><ol>\n<li>安装umi-library  <pre class=\" language-node\"><code class=\"language-node\">yarn add umi-library -D</code></pre>\n</li>\n<li>配置.umirc.library.js文件<pre class=\" language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\" spellcheck=\"true\">// 使用babel方式打包 将按照源代码的文件目录进行打包，默认为rollup方式(将文件合并成一个)</span>\nesm<span class=\"token punctuation\">:</span> <span class=\"token string\">'babel'</span><span class=\"token punctuation\">,</span> \ncjs<span class=\"token punctuation\">:</span> <span class=\"token string\">'babel'</span><span class=\"token punctuation\">,</span>\nautoprefixer<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n    browsers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ie>8'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Safari >= 6'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>\nextraBabelPlugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'babel-plugin-import'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">&amp;</span>#<span class=\"token number\">123</span><span class=\"token punctuation\">;</span>\n        libraryName<span class=\"token punctuation\">:</span> <span class=\"token string\">'antd'</span><span class=\"token punctuation\">,</span>\n        libraryDirectory<span class=\"token punctuation\">:</span> <span class=\"token string\">'es'</span><span class=\"token punctuation\">,</span>\n        style<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token operator\">&amp;</span>#<span class=\"token number\">125</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span></code></pre>\n</li>\n<li>执行打包<br>可以参考github项目 <a href=\"https://github.com/wetrial/wetrial\">https://github.com/wetrial/wetrial</a></li>\n</ol>\n<blockquote>\n<p>umi-library<a href=\"https://github.com/umijs/umi/tree/master/packages/umi-library\">地址</a></p>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>通过umi-library将自己的组件打包成各种类型的包…</p>","more":"<h1 id=\"文件格式说明\"><a href=\"#文件格式说明\" class=\"headerlink\" title=\"文件格式说明\"></a>文件格式说明</h1><h3 id=\"esm-用途\"><a href=\"#esm-用途\" class=\"headerlink\" title=\"esm 用途\"></a>esm 用途</h3><p>es6语法格式(也叫AMD)，主要用在浏览器中 export default …；可以做 tree-shaking(打包成一个文件，但是项目中使用时只引入需要的那一部分) </p>\n<h3 id=\"cjs-用途\"><a href=\"#cjs-用途\" class=\"headerlink\" title=\"cjs 用途\"></a>cjs 用途</h3><p>es5的语法(也叫CommonJS)，目前主要给node用； module.exports=…</p>\n<h3 id=\"umd-用途\"><a href=\"#umd-用途\" class=\"headerlink\" title=\"umd 用途\"></a>umd 用途</h3><p>兼容esm和cjs，先判断是否支持node模块module.exports</p>\n<h1 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h1><ol>\n<li>安装umi-library  <pre><code class=\"node\">yarn add umi-library -D</code></pre>\n</li>\n<li>配置.umirc.library.js文件<pre><code class=\"js\">export default &#123;\n// 使用babel方式打包 将按照源代码的文件目录进行打包，默认为rollup方式(将文件合并成一个)\nesm: &#39;babel&#39;, \ncjs: &#39;babel&#39;,\nautoprefixer: &#123;\n    browsers: [&#39;ie&gt;8&#39;, &#39;Safari &gt;= 6&#39;],\n&#125;,\nextraBabelPlugins: [\n    [\n    &#39;babel-plugin-import&#39;,\n    &#123;\n        libraryName: &#39;antd&#39;,\n        libraryDirectory: &#39;es&#39;,\n        style: true,\n    &#125;,\n    ],\n],\n&#125;;</code></pre>\n</li>\n<li>执行打包<br>可以参考github项目 <a href=\"https://github.com/wetrial/wetrial\">https://github.com/wetrial/wetrial</a></li>\n</ol>\n<blockquote>\n<p>umi-library<a href=\"https://github.com/umijs/umi/tree/master/packages/umi-library\">地址</a></p>\n</blockquote>"},{"title":"DIY一个集搜索、排序、分页功能的列表组件","abbrlink":22484,"date":"2019-05-22T12:10:10.000Z","_content":"\nDIY一个集搜索、排序、分页功能的列表组件\n<!-- more -->\n\n[源码地址](https://github.com/wetrial/wetrial-template): [https://github.com/wetrial/wetrial-template](https://github.com/wetrial/wetrial-template)<br />效果<br />![test.gif](https://cdn.nlark.com/yuque/0/2019/gif/173421/1558523693173-c0265a6e-5263-4317-bf76-99b17c86ec1c.gif#align=left&display=inline&height=513&name=test.gif&originHeight=1508&originWidth=2193&size=4252316&status=done&width=746)\n<a name=\"UKzZ5\"></a>\n# 背景\n在中控台系统中经常需要带条件过滤、分页、排序等的列表页面，antd提供了表格、排序、分页等，多个页面中使用会发现里面其实有很多重复的代码，自己捣腾下最后有了这个组件，\n<a name=\"pfCYQ\"></a>\n# 使用说明\n<a name=\"7qJ13\"></a>\n## 列表使用\n如图所示:<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/173421/1558524295889-fe6fce9b-1d53-4849-898c-39a7decf52ec.png#align=left&display=inline&height=1323&name=image.png&originHeight=1985&originWidth=2000&size=270488&status=done&width=1333.3333333333333)\n\n1. 引入高阶组件pagedQuery\n1. 引入封装的TableList 基本上跟Antd table组件用法一致，只是初始化了许多默认参数\n1. 用高阶组件包裹组件，并传参\n```jsx\n// type为必须参数，一般对应dva中model的effects\n{\n  type: string; // 类型 一般指获取数据源的action\n  page?: number; // 当前页 从1开始\n  defaultPageSize?:number; // 每页默认显示的条数\n  pageSize?: number; // 每页显示数量\n  record?: boolean; // 是否记录搜索状态\n}\n```\n\n4. 请求附带的基础参数，通过_getQueryParams返回一个对象，用于一些特殊场景，一般为空_\n4. 处理搜索按钮的点击事件，将搜索表单中的值收集并传递给onSearchData方法\n4. 处理重置按钮，将重置按钮的点击事件绑定来源于高阶组件给组件的onResetData\n4. 获取数据源并给到table\n<a name=\"AiF39\"></a>\n## 详情页面\n回退到列表页面有两种形式，<br />1.通过浏览器上的回退按钮<br />2.详情页面放置一个回退按钮，代码层面实现路由跳转到列表页<br />一般情况都使用第二种方式，因为如果编辑页面比较负责，可能里面有子页面，子页面又可以进入这一通过浏览器上的回退按钮需要点击N多次，再者，浏览器的回退有数量限制<br />同样，如图所示：<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/173421/1558524894480-261376dd-c130-40e0-b993-23812add160f.png#align=left&display=inline&height=877&name=image.png&originHeight=1316&originWidth=1714&size=188537&status=done&width=1142.6666666666667)\n\n1. 引入方法backRouter\n1. 在需要跳转路由的地方调用一下backRoute方法，并将路由传递给方法，该方法会返回之前记录的列表路由\n<a name=\"VNgB5\"></a>\n# 思路\n\n实现思路，通过高阶组件实现，[代码](https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.tsx)  、  [api文档](https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.zh-CN.md)  <br />记录搜索状态，通过sessionStorage来实现，考虑到sessionStore的一个优势，关闭当前tab页就失效了 省去还得去手动清除记录状态的麻烦(比如放到localStorage)，再者 这种查询状态不需要持久记录  <br />回退方法backRouter，由于高阶组件中会在组件的componentWillUnmount方法中记录搜索状态，以location的pathname为key，以location的search为值存放，所以通过backRouter方法匹配的时候会从sessionStorage中查询，如果有则带上查询串，以此来达到记录页面状态的效果\n\n> 更多请参观：[https://www.yuque.com/wetrial/front-end/](https://www.yuque.com/wetrial/front-end/)","source":"_posts/front/react/diy-component-pagedquery.md","raw":"---\ntitle: DIY一个集搜索、排序、分页功能的列表组件\ncategories:\n  - React\ntags:\n  - 前端\n  - React\nabbrlink: 22484\ndate: 2019-05-22 20:10:10\n---\n\nDIY一个集搜索、排序、分页功能的列表组件\n<!-- more -->\n\n[源码地址](https://github.com/wetrial/wetrial-template): [https://github.com/wetrial/wetrial-template](https://github.com/wetrial/wetrial-template)<br />效果<br />![test.gif](https://cdn.nlark.com/yuque/0/2019/gif/173421/1558523693173-c0265a6e-5263-4317-bf76-99b17c86ec1c.gif#align=left&display=inline&height=513&name=test.gif&originHeight=1508&originWidth=2193&size=4252316&status=done&width=746)\n<a name=\"UKzZ5\"></a>\n# 背景\n在中控台系统中经常需要带条件过滤、分页、排序等的列表页面，antd提供了表格、排序、分页等，多个页面中使用会发现里面其实有很多重复的代码，自己捣腾下最后有了这个组件，\n<a name=\"pfCYQ\"></a>\n# 使用说明\n<a name=\"7qJ13\"></a>\n## 列表使用\n如图所示:<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/173421/1558524295889-fe6fce9b-1d53-4849-898c-39a7decf52ec.png#align=left&display=inline&height=1323&name=image.png&originHeight=1985&originWidth=2000&size=270488&status=done&width=1333.3333333333333)\n\n1. 引入高阶组件pagedQuery\n1. 引入封装的TableList 基本上跟Antd table组件用法一致，只是初始化了许多默认参数\n1. 用高阶组件包裹组件，并传参\n```jsx\n// type为必须参数，一般对应dva中model的effects\n{\n  type: string; // 类型 一般指获取数据源的action\n  page?: number; // 当前页 从1开始\n  defaultPageSize?:number; // 每页默认显示的条数\n  pageSize?: number; // 每页显示数量\n  record?: boolean; // 是否记录搜索状态\n}\n```\n\n4. 请求附带的基础参数，通过_getQueryParams返回一个对象，用于一些特殊场景，一般为空_\n4. 处理搜索按钮的点击事件，将搜索表单中的值收集并传递给onSearchData方法\n4. 处理重置按钮，将重置按钮的点击事件绑定来源于高阶组件给组件的onResetData\n4. 获取数据源并给到table\n<a name=\"AiF39\"></a>\n## 详情页面\n回退到列表页面有两种形式，<br />1.通过浏览器上的回退按钮<br />2.详情页面放置一个回退按钮，代码层面实现路由跳转到列表页<br />一般情况都使用第二种方式，因为如果编辑页面比较负责，可能里面有子页面，子页面又可以进入这一通过浏览器上的回退按钮需要点击N多次，再者，浏览器的回退有数量限制<br />同样，如图所示：<br />![image.png](https://cdn.nlark.com/yuque/0/2019/png/173421/1558524894480-261376dd-c130-40e0-b993-23812add160f.png#align=left&display=inline&height=877&name=image.png&originHeight=1316&originWidth=1714&size=188537&status=done&width=1142.6666666666667)\n\n1. 引入方法backRouter\n1. 在需要跳转路由的地方调用一下backRoute方法，并将路由传递给方法，该方法会返回之前记录的列表路由\n<a name=\"VNgB5\"></a>\n# 思路\n\n实现思路，通过高阶组件实现，[代码](https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.tsx)  、  [api文档](https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.zh-CN.md)  <br />记录搜索状态，通过sessionStorage来实现，考虑到sessionStore的一个优势，关闭当前tab页就失效了 省去还得去手动清除记录状态的麻烦(比如放到localStorage)，再者 这种查询状态不需要持久记录  <br />回退方法backRouter，由于高阶组件中会在组件的componentWillUnmount方法中记录搜索状态，以location的pathname为key，以location的search为值存放，所以通过backRouter方法匹配的时候会从sessionStorage中查询，如果有则带上查询串，以此来达到记录页面状态的效果\n\n> 更多请参观：[https://www.yuque.com/wetrial/front-end/](https://www.yuque.com/wetrial/front-end/)","slug":"front/react/diy-component-pagedquery","published":1,"updated":"2020-12-28T00:55:28.068Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckj9at6xi004yd8v818uh2t4i","content":"<p>DIY一个集搜索、排序、分页功能的列表组件</p>\n<a id=\"more\"></a>\n\n<p><a href=\"https://github.com/wetrial/wetrial-template\">源码地址</a>: <a href=\"https://github.com/wetrial/wetrial-template\">https://github.com/wetrial/wetrial-template</a><br />效果<br /><img src=\"https://cdn.nlark.com/yuque/0/2019/gif/173421/1558523693173-c0265a6e-5263-4317-bf76-99b17c86ec1c.gif#align=left&display=inline&height=513&name=test.gif&originHeight=1508&originWidth=2193&size=4252316&status=done&width=746\" alt=\"test.gif\"><br><a name=\"UKzZ5\"></a></p>\n<h1 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h1><p>在中控台系统中经常需要带条件过滤、分页、排序等的列表页面，antd提供了表格、排序、分页等，多个页面中使用会发现里面其实有很多重复的代码，自己捣腾下最后有了这个组件，<br><a name=\"pfCYQ\"></a></p>\n<h1 id=\"使用说明\"><a href=\"#使用说明\" class=\"headerlink\" title=\"使用说明\"></a>使用说明</h1><p><a name=\"7qJ13\"></a></p>\n<h2 id=\"列表使用\"><a href=\"#列表使用\" class=\"headerlink\" title=\"列表使用\"></a>列表使用</h2><p>如图所示:<br /><img src=\"https://cdn.nlark.com/yuque/0/2019/png/173421/1558524295889-fe6fce9b-1d53-4849-898c-39a7decf52ec.png#align=left&display=inline&height=1323&name=image.png&originHeight=1985&originWidth=2000&size=270488&status=done&width=1333.3333333333333\" alt=\"image.png\"></p>\n<ol>\n<li><p>引入高阶组件pagedQuery</p>\n</li>\n<li><p>引入封装的TableList 基本上跟Antd table组件用法一致，只是初始化了许多默认参数</p>\n</li>\n<li><p>用高阶组件包裹组件，并传参</p>\n<pre class=\" language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\" spellcheck=\"true\">// type为必须参数，一般对应dva中model的effects</span>\n<span class=\"token entity\" title=\"&#123;\">&amp;#123;</span>\ntype<span class=\"token punctuation\">:</span> string<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// 类型 一般指获取数据源的action</span>\npage<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> number<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// 当前页 从1开始</span>\ndefaultPageSize<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span>number<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// 每页默认显示的条数</span>\npageSize<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> number<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// 每页显示数量</span>\nrecord<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> boolean<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// 是否记录搜索状态</span>\n<span class=\"token entity\" title=\"&#125;\">&amp;#125;</span></code></pre>\n</li>\n<li><p>请求附带的基础参数，通过<em>getQueryParams返回一个对象，用于一些特殊场景，一般为空</em></p>\n</li>\n<li><p>处理搜索按钮的点击事件，将搜索表单中的值收集并传递给onSearchData方法</p>\n</li>\n<li><p>处理重置按钮，将重置按钮的点击事件绑定来源于高阶组件给组件的onResetData</p>\n</li>\n<li><p>获取数据源并给到table<br><a name=\"AiF39\"></a></p>\n<h2 id=\"详情页面\"><a href=\"#详情页面\" class=\"headerlink\" title=\"详情页面\"></a>详情页面</h2><p>回退到列表页面有两种形式，<br />1.通过浏览器上的回退按钮<br />2.详情页面放置一个回退按钮，代码层面实现路由跳转到列表页<br />一般情况都使用第二种方式，因为如果编辑页面比较负责，可能里面有子页面，子页面又可以进入这一通过浏览器上的回退按钮需要点击N多次，再者，浏览器的回退有数量限制<br />同样，如图所示：<br /><img src=\"https://cdn.nlark.com/yuque/0/2019/png/173421/1558524894480-261376dd-c130-40e0-b993-23812add160f.png#align=left&display=inline&height=877&name=image.png&originHeight=1316&originWidth=1714&size=188537&status=done&width=1142.6666666666667\" alt=\"image.png\"></p>\n</li>\n<li><p>引入方法backRouter</p>\n</li>\n<li><p>在需要跳转路由的地方调用一下backRoute方法，并将路由传递给方法，该方法会返回之前记录的列表路由<br><a name=\"VNgB5\"></a></p>\n<h1 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h1></li>\n</ol>\n<p>实现思路，通过高阶组件实现，<a href=\"https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.tsx\">代码</a>  、  <a href=\"https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.zh-CN.md\">api文档</a>  <br />记录搜索状态，通过sessionStorage来实现，考虑到sessionStore的一个优势，关闭当前tab页就失效了 省去还得去手动清除记录状态的麻烦(比如放到localStorage)，再者 这种查询状态不需要持久记录  <br />回退方法backRouter，由于高阶组件中会在组件的componentWillUnmount方法中记录搜索状态，以location的pathname为key，以location的search为值存放，所以通过backRouter方法匹配的时候会从sessionStorage中查询，如果有则带上查询串，以此来达到记录页面状态的效果</p>\n<blockquote>\n<p>更多请参观：<a href=\"https://www.yuque.com/wetrial/front-end/\">https://www.yuque.com/wetrial/front-end/</a></p>\n</blockquote>\n","site":{"data":{"friends":[{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K","name":"react栈","introduction":"使用react、antd、dva、umi、ts等技术创建现代化web","url":"https://github.com/wetrial/wetrial-template","title":"前去观摩"},{"avatar":"https://storage.360buyimg.com/taro-static/static/images/logo.png","name":"taro多端","introduction":"一份代码生成能运行在微信小程序、H5、RN 等平台的应用","url":"https://github.com/xiexingen/taro-template","title":"前去观摩"},{"avatar":"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg","name":"Ant Design","introduction":"阿里体系，一套用于研发企业级中后台产品的企业UI组件库","url":"https://ant.design/index-cn","title":"前去观摩"},{"avatar":"https://avatars3.githubusercontent.com/u/13409222?s=200&v=4","name":"Electron","introduction":"使用 JavaScript, HTML 和 CSS 构建跨平台的桌面应用","url":"https://electronjs.org/","title":"前去观摩"},{"avatar":"https://github.com/dncNew/dncNew/raw/master/img/dnc7.png","name":".NET Core","introduction":"使用.NET开发跨端应用 桌面、Web、云、IoT、AI、App...","url":"https://github.com/dotnet/core","title":"前去观摩"},{"avatar":"https://user-images.githubusercontent.com/10379601/29446482-04f7036a-841f-11e7-9872-91d1fc2ea683.png","name":"爬虫","introduction":"使用Puppeteer构建自动化测试、SSR、爬虫等","url":"https://github.com/GoogleChrome/puppeteer","title":"前去观摩"}]}},"excerpt":"<p>DIY一个集搜索、排序、分页功能的列表组件</p>","more":"<p><a href=\"https://github.com/wetrial/wetrial-template\">源码地址</a>: <a href=\"https://github.com/wetrial/wetrial-template\">https://github.com/wetrial/wetrial-template</a><br />效果<br /><img src=\"https://cdn.nlark.com/yuque/0/2019/gif/173421/1558523693173-c0265a6e-5263-4317-bf76-99b17c86ec1c.gif#align=left&display=inline&height=513&name=test.gif&originHeight=1508&originWidth=2193&size=4252316&status=done&width=746\" alt=\"test.gif\"><br><a name=\"UKzZ5\"></a></p>\n<h1 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h1><p>在中控台系统中经常需要带条件过滤、分页、排序等的列表页面，antd提供了表格、排序、分页等，多个页面中使用会发现里面其实有很多重复的代码，自己捣腾下最后有了这个组件，<br><a name=\"pfCYQ\"></a></p>\n<h1 id=\"使用说明\"><a href=\"#使用说明\" class=\"headerlink\" title=\"使用说明\"></a>使用说明</h1><p><a name=\"7qJ13\"></a></p>\n<h2 id=\"列表使用\"><a href=\"#列表使用\" class=\"headerlink\" title=\"列表使用\"></a>列表使用</h2><p>如图所示:<br /><img src=\"https://cdn.nlark.com/yuque/0/2019/png/173421/1558524295889-fe6fce9b-1d53-4849-898c-39a7decf52ec.png#align=left&display=inline&height=1323&name=image.png&originHeight=1985&originWidth=2000&size=270488&status=done&width=1333.3333333333333\" alt=\"image.png\"></p>\n<ol>\n<li><p>引入高阶组件pagedQuery</p>\n</li>\n<li><p>引入封装的TableList 基本上跟Antd table组件用法一致，只是初始化了许多默认参数</p>\n</li>\n<li><p>用高阶组件包裹组件，并传参</p>\n<pre><code class=\"jsx\">// type为必须参数，一般对应dva中model的effects\n&#123;\ntype: string; // 类型 一般指获取数据源的action\npage?: number; // 当前页 从1开始\ndefaultPageSize?:number; // 每页默认显示的条数\npageSize?: number; // 每页显示数量\nrecord?: boolean; // 是否记录搜索状态\n&#125;</code></pre>\n</li>\n<li><p>请求附带的基础参数，通过<em>getQueryParams返回一个对象，用于一些特殊场景，一般为空</em></p>\n</li>\n<li><p>处理搜索按钮的点击事件，将搜索表单中的值收集并传递给onSearchData方法</p>\n</li>\n<li><p>处理重置按钮，将重置按钮的点击事件绑定来源于高阶组件给组件的onResetData</p>\n</li>\n<li><p>获取数据源并给到table<br><a name=\"AiF39\"></a></p>\n<h2 id=\"详情页面\"><a href=\"#详情页面\" class=\"headerlink\" title=\"详情页面\"></a>详情页面</h2><p>回退到列表页面有两种形式，<br />1.通过浏览器上的回退按钮<br />2.详情页面放置一个回退按钮，代码层面实现路由跳转到列表页<br />一般情况都使用第二种方式，因为如果编辑页面比较负责，可能里面有子页面，子页面又可以进入这一通过浏览器上的回退按钮需要点击N多次，再者，浏览器的回退有数量限制<br />同样，如图所示：<br /><img src=\"https://cdn.nlark.com/yuque/0/2019/png/173421/1558524894480-261376dd-c130-40e0-b993-23812add160f.png#align=left&display=inline&height=877&name=image.png&originHeight=1316&originWidth=1714&size=188537&status=done&width=1142.6666666666667\" alt=\"image.png\"></p>\n</li>\n<li><p>引入方法backRouter</p>\n</li>\n<li><p>在需要跳转路由的地方调用一下backRoute方法，并将路由传递给方法，该方法会返回之前记录的列表路由<br><a name=\"VNgB5\"></a></p>\n<h1 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h1></li>\n</ol>\n<p>实现思路，通过高阶组件实现，<a href=\"https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.tsx\">代码</a>  、  <a href=\"https://github.com/wetrial/wetrial/blob/master/src/components/PagedQuery/index.zh-CN.md\">api文档</a>  <br />记录搜索状态，通过sessionStorage来实现，考虑到sessionStore的一个优势，关闭当前tab页就失效了 省去还得去手动清除记录状态的麻烦(比如放到localStorage)，再者 这种查询状态不需要持久记录  <br />回退方法backRouter，由于高阶组件中会在组件的componentWillUnmount方法中记录搜索状态，以location的pathname为key，以location的search为值存放，所以通过backRouter方法匹配的时候会从sessionStorage中查询，如果有则带上查询串，以此来达到记录页面状态的效果</p>\n<blockquote>\n<p>更多请参观：<a href=\"https://www.yuque.com/wetrial/front-end/\">https://www.yuque.com/wetrial/front-end/</a></p>\n</blockquote>"},{"title":"umi文件拆分","abbrlink":41361,"date":"2018-11-11T03:35:10.000Z","_content":"\numi文件拆分\n<!-- more -->\n\n> 前言 在umi群里有群友在问umi打包后umi.js文件有1M多甚至更多，那么网站加载的时候会等待这个文件加载完成 可能需要好些时间 这个是比较难忍受的,其实umi有提供代码拆分的功能 只是文档不是很全 这里写了个片博客 谈谈怎么拆分的\n\n1. 使用命令yarn run analyze 打开分析页面，运行后会打开如图的页面\n> analyze是package.js中定义好的命令'cross-env ANALYZE=1 umi build' 可以自行添加或者查看umi文档\n\n![](http://qiniu.xxgtalk.cn/blog/images/front/reactumi-split-pre.jpg)\n如图所示，目前umi文件比较大，现在来做拆分，比如这：把@ant-design和antd这两个拆分为antdesigns文件、把react|react-dom|react-router|react-router-dom|lodash|lodash-decorators|redux-saga|re-select|dva|moment这些拆分为wendors文件\n2. 编写拆分规则 在umi.js||config.js文件的chainWebpack 中加入\n``` bash\nconfig.optimization.splitChunks({\n    chunks: 'async',\n    minSize: 30000,\n    maxSize: 0,\n    minChunks: 1,\n    maxAsyncRequests: 5,\n    maxInitialRequests: 3,\n    automaticNameDelimiter: '~',\n    name: true,\n    cacheGroups: {\n      vendors: {\n        name: 'vendors',\n        chunks: 'all',\n        test: /[\\\\/]node_modules[\\\\/](react|react-dom|react-router|react-router-dom|lodash|lodash-decorators|redux-saga|re-select|dva|moment)[\\\\/]/,\n        priority: -10,\n      },\n      antdesigns: {\n        name: 'antdesigns',\n        chunks: 'all',\n        test: /[\\\\/]node_modules[\\\\/](@ant-design|antd)[\\\\/]/,\n        priority: -11,\n      }\n    },\n  });\n```\n3. 在umi.js或者config.js 的umi-plugin-react中的chunks属性中配置配置如下\n``` bash\nchunks: ['vendors','antdesigns', 'umi']\n```\n4. 重新执行 yarn run analyze 查看拆分后的情况，如图\n![](http://qiniu.xxgtalk.cn/blog/images/front/reactumi-split-next.jpg)\n\n致次 拆分完成\n","source":"_posts/front/react/umi-split-chunks.md","raw":"---\ntitle: umi文件拆分\ncategories:\n  - React\ntags:\n  - 前端\n  - React\n  - umi\nabbrlink: 41361\ndate: 2018-11-11 11:35:10\n---\n\numi文件拆分\n<!-- more -->\n\n> 前言 在umi群里有群友在问umi打包后umi.js文件有1M多甚至更多，那么网站加载的时候会等待这个文件加载完成 可能需要好些时间 这个是比较难忍受的,其实umi有提供代码拆分的功能 只是文档不是很全 这里写了个片博客 谈谈怎么拆分的\n\n1. 使用命令yarn run analyze 打开分析页面，运行后会打开如图的页面\n> analyze是package.js中定义好的命令'cross-env ANALYZE=1 umi build' 可以自行添加或者查看umi文档\n\n![](http://qiniu.xxgtalk.cn/blog/images/front/reactumi-split-pre.jpg)\n如图所示，目前umi文件比较大，现在来做拆分，比如这：把@ant-design和antd这两个拆分为antdesigns文件、把react|react-dom|react-router|react-router-dom|lodash|lodash-decorators|redux-saga|re-select|dva|moment这些拆分为wendors文件\n2. 编写拆分规则 在umi.js||config.js文件的chainWebpack 中加入\n``` bash\nconfig.optimization.splitChunks({\n    chunks: 'async',\n    minSize: 30000,\n    maxSize: 0,\n    minChunks: 1,\n    maxAsyncRequests: 5,\n    maxInitialRequests: 3,\n    automaticNameDelimiter: '~',\n    name: true,\n    cacheGroups: {\n      vendors: {\n        name: 'vendors',\n        chunks: 'all',\n        test: /[\\\\/]node_modules[\\\\/](react|react-dom|react-router|react-router-dom|lodash|lodash-decorators|redux-saga|re-select|dva|moment)[\\\\/]/,\n        priority: -10,\n      },\n      antdesigns: {\n        name: 'antdesigns',\n        chunks: 'all',\n        test: /[\\\\/]node_modules[\\\\/](@ant-design|antd)[\\\\/]/,\n        priority: -11,\n      }\n    },\n  });\n```\n3. 在umi.js或者config.js 的umi-plugin-react中的chunks属性中配置配置如下\n``` bash\nchunks: ['vendors','antdesigns', 'umi']\n```\n4. 重新执行 yarn run analyze 查看拆分后的情况，如图\n![](http://qiniu.xxgtalk.cn/blog/images/front/reactumi-split-next.jpg)\n\n致次 拆分完成\n","slug":"front/react/umi-split-chunks","published":1,"updated":"2020-12-29T01:15:00.492Z","_id":"ckj9at6xj0051d8v83n8l5658","comments":1,"layout":"post","photos":[],"link":""}],"PostAsset":[],"PostCategory":[{"post_id":"ckj9at6ua000ad8v8h7wb96j2","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6uk000id8v86glo567o"},{"post_id":"ckj9at6u00003d8v865t334v9","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6un000nd8v8h8hr1p51"},{"post_id":"ckj9at6ub000bd8v85gct32dr","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6up000qd8v80grs79dw"},{"post_id":"ckj9at6ug000fd8v8b2yt2quq","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6uq000td8v8coh28d3p"},{"post_id":"ckj9at6u30005d8v8b2o89o7h","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6us000wd8v8hekw9iw6"},{"post_id":"ckj9at6ui000hd8v87a602v32","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6uu000zd8v8hx4f5eev"},{"post_id":"ckj9at6um000md8v81uj64dh9","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6uv0012d8v82jtn3ze7"},{"post_id":"ckj9at6u80009d8v831hq2lg5","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6ux0015d8v8drd4e2da"},{"post_id":"ckj9at6uo000pd8v804y310v1","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6uy0018d8v8ay1e83su"},{"post_id":"ckj9at6up000sd8v88g0g7w0x","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6v0001dd8v81rc6bx25"},{"post_id":"ckj9at6ur000vd8v8ducgh22t","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6v1001gd8v8e3jubzad"},{"post_id":"ckj9at6ut000yd8v85fhl9cwq","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6v8001kd8v84flseap5"},{"post_id":"ckj9at6uu0011d8v83k8gh67t","category_id":"ckj9at6u50006d8v8gbxw6eac","_id":"ckj9at6va001nd8v84d6s8r0w"},{"post_id":"ckj9at6uw0014d8v887r4f1j4","category_id":"ckj9at6uy0019d8v82l2zeaxy","_id":"ckj9at6vc001pd8v8a0orca97"},{"post_id":"ckj9at6ux0017d8v80b5a7tta","category_id":"ckj9at6v3001id8v8hnc91xex","_id":"ckj9at6vh001vd8v8aliidl3f"},{"post_id":"ckj9at6uz001cd8v8167kgn60","category_id":"ckj9at6vd001qd8v8h64v46a4","_id":"ckj9at6vl0021d8v88xdthv7i"},{"post_id":"ckj9at6v0001fd8v8ggvwal3q","category_id":"ckj9at6vh001wd8v8b444gjyw","_id":"ckj9at6vp0028d8v8ewke95pa"},{"post_id":"ckj9at6v2001hd8v84vf44oyx","category_id":"ckj9at6vh001wd8v8b444gjyw","_id":"ckj9at6vs002dd8v87ul1gi0y"},{"post_id":"ckj9at6vr002cd8v8buhxcriw","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6vx002ld8v872yqfu65"},{"post_id":"ckj9at6v9001md8v8hugj3m7x","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6vz002qd8v8gext0t8x"},{"post_id":"ckj9at6vt002ed8v8ahzna17f","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6w1002td8v830fg33yc"},{"post_id":"ckj9at6vv002id8v8ea24bfna","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6w4002yd8v83vdnaor1"},{"post_id":"ckj9at6vb001od8v83wgpfs2h","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6w80031d8v82alybmh5"},{"post_id":"ckj9at6vw002kd8v8dc4j5ijg","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6wc0036d8v86tv8fcpg"},{"post_id":"ckj9at6ve001sd8v80u7y5o92","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6we0039d8v80psb9x0c"},{"post_id":"ckj9at6vg001ud8v8den3e0ty","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6wg003ed8v87zxi4lqt"},{"post_id":"ckj9at6vi001yd8v88li04za3","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6wh003hd8v8g65ed03m"},{"post_id":"ckj9at6vj0020d8v85fl216k7","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6wl003nd8v87vptdswi"},{"post_id":"ckj9at6vl0024d8v85341e2sq","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6wp003td8v87njv07xj"},{"post_id":"ckj9at6vn0026d8v80isa19xr","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6wt003zd8v8e8ceddbo"},{"post_id":"ckj9at6vq002ad8v8c1rg3oji","category_id":"ckj9at6vp0027d8v8ab7lhqy4","_id":"ckj9at6ww0044d8v872it9hjq"},{"post_id":"ckj9at6wu0042d8v8et4g9svi","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6x30049d8v8gtkk037l"},{"post_id":"ckj9at6vy002pd8v8056vc2r4","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6x6004dd8v83302hotp"},{"post_id":"ckj9at6wv0043d8v8hzgocuxh","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6x8004gd8v81emy3azj"},{"post_id":"ckj9at6x00047d8v8at9v0xvz","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xa004ld8v80mp7f5rc"},{"post_id":"ckj9at6w0002sd8v8cdor4uvb","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xc004od8v84q1fg6u3"},{"post_id":"ckj9at6x20048d8v8ciw7g9or","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xe004sd8v89l7b4g51"},{"post_id":"ckj9at6x5004cd8v8elcv21bu","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xg004vd8v83nrf9nfo"},{"post_id":"ckj9at6w3002xd8v81kb4g7tq","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xj004zd8v84pwhgxud"},{"post_id":"ckj9at6x7004fd8v89vqe5q4e","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xl0052d8v81nsn5x73"},{"post_id":"ckj9at6w70030d8v8fwbr6lqf","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xm0055d8v886915w7d"},{"post_id":"ckj9at6wa0035d8v89z3r3gt9","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xn0057d8v8bhpu21zw"},{"post_id":"ckj9at6wd0038d8v8gul7d8ww","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xq005ad8v82wel96ww"},{"post_id":"ckj9at6we003dd8v8edgr5z2c","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xq005dd8v816d7aq1n"},{"post_id":"ckj9at6wg003fd8v8ecul5a5u","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xs005hd8v88vikf6gd"},{"post_id":"ckj9at6wi003kd8v82mum7hof","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xt005kd8v85v3u82i4"},{"post_id":"ckj9at6wk003ld8v80v5jdqdc","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xu005od8v83oifen1p"},{"post_id":"ckj9at6wm003qd8v8aipkbt7z","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6xv005sd8v8babu8tg0"},{"post_id":"ckj9at6wo003rd8v88j598xc2","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6y0005wd8v86usjer78"},{"post_id":"ckj9at6wr003wd8v85nble9p4","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6y40060d8v83xr97dxj"},{"post_id":"ckj9at6ws003xd8v8h9v964zi","category_id":"ckj9at6wt003yd8v8dq083k7a","_id":"ckj9at6y40063d8v87fcbczgn"},{"post_id":"ckj9at6x9004kd8v81zncbmse","category_id":"ckj9at6y3005zd8v8284c24qu","_id":"ckj9at6y60067d8v84mui7vyp"},{"post_id":"ckj9at6xa004nd8v8caegfucl","category_id":"ckj9at6y50064d8v8bgef8grs","_id":"ckj9at6y7006cd8v80qsh6ew5"},{"post_id":"ckj9at6xd004rd8v84gbi1p31","category_id":"ckj9at6y3005zd8v8284c24qu","_id":"ckj9at6y8006gd8v8989pccqy"},{"post_id":"ckj9at6xf004ud8v867n72hie","category_id":"ckj9at6y3005zd8v8284c24qu","_id":"ckj9at6y9006kd8v83tjfgwes"},{"post_id":"ckj9at6xi004yd8v818uh2t4i","category_id":"ckj9at6y3005zd8v8284c24qu","_id":"ckj9at6ya006nd8v8fzqv62f9"},{"post_id":"ckj9at6xj0051d8v83n8l5658","category_id":"ckj9at6y3005zd8v8284c24qu","_id":"ckj9at6yb006qd8v84uacf0dj"}],"PostTag":[{"post_id":"ckj9at6ua000ad8v8h7wb96j2","tag_id":"ckj9at6u70007d8v87rrz4koz","_id":"ckj9at6ug000ed8v8a6d65o58"},{"post_id":"ckj9at6u00003d8v865t334v9","tag_id":"ckj9at6u70007d8v87rrz4koz","_id":"ckj9at6ui000gd8v81q8m2xoc"},{"post_id":"ckj9at6ub000bd8v85gct32dr","tag_id":"ckj9at6u70007d8v87rrz4koz","_id":"ckj9at6um000ld8v8c9z54mw6"},{"post_id":"ckj9at6ug000fd8v8b2yt2quq","tag_id":"ckj9at6u70007d8v87rrz4koz","_id":"ckj9at6uo000od8v89ay0cdwu"},{"post_id":"ckj9at6u30005d8v8b2o89o7h","tag_id":"ckj9at6u70007d8v87rrz4koz","_id":"ckj9at6up000rd8v8ehmx8265"},{"post_id":"ckj9at6ui000hd8v87a602v32","tag_id":"ckj9at6u70007d8v87rrz4koz","_id":"ckj9at6ur000ud8v84uwnb2zi"},{"post_id":"ckj9at6u80009d8v831hq2lg5","tag_id":"ckj9at6u70007d8v87rrz4koz","_id":"ckj9at6ut000xd8v88u1pc2kp"},{"post_id":"ckj9at6uo000pd8v804y310v1","tag_id":"ckj9at6u70007d8v87rrz4koz","_id":"ckj9at6uu0010d8v83yyjclj8"},{"post_id":"ckj9at6up000sd8v88g0g7w0x","tag_id":"ckj9at6u70007d8v87rrz4koz","_id":"ckj9at6uw0013d8v81y4i9suz"},{"post_id":"ckj9at6ur000vd8v8ducgh22t","tag_id":"ckj9at6u70007d8v87rrz4koz","_id":"ckj9at6ux0016d8v8hi9q2el8"},{"post_id":"ckj9at6ut000yd8v85fhl9cwq","tag_id":"ckj9at6u70007d8v87rrz4koz","_id":"ckj9at6uz001bd8v8ehwnfcp8"},{"post_id":"ckj9at6uu0011d8v83k8gh67t","tag_id":"ckj9at6u70007d8v87rrz4koz","_id":"ckj9at6v0001ed8v820j8cogg"},{"post_id":"ckj9at6uw0014d8v887r4f1j4","tag_id":"ckj9at6uz001ad8v8b56b1mlc","_id":"ckj9at6v8001ld8v89x89gqxh"},{"post_id":"ckj9at6ux0017d8v80b5a7tta","tag_id":"ckj9at6v3001jd8v896recger","_id":"ckj9at6vf001td8v8g16o915n"},{"post_id":"ckj9at6uz001cd8v8167kgn60","tag_id":"ckj9at6vd001rd8v87r4rcikc","_id":"ckj9at6vj001zd8v8586vggxr"},{"post_id":"ckj9at6v0001fd8v8ggvwal3q","tag_id":"ckj9at6vi001xd8v81geg927o","_id":"ckj9at6vn0025d8v8av23at6j"},{"post_id":"ckj9at6v2001hd8v84vf44oyx","tag_id":"ckj9at6vi001xd8v81geg927o","_id":"ckj9at6vr002bd8v8dxfc8i7u"},{"post_id":"ckj9at6vr002cd8v8buhxcriw","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6vv002hd8v8cdtl7277"},{"post_id":"ckj9at6v9001md8v8hugj3m7x","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6vw002jd8v83wwue12a"},{"post_id":"ckj9at6vt002ed8v8ahzna17f","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6vy002od8v811yt7w7b"},{"post_id":"ckj9at6vv002id8v8ea24bfna","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6w0002rd8v83ed5a9q6"},{"post_id":"ckj9at6vb001od8v83wgpfs2h","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6w3002wd8v802c74zpd"},{"post_id":"ckj9at6vw002kd8v8dc4j5ijg","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6w6002zd8v8c7m90632"},{"post_id":"ckj9at6ve001sd8v80u7y5o92","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6wa0034d8v86atxdk8i"},{"post_id":"ckj9at6vg001ud8v8den3e0ty","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6wd0037d8v88dyzdhra"},{"post_id":"ckj9at6vi001yd8v88li04za3","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6we003cd8v8fntd5zaw"},{"post_id":"ckj9at6vj0020d8v85fl216k7","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6wi003jd8v8gy0j90qs"},{"post_id":"ckj9at6vl0024d8v85341e2sq","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6wm003pd8v8g3nmfiw3"},{"post_id":"ckj9at6vn0026d8v80isa19xr","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6wr003vd8v8ahg6g763"},{"post_id":"ckj9at6vq002ad8v8c1rg3oji","tag_id":"ckj9at6vp0029d8v8g44r1e8e","_id":"ckj9at6wu0041d8v8h3y408az"},{"post_id":"ckj9at6vy002pd8v8056vc2r4","tag_id":"ckj9at6wt0040d8v81kjs1yfi","_id":"ckj9at6x6004ed8v889ji1moj"},{"post_id":"ckj9at6vy002pd8v8056vc2r4","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6x8004id8v8cv1g221b"},{"post_id":"ckj9at6w0002sd8v8cdor4uvb","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6xa004md8v83xj7990l"},{"post_id":"ckj9at6w3002xd8v81kb4g7tq","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6xf004td8v88ejf2gag"},{"post_id":"ckj9at6w70030d8v8fwbr6lqf","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6xj0050d8v860socvos"},{"post_id":"ckj9at6wa0035d8v89z3r3gt9","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6xm0056d8v8gyis3wq0"},{"post_id":"ckj9at6wd0038d8v8gul7d8ww","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6xq005bd8v89t4kfgtc"},{"post_id":"ckj9at6we003dd8v8edgr5z2c","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6xs005fd8v84re7feuu"},{"post_id":"ckj9at6wg003fd8v8ecul5a5u","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6xu005md8v8gmf27id7"},{"post_id":"ckj9at6wg003fd8v8ecul5a5u","tag_id":"ckj9at6xt005id8v800q62lti","_id":"ckj9at6xv005pd8v82tqjf25p"},{"post_id":"ckj9at6wi003kd8v82mum7hof","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6xx005ud8v8a6q5cwdo"},{"post_id":"ckj9at6wi003kd8v82mum7hof","tag_id":"ckj9at6xt005id8v800q62lti","_id":"ckj9at6y1005xd8v83vatg5ud"},{"post_id":"ckj9at6wk003ld8v80v5jdqdc","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6y40062d8v81ig57ktw"},{"post_id":"ckj9at6wk003ld8v80v5jdqdc","tag_id":"ckj9at6xt005id8v800q62lti","_id":"ckj9at6y50065d8v8e6rh2943"},{"post_id":"ckj9at6wm003qd8v8aipkbt7z","tag_id":"ckj9at6y40061d8v865j7b9pm","_id":"ckj9at6y7006ad8v808yd0d0e"},{"post_id":"ckj9at6wm003qd8v8aipkbt7z","tag_id":"ckj9at6y50066d8v894e714k6","_id":"ckj9at6y8006dd8v8efvnhkxi"},{"post_id":"ckj9at6wo003rd8v88j598xc2","tag_id":"ckj9at6y40061d8v865j7b9pm","_id":"ckj9at6y9006id8v8drft0fez"},{"post_id":"ckj9at6wo003rd8v88j598xc2","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6ya006ld8v86e599xuu"},{"post_id":"ckj9at6wr003wd8v85nble9p4","tag_id":"ckj9at6y40061d8v865j7b9pm","_id":"ckj9at6yb006pd8v88vie9a49"},{"post_id":"ckj9at6wr003wd8v85nble9p4","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6yb006rd8v8cmpbeon8"},{"post_id":"ckj9at6ws003xd8v8h9v964zi","tag_id":"ckj9at6y40061d8v865j7b9pm","_id":"ckj9at6yc006ud8v8esppauv7"},{"post_id":"ckj9at6ws003xd8v8h9v964zi","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6yc006vd8v8aj1bfpzk"},{"post_id":"ckj9at6wu0042d8v8et4g9svi","tag_id":"ckj9at6y40061d8v865j7b9pm","_id":"ckj9at6yd006yd8v83y695yzc"},{"post_id":"ckj9at6wu0042d8v8et4g9svi","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6yd006zd8v883ju1ek9"},{"post_id":"ckj9at6wv0043d8v8hzgocuxh","tag_id":"ckj9at6y40061d8v865j7b9pm","_id":"ckj9at6ye0072d8v8ck97fb04"},{"post_id":"ckj9at6wv0043d8v8hzgocuxh","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6ye0073d8v86yhxapa6"},{"post_id":"ckj9at6x00047d8v8at9v0xvz","tag_id":"ckj9at6y40061d8v865j7b9pm","_id":"ckj9at6ye0075d8v863z77o17"},{"post_id":"ckj9at6x00047d8v8at9v0xvz","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6yf0076d8v8b7w980q6"},{"post_id":"ckj9at6x20048d8v8ciw7g9or","tag_id":"ckj9at6y40061d8v865j7b9pm","_id":"ckj9at6yf0078d8v8cnbhcrzd"},{"post_id":"ckj9at6x20048d8v8ciw7g9or","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6yf0079d8v876qug7i2"},{"post_id":"ckj9at6x5004cd8v8elcv21bu","tag_id":"ckj9at6y40061d8v865j7b9pm","_id":"ckj9at6yg007bd8v89het8ygf"},{"post_id":"ckj9at6x5004cd8v8elcv21bu","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6yg007cd8v8cwj4eh80"},{"post_id":"ckj9at6x7004fd8v89vqe5q4e","tag_id":"ckj9at6y40061d8v865j7b9pm","_id":"ckj9at6yh007ed8v81ahbdq2a"},{"post_id":"ckj9at6x7004fd8v89vqe5q4e","tag_id":"ckj9at6wx0046d8v857al56t9","_id":"ckj9at6yh007fd8v8dc342q5u"},{"post_id":"ckj9at6x9004kd8v81zncbmse","tag_id":"ckj9at6yg007dd8v8bnjbgppu","_id":"ckj9at6yi007id8v8c42500xs"},{"post_id":"ckj9at6x9004kd8v81zncbmse","tag_id":"ckj9at6yh007gd8v8cpwm8jez","_id":"ckj9at6yi007jd8v81cny9dpe"},{"post_id":"ckj9at6xa004nd8v8caegfucl","tag_id":"ckj9at6yh007hd8v8beol1ko3","_id":"ckj9at6yi007ld8v8hnji6x0e"},{"post_id":"ckj9at6xd004rd8v84gbi1p31","tag_id":"ckj9at6yg007dd8v8bnjbgppu","_id":"ckj9at6yj007od8v85jd6cozz"},{"post_id":"ckj9at6xd004rd8v84gbi1p31","tag_id":"ckj9at6yh007gd8v8cpwm8jez","_id":"ckj9at6yj007pd8v81tmxazl8"},{"post_id":"ckj9at6xf004ud8v867n72hie","tag_id":"ckj9at6yg007dd8v8bnjbgppu","_id":"ckj9at6yl007td8v83geucfx3"},{"post_id":"ckj9at6xf004ud8v867n72hie","tag_id":"ckj9at6yh007gd8v8cpwm8jez","_id":"ckj9at6yl007ud8v8ckun1p0h"},{"post_id":"ckj9at6xf004ud8v867n72hie","tag_id":"ckj9at6yk007rd8v86mhfc94h","_id":"ckj9at6yl007wd8v80yihd6df"},{"post_id":"ckj9at6xi004yd8v818uh2t4i","tag_id":"ckj9at6yg007dd8v8bnjbgppu","_id":"ckj9at6ym007yd8v89kcu8p0l"},{"post_id":"ckj9at6xi004yd8v818uh2t4i","tag_id":"ckj9at6yh007gd8v8cpwm8jez","_id":"ckj9at6ym007zd8v821digka6"},{"post_id":"ckj9at6xj0051d8v83n8l5658","tag_id":"ckj9at6yg007dd8v8bnjbgppu","_id":"ckj9at6yn0082d8v88d81gmhv"},{"post_id":"ckj9at6xj0051d8v83n8l5658","tag_id":"ckj9at6yh007gd8v8cpwm8jez","_id":"ckj9at6yn0083d8v88t8f2dik"},{"post_id":"ckj9at6xj0051d8v83n8l5658","tag_id":"ckj9at6yk007rd8v86mhfc94h","_id":"ckj9at6yn0084d8v8hjxp7kom"}],"Tag":[{"name":"Docker","_id":"ckj9at6u70007d8v87rrz4koz"},{"name":"Flutter","_id":"ckj9at6uz001ad8v8b56b1mlc"},{"name":"Nginx","_id":"ckj9at6v3001jd8v896recger"},{"name":"其他","_id":"ckj9at6vd001rd8v87r4rcikc"},{"name":"redis","_id":"ckj9at6vi001xd8v81geg927o"},{"name":"工具","_id":"ckj9at6vp0029d8v8g44r1e8e"},{"name":"Consul","_id":"ckj9at6wt0040d8v81kjs1yfi"},{"name":".NetCore","_id":"ckj9at6wx0046d8v857al56t9"},{"name":"IdentityServer4","_id":"ckj9at6xt005id8v800q62lti"},{"name":"Signalr","_id":"ckj9at6y40061d8v865j7b9pm"},{"name":"NetCore","_id":"ckj9at6y50066d8v894e714k6"},{"name":"前端","_id":"ckj9at6yg007dd8v8bnjbgppu"},{"name":"React","_id":"ckj9at6yh007gd8v8cpwm8jez"},{"name":"前端-其他","_id":"ckj9at6yh007hd8v8beol1ko3"},{"name":"umi","_id":"ckj9at6yk007rd8v86mhfc94h"}]}}