(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{315:function(t,s,n){t.exports=n.p+"assets/img/0a01.fc5934e6.png"},337:function(t,s,n){"use strict";n.r(s);var a=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("p",[t._v("Docker制作WebApi&MySql 直接上图\n")]),a("p",[a("img",{attrs:{src:n(315),alt:""}})]),a("ol",[a("li",[t._v("docker文件"),a("pre",{pre:!0,attrs:{class:"language-docker"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" microsoft/aspnetcore"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("build as build"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("env\n"),a("span",{attrs:{class:"token keyword"}},[t._v("WORKDIR")]),t._v(" /code\n"),a("span",{attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" *.csproj ./\n"),a("span",{attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" dotnet restore\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" . ./\n"),a("span",{attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" dotnet publish "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("c Release "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("o out\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" microsoft/aspnetcore\n"),a("span",{attrs:{class:"token keyword"}},[t._v("WORKDIR")]),t._v(" /app\n"),a("span",{attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("from=build"),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("env /code/out ./\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("EXPOSE")]),t._v(" 50000\n"),a("span",{attrs:{class:"token keyword"}},[t._v("ENTRYPOINT")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"dotnet"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('"WebApiDocker.dll"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("li",[t._v("编译docker文件"),a("pre",{pre:!0,attrs:{class:"language-docker"}},[a("code",[t._v("docker build "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("t  xxg/aspnetcore"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("1.0 .\n")])])]),a("li",[t._v("使用该镜像启动一个容器"),a("br"),t._v("\na. docker run -d -p 5000:80  --name api01 --link mysql01:db xxg/aspnetcore:1.0"),a("br"),t._v("\nb. 使用bridge形式"),a("br"),t._v("\ndocker network create -d bridge mybridge\t\t//创建一个网络"),a("br"),t._v("\ndocker run -d -p 5000:5000 --net mybridge --name api1 xxg/aspnetcore:1.0"),a("br"),t._v("\ndocker network connect mysql01  mybridge\t//表示将mysql01跟mybridge网络连接起来\n"),a("blockquote",[a("p",[t._v("--link mysql01:db\t\t--表示将mysql01取个别名db并连接到当前容器"),a("br"),t._v("\n--net mybridge\t\t--表示使用指定网络")])])])])])}],e=n(1),o=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},a,!1,null,null,null);o.options.__file="05docker-webapi-mysql.md";s.default=o.exports}}]);