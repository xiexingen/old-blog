(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{372:function(t,r,n){"use strict";n.r(r);var e=n(1),i=Object(e.a)({},function(){var t=this.$createElement,r=this._self._c||t;return r("div",{staticClass:"content"},[r("p",[this._v("Centos7.x 安装gitlab-runner\n")]),this._m(0),r("ol",[r("li",[this._v("安装docker、docker-compose"),r("router-link",{attrs:{to:"./01docker-config.html"}},[this._v("参考01")])],1),r("li",[this._v("gitlab-runner")])]),this._m(1),this._m(2)])},[function(){var t=this.$createElement,r=this._self._c||t;return r("blockquote",[r("p",[this._v("说明：开始尝试过在docker中安装gitlab-runner注册gitlab-runner啥的都没问题 但是gitlab-ci.yml文件中使用docker的时候提示xxxx daemon文件问题 折腾了好几天没能解决(大概的意思就是在容器内部使用使用docker访问不了外面的啥东西最后放弃了，该用在centos中直接安装gitlab-runner形式)"),r("br"),this._v("\n参考地址: http://www.cnblogs.com/xishuai/p/ubuntu-gitlab-ci-docker-aspnet-core-part-2.html"),r("br"),this._v("\n【前置条件】 系统安装了docker、docker-compose、git、dotnetcore"),r("br"),this._v("\ndocker 这个必须要"),r("br"),this._v("\ngit 必须，因为需要通过git获取代码"),r("br"),this._v("\ndocker-compose根据情况 因为我的ci中使用了docker-compose所以要"),r("br"),this._v("\ndotnetcore 因为我是微软的铁杆粉丝")])])},function(){var t=this,r=t.$createElement,n=t._self._c||r;return n("ul",[n("li",[t._v("安装命令"),n("br"),t._v("\nsudo wget -O /usr/local/bin/gitlab-runner https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-ci-multi-runner-linux-amd64")]),n("li",[t._v("给予其权限"),n("br"),t._v("\nsudo chmod +x /usr/local/bin/gitlab-runner")]),n("li",[t._v("注册"),n("br"),t._v("\nsudo gitlab-runner register"),n("br"),t._v("\n根据提示输入gitlab地址、token、描述信息、tag、[true|false]、[true|false]、shell")]),n("li",[t._v("添加一个用于跑 GitLab Runner 的gitlab-runner用户"),n("br"),t._v("\nsudo useradd --comment 'GitLab Runner' --create-home gitlab-runner --shell /bin/bash")]),n("li",[t._v("指定 GitLab Runner 执行的用户和工作目录"),n("br"),t._v("\nsudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner")]),n("li",[t._v("启动gitlab-runner"),n("br"),t._v("\nsudo gitlab-runner start")]),n("li",[t._v("把 GitLab Runner 服务器中的gitlab-runner账户，添加到docker用户组中"),n("br"),t._v("\nsudo usermod -aG docker gitlab-runner")]),n("li",[t._v("在 GitLab Runner 服务器中，切换到gitlab-runner用户下，配置 SSH"),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("su gitlab-runner\nssh-keygen -t rsa -P ''\nssh-copy-id root@你的ip地址\n")])])])])},function(){var t=this.$createElement,r=this._self._c||t;return r("ol",{attrs:{start:"3"}},[r("li",[this._v("安装git"),r("br"),this._v("\ncd ~"),r("br"),this._v("\nyum -y install git")])])}],!1,null,null,null);i.options.__file="07gitlab01-runner.md";r.default=i.exports}}]);